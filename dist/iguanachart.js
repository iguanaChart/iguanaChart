!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=186)}([function(t,e,i){var r=i(5),n=i(23).f,a=i(16),s=i(24),o=i(104),h=i(135),l=i(66);t.exports=function(t,e){var i,c,u,d,p,f=t.target,g=t.global,v=t.stat;if(i=g?r:v?r[f]||o(f,{}):(r[f]||{}).prototype)for(c in e){if(d=e[c],u=t.noTargetGet?(p=n(i,c))&&p.value:i[c],!l(g?c:f+(v?".":"#")+c,t.forced)&&void 0!==u){if(typeof d==typeof u)continue;h(d,u)}(t.sham||u&&u.sham)&&a(d,"sham",!0),s(i,c,d,t)}}},function(t,e,i){var r=i(8);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=!1},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,i){(function(e){var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,i(190))},function(t,e,i){var r=i(1),n=i(111),a=i(10),s=i(18),o=i(47),h=i(82),l=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,i){var c,u,d,p,f,g,v,m=i&&i.that,y=!(!i||!i.AS_ENTRIES),C=!(!i||!i.IS_ITERATOR),x=!(!i||!i.INTERRUPTED),T=s(e,m,1+y+x),S=function(t){return c&&h(c),new l(!0,t)},w=function(t){return y?(r(t),x?T(t[0],t[1],S):T(t[0],t[1])):x?T(t,S):T(t)};if(C)c=t;else{if("function"!=typeof(u=o(t)))throw TypeError("Target is not iterable");if(n(u)){for(d=0,p=a(t.length);p>d;d++)if((f=w(t[d]))&&f instanceof l)return f;return new l(!1)}c=u.call(t)}for(g=c.next;!(v=g.call(c)).done;){try{f=w(v.value)}catch(t){throw h(c),t}if("object"==typeof f&&f&&f instanceof l)return f}return new l(!1)}},function(t,e,i){var r=i(5),n=i(80),a=i(15),s=i(63),o=i(109),h=i(137),l=n("wks"),c=r.Symbol,u=h?c:c&&c.withoutSetter||s;t.exports=function(t){return a(l,t)||(o&&a(c,t)?l[t]=c[t]:l[t]=u("Symbol."+t)),l[t]}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var r=i(2);t.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e,i){var r=i(26),n=Math.min;t.exports=function(t){return t>0?n(r(t),9007199254740991):0}},function(t,e,i){"use strict";var r,n=i(127),a=i(9),s=i(5),o=i(8),h=i(15),l=i(68),c=i(16),u=i(24),d=i(13).f,p=i(25),f=i(46),g=i(7),v=i(63),m=s.Int8Array,y=m&&m.prototype,C=s.Uint8ClampedArray,x=C&&C.prototype,T=m&&p(m),S=y&&p(y),w=Object.prototype,A=w.isPrototypeOf,b=g("toStringTag"),k=v("TYPED_ARRAY_TAG"),_=n&&!!f&&"Opera"!==l(s.opera),P=!1,I={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},E=function(t){if(!o(t))return!1;var e=l(t);return h(I,e)||h(D,e)};for(r in I)s[r]||(_=!1);if((!_||"function"!=typeof T||T===Function.prototype)&&(T=function(){throw TypeError("Incorrect invocation")},_))for(r in I)s[r]&&f(s[r],T);if((!_||!S||S===w)&&(S=T.prototype,_))for(r in I)s[r]&&f(s[r].prototype,S);if(_&&p(x)!==S&&f(x,S),a&&!h(S,b))for(r in P=!0,d(S,b,{get:function(){return o(this)?this[k]:void 0}}),I)s[r]&&c(s[r],k,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:_,TYPED_ARRAY_TAG:P&&k,aTypedArray:function(t){if(E(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(f){if(A.call(T,t))return t}else for(var e in I)if(h(I,r)){var i=s[e];if(i&&(t===i||A.call(i,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,i){if(a){if(i)for(var r in I){var n=s[r];n&&h(n.prototype,t)&&delete n.prototype[t]}S[t]&&!i||u(S,t,i?e:_&&y[t]||e)}},exportTypedArrayStaticMethod:function(t,e,i){var r,n;if(a){if(f){if(i)for(r in I)(n=s[r])&&h(n,t)&&delete n[t];if(T[t]&&!i)return;try{return u(T,t,i?e:_&&m[t]||e)}catch(t){}}for(r in I)!(n=s[r])||n[t]&&!i||u(n,t,e)}},isView:function(t){if(!o(t))return!1;var e=l(t);return"DataView"===e||h(I,e)||h(D,e)},isTypedArray:E,TypedArray:T,TypedArrayPrototype:S}},function(t,e,i){var r=i(22);t.exports=function(t){return Object(r(t))}},function(t,e,i){var r=i(9),n=i(133),a=i(1),s=i(33),o=Object.defineProperty;e.f=r?o:function(t,e,i){if(a(t),e=s(e,!0),a(i),n)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var r=i(36),n=i(5),a=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?a(r[t])||a(n[t]):r[t]&&r[t][e]||n[t]&&n[t][e]}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var r=i(9),n=i(13),a=i(38);t.exports=r?function(t,e,i){return n.f(t,e,a(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var r,n,a,s=i(134),o=i(5),h=i(8),l=i(16),c=i(15),u=i(78),d=i(79),p=i(64),f=o.WeakMap;if(s){var g=u.state||(u.state=new f),v=g.get,m=g.has,y=g.set;r=function(t,e){return e.facade=t,y.call(g,t,e),e},n=function(t){return v.call(g,t)||{}},a=function(t){return m.call(g,t)}}else{var C=d("state");p[C]=!0,r=function(t,e){return e.facade=t,l(t,C,e),e},n=function(t){return c(t,C)?t[C]:{}},a=function(t){return c(t,C)}}t.exports={set:r,get:n,has:a,enforce:function(t){return a(t)?n(t):r(t,{})},getterFor:function(t){return function(e){var i;if(!h(e)||(i=n(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}}},function(t,e,i){var r=i(4);t.exports=function(t,e,i){if(r(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)}}return function(){return t.apply(e,arguments)}}},function(t,e,i){var r=i(36),n=i(15),a=i(140),s=i(13).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});n(e,t)||s(e,t,{value:a.f(t)})}},function(t,e,i){var r=i(18),n=i(62),a=i(12),s=i(10),o=i(57),h=[].push,l=function(t){var e=1==t,i=2==t,l=3==t,c=4==t,u=6==t,d=7==t,p=5==t||u;return function(f,g,v,m){for(var y,C,x=a(f),T=n(x),S=r(g,v,3),w=s(T.length),A=0,b=m||o,k=e?b(f,w):i||d?b(f,0):void 0;w>A;A++)if((p||A in T)&&(C=S(y=T[A],A,x),t))if(e)k[A]=C;else if(C)switch(t){case 3:return!0;case 5:return y;case 6:return A;case 2:h.call(k,y)}else switch(t){case 4:return!1;case 7:h.call(k,y)}return u?-1:l||c?c:k}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},function(t,e,i){var r=i(1),n=i(4),a=i(7)("species");t.exports=function(t,e){var i,s=r(t).constructor;return void 0===s||null==(i=r(s)[a])?e:n(i)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,i){var r=i(9),n=i(77),a=i(38),s=i(29),o=i(33),h=i(15),l=i(133),c=Object.getOwnPropertyDescriptor;e.f=r?c:function(t,e){if(t=s(t),e=o(e,!0),l)try{return c(t,e)}catch(t){}if(h(t,e))return a(!n.f.call(t,e),t[e])}},function(t,e,i){var r=i(5),n=i(16),a=i(15),s=i(104),o=i(105),h=i(17),l=h.get,c=h.enforce,u=String(String).split("String");(t.exports=function(t,e,i,o){var h,l=!!o&&!!o.unsafe,d=!!o&&!!o.enumerable,p=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||a(i,"name")||n(i,"name",e),(h=c(i)).source||(h.source=u.join("string"==typeof e?e:""))),t!==r?(l?!p&&t[e]&&(d=!0):delete t[e],d?t[e]=i:n(t,e,i)):d?t[e]=i:s(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||o(this)}))},function(t,e,i){var r=i(15),n=i(12),a=i(79),s=i(110),o=a("IE_PROTO"),h=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=n(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?h:null}},function(t,e){var i=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:i)(t)}},function(t,e,i){var r,n=i(1),a=i(81),s=i(107),o=i(64),h=i(138),l=i(103),c=i(79),u=c("IE_PROTO"),d=function(){},p=function(t){return"<script>"+t+"<\/script>"},f=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;f=r?function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e}(r):((e=l("iframe")).style.display="none",h.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var i=s.length;i--;)delete f.prototype[s[i]];return f()};o[u]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(d.prototype=n(t),i=new d,d.prototype=null,i[u]=t):i=f(),void 0===e?i:a(i,e)}},function(t,e,i){var r=i(9),n=i(2),a=i(15),s=Object.defineProperty,o={},h=function(t){throw t};t.exports=function(t,e){if(a(o,t))return o[t];e||(e={});var i=[][t],l=!!a(e,"ACCESSORS")&&e.ACCESSORS,c=a(e,0)?e[0]:h,u=a(e,1)?e[1]:void 0;return o[t]=!!i&&!n((function(){if(l&&!r)return!0;var t={length:-1};l?s(t,1,{enumerable:!0,get:h}):t[1]=1,i.call(t,c,u)}))}},function(t,e,i){var r=i(62),n=i(22);t.exports=function(t){return r(n(t))}},function(t,e,i){var r=i(7),n=i(27),a=i(13),s=r("unscopables"),o=Array.prototype;null==o[s]&&a.f(o,s,{configurable:!0,value:n(null)}),t.exports=function(t){o[s][t]=!0}},function(t,e,i){var r=i(22),n=/"/g;t.exports=function(t,e,i,a){var s=String(r(t)),o="<"+e;return""!==i&&(o+=" "+i+'="'+String(a).replace(n,"&quot;")+'"'),o+">"+s+"</"+e+">"}},function(t,e,i){var r=i(2);t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},function(t,e,i){var r=i(8);t.exports=function(t,e){if(!r(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!r(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!r(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!r(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var r=i(13).f,n=i(15),a=i(7)("toStringTag");t.exports=function(t,e,i){t&&!n(t=i?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},function(t,e){t.exports=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t}},function(t,e,i){var r=i(5);t.exports=r},function(t,e,i){var r=i(3),n=i(75);t.exports=r?n:function(t){return Map.prototype.entries.call(t)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){"use strict";var r=i(2);t.exports=function(t,e){var i=[][t];return!!i&&r((function(){i.call(null,e||function(){throw 1},1)}))}},function(t,e,i){var r=i(24);t.exports=function(t,e,i){for(var n in e)r(t,n,e[n],i);return t}},function(t,e,i){"use strict";var r=i(0),n=i(5),a=i(9),s=i(128),o=i(11),h=i(99),l=i(35),c=i(38),u=i(16),d=i(10),p=i(173),f=i(174),g=i(33),v=i(15),m=i(68),y=i(8),C=i(27),x=i(46),T=i(48).f,S=i(175),w=i(20).forEach,A=i(50),b=i(13),k=i(23),_=i(17),P=i(94),I=_.get,D=_.set,E=b.f,M=k.f,O=Math.round,R=n.RangeError,L=h.ArrayBuffer,N=h.DataView,$=o.NATIVE_ARRAY_BUFFER_VIEWS,j=o.TYPED_ARRAY_TAG,H=o.TypedArray,F=o.TypedArrayPrototype,V=o.aTypedArrayConstructor,B=o.isTypedArray,W=function(t,e){for(var i=0,r=e.length,n=new(V(t))(r);r>i;)n[i]=e[i++];return n},U=function(t,e){E(t,e,{get:function(){return I(this)[e]}})},X=function(t){var e;return t instanceof L||"ArrayBuffer"==(e=m(t))||"SharedArrayBuffer"==e},z=function(t,e){return B(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},q=function(t,e){return z(t,e=g(e,!0))?c(2,t[e]):M(t,e)},Y=function(t,e,i){return!(z(t,e=g(e,!0))&&y(i)&&v(i,"value"))||v(i,"get")||v(i,"set")||i.configurable||v(i,"writable")&&!i.writable||v(i,"enumerable")&&!i.enumerable?E(t,e,i):(t[e]=i.value,t)};a?($||(k.f=q,b.f=Y,U(F,"buffer"),U(F,"byteOffset"),U(F,"byteLength"),U(F,"length")),r({target:"Object",stat:!0,forced:!$},{getOwnPropertyDescriptor:q,defineProperty:Y}),t.exports=function(t,e,i){var a=t.match(/\d+$/)[0]/8,o=t+(i?"Clamped":"")+"Array",h="get"+t,c="set"+t,g=n[o],v=g,m=v&&v.prototype,b={},k=function(t,e){E(t,e,{get:function(){return function(t,e){var i=I(t);return i.view[h](e*a+i.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,r){var n=I(t);i&&(r=(r=O(r))<0?0:r>255?255:255&r),n.view[c](e*a+n.byteOffset,r,!0)}(this,e,t)},enumerable:!0})};$?s&&(v=e((function(t,e,i,r){return l(t,v,o),P(y(e)?X(e)?void 0!==r?new g(e,f(i,a),r):void 0!==i?new g(e,f(i,a)):new g(e):B(e)?W(v,e):S.call(v,e):new g(p(e)),t,v)})),x&&x(v,H),w(T(g),(function(t){t in v||u(v,t,g[t])})),v.prototype=m):(v=e((function(t,e,i,r){l(t,v,o);var n,s,h,c=0,u=0;if(y(e)){if(!X(e))return B(e)?W(v,e):S.call(v,e);n=e,u=f(i,a);var g=e.byteLength;if(void 0===r){if(g%a)throw R("Wrong length");if((s=g-u)<0)throw R("Wrong length")}else if((s=d(r)*a)+u>g)throw R("Wrong length");h=s/a}else h=p(e),n=new L(s=h*a);for(D(t,{buffer:n,byteOffset:u,byteLength:s,length:h,view:new N(n)});c<h;)k(t,c++)})),x&&x(v,H),m=v.prototype=C(F)),m.constructor!==v&&u(m,"constructor",v),j&&u(m,j,o),b[o]=v,r({global:!0,forced:v!=g,sham:!$},b),"BYTES_PER_ELEMENT"in v||u(v,"BYTES_PER_ELEMENT",a),"BYTES_PER_ELEMENT"in m||u(m,"BYTES_PER_ELEMENT",a),A(o)}):t.exports=function(){}},function(t,e,i){var r=i(97),n=i(126),a=i(80)("metadata"),s=a.store||(a.store=new n),o=function(t,e,i){var n=s.get(t);if(!n){if(!i)return;s.set(t,n=new r)}var a=n.get(e);if(!a){if(!i)return;n.set(e,a=new r)}return a};t.exports={store:s,getMap:o,has:function(t,e,i){var r=o(e,i,!1);return void 0!==r&&r.has(t)},get:function(t,e,i){var r=o(e,i,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,i,r){o(i,r,!0).set(t,e)},keys:function(t,e){var i=o(t,e,!1),r=[];return i&&i.forEach((function(t,e){r.push(e)})),r},toKey:function(t){return void 0===t||"symbol"==typeof t?t:String(t)}}},function(t,e,i){var r=i(26),n=Math.max,a=Math.min;t.exports=function(t,e){var i=r(t);return i<0?n(i+e,0):a(i,e)}},function(t,e,i){var r=i(39);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,i){var r=i(1),n=i(142);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(t){}return function(i,a){return r(i),n(a),e?t.call(i,a):i.__proto__=a,i}}():void 0)},function(t,e,i){var r=i(68),n=i(67),a=i(7)("iterator");t.exports=function(t){if(null!=t)return t[a]||t["@@iterator"]||n[r(t)]}},function(t,e,i){var r=i(136),n=i(107).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},function(t,e,i){"use strict";var r=i(33),n=i(13),a=i(38);t.exports=function(t,e,i){var s=r(e);s in t?n.f(t,s,a(0,i)):t[s]=i}},function(t,e,i){"use strict";var r=i(14),n=i(13),a=i(7),s=i(9),o=a("species");t.exports=function(t){var e=r(t),i=n.f;s&&e&&!e[o]&&i(e,o,{configurable:!0,get:function(){return this}})}},function(t,e,i){"use strict";var r=i(116).IteratorPrototype,n=i(27),a=i(38),s=i(34),o=i(67),h=function(){return this};t.exports=function(t,e,i){var l=e+" Iterator";return t.prototype=n(r,{next:a(1,i)}),s(t,l,!1,!0),o[l]=h,t}},function(t,e,i){var r=i(64),n=i(8),a=i(15),s=i(13).f,o=i(63),h=i(71),l=o("meta"),c=0,u=Object.isExtensible||function(){return!0},d=function(t){s(t,l,{value:{objectID:"O"+ ++c,weakData:{}}})},p=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,l)){if(!u(t))return"F";if(!e)return"E";d(t)}return t[l].objectID},getWeakData:function(t,e){if(!a(t,l)){if(!u(t))return!0;if(!e)return!1;d(t)}return t[l].weakData},onFreeze:function(t){return h&&p.REQUIRED&&u(t)&&!a(t,l)&&d(t),t}};r[l]=!0},function(t,e,i){var r=i(3),n=i(75);t.exports=r?n:function(t){return Set.prototype.values.call(t)}},function(t,e,i){"use strict";var r=i(36),n=i(4),a=i(1),s=i(27),o=i(16),h=i(41),l=i(7),c=i(17),u=i(14)("Promise"),d=c.set,p=c.get,f=l("toStringTag"),g=function(t){var e=p(this).iterator,i=e.return;return void 0===i?u.resolve({done:!0,value:t}):a(i.call(e,t))},v=function(t){var e=p(this).iterator,i=e.throw;return void 0===i?u.reject(t):i.call(e,t)};t.exports=function(t,e){var i=function(t){t.next=n(t.iterator.next),t.done=!1,d(this,t)};return i.prototype=h(s(r.AsyncIterator.prototype),{next:function(e){var i=p(this);if(i.done)return u.resolve({done:!0,value:void 0});try{return u.resolve(a(t.call(i,e,u)))}catch(t){return u.reject(t)}},return:g,throw:v}),e||o(i.prototype,f,"Generator"),i}},function(t,e,i){"use strict";var r=i(36),n=i(4),a=i(1),s=i(27),o=i(16),h=i(41),l=i(7),c=i(17),u=c.set,d=c.get,p=l("toStringTag"),f=function(t){var e=d(this).iterator,i=e.return;return void 0===i?{done:!0,value:t}:a(i.call(e,t))},g=function(t){var e=d(this).iterator,i=e.throw;if(void 0===i)throw t;return i.call(e,t)};t.exports=function(t,e){var i=function(t){t.next=n(t.iterator.next),t.done=!1,u(this,t)};return i.prototype=h(s(r.Iterator.prototype),{next:function(){var e=d(this),i=e.done?void 0:t.apply(e,arguments);return{done:e.done,value:i}},return:f,throw:g}),e||o(i.prototype,p,"Generator"),i}},function(t,e,i){var r=i(136),n=i(107);t.exports=Object.keys||function(t){return r(t,n)}},function(t,e,i){var r=i(8),n=i(45),a=i(7)("species");t.exports=function(t,e){var i;return n(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!n(i.prototype)?r(i)&&null===(i=i[a])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},function(t,e,i){var r=i(39),n=i(5);t.exports="process"==r(n.process)},function(t,e,i){var r=i(26),n=i(22),a=function(t){return function(e,i){var a,s,o=String(n(e)),h=r(i),l=o.length;return h<0||h>=l?t?"":void 0:(a=o.charCodeAt(h))<55296||a>56319||h+1===l||(s=o.charCodeAt(h+1))<56320||s>57343?t?o.charAt(h):a:t?o.slice(h,h+2):s-56320+(a-55296<<10)+65536}};t.exports={codeAt:a(!1),charAt:a(!0)}},function(t,e,i){"use strict";var r=i(1);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){var r=i(22),n="["+i(93)+"]",a=RegExp("^"+n+n+"*"),s=RegExp(n+n+"*$"),o=function(t){return function(e){var i=String(r(e));return 1&t&&(i=i.replace(a,"")),2&t&&(i=i.replace(s,"")),i}};t.exports={start:o(1),end:o(2),trim:o(3)}},function(t,e,i){var r=i(2),n=i(39),a="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==n(t)?a.call(t,""):Object(t)}:Object},function(t,e){var i=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++i+r).toString(36)}},function(t,e){t.exports={}},function(t,e,i){var r=i(29),n=i(10),a=i(44),s=function(t){return function(e,i,s){var o,h=r(e),l=n(h.length),c=a(s,l);if(t&&i!=i){for(;l>c;)if((o=h[c++])!=o)return!0}else for(;l>c;c++)if((t||c in h)&&h[c]===i)return t||c||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,i){var r=i(2),n=/#|\.prototype\./,a=function(t,e){var i=o[s(t)];return i==l||i!=h&&("function"==typeof e?r(e):!!e)},s=a.normalize=function(t){return String(t).replace(n,".").toLowerCase()},o=a.data={},h=a.NATIVE="N",l=a.POLYFILL="P";t.exports=a},function(t,e){t.exports={}},function(t,e,i){var r=i(112),n=i(39),a=i(7)("toStringTag"),s="Arguments"==n(function(){return arguments}());t.exports=r?n:function(t){var e,i,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),a))?i:s?n(e):"Object"==(r=n(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,i){var r=i(2),n=i(7),a=i(70),s=n("species");t.exports=function(t){return a>=51||!r((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,i){var r,n,a=i(5),s=i(84),o=a.process,h=o&&o.versions,l=h&&h.v8;l?n=(r=l.split("."))[0]+r[1]:s&&(!(r=s.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=s.match(/Chrome\/(\d+)/))&&(n=r[1]),t.exports=n&&+n},function(t,e,i){var r=i(2);t.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},function(t,e,i){var r=i(8),n=i(39),a=i(7)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==n(t))}},function(t,e,i){"use strict";var r=i(4),n=function(t){var e,i;this.promise=new t((function(t,r){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=r})),this.resolve=r(e),this.reject=r(i)};t.exports.f=function(t){return new n(t)}},function(t,e,i){var r=i(26);t.exports=function(t){var e=r(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},function(t,e,i){var r=i(1),n=i(47);t.exports=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},function(t,e,i){"use strict";var r=i(4),n=i(1),a=i(14)("Promise"),s=[].push,o=function(t){var e=0==t,i=1==t,o=2==t,h=3==t;return function(t,l){n(t);var c=r(t.next),u=e?[]:void 0;return e||r(l),new a((function(r,d){var p=function(e,i){try{var r=t.return;if(void 0!==r)return a.resolve(r.call(t)).then((function(){e(i)}),(function(t){d(t)}))}catch(t){return d(t)}e(i)},f=function(t){p(d,t)},g=function(){try{a.resolve(n(c.call(t))).then((function(t){try{if(n(t).done)r(e?u:!h&&(o||void 0));else{var c=t.value;e?(s.call(u,c),g()):a.resolve(l(c)).then((function(t){i?g():o?t?g():p(r,!1):t?p(r,h||c):g()}),f)}}catch(t){f(t)}}),f)}catch(t){f(t)}};g()}))}};t.exports={toArray:o(0),forEach:o(1),every:o(2),some:o(3),find:o(4)}},function(t,e,i){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,a=n&&!r.call({1:2},1);e.f=a?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},function(t,e,i){var r=i(5),n=i(104),a=r["__core-js_shared__"]||n("__core-js_shared__",{});t.exports=a},function(t,e,i){var r=i(80),n=i(63),a=r("keys");t.exports=function(t){return a[t]||(a[t]=n(t))}},function(t,e,i){var r=i(3),n=i(78);(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:r?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){var r=i(9),n=i(13),a=i(1),s=i(56);t.exports=r?Object.defineProperties:function(t,e){a(t);for(var i,r=s(e),o=r.length,h=0;o>h;)n.f(t,i=r[h++],e[i]);return t}},function(t,e,i){var r=i(1);t.exports=function(t){var e=t.return;if(void 0!==e)return r(e.call(t)).value}},function(t,e,i){var r=i(7)("iterator"),n=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){n=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!n)return!1;var i=!1;try{var a={};a[r]=function(){return{next:function(){return{done:i=!0}}}},t(a)}catch(t){}return i}},function(t,e,i){var r=i(14);t.exports=r("navigator","userAgent")||""},function(t,e,i){var r=i(4),n=i(12),a=i(62),s=i(10),o=function(t){return function(e,i,o,h){r(i);var l=n(e),c=a(l),u=s(l.length),d=t?u-1:0,p=t?-1:1;if(o<2)for(;;){if(d in c){h=c[d],d+=p;break}if(d+=p,t?d<0:u<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:u>d;d+=p)d in c&&(h=i(h,c[d],d,l));return h}};t.exports={left:o(!1),right:o(!0)}},function(t,e,i){"use strict";var r=i(29),n=i(30),a=i(67),s=i(17),o=i(115),h=s.set,l=s.getterFor("Array Iterator");t.exports=o(Array,"Array",(function(t,e){h(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=l(this),e=t.target,i=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:r,done:!1}:"values"==i?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(t,e,i){"use strict";var r=i(3),n=i(5),a=i(2);t.exports=r||!a((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete n[t]}))},function(t,e,i){"use strict";i(119);var r=i(24),n=i(2),a=i(7),s=i(89),o=i(16),h=a("species"),l=!n((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),c="$0"==="a".replace(/./,"$0"),u=a("replace"),d=!!/./[u]&&""===/./[u]("a","$0"),p=!n((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));t.exports=function(t,e,i,u){var f=a(t),g=!n((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),v=g&&!n((function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[h]=function(){return i},i.flags="",i[f]=/./[f]),i.exec=function(){return e=!0,null},i[f](""),!e}));if(!g||!v||"replace"===t&&(!l||!c||d)||"split"===t&&!p){var m=/./[f],y=i(f,""[t],(function(t,e,i,r,n){return e.exec===s?g&&!n?{done:!0,value:m.call(e,i,r)}:{done:!0,value:t.call(i,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:c,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),C=y[0],x=y[1];r(String.prototype,t,C),r(RegExp.prototype,f,2==e?function(t,e){return x.call(t,this,e)}:function(t){return x.call(t,this)})}u&&o(RegExp.prototype[f],"sham",!0)}},function(t,e,i){"use strict";var r,n,a=i(60),s=i(90),o=RegExp.prototype.exec,h=String.prototype.replace,l=o,c=(r=/a/,n=/b*/g,o.call(r,"a"),o.call(n,"a"),0!==r.lastIndex||0!==n.lastIndex),u=s.UNSUPPORTED_Y||s.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(c||d||u)&&(l=function(t){var e,i,r,n,s=this,l=u&&s.sticky,p=a.call(s),f=s.source,g=0,v=t;return l&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),v=String(t).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==t[s.lastIndex-1])&&(f="(?: "+f+")",v=" "+v,g++),i=new RegExp("^(?:"+f+")",p)),d&&(i=new RegExp("^"+f+"$(?!\\s)",p)),c&&(e=s.lastIndex),r=o.call(l?i:s,v),l?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=s.lastIndex,s.lastIndex+=r[0].length):s.lastIndex=0:c&&r&&(s.lastIndex=s.global?r.index+r[0].length:e),d&&r&&r.length>1&&h.call(r[0],i,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)})),r}),t.exports=l},function(t,e,i){"use strict";var r=i(2);function n(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,i){"use strict";var r=i(59).charAt;t.exports=function(t,e,i){return e+(i?r(t,e).length:1)}},function(t,e,i){var r=i(39),n=i(89);t.exports=function(t,e){var i=t.exec;if("function"==typeof i){var a=i.call(t,e);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t,e,i){var r=i(8),n=i(46);t.exports=function(t,e,i){var a,s;return n&&"function"==typeof(a=e.constructor)&&a!==i&&r(s=a.prototype)&&s!==i.prototype&&n(t,s),t}},function(t,e){var i=Math.expm1,r=Math.exp;t.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:r(t)-1}:i},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,i){"use strict";var r=i(98),n=i(170);t.exports=r("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},function(t,e,i){"use strict";var r=i(0),n=i(5),a=i(66),s=i(24),o=i(52),h=i(6),l=i(35),c=i(8),u=i(2),d=i(83),p=i(34),f=i(94);t.exports=function(t,e,i){var g=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),m=g?"set":"add",y=n[t],C=y&&y.prototype,x=y,T={},S=function(t){var e=C[t];s(C,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:function(t,i){return e.call(this,0===t?0:t,i),this})};if(a(t,"function"!=typeof y||!(v||C.forEach&&!u((function(){(new y).entries().next()})))))x=i.getConstructor(e,t,g,m),o.REQUIRED=!0;else if(a(t,!0)){var w=new x,A=w[m](v?{}:-0,1)!=w,b=u((function(){w.has(1)})),k=d((function(t){new y(t)})),_=!v&&u((function(){for(var t=new y,e=5;e--;)t[m](e,e);return!t.has(-0)}));k||((x=e((function(e,i){l(e,x,t);var r=f(new y,e,x);return null!=i&&h(i,r[m],{that:r,AS_ENTRIES:g}),r}))).prototype=C,C.constructor=x),(b||_)&&(S("delete"),S("has"),g&&S("get")),(_||A)&&S(m),v&&C.clear&&delete C.clear}return T[t]=x,r({global:!0,forced:x!=y},T),p(x,t),v||i.setStrong(x,t,g),x}},function(t,e,i){"use strict";var r=i(5),n=i(9),a=i(127),s=i(16),o=i(41),h=i(2),l=i(35),c=i(26),u=i(10),d=i(173),p=i(341),f=i(25),g=i(46),v=i(48).f,m=i(13).f,y=i(114),C=i(34),x=i(17),T=x.get,S=x.set,w=r.ArrayBuffer,A=w,b=r.DataView,k=b&&b.prototype,_=Object.prototype,P=r.RangeError,I=p.pack,D=p.unpack,E=function(t){return[255&t]},M=function(t){return[255&t,t>>8&255]},O=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},R=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},L=function(t){return I(t,23,4)},N=function(t){return I(t,52,8)},$=function(t,e){m(t.prototype,e,{get:function(){return T(this)[e]}})},j=function(t,e,i,r){var n=d(i),a=T(t);if(n+e>a.byteLength)throw P("Wrong index");var s=T(a.buffer).bytes,o=n+a.byteOffset,h=s.slice(o,o+e);return r?h:h.reverse()},H=function(t,e,i,r,n,a){var s=d(i),o=T(t);if(s+e>o.byteLength)throw P("Wrong index");for(var h=T(o.buffer).bytes,l=s+o.byteOffset,c=r(+n),u=0;u<e;u++)h[l+u]=c[a?u:e-u-1]};if(a){if(!h((function(){w(1)}))||!h((function(){new w(-1)}))||h((function(){return new w,new w(1.5),new w(NaN),"ArrayBuffer"!=w.name}))){for(var F,V=(A=function(t){return l(this,A),new w(d(t))}).prototype=w.prototype,B=v(w),W=0;B.length>W;)(F=B[W++])in A||s(A,F,w[F]);V.constructor=A}g&&f(k)!==_&&g(k,_);var U=new b(new A(2)),X=k.setInt8;U.setInt8(0,2147483648),U.setInt8(1,2147483649),!U.getInt8(0)&&U.getInt8(1)||o(k,{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},{unsafe:!0})}else A=function(t){l(this,A,"ArrayBuffer");var e=d(t);S(this,{bytes:y.call(new Array(e),0),byteLength:e}),n||(this.byteLength=e)},b=function(t,e,i){l(this,b,"DataView"),l(t,A,"DataView");var r=T(t).byteLength,a=c(e);if(a<0||a>r)throw P("Wrong offset");if(a+(i=void 0===i?r-a:u(i))>r)throw P("Wrong length");S(this,{buffer:t,byteLength:i,byteOffset:a}),n||(this.buffer=t,this.byteLength=i,this.byteOffset=a)},n&&($(A,"byteLength"),$(b,"buffer"),$(b,"byteLength"),$(b,"byteOffset")),o(b.prototype,{getInt8:function(t){return j(this,1,t)[0]<<24>>24},getUint8:function(t){return j(this,1,t)[0]},getInt16:function(t){var e=j(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=j(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return R(j(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return R(j(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return D(j(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return D(j(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){H(this,1,t,E,e)},setUint8:function(t,e){H(this,1,t,E,e)},setInt16:function(t,e){H(this,2,t,M,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){H(this,2,t,M,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){H(this,4,t,O,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){H(this,4,t,O,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){H(this,4,t,L,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){H(this,8,t,N,e,arguments.length>2?arguments[2]:void 0)}});C(A,"ArrayBuffer"),C(b,"DataView"),t.exports={ArrayBuffer:A,DataView:b}},function(t,e,i){"use strict";var r=i(1),n=i(4);t.exports=function(){for(var t,e=r(this),i=n(e.delete),a=!0,s=0,o=arguments.length;s<o;s++)t=i.call(e,arguments[s]),a=a&&t;return!!a}},function(t,e,i){"use strict";var r=i(4),n=i(18),a=i(6);t.exports=function(t){var e,i,s,o,h=arguments.length,l=h>1?arguments[1]:void 0;return r(this),(e=void 0!==l)&&r(l),null==t?new this:(i=[],e?(s=0,o=n(l,h>2?arguments[2]:void 0,2),a(t,(function(t){i.push(o(t,s++))}))):a(t,i.push,{that:i}),new this(i))}},function(t,e,i){"use strict";t.exports=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}},function(t,e,i){var r=i(5),n=i(8),a=r.document,s=n(a)&&n(a.createElement);t.exports=function(t){return s?a.createElement(t):{}}},function(t,e,i){var r=i(5),n=i(16);t.exports=function(t,e){try{n(r,t,e)}catch(i){r[t]=e}return e}},function(t,e,i){var r=i(78),n=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(t){return n.call(t)}),t.exports=r.inspectSource},function(t,e,i){var r=i(14),n=i(48),a=i(108),s=i(1);t.exports=r("Reflect","ownKeys")||function(t){var e=n.f(s(t)),i=a.f;return i?e.concat(i(t)):e}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var r=i(2);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,i){var r=i(2);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,i){var r=i(7),n=i(67),a=r("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||s[a]===t)}},function(t,e,i){var r={};r[i(7)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,i){var r=i(1),n=i(82);t.exports=function(t,e,i,a){try{return a?e(r(i)[0],i[1]):e(i)}catch(e){throw n(t),e}}},function(t,e,i){"use strict";var r=i(12),n=i(44),a=i(10);t.exports=function(t){for(var e=r(this),i=a(e.length),s=arguments.length,o=n(s>1?arguments[1]:void 0,i),h=s>2?arguments[2]:void 0,l=void 0===h?i:n(h,i);l>o;)e[o++]=t;return e}},function(t,e,i){"use strict";var r=i(0),n=i(51),a=i(25),s=i(46),o=i(34),h=i(16),l=i(24),c=i(7),u=i(3),d=i(67),p=i(116),f=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,v=c("iterator"),m=function(){return this};t.exports=function(t,e,i,c,p,y,C){n(i,e,c);var x,T,S,w=function(t){if(t===p&&P)return P;if(!g&&t in k)return k[t];switch(t){case"keys":case"values":case"entries":return function(){return new i(this,t)}}return function(){return new i(this)}},A=e+" Iterator",b=!1,k=t.prototype,_=k[v]||k["@@iterator"]||p&&k[p],P=!g&&_||w(p),I="Array"==e&&k.entries||_;if(I&&(x=a(I.call(new t)),f!==Object.prototype&&x.next&&(u||a(x)===f||(s?s(x,f):"function"!=typeof x[v]&&h(x,v,m)),o(x,A,!0,!0),u&&(d[A]=m))),"values"==p&&_&&"values"!==_.name&&(b=!0,P=function(){return _.call(this)}),u&&!C||k[v]===P||h(k,v,P),d[e]=P,p)if(T={values:w("values"),keys:y?P:w("keys"),entries:w("entries")},C)for(S in T)(g||b||!(S in k))&&l(k,S,T[S]);else r({target:e,proto:!0,forced:g||b},T);return T}},function(t,e,i){"use strict";var r,n,a,s=i(25),o=i(16),h=i(15),l=i(7),c=i(3),u=l("iterator"),d=!1;[].keys&&("next"in(a=[].keys())?(n=s(s(a)))!==Object.prototype&&(r=n):d=!0),null==r&&(r={}),c||h(r,u)||o(r,u,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:d}},function(t,e,i){var r=i(72);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,i){var r=i(7)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,i){"use strict";var r=i(0),n=i(89);r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},function(t,e,i){var r=i(10),n=i(121),a=i(22),s=Math.ceil,o=function(t){return function(e,i,o){var h,l,c=String(a(e)),u=c.length,d=void 0===o?" ":String(o),p=r(i);return p<=u||""==d?c:(h=p-u,(l=n.call(d,s(h/d.length))).length>h&&(l=l.slice(0,h)),t?c+l:l+c)}};t.exports={start:o(!1),end:o(!0)}},function(t,e,i){"use strict";var r=i(26),n=i(22);t.exports="".repeat||function(t){var e=String(n(this)),i="",a=r(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(i+=e);return i}},function(t,e,i){var r=i(2),n=i(93);t.exports=function(t){return r((function(){return!!n[t]()||"​᠎"!="​᠎"[t]()||n[t].name!==t}))}},function(t,e,i){var r=i(5),n=i(61).trim,a=i(93),s=r.parseInt,o=/^[+-]?0[Xx]/,h=8!==s(a+"08")||22!==s(a+"0x16");t.exports=h?function(t,e){var i=n(String(t));return s(i,e>>>0||(o.test(i)?16:10))}:s},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,i){var r,n,a,s=i(5),o=i(2),h=i(18),l=i(138),c=i(103),u=i(164),d=i(58),p=s.location,f=s.setImmediate,g=s.clearImmediate,v=s.process,m=s.MessageChannel,y=s.Dispatch,C=0,x={},T=function(t){if(x.hasOwnProperty(t)){var e=x[t];delete x[t],e()}},S=function(t){return function(){T(t)}},w=function(t){T(t.data)},A=function(t){s.postMessage(t+"",p.protocol+"//"+p.host)};f&&g||(f=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return x[++C]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(C),C},g=function(t){delete x[t]},d?r=function(t){v.nextTick(S(t))}:y&&y.now?r=function(t){y.now(S(t))}:m&&!u?(a=(n=new m).port2,n.port1.onmessage=w,r=h(a.postMessage,a,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts&&p&&"file:"!==p.protocol&&!o(A)?(r=A,s.addEventListener("message",w,!1)):r="onreadystatechange"in c("script")?function(t){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),T(t)}}:function(t){setTimeout(S(t),0)}),t.exports={set:f,clear:g}},function(t,e,i){"use strict";var r,n=i(5),a=i(41),s=i(52),o=i(98),h=i(172),l=i(8),c=i(17).enforce,u=i(134),d=!n.ActiveXObject&&"ActiveXObject"in n,p=Object.isExtensible,f=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},g=t.exports=o("WeakMap",f,h);if(u&&d){r=h.getConstructor(f,"WeakMap",!0),s.REQUIRED=!0;var v=g.prototype,m=v.delete,y=v.has,C=v.get,x=v.set;a(v,{delete:function(t){if(l(t)&&!p(t)){var e=c(this);return e.frozen||(e.frozen=new r),m.call(this,t)||e.frozen.delete(t)}return m.call(this,t)},has:function(t){if(l(t)&&!p(t)){var e=c(this);return e.frozen||(e.frozen=new r),y.call(this,t)||e.frozen.has(t)}return y.call(this,t)},get:function(t){if(l(t)&&!p(t)){var e=c(this);return e.frozen||(e.frozen=new r),y.call(this,t)?C.call(this,t):e.frozen.get(t)}return C.call(this,t)},set:function(t,e){if(l(t)&&!p(t)){var i=c(this);i.frozen||(i.frozen=new r),y.call(this,t)?x.call(this,t,e):i.frozen.set(t,e)}else x.call(this,t,e);return this}})}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e,i){var r=i(5),n=i(2),a=i(83),s=i(11).NATIVE_ARRAY_BUFFER_VIEWS,o=r.ArrayBuffer,h=r.Int8Array;t.exports=!s||!n((function(){h(1)}))||!n((function(){new h(-1)}))||!a((function(t){new h,new h(null),new h(1.5),new h(t)}),!0)||n((function(){return 1!==new h(new o(2),1,void 0).length}))},function(t,e,i){"use strict";i(86);var r=i(0),n=i(14),a=i(177),s=i(24),o=i(41),h=i(34),l=i(51),c=i(17),u=i(35),d=i(15),p=i(18),f=i(68),g=i(1),v=i(8),m=i(27),y=i(38),C=i(75),x=i(47),T=i(7),S=n("fetch"),w=n("Headers"),A=T("iterator"),b=c.set,k=c.getterFor("URLSearchParams"),_=c.getterFor("URLSearchParamsIterator"),P=/\+/g,I=Array(4),D=function(t){return I[t-1]||(I[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},E=function(t){try{return decodeURIComponent(t)}catch(e){return t}},M=function(t){var e=t.replace(P," "),i=4;try{return decodeURIComponent(e)}catch(t){for(;i;)e=e.replace(D(i--),E);return e}},O=/[!'()~]|%20/g,R={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},L=function(t){return R[t]},N=function(t){return encodeURIComponent(t).replace(O,L)},$=function(t,e){if(e)for(var i,r,n=e.split("&"),a=0;a<n.length;)(i=n[a++]).length&&(r=i.split("="),t.push({key:M(r.shift()),value:M(r.join("="))}))},j=function(t){this.entries.length=0,$(this.entries,t)},H=function(t,e){if(t<e)throw TypeError("Not enough arguments")},F=l((function(t,e){b(this,{type:"URLSearchParamsIterator",iterator:C(k(t).entries),kind:e})}),"Iterator",(function(){var t=_(this),e=t.kind,i=t.iterator.next(),r=i.value;return i.done||(i.value="keys"===e?r.key:"values"===e?r.value:[r.key,r.value]),i})),V=function(){u(this,V,"URLSearchParams");var t,e,i,r,n,a,s,o,h,l=arguments.length>0?arguments[0]:void 0,c=this,p=[];if(b(c,{type:"URLSearchParams",entries:p,updateURL:function(){},updateSearchParams:j}),void 0!==l)if(v(l))if("function"==typeof(t=x(l)))for(i=(e=t.call(l)).next;!(r=i.call(e)).done;){if((s=(a=(n=C(g(r.value))).next).call(n)).done||(o=a.call(n)).done||!a.call(n).done)throw TypeError("Expected sequence with length 2");p.push({key:s.value+"",value:o.value+""})}else for(h in l)d(l,h)&&p.push({key:h,value:l[h]+""});else $(p,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},B=V.prototype;o(B,{append:function(t,e){H(arguments.length,2);var i=k(this);i.entries.push({key:t+"",value:e+""}),i.updateURL()},delete:function(t){H(arguments.length,1);for(var e=k(this),i=e.entries,r=t+"",n=0;n<i.length;)i[n].key===r?i.splice(n,1):n++;e.updateURL()},get:function(t){H(arguments.length,1);for(var e=k(this).entries,i=t+"",r=0;r<e.length;r++)if(e[r].key===i)return e[r].value;return null},getAll:function(t){H(arguments.length,1);for(var e=k(this).entries,i=t+"",r=[],n=0;n<e.length;n++)e[n].key===i&&r.push(e[n].value);return r},has:function(t){H(arguments.length,1);for(var e=k(this).entries,i=t+"",r=0;r<e.length;)if(e[r++].key===i)return!0;return!1},set:function(t,e){H(arguments.length,1);for(var i,r=k(this),n=r.entries,a=!1,s=t+"",o=e+"",h=0;h<n.length;h++)(i=n[h]).key===s&&(a?n.splice(h--,1):(a=!0,i.value=o));a||n.push({key:s,value:o}),r.updateURL()},sort:function(){var t,e,i,r=k(this),n=r.entries,a=n.slice();for(n.length=0,i=0;i<a.length;i++){for(t=a[i],e=0;e<i;e++)if(n[e].key>t.key){n.splice(e,0,t);break}e===i&&n.push(t)}r.updateURL()},forEach:function(t){for(var e,i=k(this).entries,r=p(t,arguments.length>1?arguments[1]:void 0,3),n=0;n<i.length;)r((e=i[n++]).value,e.key,this)},keys:function(){return new F(this,"keys")},values:function(){return new F(this,"values")},entries:function(){return new F(this,"entries")}},{enumerable:!0}),s(B,A,B.entries),s(B,"toString",(function(){for(var t,e=k(this).entries,i=[],r=0;r<e.length;)t=e[r++],i.push(N(t.key)+"="+N(t.value));return i.join("&")}),{enumerable:!0}),h(V,"URLSearchParams"),r({global:!0,forced:!a},{URLSearchParams:V}),a||"function"!=typeof S||"function"!=typeof w||r({global:!0,enumerable:!0,forced:!0},{fetch:function(t){var e,i,r,n=[t];return arguments.length>1&&(v(e=arguments[1])&&(i=e.body,"URLSearchParams"===f(i)&&((r=e.headers?new w(e.headers):new w).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e=m(e,{body:y(0,String(i)),headers:y(0,r)}))),n.push(e)),S.apply(this,n)}}),t.exports={URLSearchParams:V,getState:k}},function(t,e,i){"use strict";var r=i(17),n=i(51),a=i(15),s=i(56),o=i(12),h=r.set,l=r.getterFor("Object Iterator");t.exports=n((function(t,e){var i=o(t);h(this,{type:"Object Iterator",mode:e,object:i,keys:s(i),index:0})}),"Object",(function(){for(var t=l(this),e=t.keys;;){if(null===e||t.index>=e.length)return t.object=t.keys=null,{value:void 0,done:!0};var i=e[t.index++],r=t.object;if(a(r,i)){switch(t.mode){case"keys":return{value:i,done:!1};case"values":return{value:r[i],done:!1}}return{value:[i,r[i]],done:!1}}}}))},function(t,e,i){"use strict";var r=i(1);t.exports=function(t,e){var i,n=r(this),a=arguments.length>2?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof a)throw TypeError("At least one callback required");return n.has(t)?(i=n.get(t),"function"==typeof e&&(i=e(i),n.set(t,i))):"function"==typeof a&&(i=a(),n.set(t,i)),i}},function(t,e,i){var r;
/*!
 * jQuery JavaScript Library v3.5.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2020-05-04T22:49Z
 */!function(e,i){"use strict";"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,(function(i,n){"use strict";var a=[],s=Object.getPrototypeOf,o=a.slice,h=a.flat?function(t){return a.flat.call(t)}:function(t){return a.concat.apply([],t)},l=a.push,c=a.indexOf,u={},d=u.toString,p=u.hasOwnProperty,f=p.toString,g=f.call(Object),v={},m=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function(t){return null!=t&&t===t.window},C=i.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function T(t,e,i){var r,n,a=(i=i||C).createElement("script");if(a.text=t,e)for(r in x)(n=e[r]||e.getAttribute&&e.getAttribute(r))&&a.setAttribute(r,n);i.head.appendChild(a).parentNode.removeChild(a)}function S(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?u[d.call(t)]||"object":typeof t}var w=function(t,e){return new w.fn.init(t,e)};function A(t){var e=!!t&&"length"in t&&t.length,i=S(t);return!m(t)&&!y(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}w.fn=w.prototype={jquery:"3.5.1",constructor:w,length:0,toArray:function(){return o.call(this)},get:function(t){return null==t?o.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:a.sort,splice:a.splice},w.extend=w.fn.extend=function(){var t,e,i,r,n,a,s=arguments[0]||{},o=1,h=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[o]||{},o++),"object"==typeof s||m(s)||(s={}),o===h&&(s=this,o--);o<h;o++)if(null!=(t=arguments[o]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(l&&r&&(w.isPlainObject(r)||(n=Array.isArray(r)))?(i=s[e],a=n&&!Array.isArray(i)?[]:n||w.isPlainObject(i)?i:{},n=!1,s[e]=w.extend(l,a,r)):void 0!==r&&(s[e]=r));return s},w.extend({expando:"jQuery"+("3.5.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==d.call(t))&&(!(e=s(t))||"function"==typeof(i=p.call(e,"constructor")&&e.constructor)&&f.call(i)===g)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,i){T(t,{nonce:e&&e.nonce},i)},each:function(t,e){var i,r=0;if(A(t))for(i=t.length;r<i&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(A(Object(t))?w.merge(i,"string"==typeof t?[t]:t):l.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:c.call(e,t,i)},merge:function(t,e){for(var i=+e.length,r=0,n=t.length;r<i;r++)t[n++]=e[r];return t.length=n,t},grep:function(t,e,i){for(var r=[],n=0,a=t.length,s=!i;n<a;n++)!e(t[n],n)!==s&&r.push(t[n]);return r},map:function(t,e,i){var r,n,a=0,s=[];if(A(t))for(r=t.length;a<r;a++)null!=(n=e(t[a],a,i))&&s.push(n);else for(a in t)null!=(n=e(t[a],a,i))&&s.push(n);return h(s)},guid:1,support:v}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=a[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){u["[object "+e+"]"]=e.toLowerCase()}));var b=
/*!
 * Sizzle CSS Selector Engine v2.3.5
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2020-03-14
 */
function(t){var e,i,r,n,a,s,o,h,l,c,u,d,p,f,g,v,m,y,C,x="sizzle"+1*new Date,T=t.document,S=0,w=0,A=ht(),b=ht(),k=ht(),_=ht(),P=function(t,e){return t===e&&(u=!0),0},I={}.hasOwnProperty,D=[],E=D.pop,M=D.push,O=D.push,R=D.slice,L=function(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},N="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",$="[\\x20\\t\\r\\n\\f]",j="(?:\\\\[\\da-fA-F]{1,6}"+$+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",H="\\["+$+"*("+j+")(?:"+$+"*([*^$|!~]?=)"+$+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+$+"*\\]",F=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+H+")*)|.*)\\)|)",V=new RegExp($+"+","g"),B=new RegExp("^"+$+"+|((?:^|[^\\\\])(?:\\\\.)*)"+$+"+$","g"),W=new RegExp("^"+$+"*,"+$+"*"),U=new RegExp("^"+$+"*([>+~]|"+$+")"+$+"*"),X=new RegExp($+"|>"),z=new RegExp(F),q=new RegExp("^"+j+"$"),Y={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+$+"*(even|odd|(([+-]|)(\\d*)n|)"+$+"*(?:([+-]|)"+$+"*(\\d+)|))"+$+"*\\)|)","i"),bool:new RegExp("^(?:"+N+")$","i"),needsContext:new RegExp("^"+$+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+$+"*((?:-\\d)?\\d*)"+$+"*\\)|)(?=[^-]|$)","i")},G=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}"+$+"?|\\\\([^\\r\\n\\f])","g"),it=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},at=function(){d()},st=xt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(D=R.call(T.childNodes),T.childNodes),D[T.childNodes.length].nodeType}catch(t){O={apply:D.length?function(t,e){M.apply(t,R.call(e))}:function(t,e){for(var i=t.length,r=0;t[i++]=e[r++];);t.length=i-1}}}function ot(t,e,r,n){var a,o,l,c,u,f,m,y=e&&e.ownerDocument,T=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==T&&9!==T&&11!==T)return r;if(!n&&(d(e),e=e||p,g)){if(11!==T&&(u=J.exec(t)))if(a=u[1]){if(9===T){if(!(l=e.getElementById(a)))return r;if(l.id===a)return r.push(l),r}else if(y&&(l=y.getElementById(a))&&C(e,l)&&l.id===a)return r.push(l),r}else{if(u[2])return O.apply(r,e.getElementsByTagName(t)),r;if((a=u[3])&&i.getElementsByClassName&&e.getElementsByClassName)return O.apply(r,e.getElementsByClassName(a)),r}if(i.qsa&&!_[t+" "]&&(!v||!v.test(t))&&(1!==T||"object"!==e.nodeName.toLowerCase())){if(m=t,y=e,1===T&&(X.test(t)||U.test(t))){for((y=tt.test(t)&&mt(e.parentNode)||e)===e&&i.scope||((c=e.getAttribute("id"))?c=c.replace(rt,nt):e.setAttribute("id",c=x)),o=(f=s(t)).length;o--;)f[o]=(c?"#"+c:":scope")+" "+Ct(f[o]);m=f.join(",")}try{return O.apply(r,y.querySelectorAll(m)),r}catch(e){_(t,!0)}finally{c===x&&e.removeAttribute("id")}}}return h(t.replace(B,"$1"),e,r,n)}function ht(){var t=[];return function e(i,n){return t.push(i+" ")>r.cacheLength&&delete e[t.shift()],e[i+" "]=n}}function lt(t){return t[x]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ut(t,e){for(var i=t.split("|"),n=i.length;n--;)r.attrHandle[i[n]]=e}function dt(t,e){var i=e&&t,r=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function gt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function vt(t){return lt((function(e){return e=+e,lt((function(i,r){for(var n,a=t([],i.length,e),s=a.length;s--;)i[n=a[s]]&&(i[n]=!(r[n]=i[n]))}))}))}function mt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=ot.support={},a=ot.isXML=function(t){var e=t.namespaceURI,i=(t.ownerDocument||t).documentElement;return!G.test(e||i&&i.nodeName||"HTML")},d=ot.setDocument=function(t){var e,n,s=t?t.ownerDocument||t:T;return s!=p&&9===s.nodeType&&s.documentElement?(f=(p=s).documentElement,g=!a(p),T!=p&&(n=p.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",at,!1):n.attachEvent&&n.attachEvent("onunload",at)),i.scope=ct((function(t){return f.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),i.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=ct((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=Q.test(p.getElementsByClassName),i.getById=ct((function(t){return f.appendChild(t).id=x,!p.getElementsByName||!p.getElementsByName(x).length})),i.getById?(r.filter.ID=function(t){var e=t.replace(et,it);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var i=e.getElementById(t);return i?[i]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,it);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var i,r,n,a=e.getElementById(t);if(a){if((i=a.getAttributeNode("id"))&&i.value===t)return[a];for(n=e.getElementsByName(t),r=0;a=n[r++];)if((i=a.getAttributeNode("id"))&&i.value===t)return[a]}return[]}}),r.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,r=[],n=0,a=e.getElementsByTagName(t);if("*"===t){for(;i=a[n++];)1===i.nodeType&&r.push(i);return r}return a},r.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},m=[],v=[],(i.qsa=Q.test(p.querySelectorAll))&&(ct((function(t){var e;f.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+$+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\["+$+"*(?:value|"+N+")"),t.querySelectorAll("[id~="+x+"-]").length||v.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||v.push("\\["+$+"*name"+$+"*="+$+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||v.push(".#.+[+~]"),t.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name"+$+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")}))),(i.matchesSelector=Q.test(y=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ct((function(t){i.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),m.push("!=",F)})),v=v.length&&new RegExp(v.join("|")),m=m.length&&new RegExp(m.join("|")),e=Q.test(f.compareDocumentPosition),C=e||Q.test(f.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(i.contains?i.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},P=e?function(t,e){if(t===e)return u=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===r?t==p||t.ownerDocument==T&&C(T,t)?-1:e==p||e.ownerDocument==T&&C(T,e)?1:c?L(c,t)-L(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return u=!0,0;var i,r=0,n=t.parentNode,a=e.parentNode,s=[t],o=[e];if(!n||!a)return t==p?-1:e==p?1:n?-1:a?1:c?L(c,t)-L(c,e):0;if(n===a)return dt(t,e);for(i=t;i=i.parentNode;)s.unshift(i);for(i=e;i=i.parentNode;)o.unshift(i);for(;s[r]===o[r];)r++;return r?dt(s[r],o[r]):s[r]==T?-1:o[r]==T?1:0},p):p},ot.matches=function(t,e){return ot(t,null,null,e)},ot.matchesSelector=function(t,e){if(d(t),i.matchesSelector&&g&&!_[e+" "]&&(!m||!m.test(e))&&(!v||!v.test(e)))try{var r=y.call(t,e);if(r||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){_(e,!0)}return ot(e,p,null,[t]).length>0},ot.contains=function(t,e){return(t.ownerDocument||t)!=p&&d(t),C(t,e)},ot.attr=function(t,e){(t.ownerDocument||t)!=p&&d(t);var n=r.attrHandle[e.toLowerCase()],a=n&&I.call(r.attrHandle,e.toLowerCase())?n(t,e,!g):void 0;return void 0!==a?a:i.attributes||!g?t.getAttribute(e):(a=t.getAttributeNode(e))&&a.specified?a.value:null},ot.escape=function(t){return(t+"").replace(rt,nt)},ot.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ot.uniqueSort=function(t){var e,r=[],n=0,a=0;if(u=!i.detectDuplicates,c=!i.sortStable&&t.slice(0),t.sort(P),u){for(;e=t[a++];)e===t[a]&&(n=r.push(a));for(;n--;)t.splice(r[n],1)}return c=null,t},n=ot.getText=function(t){var e,i="",r=0,a=t.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=n(t)}else if(3===a||4===a)return t.nodeValue}else for(;e=t[r++];)i+=n(e);return i},(r=ot.selectors={cacheLength:50,createPseudo:lt,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,it),t[3]=(t[3]||t[4]||t[5]||"").replace(et,it),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ot.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ot.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&z.test(i)&&(e=s(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,it).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=A[t+" "];return e||(e=new RegExp("(^|"+$+")"+t+"("+$+"|$)"))&&A(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(r){var n=ot.attr(r,t);return null==n?"!="===e:!e||(n+="","="===e?n===i:"!="===e?n!==i:"^="===e?i&&0===n.indexOf(i):"*="===e?i&&n.indexOf(i)>-1:"$="===e?i&&n.slice(-i.length)===i:"~="===e?(" "+n.replace(V," ")+" ").indexOf(i)>-1:"|="===e&&(n===i||n.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,r,n){var a="nth"!==t.slice(0,3),s="last"!==t.slice(-4),o="of-type"===e;return 1===r&&0===n?function(t){return!!t.parentNode}:function(e,i,h){var l,c,u,d,p,f,g=a!==s?"nextSibling":"previousSibling",v=e.parentNode,m=o&&e.nodeName.toLowerCase(),y=!h&&!o,C=!1;if(v){if(a){for(;g;){for(d=e;d=d[g];)if(o?d.nodeName.toLowerCase()===m:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?v.firstChild:v.lastChild],s&&y){for(C=(p=(l=(c=(u=(d=v)[x]||(d[x]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===S&&l[1])&&l[2],d=p&&v.childNodes[p];d=++p&&d&&d[g]||(C=p=0)||f.pop();)if(1===d.nodeType&&++C&&d===e){c[t]=[S,p,C];break}}else if(y&&(C=p=(l=(c=(u=(d=e)[x]||(d[x]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]||[])[0]===S&&l[1]),!1===C)for(;(d=++p&&d&&d[g]||(C=p=0)||f.pop())&&((o?d.nodeName.toLowerCase()!==m:1!==d.nodeType)||!++C||(y&&((c=(u=d[x]||(d[x]={}))[d.uniqueID]||(u[d.uniqueID]={}))[t]=[S,C]),d!==e)););return(C-=n)===r||C%r==0&&C/r>=0}}},PSEUDO:function(t,e){var i,n=r.pseudos[t]||r.setFilters[t.toLowerCase()]||ot.error("unsupported pseudo: "+t);return n[x]?n(e):n.length>1?(i=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,i){for(var r,a=n(t,e),s=a.length;s--;)t[r=L(t,a[s])]=!(i[r]=a[s])})):function(t){return n(t,0,i)}):n}},pseudos:{not:lt((function(t){var e=[],i=[],r=o(t.replace(B,"$1"));return r[x]?lt((function(t,e,i,n){for(var a,s=r(t,null,n,[]),o=t.length;o--;)(a=s[o])&&(t[o]=!(e[o]=a))})):function(t,n,a){return e[0]=t,r(e,null,a,i),e[0]=null,!i.pop()}})),has:lt((function(t){return function(e){return ot(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,it),function(e){return(e.textContent||n(e)).indexOf(t)>-1}})),lang:lt((function(t){return q.test(t||"")||ot.error("unsupported lang: "+t),t=t.replace(et,it).toLowerCase(),function(e){var i;do{if(i=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:gt(!1),disabled:gt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return K.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt((function(){return[0]})),last:vt((function(t,e){return[e-1]})),eq:vt((function(t,e,i){return[i<0?i+e:i]})),even:vt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:vt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:vt((function(t,e,i){for(var r=i<0?i+e:i>e?e:i;--r>=0;)t.push(r);return t})),gt:vt((function(t,e,i){for(var r=i<0?i+e:i;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ft(e);function yt(){}function Ct(t){for(var e=0,i=t.length,r="";e<i;e++)r+=t[e].value;return r}function xt(t,e,i){var r=e.dir,n=e.next,a=n||r,s=i&&"parentNode"===a,o=w++;return e.first?function(e,i,n){for(;e=e[r];)if(1===e.nodeType||s)return t(e,i,n);return!1}:function(e,i,h){var l,c,u,d=[S,o];if(h){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,i,h))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(c=(u=e[x]||(e[x]={}))[e.uniqueID]||(u[e.uniqueID]={}),n&&n===e.nodeName.toLowerCase())e=e[r]||e;else{if((l=c[a])&&l[0]===S&&l[1]===o)return d[2]=l[2];if(c[a]=d,d[2]=t(e,i,h))return!0}return!1}}function Tt(t){return t.length>1?function(e,i,r){for(var n=t.length;n--;)if(!t[n](e,i,r))return!1;return!0}:t[0]}function St(t,e,i,r,n){for(var a,s=[],o=0,h=t.length,l=null!=e;o<h;o++)(a=t[o])&&(i&&!i(a,r,n)||(s.push(a),l&&e.push(o)));return s}function wt(t,e,i,r,n,a){return r&&!r[x]&&(r=wt(r)),n&&!n[x]&&(n=wt(n,a)),lt((function(a,s,o,h){var l,c,u,d=[],p=[],f=s.length,g=a||function(t,e,i){for(var r=0,n=e.length;r<n;r++)ot(t,e[r],i);return i}(e||"*",o.nodeType?[o]:o,[]),v=!t||!a&&e?g:St(g,d,t,o,h),m=i?n||(a?t:f||r)?[]:s:v;if(i&&i(v,m,o,h),r)for(l=St(m,p),r(l,[],o,h),c=l.length;c--;)(u=l[c])&&(m[p[c]]=!(v[p[c]]=u));if(a){if(n||t){if(n){for(l=[],c=m.length;c--;)(u=m[c])&&l.push(v[c]=u);n(null,m=[],l,h)}for(c=m.length;c--;)(u=m[c])&&(l=n?L(a,u):d[c])>-1&&(a[l]=!(s[l]=u))}}else m=St(m===s?m.splice(f,m.length):m),n?n(null,s,m,h):O.apply(s,m)}))}function At(t){for(var e,i,n,a=t.length,s=r.relative[t[0].type],o=s||r.relative[" "],h=s?1:0,c=xt((function(t){return t===e}),o,!0),u=xt((function(t){return L(e,t)>-1}),o,!0),d=[function(t,i,r){var n=!s&&(r||i!==l)||((e=i).nodeType?c(t,i,r):u(t,i,r));return e=null,n}];h<a;h++)if(i=r.relative[t[h].type])d=[xt(Tt(d),i)];else{if((i=r.filter[t[h].type].apply(null,t[h].matches))[x]){for(n=++h;n<a&&!r.relative[t[n].type];n++);return wt(h>1&&Tt(d),h>1&&Ct(t.slice(0,h-1).concat({value:" "===t[h-2].type?"*":""})).replace(B,"$1"),i,h<n&&At(t.slice(h,n)),n<a&&At(t=t.slice(n)),n<a&&Ct(t))}d.push(i)}return Tt(d)}return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,s=ot.tokenize=function(t,e){var i,n,a,s,o,h,l,c=b[t+" "];if(c)return e?0:c.slice(0);for(o=t,h=[],l=r.preFilter;o;){for(s in i&&!(n=W.exec(o))||(n&&(o=o.slice(n[0].length)||o),h.push(a=[])),i=!1,(n=U.exec(o))&&(i=n.shift(),a.push({value:i,type:n[0].replace(B," ")}),o=o.slice(i.length)),r.filter)!(n=Y[s].exec(o))||l[s]&&!(n=l[s](n))||(i=n.shift(),a.push({value:i,type:s,matches:n}),o=o.slice(i.length));if(!i)break}return e?o.length:o?ot.error(t):b(t,h).slice(0)},o=ot.compile=function(t,e){var i,n=[],a=[],o=k[t+" "];if(!o){for(e||(e=s(t)),i=e.length;i--;)(o=At(e[i]))[x]?n.push(o):a.push(o);(o=k(t,function(t,e){var i=e.length>0,n=t.length>0,a=function(a,s,o,h,c){var u,f,v,m=0,y="0",C=a&&[],x=[],T=l,w=a||n&&r.find.TAG("*",c),A=S+=null==T?1:Math.random()||.1,b=w.length;for(c&&(l=s==p||s||c);y!==b&&null!=(u=w[y]);y++){if(n&&u){for(f=0,s||u.ownerDocument==p||(d(u),o=!g);v=t[f++];)if(v(u,s||p,o)){h.push(u);break}c&&(S=A)}i&&((u=!v&&u)&&m--,a&&C.push(u))}if(m+=y,i&&y!==m){for(f=0;v=e[f++];)v(C,x,s,o);if(a){if(m>0)for(;y--;)C[y]||x[y]||(x[y]=E.call(h));x=St(x)}O.apply(h,x),c&&!a&&x.length>0&&m+e.length>1&&ot.uniqueSort(h)}return c&&(S=A,l=T),C};return i?lt(a):a}(a,n))).selector=t}return o},h=ot.select=function(t,e,i,n){var a,h,l,c,u,d="function"==typeof t&&t,p=!n&&s(t=d.selector||t);if(i=i||[],1===p.length){if((h=p[0]=p[0].slice(0)).length>2&&"ID"===(l=h[0]).type&&9===e.nodeType&&g&&r.relative[h[1].type]){if(!(e=(r.find.ID(l.matches[0].replace(et,it),e)||[])[0]))return i;d&&(e=e.parentNode),t=t.slice(h.shift().value.length)}for(a=Y.needsContext.test(t)?0:h.length;a--&&(l=h[a],!r.relative[c=l.type]);)if((u=r.find[c])&&(n=u(l.matches[0].replace(et,it),tt.test(h[0].type)&&mt(e.parentNode)||e))){if(h.splice(a,1),!(t=n.length&&Ct(h)))return O.apply(i,n),i;break}}return(d||o(t,p))(n,e,!g,i,!e||tt.test(t)&&mt(e.parentNode)||e),i},i.sortStable=x.split("").sort(P).join("")===x,i.detectDuplicates=!!u,d(),i.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||ut("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||ut("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||ut(N,(function(t,e,i){var r;if(!i)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),ot}(i);w.find=b,w.expr=b.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=b.uniqueSort,w.text=b.getText,w.isXMLDoc=b.isXML,w.contains=b.contains,w.escapeSelector=b.escape;var k=function(t,e,i){for(var r=[],n=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(n&&w(t).is(i))break;r.push(t)}return r},_=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},P=w.expr.match.needsContext;function I(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function E(t,e,i){return m(e)?w.grep(t,(function(t,r){return!!e.call(t,r,t)!==i})):e.nodeType?w.grep(t,(function(t){return t===e!==i})):"string"!=typeof e?w.grep(t,(function(t){return c.call(e,t)>-1!==i})):w.filter(e,t,i)}w.filter=function(t,e,i){var r=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?w.find.matchesSelector(r,t)?[r]:[]:w.find.matches(t,w.grep(e,(function(t){return 1===t.nodeType})))},w.fn.extend({find:function(t){var e,i,r=this.length,n=this;if("string"!=typeof t)return this.pushStack(w(t).filter((function(){for(e=0;e<r;e++)if(w.contains(n[e],this))return!0})));for(i=this.pushStack([]),e=0;e<r;e++)w.find(t,n[e],i);return r>1?w.uniqueSort(i):i},filter:function(t){return this.pushStack(E(this,t||[],!1))},not:function(t){return this.pushStack(E(this,t||[],!0))},is:function(t){return!!E(this,"string"==typeof t&&P.test(t)?w(t):t||[],!1).length}});var M,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,i){var r,n;if(!t)return this;if(i=i||M,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:O.exec(t))||!r[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:C,!0)),D.test(r[1])&&w.isPlainObject(e))for(r in e)m(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(n=C.getElementById(r[2]))&&(this[0]=n,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):m(t)?void 0!==i.ready?i.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,M=w(C);var R=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function N(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(w.contains(this,e[t]))return!0}))},closest:function(t,e){var i,r=0,n=this.length,a=[],s="string"!=typeof t&&w(t);if(!P.test(t))for(;r<n;r++)for(i=this[r];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&w.find.matchesSelector(i,t))){a.push(i);break}return this.pushStack(a.length>1?w.uniqueSort(a):a)},index:function(t){return t?"string"==typeof t?c.call(w(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return k(t,"parentNode")},parentsUntil:function(t,e,i){return k(t,"parentNode",i)},next:function(t){return N(t,"nextSibling")},prev:function(t){return N(t,"previousSibling")},nextAll:function(t){return k(t,"nextSibling")},prevAll:function(t){return k(t,"previousSibling")},nextUntil:function(t,e,i){return k(t,"nextSibling",i)},prevUntil:function(t,e,i){return k(t,"previousSibling",i)},siblings:function(t){return _((t.parentNode||{}).firstChild,t)},children:function(t){return _(t.firstChild)},contents:function(t){return null!=t.contentDocument&&s(t.contentDocument)?t.contentDocument:(I(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},(function(t,e){w.fn[t]=function(i,r){var n=w.map(this,e,i);return"Until"!==t.slice(-5)&&(r=i),r&&"string"==typeof r&&(n=w.filter(r,n)),this.length>1&&(L[t]||w.uniqueSort(n),R.test(t)&&n.reverse()),this.pushStack(n)}}));var $=/[^\x20\t\r\n\f]+/g;function j(t){return t}function H(t){throw t}function F(t,e,i,r){var n;try{t&&m(n=t.promise)?n.call(t).done(e).fail(i):t&&m(n=t.then)?n.call(t,e,i):e.apply(void 0,[t].slice(r))}catch(t){i.apply(void 0,[t])}}w.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return w.each(t.match($)||[],(function(t,i){e[i]=!0})),e}(t):w.extend({},t);var e,i,r,n,a=[],s=[],o=-1,h=function(){for(n=n||t.once,r=e=!0;s.length;o=-1)for(i=s.shift();++o<a.length;)!1===a[o].apply(i[0],i[1])&&t.stopOnFalse&&(o=a.length,i=!1);t.memory||(i=!1),e=!1,n&&(a=i?[]:"")},l={add:function(){return a&&(i&&!e&&(o=a.length-1,s.push(i)),function e(i){w.each(i,(function(i,r){m(r)?t.unique&&l.has(r)||a.push(r):r&&r.length&&"string"!==S(r)&&e(r)}))}(arguments),i&&!e&&h()),this},remove:function(){return w.each(arguments,(function(t,e){for(var i;(i=w.inArray(e,a,i))>-1;)a.splice(i,1),i<=o&&o--})),this},has:function(t){return t?w.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return n=s=[],a=i="",this},disabled:function(){return!a},lock:function(){return n=s=[],i||e||(a=i=""),this},locked:function(){return!!n},fireWith:function(t,i){return n||(i=[t,(i=i||[]).slice?i.slice():i],s.push(i),e||h()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},w.extend({Deferred:function(t){var e=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",n={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return n.then(null,t)},pipe:function(){var t=arguments;return w.Deferred((function(i){w.each(e,(function(e,r){var n=m(t[r[4]])&&t[r[4]];a[r[1]]((function(){var t=n&&n.apply(this,arguments);t&&m(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[r[0]+"With"](this,n?[t]:arguments)}))})),t=null})).promise()},then:function(t,r,n){var a=0;function s(t,e,r,n){return function(){var o=this,h=arguments,l=function(){var i,l;if(!(t<a)){if((i=r.apply(o,h))===e.promise())throw new TypeError("Thenable self-resolution");l=i&&("object"==typeof i||"function"==typeof i)&&i.then,m(l)?n?l.call(i,s(a,e,j,n),s(a,e,H,n)):(a++,l.call(i,s(a,e,j,n),s(a,e,H,n),s(a,e,j,e.notifyWith))):(r!==j&&(o=void 0,h=[i]),(n||e.resolveWith)(o,h))}},c=n?l:function(){try{l()}catch(i){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(i,c.stackTrace),t+1>=a&&(r!==H&&(o=void 0,h=[i]),e.rejectWith(o,h))}};t?c():(w.Deferred.getStackHook&&(c.stackTrace=w.Deferred.getStackHook()),i.setTimeout(c))}}return w.Deferred((function(i){e[0][3].add(s(0,i,m(n)?n:j,i.notifyWith)),e[1][3].add(s(0,i,m(t)?t:j)),e[2][3].add(s(0,i,m(r)?r:H))})).promise()},promise:function(t){return null!=t?w.extend(t,n):n}},a={};return w.each(e,(function(t,i){var s=i[2],o=i[5];n[i[1]]=s.add,o&&s.add((function(){r=o}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),s.add(i[3].fire),a[i[0]]=function(){return a[i[0]+"With"](this===a?void 0:this,arguments),this},a[i[0]+"With"]=s.fireWith})),n.promise(a),t&&t.call(a,a),a},when:function(t){var e=arguments.length,i=e,r=Array(i),n=o.call(arguments),a=w.Deferred(),s=function(t){return function(i){r[t]=this,n[t]=arguments.length>1?o.call(arguments):i,--e||a.resolveWith(r,n)}};if(e<=1&&(F(t,a.done(s(i)).resolve,a.reject,!e),"pending"===a.state()||m(n[i]&&n[i].then)))return a.then();for(;i--;)F(n[i],s(i),a.reject);return a.promise()}});var V=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&V.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},w.readyException=function(t){i.setTimeout((function(){throw t}))};var B=w.Deferred();function W(){C.removeEventListener("DOMContentLoaded",W),i.removeEventListener("load",W),w.ready()}w.fn.ready=function(t){return B.then(t).catch((function(t){w.readyException(t)})),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==t&&--w.readyWait>0||B.resolveWith(C,[w]))}}),w.ready.then=B.then,"complete"===C.readyState||"loading"!==C.readyState&&!C.documentElement.doScroll?i.setTimeout(w.ready):(C.addEventListener("DOMContentLoaded",W),i.addEventListener("load",W));var U=function(t,e,i,r,n,a,s){var o=0,h=t.length,l=null==i;if("object"===S(i))for(o in n=!0,i)U(t,e,o,i[o],!0,a,s);else if(void 0!==r&&(n=!0,m(r)||(s=!0),l&&(s?(e.call(t,r),e=null):(l=e,e=function(t,e,i){return l.call(w(t),i)})),e))for(;o<h;o++)e(t[o],i,s?r:r.call(t[o],o,e(t[o],i)));return n?t:l?e.call(t):h?e(t[0],i):a},X=/^-ms-/,z=/-([a-z])/g;function q(t,e){return e.toUpperCase()}function Y(t){return t.replace(X,"ms-").replace(z,q)}var G=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function K(){this.expando=w.expando+K.uid++}K.uid=1,K.prototype={cache:function(t){var e=t[this.expando];return e||(e={},G(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var r,n=this.cache(t);if("string"==typeof e)n[Y(e)]=i;else for(r in e)n[Y(r)]=e[r];return n},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,r=t[this.expando];if(void 0!==r){if(void 0!==e){i=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in r?[e]:e.match($)||[]).length;for(;i--;)delete r[e[i]]}(void 0===e||w.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var Z=new K,Q=new K,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,tt=/[A-Z]/g;function et(t,e,i){var r;if(void 0===i&&1===t.nodeType)if(r="data-"+e.replace(tt,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(r))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:J.test(t)?JSON.parse(t):t)}(i)}catch(t){}Q.set(t,e,i)}else i=void 0;return i}w.extend({hasData:function(t){return Q.hasData(t)||Z.hasData(t)},data:function(t,e,i){return Q.access(t,e,i)},removeData:function(t,e){Q.remove(t,e)},_data:function(t,e,i){return Z.access(t,e,i)},_removeData:function(t,e){Z.remove(t,e)}}),w.fn.extend({data:function(t,e){var i,r,n,a=this[0],s=a&&a.attributes;if(void 0===t){if(this.length&&(n=Q.get(a),1===a.nodeType&&!Z.get(a,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(r=s[i].name).indexOf("data-")&&(r=Y(r.slice(5)),et(a,r,n[r]));Z.set(a,"hasDataAttrs",!0)}return n}return"object"==typeof t?this.each((function(){Q.set(this,t)})):U(this,(function(e){var i;if(a&&void 0===e)return void 0!==(i=Q.get(a,t))||void 0!==(i=et(a,t))?i:void 0;this.each((function(){Q.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Q.remove(this,t)}))}}),w.extend({queue:function(t,e,i){var r;if(t)return e=(e||"fx")+"queue",r=Z.get(t,e),i&&(!r||Array.isArray(i)?r=Z.access(t,e,w.makeArray(i)):r.push(i)),r||[]},dequeue:function(t,e){e=e||"fx";var i=w.queue(t,e),r=i.length,n=i.shift(),a=w._queueHooks(t,e);"inprogress"===n&&(n=i.shift(),r--),n&&("fx"===e&&i.unshift("inprogress"),delete a.stop,n.call(t,(function(){w.dequeue(t,e)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Z.get(t,i)||Z.access(t,i,{empty:w.Callbacks("once memory").add((function(){Z.remove(t,[e+"queue",i])}))})}}),w.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?w.queue(this[0],t):void 0===e?this:this.each((function(){var i=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&w.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){w.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,r=1,n=w.Deferred(),a=this,s=this.length,o=function(){--r||n.resolveWith(a,[a])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(i=Z.get(a[s],t+"queueHooks"))&&i.empty&&(r++,i.empty.add(o));return o(),n.promise(e)}});var it=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,rt=new RegExp("^(?:([+-])=|)("+it+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],at=C.documentElement,st=function(t){return w.contains(t.ownerDocument,t)},ot={composed:!0};at.getRootNode&&(st=function(t){return w.contains(t.ownerDocument,t)||t.getRootNode(ot)===t.ownerDocument});var ht=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&st(t)&&"none"===w.css(t,"display")};function lt(t,e,i,r){var n,a,s=20,o=r?function(){return r.cur()}:function(){return w.css(t,e,"")},h=o(),l=i&&i[3]||(w.cssNumber[e]?"":"px"),c=t.nodeType&&(w.cssNumber[e]||"px"!==l&&+h)&&rt.exec(w.css(t,e));if(c&&c[3]!==l){for(h/=2,l=l||c[3],c=+h||1;s--;)w.style(t,e,c+l),(1-a)*(1-(a=o()/h||.5))<=0&&(s=0),c/=a;c*=2,w.style(t,e,c+l),i=i||[]}return i&&(c=+c||+h||0,n=i[1]?c+(i[1]+1)*i[2]:+i[2],r&&(r.unit=l,r.start=c,r.end=n)),n}var ct={};function ut(t){var e,i=t.ownerDocument,r=t.nodeName,n=ct[r];return n||(e=i.body.appendChild(i.createElement(r)),n=w.css(e,"display"),e.parentNode.removeChild(e),"none"===n&&(n="block"),ct[r]=n,n)}function dt(t,e){for(var i,r,n=[],a=0,s=t.length;a<s;a++)(r=t[a]).style&&(i=r.style.display,e?("none"===i&&(n[a]=Z.get(r,"display")||null,n[a]||(r.style.display="")),""===r.style.display&&ht(r)&&(n[a]=ut(r))):"none"!==i&&(n[a]="none",Z.set(r,"display",i)));for(a=0;a<s;a++)null!=n[a]&&(t[a].style.display=n[a]);return t}w.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){ht(this)?w(this).show():w(this).hide()}))}});var pt,ft,gt=/^(?:checkbox|radio)$/i,vt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,mt=/^$|^module$|\/(?:java|ecma)script/i;pt=C.createDocumentFragment().appendChild(C.createElement("div")),(ft=C.createElement("input")).setAttribute("type","radio"),ft.setAttribute("checked","checked"),ft.setAttribute("name","t"),pt.appendChild(ft),v.checkClone=pt.cloneNode(!0).cloneNode(!0).lastChild.checked,pt.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!pt.cloneNode(!0).lastChild.defaultValue,pt.innerHTML="<option></option>",v.option=!!pt.lastChild;var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ct(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&I(t,e)?w.merge([t],i):i}function xt(t,e){for(var i=0,r=t.length;i<r;i++)Z.set(t[i],"globalEval",!e||Z.get(e[i],"globalEval"))}yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,v.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);var Tt=/<|&#?\w+;/;function St(t,e,i,r,n){for(var a,s,o,h,l,c,u=e.createDocumentFragment(),d=[],p=0,f=t.length;p<f;p++)if((a=t[p])||0===a)if("object"===S(a))w.merge(d,a.nodeType?[a]:a);else if(Tt.test(a)){for(s=s||u.appendChild(e.createElement("div")),o=(vt.exec(a)||["",""])[1].toLowerCase(),h=yt[o]||yt._default,s.innerHTML=h[1]+w.htmlPrefilter(a)+h[2],c=h[0];c--;)s=s.lastChild;w.merge(d,s.childNodes),(s=u.firstChild).textContent=""}else d.push(e.createTextNode(a));for(u.textContent="",p=0;a=d[p++];)if(r&&w.inArray(a,r)>-1)n&&n.push(a);else if(l=st(a),s=Ct(u.appendChild(a),"script"),l&&xt(s),i)for(c=0;a=s[c++];)mt.test(a.type||"")&&i.push(a);return u}var wt=/^key/,At=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,bt=/^([^.]*)(?:\.(.+)|)/;function kt(){return!0}function _t(){return!1}function Pt(t,e){return t===function(){try{return C.activeElement}catch(t){}}()==("focus"===e)}function It(t,e,i,r,n,a){var s,o;if("object"==typeof e){for(o in"string"!=typeof i&&(r=r||i,i=void 0),e)It(t,o,i,r,e[o],a);return t}if(null==r&&null==n?(n=i,r=i=void 0):null==n&&("string"==typeof i?(n=r,r=void 0):(n=r,r=i,i=void 0)),!1===n)n=_t;else if(!n)return t;return 1===a&&(s=n,(n=function(t){return w().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=w.guid++)),t.each((function(){w.event.add(this,e,n,r,i)}))}function Dt(t,e,i){i?(Z.set(t,e,!1),w.event.add(t,e,{namespace:!1,handler:function(t){var r,n,a=Z.get(this,e);if(1&t.isTrigger&&this[e]){if(a.length)(w.event.special[e]||{}).delegateType&&t.stopPropagation();else if(a=o.call(arguments),Z.set(this,e,a),r=i(this,e),this[e](),a!==(n=Z.get(this,e))||r?Z.set(this,e,!1):n={},a!==n)return t.stopImmediatePropagation(),t.preventDefault(),n.value}else a.length&&(Z.set(this,e,{value:w.event.trigger(w.extend(a[0],w.Event.prototype),a.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Z.get(t,e)&&w.event.add(t,e,kt)}w.event={global:{},add:function(t,e,i,r,n){var a,s,o,h,l,c,u,d,p,f,g,v=Z.get(t);if(G(t))for(i.handler&&(i=(a=i).handler,n=a.selector),n&&w.find.matchesSelector(at,n),i.guid||(i.guid=w.guid++),(h=v.events)||(h=v.events=Object.create(null)),(s=v.handle)||(s=v.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match($)||[""]).length;l--;)p=g=(o=bt.exec(e[l])||[])[1],f=(o[2]||"").split(".").sort(),p&&(u=w.event.special[p]||{},p=(n?u.delegateType:u.bindType)||p,u=w.event.special[p]||{},c=w.extend({type:p,origType:g,data:r,handler:i,guid:i.guid,selector:n,needsContext:n&&w.expr.match.needsContext.test(n),namespace:f.join(".")},a),(d=h[p])||((d=h[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,r,f,s)||t.addEventListener&&t.addEventListener(p,s)),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),n?d.splice(d.delegateCount++,0,c):d.push(c),w.event.global[p]=!0)},remove:function(t,e,i,r,n){var a,s,o,h,l,c,u,d,p,f,g,v=Z.hasData(t)&&Z.get(t);if(v&&(h=v.events)){for(l=(e=(e||"").match($)||[""]).length;l--;)if(p=g=(o=bt.exec(e[l])||[])[1],f=(o[2]||"").split(".").sort(),p){for(u=w.event.special[p]||{},d=h[p=(r?u.delegateType:u.bindType)||p]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=d.length;a--;)c=d[a],!n&&g!==c.origType||i&&i.guid!==c.guid||o&&!o.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(a,1),c.selector&&d.delegateCount--,u.remove&&u.remove.call(t,c));s&&!d.length&&(u.teardown&&!1!==u.teardown.call(t,f,v.handle)||w.removeEvent(t,p,v.handle),delete h[p])}else for(p in h)w.event.remove(t,p+e[l],i,r,!0);w.isEmptyObject(h)&&Z.remove(t,"handle events")}},dispatch:function(t){var e,i,r,n,a,s,o=new Array(arguments.length),h=w.event.fix(t),l=(Z.get(this,"events")||Object.create(null))[h.type]||[],c=w.event.special[h.type]||{};for(o[0]=h,e=1;e<arguments.length;e++)o[e]=arguments[e];if(h.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,h)){for(s=w.event.handlers.call(this,h,l),e=0;(n=s[e++])&&!h.isPropagationStopped();)for(h.currentTarget=n.elem,i=0;(a=n.handlers[i++])&&!h.isImmediatePropagationStopped();)h.rnamespace&&!1!==a.namespace&&!h.rnamespace.test(a.namespace)||(h.handleObj=a,h.data=a.data,void 0!==(r=((w.event.special[a.origType]||{}).handle||a.handler).apply(n.elem,o))&&!1===(h.result=r)&&(h.preventDefault(),h.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,h),h.result}},handlers:function(t,e){var i,r,n,a,s,o=[],h=e.delegateCount,l=t.target;if(h&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(a=[],s={},i=0;i<h;i++)void 0===s[n=(r=e[i]).selector+" "]&&(s[n]=r.needsContext?w(n,this).index(l)>-1:w.find(n,this,null,[l]).length),s[n]&&a.push(r);a.length&&o.push({elem:l,handlers:a})}return l=this,h<e.length&&o.push({elem:l,handlers:e.slice(h)}),o},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return gt.test(e.type)&&e.click&&I(e,"input")&&Dt(e,"click",kt),!1},trigger:function(t){var e=this||t;return gt.test(e.type)&&e.click&&I(e,"input")&&Dt(e,"click"),!0},_default:function(t){var e=t.target;return gt.test(e.type)&&e.click&&I(e,"input")&&Z.get(e,"click")||I(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?kt:_t,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:_t,isPropagationStopped:_t,isImmediatePropagationStopped:_t,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=kt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=kt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=kt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&wt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&At.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(t,e){w.event.special[t]={setup:function(){return Dt(this,t,Pt),!1},trigger:function(){return Dt(this,t),!0},delegateType:e}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,r=this,n=t.relatedTarget,a=t.handleObj;return n&&(n===r||w.contains(r,n))||(t.type=a.origType,i=a.handler.apply(this,arguments),t.type=e),i}}})),w.fn.extend({on:function(t,e,i,r){return It(this,t,e,i,r)},one:function(t,e,i,r){return It(this,t,e,i,r,1)},off:function(t,e,i){var r,n;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,w(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(n in t)this.off(n,e,t[n]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=_t),this.each((function(){w.event.remove(this,t,i,e)}))}});var Et=/<script|<style|<link/i,Mt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Rt(t,e){return I(t,"table")&&I(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Nt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function $t(t,e){var i,r,n,a,s,o;if(1===e.nodeType){if(Z.hasData(t)&&(o=Z.get(t).events))for(n in Z.remove(e,"handle events"),o)for(i=0,r=o[n].length;i<r;i++)w.event.add(e,n,o[n][i]);Q.hasData(t)&&(a=Q.access(t),s=w.extend({},a),Q.set(e,s))}}function jt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&gt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Ht(t,e,i,r){e=h(e);var n,a,s,o,l,c,u=0,d=t.length,p=d-1,f=e[0],g=m(f);if(g||d>1&&"string"==typeof f&&!v.checkClone&&Mt.test(f))return t.each((function(n){var a=t.eq(n);g&&(e[0]=f.call(this,n,a.html())),Ht(a,e,i,r)}));if(d&&(a=(n=St(e,t[0].ownerDocument,!1,t,r)).firstChild,1===n.childNodes.length&&(n=a),a||r)){for(o=(s=w.map(Ct(n,"script"),Lt)).length;u<d;u++)l=n,u!==p&&(l=w.clone(l,!0,!0),o&&w.merge(s,Ct(l,"script"))),i.call(t[u],l,u);if(o)for(c=s[s.length-1].ownerDocument,w.map(s,Nt),u=0;u<o;u++)l=s[u],mt.test(l.type||"")&&!Z.access(l,"globalEval")&&w.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&!l.noModule&&w._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):T(l.textContent.replace(Ot,""),l,c))}return t}function Ft(t,e,i){for(var r,n=e?w.filter(e,t):t,a=0;null!=(r=n[a]);a++)i||1!==r.nodeType||w.cleanData(Ct(r)),r.parentNode&&(i&&st(r)&&xt(Ct(r,"script")),r.parentNode.removeChild(r));return t}w.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var r,n,a,s,o=t.cloneNode(!0),h=st(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(s=Ct(o),r=0,n=(a=Ct(t)).length;r<n;r++)jt(a[r],s[r]);if(e)if(i)for(a=a||Ct(t),s=s||Ct(o),r=0,n=a.length;r<n;r++)$t(a[r],s[r]);else $t(t,o);return(s=Ct(o,"script")).length>0&&xt(s,!h&&Ct(t,"script")),o},cleanData:function(t){for(var e,i,r,n=w.event.special,a=0;void 0!==(i=t[a]);a++)if(G(i)){if(e=i[Z.expando]){if(e.events)for(r in e.events)n[r]?w.event.remove(i,r):w.removeEvent(i,r,e.handle);i[Z.expando]=void 0}i[Q.expando]&&(i[Q.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Ft(this,t,!0)},remove:function(t){return Ft(this,t)},text:function(t){return U(this,(function(t){return void 0===t?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Ht(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Rt(this,t).appendChild(t)}))},prepend:function(){return Ht(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Rt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Ht(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Ht(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(Ct(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return w.clone(this,t,e)}))},html:function(t){return U(this,(function(t){var e=this[0]||{},i=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Et.test(t)&&!yt[(vt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;i<r;i++)1===(e=this[i]||{}).nodeType&&(w.cleanData(Ct(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Ht(this,arguments,(function(e){var i=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(Ct(this)),i&&i.replaceChild(e,this))}),t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){w.fn[t]=function(t){for(var i,r=[],n=w(t),a=n.length-1,s=0;s<=a;s++)i=s===a?this:this.clone(!0),w(n[s])[e](i),l.apply(r,i.get());return this.pushStack(r)}}));var Vt=new RegExp("^("+it+")(?!px)[a-z%]+$","i"),Bt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Wt=function(t,e,i){var r,n,a={};for(n in e)a[n]=t.style[n],t.style[n]=e[n];for(n in r=i.call(t),e)t.style[n]=a[n];return r},Ut=new RegExp(nt.join("|"),"i");function Xt(t,e,i){var r,n,a,s,o=t.style;return(i=i||Bt(t))&&(""!==(s=i.getPropertyValue(e)||i[e])||st(t)||(s=w.style(t,e)),!v.pixelBoxStyles()&&Vt.test(s)&&Ut.test(e)&&(r=o.width,n=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=i.width,o.width=r,o.minWidth=n,o.maxWidth=a)),void 0!==s?s+"":s}function zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(l).appendChild(c);var t=i.getComputedStyle(c);r="1%"!==t.top,h=12===e(t.marginLeft),c.style.right="60%",s=36===e(t.right),n=36===e(t.width),c.style.position="absolute",a=12===e(c.offsetWidth/3),at.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var r,n,a,s,o,h,l=C.createElement("div"),c=C.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,w.extend(v,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),h},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,e,r,n;return null==o&&(t=C.createElement("table"),e=C.createElement("tr"),r=C.createElement("div"),t.style.cssText="position:absolute;left:-11111px",e.style.height="1px",r.style.height="9px",at.appendChild(t).appendChild(e).appendChild(r),n=i.getComputedStyle(e),o=parseInt(n.height)>3,at.removeChild(t)),o}}))}();var qt=["Webkit","Moz","ms"],Yt=C.createElement("div").style,Gt={};function Kt(t){var e=w.cssProps[t]||Gt[t];return e||(t in Yt?t:Gt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=qt.length;i--;)if((t=qt[i]+e)in Yt)return t}(t)||t)}var Zt=/^(none|table(?!-c[ea]).+)/,Qt=/^--/,Jt={position:"absolute",visibility:"hidden",display:"block"},te={letterSpacing:"0",fontWeight:"400"};function ee(t,e,i){var r=rt.exec(e);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):e}function ie(t,e,i,r,n,a){var s="width"===e?1:0,o=0,h=0;if(i===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(h+=w.css(t,i+nt[s],!0,n)),r?("content"===i&&(h-=w.css(t,"padding"+nt[s],!0,n)),"margin"!==i&&(h-=w.css(t,"border"+nt[s]+"Width",!0,n))):(h+=w.css(t,"padding"+nt[s],!0,n),"padding"!==i?h+=w.css(t,"border"+nt[s]+"Width",!0,n):o+=w.css(t,"border"+nt[s]+"Width",!0,n));return!r&&a>=0&&(h+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-a-h-o-.5))||0),h}function re(t,e,i){var r=Bt(t),n=(!v.boxSizingReliable()||i)&&"border-box"===w.css(t,"boxSizing",!1,r),a=n,s=Xt(t,e,r),o="offset"+e[0].toUpperCase()+e.slice(1);if(Vt.test(s)){if(!i)return s;s="auto"}return(!v.boxSizingReliable()&&n||!v.reliableTrDimensions()&&I(t,"tr")||"auto"===s||!parseFloat(s)&&"inline"===w.css(t,"display",!1,r))&&t.getClientRects().length&&(n="border-box"===w.css(t,"boxSizing",!1,r),(a=o in t)&&(s=t[o])),(s=parseFloat(s)||0)+ie(t,e,i||(n?"border":"content"),a,r,s)+"px"}function ne(t,e,i,r,n){return new ne.prototype.init(t,e,i,r,n)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Xt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var n,a,s,o=Y(e),h=Qt.test(e),l=t.style;if(h||(e=Kt(o)),s=w.cssHooks[e]||w.cssHooks[o],void 0===i)return s&&"get"in s&&void 0!==(n=s.get(t,!1,r))?n:l[e];"string"===(a=typeof i)&&(n=rt.exec(i))&&n[1]&&(i=lt(t,e,n),a="number"),null!=i&&i==i&&("number"!==a||h||(i+=n&&n[3]||(w.cssNumber[o]?"":"px")),v.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),s&&"set"in s&&void 0===(i=s.set(t,i,r))||(h?l.setProperty(e,i):l[e]=i))}},css:function(t,e,i,r){var n,a,s,o=Y(e);return Qt.test(e)||(e=Kt(o)),(s=w.cssHooks[e]||w.cssHooks[o])&&"get"in s&&(n=s.get(t,!0,i)),void 0===n&&(n=Xt(t,e,r)),"normal"===n&&e in te&&(n=te[e]),""===i||i?(a=parseFloat(n),!0===i||isFinite(a)?a||0:n):n}}),w.each(["height","width"],(function(t,e){w.cssHooks[e]={get:function(t,i,r){if(i)return!Zt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?re(t,e,r):Wt(t,Jt,(function(){return re(t,e,r)}))},set:function(t,i,r){var n,a=Bt(t),s=!v.scrollboxSize()&&"absolute"===a.position,o=(s||r)&&"border-box"===w.css(t,"boxSizing",!1,a),h=r?ie(t,e,r,o,a):0;return o&&s&&(h-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(a[e])-ie(t,e,"border",!1,a)-.5)),h&&(n=rt.exec(i))&&"px"!==(n[3]||"px")&&(t.style[e]=i,i=w.css(t,e)),ee(0,i,h)}}})),w.cssHooks.marginLeft=zt(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Xt(t,"marginLeft"))||t.getBoundingClientRect().left-Wt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(t,e){w.cssHooks[t+e]={expand:function(i){for(var r=0,n={},a="string"==typeof i?i.split(" "):[i];r<4;r++)n[t+nt[r]+e]=a[r]||a[r-2]||a[0];return n}},"margin"!==t&&(w.cssHooks[t+e].set=ee)})),w.fn.extend({css:function(t,e){return U(this,(function(t,e,i){var r,n,a={},s=0;if(Array.isArray(e)){for(r=Bt(t),n=e.length;s<n;s++)a[e[s]]=w.css(t,e[s],!1,r);return a}return void 0!==i?w.style(t,e,i):w.css(t,e)}),t,e,arguments.length>1)}}),w.Tween=ne,ne.prototype={constructor:ne,init:function(t,e,i,r,n,a){this.elem=t,this.prop=i,this.easing=n||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=a||(w.cssNumber[i]?"":"px")},cur:function(){var t=ne.propHooks[this.prop];return t&&t.get?t.get(this):ne.propHooks._default.get(this)},run:function(t){var e,i=ne.propHooks[this.prop];return this.options.duration?this.pos=e=w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):ne.propHooks._default.set(this),this}},ne.prototype.init.prototype=ne.prototype,ne.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||!w.cssHooks[t.prop]&&null==t.elem.style[Kt(t.prop)]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}},ne.propHooks.scrollTop=ne.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=ne.prototype.init,w.fx.step={};var ae,se,oe=/^(?:toggle|show|hide)$/,he=/queueHooks$/;function le(){se&&(!1===C.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(le):i.setTimeout(le,w.fx.interval),w.fx.tick())}function ce(){return i.setTimeout((function(){ae=void 0})),ae=Date.now()}function ue(t,e){var i,r=0,n={height:t};for(e=e?1:0;r<4;r+=2-e)n["margin"+(i=nt[r])]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function de(t,e,i){for(var r,n=(pe.tweeners[e]||[]).concat(pe.tweeners["*"]),a=0,s=n.length;a<s;a++)if(r=n[a].call(i,e,t))return r}function pe(t,e,i){var r,n,a=0,s=pe.prefilters.length,o=w.Deferred().always((function(){delete h.elem})),h=function(){if(n)return!1;for(var e=ae||ce(),i=Math.max(0,l.startTime+l.duration-e),r=1-(i/l.duration||0),a=0,s=l.tweens.length;a<s;a++)l.tweens[a].run(r);return o.notifyWith(t,[l,r,i]),r<1&&s?i:(s||o.notifyWith(t,[l,1,0]),o.resolveWith(t,[l]),!1)},l=o.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},i),originalProperties:e,originalOptions:i,startTime:ae||ce(),duration:i.duration,tweens:[],createTween:function(e,i){var r=w.Tween(t,l.opts,e,i,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var i=0,r=e?l.tweens.length:0;if(n)return this;for(n=!0;i<r;i++)l.tweens[i].run(1);return e?(o.notifyWith(t,[l,1,0]),o.resolveWith(t,[l,e])):o.rejectWith(t,[l,e]),this}}),c=l.props;for(!function(t,e){var i,r,n,a,s;for(i in t)if(n=e[r=Y(i)],a=t[i],Array.isArray(a)&&(n=a[1],a=t[i]=a[0]),i!==r&&(t[r]=a,delete t[i]),(s=w.cssHooks[r])&&"expand"in s)for(i in a=s.expand(a),delete t[r],a)i in t||(t[i]=a[i],e[i]=n);else e[r]=n}(c,l.opts.specialEasing);a<s;a++)if(r=pe.prefilters[a].call(l,t,c,l.opts))return m(r.stop)&&(w._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return w.map(c,de,l),m(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),w.fx.timer(w.extend(h,{elem:t,anim:l,queue:l.opts.queue})),l}w.Animation=w.extend(pe,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return lt(i.elem,t,rt.exec(e),i),i}]},tweener:function(t,e){m(t)?(e=t,t=["*"]):t=t.match($);for(var i,r=0,n=t.length;r<n;r++)i=t[r],pe.tweeners[i]=pe.tweeners[i]||[],pe.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var r,n,a,s,o,h,l,c,u="width"in e||"height"in e,d=this,p={},f=t.style,g=t.nodeType&&ht(t),v=Z.get(t,"fxshow");for(r in i.queue||(null==(s=w._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,w.queue(t,"fx").length||s.empty.fire()}))}))),e)if(n=e[r],oe.test(n)){if(delete e[r],a=a||"toggle"===n,n===(g?"hide":"show")){if("show"!==n||!v||void 0===v[r])continue;g=!0}p[r]=v&&v[r]||w.style(t,r)}if((h=!w.isEmptyObject(e))||!w.isEmptyObject(p))for(r in u&&1===t.nodeType&&(i.overflow=[f.overflow,f.overflowX,f.overflowY],null==(l=v&&v.display)&&(l=Z.get(t,"display")),"none"===(c=w.css(t,"display"))&&(l?c=l:(dt([t],!0),l=t.style.display||l,c=w.css(t,"display"),dt([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===w.css(t,"float")&&(h||(d.done((function(){f.display=l})),null==l&&(c=f.display,l="none"===c?"":c)),f.display="inline-block")),i.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=i.overflow[0],f.overflowX=i.overflow[1],f.overflowY=i.overflow[2]}))),h=!1,p)h||(v?"hidden"in v&&(g=v.hidden):v=Z.access(t,"fxshow",{display:l}),a&&(v.hidden=!g),g&&dt([t],!0),d.done((function(){for(r in g||dt([t]),Z.remove(t,"fxshow"),p)w.style(t,r,p[r])}))),h=de(g?v[r]:0,r,d),r in v||(v[r]=h.start,g&&(h.end=h.start,h.start=0))}],prefilter:function(t,e){e?pe.prefilters.unshift(t):pe.prefilters.push(t)}}),w.speed=function(t,e,i){var r=t&&"object"==typeof t?w.extend({},t):{complete:i||!i&&e||m(t)&&t,duration:t,easing:i&&e||e&&!m(e)&&e};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(t,e,i,r){return this.filter(ht).css("opacity",0).show().end().animate({opacity:e},t,i,r)},animate:function(t,e,i,r){var n=w.isEmptyObject(t),a=w.speed(e,i,r),s=function(){var e=pe(this,w.extend({},t),a);(n||Z.get(this,"finish"))&&e.stop(!0)};return s.finish=s,n||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(t,e,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,n=null!=t&&t+"queueHooks",a=w.timers,s=Z.get(this);if(n)s[n]&&s[n].stop&&r(s[n]);else for(n in s)s[n]&&s[n].stop&&he.test(n)&&r(s[n]);for(n=a.length;n--;)a[n].elem!==this||null!=t&&a[n].queue!==t||(a[n].anim.stop(i),e=!1,a.splice(n,1));!e&&i||w.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=Z.get(this),r=i[t+"queue"],n=i[t+"queueHooks"],a=w.timers,s=r?r.length:0;for(i.finish=!0,w.queue(this,t,[]),n&&n.stop&&n.stop.call(this,!0),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete i.finish}))}}),w.each(["toggle","show","hide"],(function(t,e){var i=w.fn[e];w.fn[e]=function(t,r,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ue(e,!0),t,r,n)}})),w.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){w.fn[t]=function(t,i,r){return this.animate(e,t,i,r)}})),w.timers=[],w.fx.tick=function(){var t,e=0,i=w.timers;for(ae=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||w.fx.stop(),ae=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){se||(se=!0,le())},w.fx.stop=function(){se=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,e){return t=w.fx&&w.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,r){var n=i.setTimeout(e,t);r.stop=function(){i.clearTimeout(n)}}))},function(){var t=C.createElement("input"),e=C.createElement("select").appendChild(C.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=C.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var fe,ge=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return U(this,w.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){w.removeAttr(this,t)}))}}),w.extend({attr:function(t,e,i){var r,n,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===t.getAttribute?w.prop(t,e,i):(1===a&&w.isXMLDoc(t)||(n=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?fe:void 0)),void 0!==i?null===i?void w.removeAttr(t,e):n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):n&&"get"in n&&null!==(r=n.get(t,e))?r:null==(r=w.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&I(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,r=0,n=e&&e.match($);if(n&&1===t.nodeType)for(;i=n[r++];)t.removeAttribute(i)}}),fe={set:function(t,e,i){return!1===e?w.removeAttr(t,i):t.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=ge[e]||w.find.attr;ge[e]=function(t,e,r){var n,a,s=e.toLowerCase();return r||(a=ge[s],ge[s]=n,n=null!=i(t,e,r)?s:null,ge[s]=a),n}}));var ve=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function ye(t){return(t.match($)||[]).join(" ")}function Ce(t){return t.getAttribute&&t.getAttribute("class")||""}function xe(t){return Array.isArray(t)?t:"string"==typeof t&&t.match($)||[]}w.fn.extend({prop:function(t,e){return U(this,w.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[w.propFix[t]||t]}))}}),w.extend({prop:function(t,e,i){var r,n,a=t.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&w.isXMLDoc(t)||(e=w.propFix[e]||e,n=w.propHooks[e]),void 0!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:t[e]=i:n&&"get"in n&&null!==(r=n.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(w.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(t){var e,i,r,n,a,s,o,h=0;if(m(t))return this.each((function(e){w(this).addClass(t.call(this,e,Ce(this)))}));if((e=xe(t)).length)for(;i=this[h++];)if(n=Ce(i),r=1===i.nodeType&&" "+ye(n)+" "){for(s=0;a=e[s++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");n!==(o=ye(r))&&i.setAttribute("class",o)}return this},removeClass:function(t){var e,i,r,n,a,s,o,h=0;if(m(t))return this.each((function(e){w(this).removeClass(t.call(this,e,Ce(this)))}));if(!arguments.length)return this.attr("class","");if((e=xe(t)).length)for(;i=this[h++];)if(n=Ce(i),r=1===i.nodeType&&" "+ye(n)+" "){for(s=0;a=e[s++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");n!==(o=ye(r))&&i.setAttribute("class",o)}return this},toggleClass:function(t,e){var i=typeof t,r="string"===i||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):m(t)?this.each((function(i){w(this).toggleClass(t.call(this,i,Ce(this),e),e)})):this.each((function(){var e,n,a,s;if(r)for(n=0,a=w(this),s=xe(t);e=s[n++];)a.hasClass(e)?a.removeClass(e):a.addClass(e);else void 0!==t&&"boolean"!==i||((e=Ce(this))&&Z.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Z.get(this,"__className__")||""))}))},hasClass:function(t){var e,i,r=0;for(e=" "+t+" ";i=this[r++];)if(1===i.nodeType&&(" "+ye(Ce(i))+" ").indexOf(e)>-1)return!0;return!1}});var Te=/\r/g;w.fn.extend({val:function(t){var e,i,r,n=this[0];return arguments.length?(r=m(t),this.each((function(i){var n;1===this.nodeType&&(null==(n=r?t.call(this,i,w(this).val()):t)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=w.map(n,(function(t){return null==t?"":t+""}))),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,n,"value")||(this.value=n))}))):n?(e=w.valHooks[n.type]||w.valHooks[n.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(n,"value"))?i:"string"==typeof(i=n.value)?i.replace(Te,""):null==i?"":i:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:ye(w.text(t))}},select:{get:function(t){var e,i,r,n=t.options,a=t.selectedIndex,s="select-one"===t.type,o=s?null:[],h=s?a+1:n.length;for(r=a<0?h:s?a:0;r<h;r++)if(((i=n[r]).selected||r===a)&&!i.disabled&&(!i.parentNode.disabled||!I(i.parentNode,"optgroup"))){if(e=w(i).val(),s)return e;o.push(e)}return o},set:function(t,e){for(var i,r,n=t.options,a=w.makeArray(e),s=n.length;s--;)((r=n[s]).selected=w.inArray(w.valHooks.option.get(r),a)>-1)&&(i=!0);return i||(t.selectedIndex=-1),a}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=w.inArray(w(t).val(),e)>-1}},v.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),v.focusin="onfocusin"in i;var Se=/^(?:focusinfocus|focusoutblur)$/,we=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(t,e,r,n){var a,s,o,h,l,c,u,d,f=[r||C],g=p.call(t,"type")?t.type:t,v=p.call(t,"namespace")?t.namespace.split("."):[];if(s=d=o=r=r||C,3!==r.nodeType&&8!==r.nodeType&&!Se.test(g+w.event.triggered)&&(g.indexOf(".")>-1&&(v=g.split("."),g=v.shift(),v.sort()),l=g.indexOf(":")<0&&"on"+g,(t=t[w.expando]?t:new w.Event(g,"object"==typeof t&&t)).isTrigger=n?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),e=null==e?[t]:w.makeArray(e,[t]),u=w.event.special[g]||{},n||!u.trigger||!1!==u.trigger.apply(r,e))){if(!n&&!u.noBubble&&!y(r)){for(h=u.delegateType||g,Se.test(h+g)||(s=s.parentNode);s;s=s.parentNode)f.push(s),o=s;o===(r.ownerDocument||C)&&f.push(o.defaultView||o.parentWindow||i)}for(a=0;(s=f[a++])&&!t.isPropagationStopped();)d=s,t.type=a>1?h:u.bindType||g,(c=(Z.get(s,"events")||Object.create(null))[t.type]&&Z.get(s,"handle"))&&c.apply(s,e),(c=l&&s[l])&&c.apply&&G(s)&&(t.result=c.apply(s,e),!1===t.result&&t.preventDefault());return t.type=g,n||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(f.pop(),e)||!G(r)||l&&m(r[g])&&!y(r)&&((o=r[l])&&(r[l]=null),w.event.triggered=g,t.isPropagationStopped()&&d.addEventListener(g,we),r[g](),t.isPropagationStopped()&&d.removeEventListener(g,we),w.event.triggered=void 0,o&&(r[l]=o)),t.result}},simulate:function(t,e,i){var r=w.extend(new w.Event,i,{type:t,isSimulated:!0});w.event.trigger(r,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each((function(){w.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return w.event.trigger(t,e,i,!0)}}),v.focusin||w.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,n=Z.access(r,e);n||r.addEventListener(t,i,!0),Z.access(r,e,(n||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,n=Z.access(r,e)-1;n?Z.access(r,e,n):(r.removeEventListener(t,i,!0),Z.remove(r,e))}}}));var Ae=i.location,be={guid:Date.now()},ke=/\?/;w.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),e};var _e=/\[\]$/,Pe=/\r?\n/g,Ie=/^(?:submit|button|image|reset|file)$/i,De=/^(?:input|select|textarea|keygen)/i;function Ee(t,e,i,r){var n;if(Array.isArray(e))w.each(e,(function(e,n){i||_e.test(t)?r(t,n):Ee(t+"["+("object"==typeof n&&null!=n?e:"")+"]",n,i,r)}));else if(i||"object"!==S(e))r(t,e);else for(n in e)Ee(t+"["+n+"]",e[n],i,r)}w.param=function(t,e){var i,r=[],n=function(t,e){var i=m(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,(function(){n(this.name,this.value)}));else for(i in t)Ee(i,t[i],e,n);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&De.test(this.nodeName)&&!Ie.test(t)&&(this.checked||!gt.test(t))})).map((function(t,e){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,(function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}})):{name:e.name,value:i.replace(Pe,"\r\n")}})).get()}});var Me=/%20/g,Oe=/#.*$/,Re=/([?&])_=[^&]*/,Le=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ne=/^(?:GET|HEAD)$/,$e=/^\/\//,je={},He={},Fe="*/".concat("*"),Ve=C.createElement("a");function Be(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var r,n=0,a=e.toLowerCase().match($)||[];if(m(i))for(;r=a[n++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(i)):(t[r]=t[r]||[]).push(i)}}function We(t,e,i,r){var n={},a=t===He;function s(o){var h;return n[o]=!0,w.each(t[o]||[],(function(t,o){var l=o(e,i,r);return"string"!=typeof l||a||n[l]?a?!(h=l):void 0:(e.dataTypes.unshift(l),s(l),!1)})),h}return s(e.dataTypes[0])||!n["*"]&&s("*")}function Ue(t,e){var i,r,n=w.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((n[i]?t:r||(r={}))[i]=e[i]);return r&&w.extend(!0,t,r),t}Ve.href=Ae.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ae.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ae.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ue(Ue(t,w.ajaxSettings),e):Ue(w.ajaxSettings,t)},ajaxPrefilter:Be(je),ajaxTransport:Be(He),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var r,n,a,s,o,h,l,c,u,d,p=w.ajaxSetup({},e),f=p.context||p,g=p.context&&(f.nodeType||f.jquery)?w(f):w.event,v=w.Deferred(),m=w.Callbacks("once memory"),y=p.statusCode||{},x={},T={},S="canceled",A={readyState:0,getResponseHeader:function(t){var e;if(l){if(!s)for(s={};e=Le.exec(a);)s[e[1].toLowerCase()+" "]=(s[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=s[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(t,e){return null==l&&(t=T[t.toLowerCase()]=T[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)A.always(t[A.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||S;return r&&r.abort(e),b(0,e),this}};if(v.promise(A),p.url=((t||p.url||Ae.href)+"").replace($e,Ae.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match($)||[""],null==p.crossDomain){h=C.createElement("a");try{h.href=p.url,h.href=h.href,p.crossDomain=Ve.protocol+"//"+Ve.host!=h.protocol+"//"+h.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),We(je,p,e,A),l)return A;for(u in(c=w.event&&p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ne.test(p.type),n=p.url.replace(Oe,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Me,"+")):(d=p.url.slice(n.length),p.data&&(p.processData||"string"==typeof p.data)&&(n+=(ke.test(n)?"&":"?")+p.data,delete p.data),!1===p.cache&&(n=n.replace(Re,"$1"),d=(ke.test(n)?"&":"?")+"_="+be.guid+++d),p.url=n+d),p.ifModified&&(w.lastModified[n]&&A.setRequestHeader("If-Modified-Since",w.lastModified[n]),w.etag[n]&&A.setRequestHeader("If-None-Match",w.etag[n])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&A.setRequestHeader("Content-Type",p.contentType),A.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Fe+"; q=0.01":""):p.accepts["*"]),p.headers)A.setRequestHeader(u,p.headers[u]);if(p.beforeSend&&(!1===p.beforeSend.call(f,A,p)||l))return A.abort();if(S="abort",m.add(p.complete),A.done(p.success),A.fail(p.error),r=We(He,p,e,A)){if(A.readyState=1,c&&g.trigger("ajaxSend",[A,p]),l)return A;p.async&&p.timeout>0&&(o=i.setTimeout((function(){A.abort("timeout")}),p.timeout));try{l=!1,r.send(x,b)}catch(t){if(l)throw t;b(-1,t)}}else b(-1,"No Transport");function b(t,e,s,h){var u,d,C,x,T,S=e;l||(l=!0,o&&i.clearTimeout(o),r=void 0,a=h||"",A.readyState=t>0?4:0,u=t>=200&&t<300||304===t,s&&(x=function(t,e,i){for(var r,n,a,s,o=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(n in o)if(o[n]&&o[n].test(r)){h.unshift(n);break}if(h[0]in i)a=h[0];else{for(n in i){if(!h[0]||t.converters[n+" "+h[0]]){a=n;break}s||(s=n)}a=a||s}if(a)return a!==h[0]&&h.unshift(a),i[a]}(p,A,s)),!u&&w.inArray("script",p.dataTypes)>-1&&(p.converters["text script"]=function(){}),x=function(t,e,i,r){var n,a,s,o,h,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(a=c.shift();a;)if(t.responseFields[a]&&(i[t.responseFields[a]]=e),!h&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=a,a=c.shift())if("*"===a)a=h;else if("*"!==h&&h!==a){if(!(s=l[h+" "+a]||l["* "+a]))for(n in l)if((o=n.split(" "))[1]===a&&(s=l[h+" "+o[0]]||l["* "+o[0]])){!0===s?s=l[n]:!0!==l[n]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+h+" to "+a}}}return{state:"success",data:e}}(p,x,A,u),u?(p.ifModified&&((T=A.getResponseHeader("Last-Modified"))&&(w.lastModified[n]=T),(T=A.getResponseHeader("etag"))&&(w.etag[n]=T)),204===t||"HEAD"===p.type?S="nocontent":304===t?S="notmodified":(S=x.state,d=x.data,u=!(C=x.error))):(C=S,!t&&S||(S="error",t<0&&(t=0))),A.status=t,A.statusText=(e||S)+"",u?v.resolveWith(f,[d,S,A]):v.rejectWith(f,[A,S,C]),A.statusCode(y),y=void 0,c&&g.trigger(u?"ajaxSuccess":"ajaxError",[A,p,u?d:C]),m.fireWith(f,[A,S]),c&&(g.trigger("ajaxComplete",[A,p]),--w.active||w.event.trigger("ajaxStop")))}return A},getJSON:function(t,e,i){return w.get(t,e,i,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],(function(t,e){w[e]=function(t,i,r,n){return m(i)&&(n=n||r,r=i,i=void 0),w.ajax(w.extend({url:t,type:e,dataType:n,data:i,success:r},w.isPlainObject(t)&&t))}})),w.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),w._evalUrl=function(t,e,i){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){w.globalEval(t,e,i)}})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(m(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return m(t)?this.each((function(e){w(this).wrapInner(t.call(this,e))})):this.each((function(){var e=w(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=m(t);return this.each((function(i){w(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Xe={0:200,1223:204},ze=w.ajaxSettings.xhr();v.cors=!!ze&&"withCredentials"in ze,v.ajax=ze=!!ze,w.ajaxTransport((function(t){var e,r;if(v.cors||ze&&!t.crossDomain)return{send:function(n,a){var s,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];for(s in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)o.setRequestHeader(s,n[s]);e=function(t){return function(){e&&(e=r=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?a(0,"error"):a(o.status,o.statusText):a(Xe[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=e(),r=o.onerror=o.ontimeout=e("error"),void 0!==o.onabort?o.onabort=r:o.onreadystatechange=function(){4===o.readyState&&i.setTimeout((function(){e&&r()}))},e=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),w.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),w.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain||t.scriptAttrs)return{send:function(r,n){e=w("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&n("error"===t.type?404:200,t.type)}),C.head.appendChild(e[0])},abort:function(){i&&i()}}}));var qe,Ye=[],Ge=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||w.expando+"_"+be.guid++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",(function(t,e,r){var n,a,s,o=!1!==t.jsonp&&(Ge.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ge.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=m(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(Ge,"$1"+n):!1!==t.jsonp&&(t.url+=(ke.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||w.error(n+" was not called"),s[0]},t.dataTypes[0]="json",a=i[n],i[n]=function(){s=arguments},r.always((function(){void 0===a?w(i).removeProp(n):i[n]=a,t[n]&&(t.jsonpCallback=e.jsonpCallback,Ye.push(n)),s&&m(a)&&a(s[0]),s=a=void 0})),"script"})),v.createHTMLDocument=((qe=C.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===qe.childNodes.length),w.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(v.createHTMLDocument?((r=(e=C.implementation.createHTMLDocument("")).createElement("base")).href=C.location.href,e.head.appendChild(r)):e=C),a=!i&&[],(n=D.exec(t))?[e.createElement(n[1])]:(n=St([t],e,a),a&&a.length&&w(a).remove(),w.merge([],n.childNodes)));var r,n,a},w.fn.load=function(t,e,i){var r,n,a,s=this,o=t.indexOf(" ");return o>-1&&(r=ye(t.slice(o)),t=t.slice(0,o)),m(e)?(i=e,e=void 0):e&&"object"==typeof e&&(n="POST"),s.length>0&&w.ajax({url:t,type:n||"GET",dataType:"html",data:e}).done((function(t){a=arguments,s.html(r?w("<div>").append(w.parseHTML(t)).find(r):t)})).always(i&&function(t,e){s.each((function(){i.apply(this,a||[t.responseText,e,t])}))}),this},w.expr.pseudos.animated=function(t){return w.grep(w.timers,(function(e){return t===e.elem})).length},w.offset={setOffset:function(t,e,i){var r,n,a,s,o,h,l=w.css(t,"position"),c=w(t),u={};"static"===l&&(t.style.position="relative"),o=c.offset(),a=w.css(t,"top"),h=w.css(t,"left"),("absolute"===l||"fixed"===l)&&(a+h).indexOf("auto")>-1?(s=(r=c.position()).top,n=r.left):(s=parseFloat(a)||0,n=parseFloat(h)||0),m(e)&&(e=e.call(t,i,w.extend({},o))),null!=e.top&&(u.top=e.top-o.top+s),null!=e.left&&(u.left=e.left-o.left+n),"using"in e?e.using.call(t,u):("number"==typeof u.top&&(u.top+="px"),"number"==typeof u.left&&(u.left+="px"),c.css(u))}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){w.offset.setOffset(this,t,e)}));var e,i,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),i=r.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,r=this[0],n={top:0,left:0};if("fixed"===w.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),i=r.ownerDocument,t=r.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((n=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),n.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-n.top-w.css(r,"marginTop",!0),left:e.left-n.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||at}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var i="pageYOffset"===e;w.fn[t]=function(r){return U(this,(function(t,r,n){var a;if(y(t)?a=t:9===t.nodeType&&(a=t.defaultView),void 0===n)return a?a[e]:t[r];a?a.scrollTo(i?a.pageXOffset:n,i?n:a.pageYOffset):t[r]=n}),t,r,arguments.length)}})),w.each(["top","left"],(function(t,e){w.cssHooks[e]=zt(v.pixelPosition,(function(t,i){if(i)return i=Xt(t,e),Vt.test(i)?w(t).position()[e]+"px":i}))})),w.each({Height:"height",Width:"width"},(function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,r){w.fn[r]=function(n,a){var s=arguments.length&&(i||"boolean"!=typeof n),o=i||(!0===n||!0===a?"margin":"border");return U(this,(function(e,i,n){var a;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+t],a["scroll"+t],e.body["offset"+t],a["offset"+t],a["client"+t])):void 0===n?w.css(e,i,o):w.style(e,i,n,o)}),e,s?n:void 0,s)}}))})),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){w.fn[e]=function(t){return this.on(e,t)}})),w.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,r){return this.on(e,t,i,r)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){w.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}));var Ke=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;w.proxy=function(t,e){var i,r,n;if("string"==typeof e&&(i=t[e],e=t,t=i),m(t))return r=o.call(arguments,2),(n=function(){return t.apply(e||this,r.concat(o.call(arguments)))}).guid=t.guid=t.guid||w.guid++,n},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=I,w.isFunction=m,w.isWindow=y,w.camelCase=Y,w.type=S,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},w.trim=function(t){return null==t?"":(t+"").replace(Ke,"")},void 0===(r=function(){return w}.apply(e,[]))||(t.exports=r);var Ze=i.jQuery,Qe=i.$;return w.noConflict=function(t){return i.$===w&&(i.$=Qe),t&&i.jQuery===w&&(i.jQuery=Ze),w},void 0===n&&(i.jQuery=i.$=w),w}))},function(t,e,i){var r=i(9),n=i(2),a=i(103);t.exports=!r&&!n((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var r=i(5),n=i(105),a=r.WeakMap;t.exports="function"==typeof a&&/native code/.test(n(a))},function(t,e,i){var r=i(15),n=i(106),a=i(23),s=i(13);t.exports=function(t,e){for(var i=n(e),o=s.f,h=a.f,l=0;l<i.length;l++){var c=i[l];r(t,c)||o(t,c,h(e,c))}}},function(t,e,i){var r=i(15),n=i(29),a=i(65).indexOf,s=i(64);t.exports=function(t,e){var i,o=n(t),h=0,l=[];for(i in o)!r(s,i)&&r(o,i)&&l.push(i);for(;e.length>h;)r(o,i=e[h++])&&(~a(l,i)||l.push(i));return l}},function(t,e,i){var r=i(109);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,i){var r=i(14);t.exports=r("document","documentElement")},function(t,e,i){var r=i(29),n=i(48).f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==a.call(t)?function(t){try{return n(t)}catch(t){return s.slice()}}(t):n(r(t))}},function(t,e,i){var r=i(7);e.f=r},function(t,e,i){"use strict";var r=i(0),n=i(25),a=i(46),s=i(27),o=i(16),h=i(38),l=i(6),c=function(t,e){var i=this;if(!(i instanceof c))return new c(t,e);a&&(i=a(new Error(void 0),n(i))),void 0!==e&&o(i,"message",String(e));var r=[];return l(t,r.push,{that:r}),o(i,"errors",r),i};c.prototype=s(Error.prototype,{constructor:h(5,c),message:h(5,""),name:h(5,"AggregateError")}),r({global:!0},{AggregateError:c})},function(t,e,i){var r=i(8);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,i){"use strict";var r=i(18),n=i(12),a=i(113),s=i(111),o=i(10),h=i(49),l=i(47);t.exports=function(t){var e,i,c,u,d,p,f=n(t),g="function"==typeof this?this:Array,v=arguments.length,m=v>1?arguments[1]:void 0,y=void 0!==m,C=l(f),x=0;if(y&&(m=r(m,v>2?arguments[2]:void 0,2)),null==C||g==Array&&s(C))for(i=new g(e=o(f.length));e>x;x++)p=y?m(f[x],x):f[x],h(i,x,p);else for(d=(u=C.call(f)).next,i=new g;!(c=d.call(u)).done;x++)p=y?a(u,m,[c.value,x],!0):c.value,h(i,x,p);return i.length=x,i}},function(t,e,i){"use strict";var r=i(12),n=i(44),a=i(10),s=Math.min;t.exports=[].copyWithin||function(t,e){var i=r(this),o=a(i.length),h=n(t,o),l=n(e,o),c=arguments.length>2?arguments[2]:void 0,u=s((void 0===c?o:n(c,o))-l,o-h),d=1;for(l<h&&h<l+u&&(d=-1,l+=u-1,h+=u-1);u-- >0;)l in i?i[h]=i[l]:delete i[h],h+=d,l+=d;return i}},function(t,e,i){"use strict";var r=i(45),n=i(10),a=i(18),s=function(t,e,i,o,h,l,c,u){for(var d,p=h,f=0,g=!!c&&a(c,u,3);f<o;){if(f in i){if(d=g?g(i[f],f,e):i[f],l>0&&r(d))p=s(t,e,d,n(d.length),p,l-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[p]=d}p++}f++}return p};t.exports=s},function(t,e,i){"use strict";var r=i(20).forEach,n=i(40),a=i(28),s=n("forEach"),o=a("forEach");t.exports=s&&o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},function(t,e,i){"use strict";var r=i(29),n=i(26),a=i(10),s=i(40),o=i(28),h=Math.min,l=[].lastIndexOf,c=!!l&&1/[1].lastIndexOf(1,-0)<0,u=s("lastIndexOf"),d=o("indexOf",{ACCESSORS:!0,1:0}),p=c||!u||!d;t.exports=p?function(t){if(c)return l.apply(this,arguments)||0;var e=r(this),i=a(e.length),s=i-1;for(arguments.length>1&&(s=h(s,n(arguments[1]))),s<0&&(s=i+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:l},function(t,e,i){"use strict";var r=i(4),n=i(8),a=[].slice,s={},o=function(t,e,i){if(!(e in s)){for(var r=[],n=0;n<e;n++)r[n]="a["+n+"]";s[e]=Function("C,a","return new C("+r.join(",")+")")}return s[e](t,i)};t.exports=Function.bind||function(t){var e=r(this),i=a.call(arguments,1),s=function(){var r=i.concat(a.call(arguments));return this instanceof s?o(e,r.length,r):e.apply(t,r)};return n(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e,i){i(0)({global:!0},{globalThis:i(5)})},function(t,e,i){"use strict";var r=i(9),n=i(2),a=i(56),s=i(108),o=i(77),h=i(12),l=i(62),c=Object.assign,u=Object.defineProperty;t.exports=!c||n((function(){if(r&&1!==c({b:1},c(u({},"a",{enumerable:!0,get:function(){u(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol();return t[i]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=c({},t)[i]||"abcdefghijklmnopqrst"!=a(c({},e)).join("")}))?function(t,e){for(var i=h(t),n=arguments.length,c=1,u=s.f,d=o.f;n>c;)for(var p,f=l(arguments[c++]),g=u?a(f).concat(u(f)):a(f),v=g.length,m=0;v>m;)p=g[m++],r&&!d.call(f,p)||(i[p]=f[p]);return i}:c},function(t,e,i){var r=i(9),n=i(56),a=i(29),s=i(77).f,o=function(t){return function(e){for(var i,o=a(e),h=n(o),l=h.length,c=0,u=[];l>c;)i=h[c++],r&&!s.call(o,i)||u.push(t?[i,o[i]]:o[i]);return u}};t.exports={entries:o(!0),values:o(!1)}},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,i){"use strict";var r=i(0),n=i(51),a=i(22),s=i(10),o=i(4),h=i(1),l=i(39),c=i(72),u=i(60),d=i(16),p=i(2),f=i(7),g=i(21),v=i(91),m=i(17),y=i(3),C=f("matchAll"),x=m.set,T=m.getterFor("RegExp String Iterator"),S=RegExp.prototype,w=S.exec,A="".matchAll,b=!!A&&!p((function(){"a".matchAll(/./)})),k=n((function(t,e,i,r){x(this,{type:"RegExp String Iterator",regexp:t,string:e,global:i,unicode:r,done:!1})}),"RegExp String",(function(){var t=T(this);if(t.done)return{value:void 0,done:!0};var e=t.regexp,i=t.string,r=function(t,e){var i,r=t.exec;if("function"==typeof r){if("object"!=typeof(i=r.call(t,e)))throw TypeError("Incorrect exec result");return i}return w.call(t,e)}(e,i);return null===r?{value:void 0,done:t.done=!0}:t.global?(""==String(r[0])&&(e.lastIndex=v(i,s(e.lastIndex),t.unicode)),{value:r,done:!1}):(t.done=!0,{value:r,done:!1})})),_=function(t){var e,i,r,n,a,o,l=h(this),c=String(t);return e=g(l,RegExp),void 0===(i=l.flags)&&l instanceof RegExp&&!("flags"in S)&&(i=u.call(l)),r=void 0===i?"":String(i),n=new e(e===RegExp?l.source:l,r),a=!!~r.indexOf("g"),o=!!~r.indexOf("u"),n.lastIndex=s(l.lastIndex),new k(n,c,a,o)};r({target:"String",proto:!0,forced:b},{matchAll:function(t){var e,i,r,n=a(this);if(null!=t){if(c(t)&&!~String(a("flags"in S?t.flags:u.call(t))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(b)return A.apply(n,arguments);if(void 0===(i=t[C])&&y&&"RegExp"==l(t)&&(i=_),null!=i)return o(i).call(t,n)}else if(b)return A.apply(n,arguments);return e=String(n),r=new RegExp(t,"g"),y?_.call(r,e):r[C](e)}}),y||C in S||d(S,C,_)},function(t,e,i){var r=i(84);t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r)},function(t,e,i){"use strict";var r=i(59).charAt,n=i(17),a=i(115),s=n.set,o=n.getterFor("String Iterator");a(String,"String",(function(t){s(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=o(this),i=e.string,n=e.index;return n>=i.length?{value:void 0,done:!0}:(t=r(i,n),e.index+=t.length,{value:t,done:!1})}))},function(t,e,i){"use strict";var r=i(0),n=i(22),a=i(72),s=i(60),o=i(7),h=i(3),l=o("replace"),c=RegExp.prototype;r({target:"String",proto:!0},{replaceAll:function t(e,i){var r,o,u,d,p,f,g,v,m=n(this);if(null!=e){if((r=a(e))&&!~String(n("flags"in c?e.flags:s.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(o=e[l]))return o.call(e,m,i);if(h&&r)return String(m).replace(e,i)}if(u=String(m),""===(d=String(e)))return t.call(u,/(?:)/g,i);if(p=u.split(d),"function"!=typeof i)return p.join(String(i));for(g=(f=p[0]).length,v=1;v<p.length;v++)f+=String(i(d,g,u)),g+=d.length+p[v].length,f+=p[v];return f}})},function(t,e,i){var r=i(5),n=i(61).trim,a=i(93),s=r.parseFloat,o=1/s(a+"-0")!=-1/0;t.exports=o?function(t){var e=n(String(t)),i=s(e);return 0===i&&"-"==e.charAt(0)?-0:i}:s},function(t,e,i){var r=i(5).isFinite;t.exports=Number.isFinite||function(t){return"number"==typeof t&&r(t)}},function(t,e,i){var r=i(8),n=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&n(t)===t}},function(t,e,i){var r=i(39);t.exports=function(t){if("number"!=typeof t&&"Number"!=r(t))throw TypeError("Incorrect invocation");return+t}},function(t,e){var i=Math.log;t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:i(1+t)}},function(t,e,i){var r=i(124),n=Math.abs,a=Math.pow,s=a(2,-52),o=a(2,-23),h=a(2,127)*(2-o),l=a(2,-126);t.exports=Math.fround||function(t){var e,i,a=n(t),c=r(t);return a<l?c*(a/l/o+1/s-1/s)*l*o:(i=(e=(1+o/s)*a)-(e-a))>h||i!=i?c*(1/0):c*i}},function(t,e,i){var r=i(5);t.exports=r.Promise},function(t,e,i){var r=i(84);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,i){var r,n,a,s,o,h,l,c,u=i(5),d=i(23).f,p=i(125).set,f=i(164),g=i(58),v=u.MutationObserver||u.WebKitMutationObserver,m=u.document,y=u.process,C=u.Promise,x=d(u,"queueMicrotask"),T=x&&x.value;T||(r=function(){var t,e;for(g&&(t=y.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?s():a=void 0,t}}a=void 0,t&&t.enter()},!f&&!g&&v&&m?(o=!0,h=m.createTextNode(""),new v(r).observe(h,{characterData:!0}),s=function(){h.data=o=!o}):C&&C.resolve?(l=C.resolve(void 0),c=l.then,s=function(){c.call(l,r)}):s=g?function(){y.nextTick(r)}:function(){p.call(u,r)}),t.exports=T||function(t){var e={fn:t,next:void 0};a&&(a.next=e),n||(n=e,s()),a=e}},function(t,e,i){var r=i(1),n=i(8),a=i(73);t.exports=function(t,e){if(r(t),n(e)&&e.constructor===t)return e;var i=a.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){var r=i(5);t.exports=function(t,e){var i=r.console;i&&i.error&&(1===arguments.length?i.error(t):i.error(t,e))}},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(73),s=i(96),o=i(6);r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,i=a.f(e),r=i.resolve,h=i.reject,l=s((function(){var i=n(e.resolve),a=[],s=0,h=1;o(t,(function(t){var n=s++,o=!1;a.push(void 0),h++,i.call(e,t).then((function(t){o||(o=!0,a[n]={status:"fulfilled",value:t},--h||r(a))}),(function(t){o||(o=!0,a[n]={status:"rejected",reason:t},--h||r(a))}))})),--h||r(a)}));return l.error&&h(l.value),i.promise}})},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(14),s=i(73),o=i(96),h=i(6);r({target:"Promise",stat:!0},{any:function(t){var e=this,i=s.f(e),r=i.resolve,l=i.reject,c=o((function(){var i=n(e.resolve),s=[],o=0,c=1,u=!1;h(t,(function(t){var n=o++,h=!1;s.push(void 0),c++,i.call(e,t).then((function(t){h||u||(u=!0,r(t))}),(function(t){h||u||(h=!0,s[n]=t,--c||l(new(a("AggregateError"))(s,"No one promise resolved")))}))})),--c||l(new(a("AggregateError"))(s,"No one promise resolved"))}));return c.error&&l(c.value),i.promise}})},function(t,e,i){"use strict";var r=i(13).f,n=i(27),a=i(41),s=i(18),o=i(35),h=i(6),l=i(115),c=i(50),u=i(9),d=i(52).fastKey,p=i(17),f=p.set,g=p.getterFor;t.exports={getConstructor:function(t,e,i,l){var c=t((function(t,r){o(t,c,e),f(t,{type:e,index:n(null),first:void 0,last:void 0,size:0}),u||(t.size=0),null!=r&&h(r,t[l],{that:t,AS_ENTRIES:i})})),p=g(e),v=function(t,e,i){var r,n,a=p(t),s=m(t,e);return s?s.value=i:(a.last=s={index:n=d(e,!0),key:e,value:i,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=s),r&&(r.next=s),u?a.size++:t.size++,"F"!==n&&(a.index[n]=s)),t},m=function(t,e){var i,r=p(t),n=d(e);if("F"!==n)return r.index[n];for(i=r.first;i;i=i.next)if(i.key==e)return i};return a(c.prototype,{clear:function(){for(var t=p(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,u?t.size=0:this.size=0},delete:function(t){var e=p(this),i=m(this,t);if(i){var r=i.next,n=i.previous;delete e.index[i.index],i.removed=!0,n&&(n.next=r),r&&(r.previous=n),e.first==i&&(e.first=r),e.last==i&&(e.last=n),u?e.size--:this.size--}return!!i},forEach:function(t){for(var e,i=p(this),r=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:i.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!m(this,t)}}),a(c.prototype,i?{get:function(t){var e=m(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),u&&r(c.prototype,"size",{get:function(){return p(this).size}}),c},setStrong:function(t,e,i){var r=e+" Iterator",n=g(e),a=g(r);l(t,e,(function(t,e){f(this,{type:r,target:t,state:n(t),kind:e,last:void 0})}),(function(){for(var t=a(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:!1}:"values"==e?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),i?"entries":"values",!i,!0),c(e)}}},function(t,e,i){"use strict";var r=i(98),n=i(170);t.exports=r("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),n)},function(t,e,i){"use strict";var r=i(41),n=i(52).getWeakData,a=i(1),s=i(8),o=i(35),h=i(6),l=i(20),c=i(15),u=i(17),d=u.set,p=u.getterFor,f=l.find,g=l.findIndex,v=0,m=function(t){return t.frozen||(t.frozen=new y)},y=function(){this.entries=[]},C=function(t,e){return f(t.entries,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=C(this,t);if(e)return e[1]},has:function(t){return!!C(this,t)},set:function(t,e){var i=C(this,t);i?i[1]=e:this.entries.push([t,e])},delete:function(t){var e=g(this.entries,(function(e){return e[0]===t}));return~e&&this.entries.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,l){var u=t((function(t,r){o(t,u,e),d(t,{type:e,id:v++,frozen:void 0}),null!=r&&h(r,t[l],{that:t,AS_ENTRIES:i})})),f=p(e),g=function(t,e,i){var r=f(t),s=n(a(e),!0);return!0===s?m(r).set(e,i):s[r.id]=i,t};return r(u.prototype,{delete:function(t){var e=f(this);if(!s(t))return!1;var i=n(t);return!0===i?m(e).delete(t):i&&c(i,e.id)&&delete i[e.id]},has:function(t){var e=f(this);if(!s(t))return!1;var i=n(t);return!0===i?m(e).has(t):i&&c(i,e.id)}}),r(u.prototype,i?{get:function(t){var e=f(this);if(s(t)){var i=n(t);return!0===i?m(e).get(t):i?i[e.id]:void 0}},set:function(t,e){return g(this,t,e)}}:{add:function(t){return g(this,t,!0)}}),u}}},function(t,e,i){var r=i(26),n=i(10);t.exports=function(t){if(void 0===t)return 0;var e=r(t),i=n(e);if(e!==i)throw RangeError("Wrong length or index");return i}},function(t,e,i){var r=i(74);t.exports=function(t,e){var i=r(t);if(i%e)throw RangeError("Wrong offset");return i}},function(t,e,i){var r=i(12),n=i(10),a=i(47),s=i(111),o=i(18),h=i(11).aTypedArrayConstructor;t.exports=function(t){var e,i,l,c,u,d,p=r(t),f=arguments.length,g=f>1?arguments[1]:void 0,v=void 0!==g,m=a(p);if(null!=m&&!s(m))for(d=(u=m.call(p)).next,p=[];!(c=d.call(u)).done;)p.push(c.value);for(v&&f>2&&(g=o(g,arguments[2],2)),i=n(p.length),l=new(h(this))(i),e=0;i>e;e++)l[e]=v?g(p[e],e):p[e];return l}},function(t,e,i){"use strict";i(155);var r,n=i(0),a=i(9),s=i(177),o=i(5),h=i(81),l=i(24),c=i(35),u=i(15),d=i(150),p=i(143),f=i(59).codeAt,g=i(415),v=i(34),m=i(129),y=i(17),C=o.URL,x=m.URLSearchParams,T=m.getState,S=y.set,w=y.getterFor("URL"),A=Math.floor,b=Math.pow,k=/[A-Za-z]/,_=/[\d+-.A-Za-z]/,P=/\d/,I=/^(0x|0X)/,D=/^[0-7]+$/,E=/^\d+$/,M=/^[\dA-Fa-f]+$/,O=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,R=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,L=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,N=/[\u0009\u000A\u000D]/g,$=function(t,e){var i,r,n;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(i=H(e.slice(1,-1))))return"Invalid host";t.host=i}else if(q(t)){if(e=g(e),O.test(e))return"Invalid host";if(null===(i=j(e)))return"Invalid host";t.host=i}else{if(R.test(e))return"Invalid host";for(i="",r=p(e),n=0;n<r.length;n++)i+=X(r[n],V);t.host=i}},j=function(t){var e,i,r,n,a,s,o,h=t.split(".");if(h.length&&""==h[h.length-1]&&h.pop(),(e=h.length)>4)return t;for(i=[],r=0;r<e;r++){if(""==(n=h[r]))return t;if(a=10,n.length>1&&"0"==n.charAt(0)&&(a=I.test(n)?16:8,n=n.slice(8==a?1:2)),""===n)s=0;else{if(!(10==a?E:8==a?D:M).test(n))return t;s=parseInt(n,a)}i.push(s)}for(r=0;r<e;r++)if(s=i[r],r==e-1){if(s>=b(256,5-e))return null}else if(s>255)return null;for(o=i.pop(),r=0;r<i.length;r++)o+=i[r]*b(256,3-r);return o},H=function(t){var e,i,r,n,a,s,o,h=[0,0,0,0,0,0,0,0],l=0,c=null,u=0,d=function(){return t.charAt(u)};if(":"==d()){if(":"!=t.charAt(1))return;u+=2,c=++l}for(;d();){if(8==l)return;if(":"!=d()){for(e=i=0;i<4&&M.test(d());)e=16*e+parseInt(d(),16),u++,i++;if("."==d()){if(0==i)return;if(u-=i,l>6)return;for(r=0;d();){if(n=null,r>0){if(!("."==d()&&r<4))return;u++}if(!P.test(d()))return;for(;P.test(d());){if(a=parseInt(d(),10),null===n)n=a;else{if(0==n)return;n=10*n+a}if(n>255)return;u++}h[l]=256*h[l]+n,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==d()){if(u++,!d())return}else if(d())return;h[l++]=e}else{if(null!==c)return;u++,c=++l}}if(null!==c)for(s=l-c,l=7;0!=l&&s>0;)o=h[l],h[l--]=h[c+s-1],h[c+--s]=o;else if(8!=l)return;return h},F=function(t){var e,i,r,n;if("number"==typeof t){for(e=[],i=0;i<4;i++)e.unshift(t%256),t=A(t/256);return e.join(".")}if("object"==typeof t){for(e="",r=function(t){for(var e=null,i=1,r=null,n=0,a=0;a<8;a++)0!==t[a]?(n>i&&(e=r,i=n),r=null,n=0):(null===r&&(r=a),++n);return n>i&&(e=r,i=n),e}(t),i=0;i<8;i++)n&&0===t[i]||(n&&(n=!1),r===i?(e+=i?":":"::",n=!0):(e+=t[i].toString(16),i<7&&(e+=":")));return"["+e+"]"}return t},V={},B=d({},V,{" ":1,'"':1,"<":1,">":1,"`":1}),W=d({},B,{"#":1,"?":1,"{":1,"}":1}),U=d({},W,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),X=function(t,e){var i=f(t,0);return i>32&&i<127&&!u(e,t)?t:encodeURIComponent(t)},z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},q=function(t){return u(z,t.scheme)},Y=function(t){return""!=t.username||""!=t.password},G=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},K=function(t,e){var i;return 2==t.length&&k.test(t.charAt(0))&&(":"==(i=t.charAt(1))||!e&&"|"==i)},Z=function(t){var e;return t.length>1&&K(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},Q=function(t){var e=t.path,i=e.length;!i||"file"==t.scheme&&1==i&&K(e[0],!0)||e.pop()},J=function(t){return"."===t||"%2e"===t.toLowerCase()},tt={},et={},it={},rt={},nt={},at={},st={},ot={},ht={},lt={},ct={},ut={},dt={},pt={},ft={},gt={},vt={},mt={},yt={},Ct={},xt={},Tt=function(t,e,i,n){var a,s,o,h,l,c=i||tt,d=0,f="",g=!1,v=!1,m=!1;for(i||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(L,"")),e=e.replace(N,""),a=p(e);d<=a.length;){switch(s=a[d],c){case tt:if(!s||!k.test(s)){if(i)return"Invalid scheme";c=it;continue}f+=s.toLowerCase(),c=et;break;case et:if(s&&(_.test(s)||"+"==s||"-"==s||"."==s))f+=s.toLowerCase();else{if(":"!=s){if(i)return"Invalid scheme";f="",c=it,d=0;continue}if(i&&(q(t)!=u(z,f)||"file"==f&&(Y(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,i)return void(q(t)&&z[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?c=pt:q(t)&&n&&n.scheme==t.scheme?c=rt:q(t)?c=ot:"/"==a[d+1]?(c=nt,d++):(t.cannotBeABaseURL=!0,t.path.push(""),c=yt)}break;case it:if(!n||n.cannotBeABaseURL&&"#"!=s)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==s){t.scheme=n.scheme,t.path=n.path.slice(),t.query=n.query,t.fragment="",t.cannotBeABaseURL=!0,c=xt;break}c="file"==n.scheme?pt:at;continue;case rt:if("/"!=s||"/"!=a[d+1]){c=at;continue}c=ht,d++;break;case nt:if("/"==s){c=lt;break}c=mt;continue;case at:if(t.scheme=n.scheme,s==r)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query;else if("/"==s||"\\"==s&&q(t))c=st;else if("?"==s)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query="",c=Ct;else{if("#"!=s){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.path.pop(),c=mt;continue}t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query,t.fragment="",c=xt}break;case st:if(!q(t)||"/"!=s&&"\\"!=s){if("/"!=s){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,c=mt;continue}c=lt}else c=ht;break;case ot:if(c=ht,"/"!=s||"/"!=f.charAt(d+1))continue;d++;break;case ht:if("/"!=s&&"\\"!=s){c=lt;continue}break;case lt:if("@"==s){g&&(f="%40"+f),g=!0,o=p(f);for(var y=0;y<o.length;y++){var C=o[y];if(":"!=C||m){var x=X(C,U);m?t.password+=x:t.username+=x}else m=!0}f=""}else if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&q(t)){if(g&&""==f)return"Invalid authority";d-=p(f).length+1,f="",c=ct}else f+=s;break;case ct:case ut:if(i&&"file"==t.scheme){c=gt;continue}if(":"!=s||v){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&q(t)){if(q(t)&&""==f)return"Invalid host";if(i&&""==f&&(Y(t)||null!==t.port))return;if(h=$(t,f))return h;if(f="",c=vt,i)return;continue}"["==s?v=!0:"]"==s&&(v=!1),f+=s}else{if(""==f)return"Invalid host";if(h=$(t,f))return h;if(f="",c=dt,i==ut)return}break;case dt:if(!P.test(s)){if(s==r||"/"==s||"?"==s||"#"==s||"\\"==s&&q(t)||i){if(""!=f){var T=parseInt(f,10);if(T>65535)return"Invalid port";t.port=q(t)&&T===z[t.scheme]?null:T,f=""}if(i)return;c=vt;continue}return"Invalid port"}f+=s;break;case pt:if(t.scheme="file","/"==s||"\\"==s)c=ft;else{if(!n||"file"!=n.scheme){c=mt;continue}if(s==r)t.host=n.host,t.path=n.path.slice(),t.query=n.query;else if("?"==s)t.host=n.host,t.path=n.path.slice(),t.query="",c=Ct;else{if("#"!=s){Z(a.slice(d).join(""))||(t.host=n.host,t.path=n.path.slice(),Q(t)),c=mt;continue}t.host=n.host,t.path=n.path.slice(),t.query=n.query,t.fragment="",c=xt}}break;case ft:if("/"==s||"\\"==s){c=gt;break}n&&"file"==n.scheme&&!Z(a.slice(d).join(""))&&(K(n.path[0],!0)?t.path.push(n.path[0]):t.host=n.host),c=mt;continue;case gt:if(s==r||"/"==s||"\\"==s||"?"==s||"#"==s){if(!i&&K(f))c=mt;else if(""==f){if(t.host="",i)return;c=vt}else{if(h=$(t,f))return h;if("localhost"==t.host&&(t.host=""),i)return;f="",c=vt}continue}f+=s;break;case vt:if(q(t)){if(c=mt,"/"!=s&&"\\"!=s)continue}else if(i||"?"!=s)if(i||"#"!=s){if(s!=r&&(c=mt,"/"!=s))continue}else t.fragment="",c=xt;else t.query="",c=Ct;break;case mt:if(s==r||"/"==s||"\\"==s&&q(t)||!i&&("?"==s||"#"==s)){if(".."===(l=(l=f).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(Q(t),"/"==s||"\\"==s&&q(t)||t.path.push("")):J(f)?"/"==s||"\\"==s&&q(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&K(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(s==r||"?"==s||"#"==s))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==s?(t.query="",c=Ct):"#"==s&&(t.fragment="",c=xt)}else f+=X(s,W);break;case yt:"?"==s?(t.query="",c=Ct):"#"==s?(t.fragment="",c=xt):s!=r&&(t.path[0]+=X(s,V));break;case Ct:i||"#"!=s?s!=r&&("'"==s&&q(t)?t.query+="%27":t.query+="#"==s?"%23":X(s,V)):(t.fragment="",c=xt);break;case xt:s!=r&&(t.fragment+=X(s,B))}d++}},St=function(t){var e,i,r=c(this,St,"URL"),n=arguments.length>1?arguments[1]:void 0,s=String(t),o=S(r,{type:"URL"});if(void 0!==n)if(n instanceof St)e=w(n);else if(i=Tt(e={},String(n)))throw TypeError(i);if(i=Tt(o,s,null,e))throw TypeError(i);var h=o.searchParams=new x,l=T(h);l.updateSearchParams(o.query),l.updateURL=function(){o.query=String(h)||null},a||(r.href=At.call(r),r.origin=bt.call(r),r.protocol=kt.call(r),r.username=_t.call(r),r.password=Pt.call(r),r.host=It.call(r),r.hostname=Dt.call(r),r.port=Et.call(r),r.pathname=Mt.call(r),r.search=Ot.call(r),r.searchParams=Rt.call(r),r.hash=Lt.call(r))},wt=St.prototype,At=function(){var t=w(this),e=t.scheme,i=t.username,r=t.password,n=t.host,a=t.port,s=t.path,o=t.query,h=t.fragment,l=e+":";return null!==n?(l+="//",Y(t)&&(l+=i+(r?":"+r:"")+"@"),l+=F(n),null!==a&&(l+=":"+a)):"file"==e&&(l+="//"),l+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==o&&(l+="?"+o),null!==h&&(l+="#"+h),l},bt=function(){var t=w(this),e=t.scheme,i=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&q(t)?e+"://"+F(t.host)+(null!==i?":"+i:""):"null"},kt=function(){return w(this).scheme+":"},_t=function(){return w(this).username},Pt=function(){return w(this).password},It=function(){var t=w(this),e=t.host,i=t.port;return null===e?"":null===i?F(e):F(e)+":"+i},Dt=function(){var t=w(this).host;return null===t?"":F(t)},Et=function(){var t=w(this).port;return null===t?"":String(t)},Mt=function(){var t=w(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Ot=function(){var t=w(this).query;return t?"?"+t:""},Rt=function(){return w(this).searchParams},Lt=function(){var t=w(this).fragment;return t?"#"+t:""},Nt=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(a&&h(wt,{href:Nt(At,(function(t){var e=w(this),i=String(t),r=Tt(e,i);if(r)throw TypeError(r);T(e.searchParams).updateSearchParams(e.query)})),origin:Nt(bt),protocol:Nt(kt,(function(t){var e=w(this);Tt(e,String(t)+":",tt)})),username:Nt(_t,(function(t){var e=w(this),i=p(String(t));if(!G(e)){e.username="";for(var r=0;r<i.length;r++)e.username+=X(i[r],U)}})),password:Nt(Pt,(function(t){var e=w(this),i=p(String(t));if(!G(e)){e.password="";for(var r=0;r<i.length;r++)e.password+=X(i[r],U)}})),host:Nt(It,(function(t){var e=w(this);e.cannotBeABaseURL||Tt(e,String(t),ct)})),hostname:Nt(Dt,(function(t){var e=w(this);e.cannotBeABaseURL||Tt(e,String(t),ut)})),port:Nt(Et,(function(t){var e=w(this);G(e)||(""==(t=String(t))?e.port=null:Tt(e,t,dt))})),pathname:Nt(Mt,(function(t){var e=w(this);e.cannotBeABaseURL||(e.path=[],Tt(e,t+"",vt))})),search:Nt(Ot,(function(t){var e=w(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Tt(e,t,Ct)),T(e.searchParams).updateSearchParams(e.query)})),searchParams:Nt(Rt),hash:Nt(Lt,(function(t){var e=w(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Tt(e,t,xt)):e.fragment=null}))}),l(wt,"toJSON",(function(){return At.call(this)}),{enumerable:!0}),l(wt,"toString",(function(){return At.call(this)}),{enumerable:!0}),C){var $t=C.createObjectURL,jt=C.revokeObjectURL;$t&&l(St,"createObjectURL",(function(t){return $t.apply(C,arguments)})),jt&&l(St,"revokeObjectURL",(function(t){return jt.apply(C,arguments)}))}v(St,"URL"),n({global:!0,forced:!s,sham:!a},{URL:St})},function(t,e,i){var r=i(2),n=i(7),a=i(3),s=n("iterator");t.exports=!r((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,i="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),i+=r+t})),a&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[s]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}))},function(t,e,i){"use strict";i(0)({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},function(t,e,i){"use strict";var r=i(1),n=i(4);t.exports=function(){for(var t=r(this),e=n(t.add),i=0,a=arguments.length;i<a;i++)e.call(t,arguments[i]);return t}},function(t,e,i){var r=i(97),n=i(126),a=i(27),s=i(8),o=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=a(null)};o.prototype.get=function(t,e){return this[t]||(this[t]=e())},o.prototype.next=function(t,e,i){var a=i?this.objectsByIndex[t]||(this.objectsByIndex[t]=new n):this.primitives||(this.primitives=new r),s=a.get(e);return s||a.set(e,s=new o),s};var h=new o;t.exports=function(){var t,e,i=h,r=arguments.length;for(t=0;t<r;t++)s(e=arguments[t])&&(i=i.next(t,e,!0));if(this===Object&&i===h)throw TypeError("Composite keys must contain a non-primitive component");for(t=0;t<r;t++)s(e=arguments[t])||(i=i.next(t,e,!1));return i}},function(t,e){t.exports=Math.scale||function(t,e,i,r,n){return 0===arguments.length||t!=t||e!=e||i!=i||r!=r||n!=n?NaN:t===1/0||t===-1/0?t:(t-e)*(n-r)/(i-e)+r}},function(t,e,i){"use strict";var r=i(17),n=i(51),a=i(8),s=i(81),o=i(9),h="Incorrect Number.range arguments",l=r.set,c=r.getterFor("RangeIterator"),u=n((function(t,e,i,r,n,s){if(typeof t!=r||e!==1/0&&e!==-1/0&&typeof e!=r)throw new TypeError(h);if(t===1/0||t===-1/0)throw new RangeError(h);var c,u=e>t,d=!1;if(void 0===i)c=void 0;else if(a(i))c=i.step,d=!!i.inclusive;else{if(typeof i!=r)throw new TypeError(h);c=i}if(null==c&&(c=u?s:-s),typeof c!=r)throw new TypeError(h);if(c===1/0||c===-1/0||c===n&&t!==e)throw new RangeError(h);l(this,{type:"RangeIterator",start:t,end:e,step:c,inclusiveEnd:d,hitsEnd:t!=t||e!=e||c!=c||e>t!=c>n,currentCount:n,zero:n}),o||(this.start=t,this.end=e,this.step=c,this.inclusive=d)}),"RangeIterator",(function(){var t=c(this);if(t.hitsEnd)return{value:void 0,done:!0};var e=t.start,i=t.end,r=e+t.step*t.currentCount++;r===i&&(t.hitsEnd=!0);var n=t.inclusiveEnd;return(i>e?n?r>i:r>=i:n?i>r:i>=r)?{value:void 0,done:t.hitsEnd=!0}:{value:r,done:!1}})),d=function(t){return{get:t,set:function(){},configurable:!0,enumerable:!1}};o&&s(u.prototype,{start:d((function(){return c(this).start})),end:d((function(){return c(this).end})),inclusive:d((function(){return c(this).inclusiveEnd})),step:d((function(){return c(this).step}))}),t.exports=u},function(t,e,i){var r=i(47),n=i(7)("asyncIterator");t.exports=function(t){var e=t[n];return void 0===e?r(t):e}},function(t,e,i){"use strict";var r=i(1);t.exports=function(t,e){var i=r(this),n=i.has(t)&&"update"in e?e.update(i.get(t),t,i):e.insert(t,i);return i.set(t,n),n}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,i){i(132),t.exports=i(663)},function(t,e,i){i(188),i(393),i(563);var r=i(36);t.exports=r},function(t,e,i){i(189),i(191),i(192),i(193),i(194),i(195),i(196),i(197),i(198),i(199),i(200),i(201),i(202),i(203),i(204),i(141),i(205),i(206),i(207),i(208),i(209),i(210),i(211),i(212),i(213),i(214),i(215),i(216),i(217),i(218),i(219),i(220),i(221),i(222),i(223),i(224),i(225),i(226),i(227),i(228),i(229),i(230),i(231),i(232),i(86),i(233),i(234),i(235),i(149),i(236),i(237),i(238),i(239),i(240),i(241),i(242),i(243),i(244),i(245),i(246),i(247),i(248),i(249),i(250),i(251),i(252),i(253),i(254),i(255),i(256),i(258),i(259),i(260),i(261),i(262),i(263),i(264),i(265),i(266),i(267),i(153),i(268),i(269),i(270),i(271),i(272),i(273),i(274),i(275),i(276),i(277),i(155),i(278),i(279),i(280),i(281),i(282),i(283),i(284),i(285),i(286),i(287),i(288),i(289),i(290),i(156),i(291),i(119),i(292),i(293),i(294),i(295),i(296),i(297),i(298),i(299),i(300),i(301),i(302),i(303),i(304),i(305),i(306),i(307),i(308),i(309),i(310),i(311),i(312),i(313),i(314),i(315),i(316),i(317),i(318),i(319),i(320),i(321),i(322),i(323),i(324),i(325),i(326),i(327),i(328),i(329),i(330),i(332),i(333),i(335),i(336),i(337),i(168),i(169),i(338),i(97),i(171),i(126),i(339),i(340),i(342),i(343),i(344),i(345),i(346),i(347),i(348),i(349),i(350),i(351),i(352),i(353),i(354),i(355),i(356),i(357),i(358),i(359),i(360),i(361),i(362),i(363),i(364),i(365),i(366),i(367),i(368),i(369),i(370),i(371),i(372),i(373),i(374),i(375),i(376),i(377),i(378),i(379),i(380),i(381),i(382),i(383),i(384),i(385),i(386),i(387),i(388),i(389),i(390),i(391),i(392);var r=i(36);t.exports=r},function(t,e,i){"use strict";var r=i(0),n=i(5),a=i(14),s=i(3),o=i(9),h=i(109),l=i(137),c=i(2),u=i(15),d=i(45),p=i(8),f=i(1),g=i(12),v=i(29),m=i(33),y=i(38),C=i(27),x=i(56),T=i(48),S=i(139),w=i(108),A=i(23),b=i(13),k=i(77),_=i(16),P=i(24),I=i(80),D=i(79),E=i(64),M=i(63),O=i(7),R=i(140),L=i(19),N=i(34),$=i(17),j=i(20).forEach,H=D("hidden"),F=O("toPrimitive"),V=$.set,B=$.getterFor("Symbol"),W=Object.prototype,U=n.Symbol,X=a("JSON","stringify"),z=A.f,q=b.f,Y=S.f,G=k.f,K=I("symbols"),Z=I("op-symbols"),Q=I("string-to-symbol-registry"),J=I("symbol-to-string-registry"),tt=I("wks"),et=n.QObject,it=!et||!et.prototype||!et.prototype.findChild,rt=o&&c((function(){return 7!=C(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a}))?function(t,e,i){var r=z(W,e);r&&delete W[e],q(t,e,i),r&&t!==W&&q(W,e,r)}:q,nt=function(t,e){var i=K[t]=C(U.prototype);return V(i,{type:"Symbol",tag:t,description:e}),o||(i.description=e),i},at=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof U},st=function(t,e,i){t===W&&st(Z,e,i),f(t);var r=m(e,!0);return f(i),u(K,r)?(i.enumerable?(u(t,H)&&t[H][r]&&(t[H][r]=!1),i=C(i,{enumerable:y(0,!1)})):(u(t,H)||q(t,H,y(1,{})),t[H][r]=!0),rt(t,r,i)):q(t,r,i)},ot=function(t,e){f(t);var i=v(e),r=x(i).concat(ut(i));return j(r,(function(e){o&&!ht.call(i,e)||st(t,e,i[e])})),t},ht=function(t){var e=m(t,!0),i=G.call(this,e);return!(this===W&&u(K,e)&&!u(Z,e))&&(!(i||!u(this,e)||!u(K,e)||u(this,H)&&this[H][e])||i)},lt=function(t,e){var i=v(t),r=m(e,!0);if(i!==W||!u(K,r)||u(Z,r)){var n=z(i,r);return!n||!u(K,r)||u(i,H)&&i[H][r]||(n.enumerable=!0),n}},ct=function(t){var e=Y(v(t)),i=[];return j(e,(function(t){u(K,t)||u(E,t)||i.push(t)})),i},ut=function(t){var e=t===W,i=Y(e?Z:v(t)),r=[];return j(i,(function(t){!u(K,t)||e&&!u(W,t)||r.push(K[t])})),r};(h||(P((U=function(){if(this instanceof U)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=M(t),i=function(t){this===W&&i.call(Z,t),u(this,H)&&u(this[H],e)&&(this[H][e]=!1),rt(this,e,y(1,t))};return o&&it&&rt(W,e,{configurable:!0,set:i}),nt(e,t)}).prototype,"toString",(function(){return B(this).tag})),P(U,"withoutSetter",(function(t){return nt(M(t),t)})),k.f=ht,b.f=st,A.f=lt,T.f=S.f=ct,w.f=ut,R.f=function(t){return nt(O(t),t)},o&&(q(U.prototype,"description",{configurable:!0,get:function(){return B(this).description}}),s||P(W,"propertyIsEnumerable",ht,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!h,sham:!h},{Symbol:U}),j(x(tt),(function(t){L(t)})),r({target:"Symbol",stat:!0,forced:!h},{for:function(t){var e=String(t);if(u(Q,e))return Q[e];var i=U(e);return Q[e]=i,J[i]=e,i},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(u(J,t))return J[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!h,sham:!o},{create:function(t,e){return void 0===e?C(t):ot(C(t),e)},defineProperty:st,defineProperties:ot,getOwnPropertyDescriptor:lt}),r({target:"Object",stat:!0,forced:!h},{getOwnPropertyNames:ct,getOwnPropertySymbols:ut}),r({target:"Object",stat:!0,forced:c((function(){w.f(1)}))},{getOwnPropertySymbols:function(t){return w.f(g(t))}}),X)&&r({target:"JSON",stat:!0,forced:!h||c((function(){var t=U();return"[null]"!=X([t])||"{}"!=X({a:t})||"{}"!=X(Object(t))}))},{stringify:function(t,e,i){for(var r,n=[t],a=1;arguments.length>a;)n.push(arguments[a++]);if(r=e,(p(e)||void 0!==t)&&!at(t))return d(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!at(e))return e}),n[1]=e,X.apply(null,n)}});U.prototype[F]||_(U.prototype,F,U.prototype.valueOf),N(U,"Symbol"),E[H]=!0},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){i(19)("asyncIterator")},function(t,e,i){"use strict";var r=i(0),n=i(9),a=i(5),s=i(15),o=i(8),h=i(13).f,l=i(135),c=a.Symbol;if(n&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var u={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new c(t):void 0===t?c():c(t);return""===t&&(u[e]=!0),e};l(d,c);var p=d.prototype=c.prototype;p.constructor=d;var f=p.toString,g="Symbol(test)"==String(c("test")),v=/^Symbol\((.*)\)[^)]+$/;h(p,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=f.call(t);if(s(u,t))return"";var i=g?e.slice(7,-1):e.replace(v,"$1");return""===i?void 0:i}}),r({global:!0,forced:!0},{Symbol:d})}},function(t,e,i){i(19)("hasInstance")},function(t,e,i){i(19)("isConcatSpreadable")},function(t,e,i){i(19)("iterator")},function(t,e,i){i(19)("match")},function(t,e,i){i(19)("matchAll")},function(t,e,i){i(19)("replace")},function(t,e,i){i(19)("search")},function(t,e,i){i(19)("species")},function(t,e,i){i(19)("split")},function(t,e,i){i(19)("toPrimitive")},function(t,e,i){i(19)("toStringTag")},function(t,e,i){i(19)("unscopables")},function(t,e,i){var r=i(0),n=i(143);r({target:"Array",stat:!0,forced:!i(83)((function(t){Array.from(t)}))},{from:n})},function(t,e,i){i(0)({target:"Array",stat:!0},{isArray:i(45)})},function(t,e,i){"use strict";var r=i(0),n=i(2),a=i(49);r({target:"Array",stat:!0,forced:n((function(){function t(){}return!(Array.of.call(t)instanceof t)}))},{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)a(i,t,arguments[t++]);return i.length=e,i}})},function(t,e,i){"use strict";var r=i(0),n=i(2),a=i(45),s=i(8),o=i(12),h=i(10),l=i(49),c=i(57),u=i(69),d=i(7),p=i(70),f=d("isConcatSpreadable"),g=p>=51||!n((function(){var t=[];return t[f]=!1,t.concat()[0]!==t})),v=u("concat"),m=function(t){if(!s(t))return!1;var e=t[f];return void 0!==e?!!e:a(t)};r({target:"Array",proto:!0,forced:!g||!v},{concat:function(t){var e,i,r,n,a,s=o(this),u=c(s,0),d=0;for(e=-1,r=arguments.length;e<r;e++)if(m(a=-1===e?s:arguments[e])){if(d+(n=h(a.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(i=0;i<n;i++,d++)i in a&&l(u,d,a[i])}else{if(d>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(u,d++,a)}return u.length=d,u}})},function(t,e,i){var r=i(0),n=i(144),a=i(30);r({target:"Array",proto:!0},{copyWithin:n}),a("copyWithin")},function(t,e,i){"use strict";var r=i(0),n=i(20).every,a=i(40),s=i(28),o=a("every"),h=s("every");r({target:"Array",proto:!0,forced:!o||!h},{every:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var r=i(0),n=i(114),a=i(30);r({target:"Array",proto:!0},{fill:n}),a("fill")},function(t,e,i){"use strict";var r=i(0),n=i(20).filter,a=i(69),s=i(28),o=a("filter"),h=s("filter");r({target:"Array",proto:!0,forced:!o||!h},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var r=i(0),n=i(20).find,a=i(30),s=i(28),o=!0,h=s("find");"find"in[]&&Array(1).find((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!h},{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("find")},function(t,e,i){"use strict";var r=i(0),n=i(20).findIndex,a=i(30),s=i(28),o=!0,h=s("findIndex");"findIndex"in[]&&Array(1).findIndex((function(){o=!1})),r({target:"Array",proto:!0,forced:o||!h},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("findIndex")},function(t,e,i){"use strict";var r=i(0),n=i(145),a=i(12),s=i(10),o=i(26),h=i(57);r({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=a(this),i=s(e.length),r=h(e,0);return r.length=n(r,e,e,i,0,void 0===t?1:o(t)),r}})},function(t,e,i){"use strict";var r=i(0),n=i(145),a=i(12),s=i(10),o=i(4),h=i(57);r({target:"Array",proto:!0},{flatMap:function(t){var e,i=a(this),r=s(i.length);return o(t),(e=h(i,0)).length=n(e,i,i,r,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},function(t,e,i){"use strict";var r=i(0),n=i(146);r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},function(t,e,i){"use strict";var r=i(0),n=i(65).includes,a=i(30);r({target:"Array",proto:!0,forced:!i(28)("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("includes")},function(t,e,i){"use strict";var r=i(0),n=i(65).indexOf,a=i(40),s=i(28),o=[].indexOf,h=!!o&&1/[1].indexOf(1,-0)<0,l=a("indexOf"),c=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:h||!l||!c},{indexOf:function(t){return h?o.apply(this,arguments)||0:n(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var r=i(0),n=i(62),a=i(29),s=i(40),o=[].join,h=n!=Object,l=s("join",",");r({target:"Array",proto:!0,forced:h||!l},{join:function(t){return o.call(a(this),void 0===t?",":t)}})},function(t,e,i){var r=i(0),n=i(147);r({target:"Array",proto:!0,forced:n!==[].lastIndexOf},{lastIndexOf:n})},function(t,e,i){"use strict";var r=i(0),n=i(20).map,a=i(69),s=i(28),o=a("map"),h=s("map");r({target:"Array",proto:!0,forced:!o||!h},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var r=i(0),n=i(85).left,a=i(40),s=i(28),o=i(70),h=i(58),l=a("reduce"),c=s("reduce",{1:0});r({target:"Array",proto:!0,forced:!l||!c||!h&&o>79&&o<83},{reduce:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var r=i(0),n=i(85).right,a=i(40),s=i(28),o=i(70),h=i(58),l=a("reduceRight"),c=s("reduce",{1:0});r({target:"Array",proto:!0,forced:!l||!c||!h&&o>79&&o<83},{reduceRight:function(t){return n(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var r=i(0),n=i(45),a=[].reverse,s=[1,2];r({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return n(this)&&(this.length=this.length),a.call(this)}})},function(t,e,i){"use strict";var r=i(0),n=i(8),a=i(45),s=i(44),o=i(10),h=i(29),l=i(49),c=i(7),u=i(69),d=i(28),p=u("slice"),f=d("slice",{ACCESSORS:!0,0:0,1:2}),g=c("species"),v=[].slice,m=Math.max;r({target:"Array",proto:!0,forced:!p||!f},{slice:function(t,e){var i,r,c,u=h(this),d=o(u.length),p=s(t,d),f=s(void 0===e?d:e,d);if(a(u)&&("function"!=typeof(i=u.constructor)||i!==Array&&!a(i.prototype)?n(i)&&null===(i=i[g])&&(i=void 0):i=void 0,i===Array||void 0===i))return v.call(u,p,f);for(r=new(void 0===i?Array:i)(m(f-p,0)),c=0;p<f;p++,c++)p in u&&l(r,c,u[p]);return r.length=c,r}})},function(t,e,i){"use strict";var r=i(0),n=i(20).some,a=i(40),s=i(28),o=a("some"),h=s("some");r({target:"Array",proto:!0,forced:!o||!h},{some:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(12),s=i(2),o=i(40),h=[],l=h.sort,c=s((function(){h.sort(void 0)})),u=s((function(){h.sort(null)})),d=o("sort");r({target:"Array",proto:!0,forced:c||!u||!d},{sort:function(t){return void 0===t?l.call(a(this)):l.call(a(this),n(t))}})},function(t,e,i){"use strict";var r=i(0),n=i(44),a=i(26),s=i(10),o=i(12),h=i(57),l=i(49),c=i(69),u=i(28),d=c("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min;r({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var i,r,c,u,d,p,v=o(this),m=s(v.length),y=n(t,m),C=arguments.length;if(0===C?i=r=0:1===C?(i=0,r=m-y):(i=C-2,r=g(f(a(e),0),m-y)),m+i-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(c=h(v,r),u=0;u<r;u++)(d=y+u)in v&&l(c,u,v[d]);if(c.length=r,i<r){for(u=y;u<m-r;u++)p=u+i,(d=u+r)in v?v[p]=v[d]:delete v[p];for(u=m;u>m-r+i;u--)delete v[u-1]}else if(i>r)for(u=m-r;u>y;u--)p=u+i-1,(d=u+r-1)in v?v[p]=v[d]:delete v[p];for(u=0;u<i;u++)v[u+y]=arguments[u+2];return v.length=m-r+i,c}})},function(t,e,i){i(50)("Array")},function(t,e,i){i(30)("flat")},function(t,e,i){i(30)("flatMap")},function(t,e,i){i(0)({target:"Function",proto:!0},{bind:i(148)})},function(t,e,i){var r=i(9),n=i(13).f,a=Function.prototype,s=a.toString,o=/^\s*function ([^ (]*)/;r&&!("name"in a)&&n(a,"name",{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(t){return""}}})},function(t,e,i){"use strict";var r=i(8),n=i(13),a=i(25),s=i(7)("hasInstance"),o=Function.prototype;s in o||n.f(o,s,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=a(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,i){var r=i(0),n=i(150);r({target:"Object",stat:!0,forced:Object.assign!==n},{assign:n})},function(t,e,i){i(0)({target:"Object",stat:!0,sham:!i(9)},{create:i(27)})},function(t,e,i){var r=i(0),n=i(9);r({target:"Object",stat:!0,forced:!n,sham:!n},{defineProperty:i(13).f})},function(t,e,i){var r=i(0),n=i(9);r({target:"Object",stat:!0,forced:!n,sham:!n},{defineProperties:i(81)})},function(t,e,i){var r=i(0),n=i(151).entries;r({target:"Object",stat:!0},{entries:function(t){return n(t)}})},function(t,e,i){var r=i(0),n=i(71),a=i(2),s=i(8),o=i(52).onFreeze,h=Object.freeze;r({target:"Object",stat:!0,forced:a((function(){h(1)})),sham:!n},{freeze:function(t){return h&&s(t)?h(o(t)):t}})},function(t,e,i){var r=i(0),n=i(6),a=i(49);r({target:"Object",stat:!0},{fromEntries:function(t){var e={};return n(t,(function(t,i){a(e,t,i)}),{AS_ENTRIES:!0}),e}})},function(t,e,i){var r=i(0),n=i(2),a=i(29),s=i(23).f,o=i(9),h=n((function(){s(1)}));r({target:"Object",stat:!0,forced:!o||h,sham:!o},{getOwnPropertyDescriptor:function(t,e){return s(a(t),e)}})},function(t,e,i){var r=i(0),n=i(9),a=i(106),s=i(29),o=i(23),h=i(49);r({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){for(var e,i,r=s(t),n=o.f,l=a(r),c={},u=0;l.length>u;)void 0!==(i=n(r,e=l[u++]))&&h(c,e,i);return c}})},function(t,e,i){var r=i(0),n=i(2),a=i(139).f;r({target:"Object",stat:!0,forced:n((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:a})},function(t,e,i){var r=i(0),n=i(2),a=i(12),s=i(25),o=i(110);r({target:"Object",stat:!0,forced:n((function(){s(1)})),sham:!o},{getPrototypeOf:function(t){return s(a(t))}})},function(t,e,i){i(0)({target:"Object",stat:!0},{is:i(152)})},function(t,e,i){var r=i(0),n=i(2),a=i(8),s=Object.isExtensible;r({target:"Object",stat:!0,forced:n((function(){s(1)}))},{isExtensible:function(t){return!!a(t)&&(!s||s(t))}})},function(t,e,i){var r=i(0),n=i(2),a=i(8),s=Object.isFrozen;r({target:"Object",stat:!0,forced:n((function(){s(1)}))},{isFrozen:function(t){return!a(t)||!!s&&s(t)}})},function(t,e,i){var r=i(0),n=i(2),a=i(8),s=Object.isSealed;r({target:"Object",stat:!0,forced:n((function(){s(1)}))},{isSealed:function(t){return!a(t)||!!s&&s(t)}})},function(t,e,i){var r=i(0),n=i(12),a=i(56);r({target:"Object",stat:!0,forced:i(2)((function(){a(1)}))},{keys:function(t){return a(n(t))}})},function(t,e,i){var r=i(0),n=i(8),a=i(52).onFreeze,s=i(71),o=i(2),h=Object.preventExtensions;r({target:"Object",stat:!0,forced:o((function(){h(1)})),sham:!s},{preventExtensions:function(t){return h&&n(t)?h(a(t)):t}})},function(t,e,i){var r=i(0),n=i(8),a=i(52).onFreeze,s=i(71),o=i(2),h=Object.seal;r({target:"Object",stat:!0,forced:o((function(){h(1)})),sham:!s},{seal:function(t){return h&&n(t)?h(a(t)):t}})},function(t,e,i){i(0)({target:"Object",stat:!0},{setPrototypeOf:i(46)})},function(t,e,i){var r=i(0),n=i(151).values;r({target:"Object",stat:!0},{values:function(t){return n(t)}})},function(t,e,i){var r=i(112),n=i(24),a=i(257);r||n(Object.prototype,"toString",a,{unsafe:!0})},function(t,e,i){"use strict";var r=i(112),n=i(68);t.exports=r?{}.toString:function(){return"[object "+n(this)+"]"}},function(t,e,i){"use strict";var r=i(0),n=i(9),a=i(87),s=i(12),o=i(4),h=i(13);n&&r({target:"Object",proto:!0,forced:a},{__defineGetter__:function(t,e){h.f(s(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,i){"use strict";var r=i(0),n=i(9),a=i(87),s=i(12),o=i(4),h=i(13);n&&r({target:"Object",proto:!0,forced:a},{__defineSetter__:function(t,e){h.f(s(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,i){"use strict";var r=i(0),n=i(9),a=i(87),s=i(12),o=i(33),h=i(25),l=i(23).f;n&&r({target:"Object",proto:!0,forced:a},{__lookupGetter__:function(t){var e,i=s(this),r=o(t,!0);do{if(e=l(i,r))return e.get}while(i=h(i))}})},function(t,e,i){"use strict";var r=i(0),n=i(9),a=i(87),s=i(12),o=i(33),h=i(25),l=i(23).f;n&&r({target:"Object",proto:!0,forced:a},{__lookupSetter__:function(t){var e,i=s(this),r=o(t,!0);do{if(e=l(i,r))return e.set}while(i=h(i))}})},function(t,e,i){var r=i(0),n=i(44),a=String.fromCharCode,s=String.fromCodePoint;r({target:"String",stat:!0,forced:!!s&&1!=s.length},{fromCodePoint:function(t){for(var e,i=[],r=arguments.length,s=0;r>s;){if(e=+arguments[s++],n(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}})},function(t,e,i){var r=i(0),n=i(29),a=i(10);r({target:"String",stat:!0},{raw:function(t){for(var e=n(t.raw),i=a(e.length),r=arguments.length,s=[],o=0;i>o;)s.push(String(e[o++])),o<r&&s.push(String(arguments[o]));return s.join("")}})},function(t,e,i){"use strict";var r=i(0),n=i(59).codeAt;r({target:"String",proto:!0},{codePointAt:function(t){return n(this,t)}})},function(t,e,i){"use strict";var r,n=i(0),a=i(23).f,s=i(10),o=i(117),h=i(22),l=i(118),c=i(3),u="".endsWith,d=Math.min,p=l("endsWith");n({target:"String",proto:!0,forced:!!(c||p||(r=a(String.prototype,"endsWith"),!r||r.writable))&&!p},{endsWith:function(t){var e=String(h(this));o(t);var i=arguments.length>1?arguments[1]:void 0,r=s(e.length),n=void 0===i?r:d(s(i),r),a=String(t);return u?u.call(e,a,n):e.slice(n-a.length,n)===a}})},function(t,e,i){"use strict";var r=i(0),n=i(117),a=i(22);r({target:"String",proto:!0,forced:!i(118)("includes")},{includes:function(t){return!!~String(a(this)).indexOf(n(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var r=i(88),n=i(1),a=i(10),s=i(22),o=i(91),h=i(92);r("match",1,(function(t,e,i){return[function(e){var i=s(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,i):new RegExp(e)[t](String(i))},function(t){var r=i(e,t,this);if(r.done)return r.value;var s=n(t),l=String(this);if(!s.global)return h(s,l);var c=s.unicode;s.lastIndex=0;for(var u,d=[],p=0;null!==(u=h(s,l));){var f=String(u[0]);d[p]=f,""===f&&(s.lastIndex=o(l,a(s.lastIndex),c)),p++}return 0===p?null:d}]}))},function(t,e,i){"use strict";var r=i(0),n=i(120).end;r({target:"String",proto:!0,forced:i(154)},{padEnd:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var r=i(0),n=i(120).start;r({target:"String",proto:!0,forced:i(154)},{padStart:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){i(0)({target:"String",proto:!0},{repeat:i(121)})},function(t,e,i){"use strict";var r=i(88),n=i(1),a=i(12),s=i(10),o=i(26),h=i(22),l=i(91),c=i(92),u=Math.max,d=Math.min,p=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;r("replace",2,(function(t,e,i,r){var v=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,m=r.REPLACE_KEEPS_$0,y=v?"$":"$0";return[function(i,r){var n=h(this),a=null==i?void 0:i[t];return void 0!==a?a.call(i,n,r):e.call(String(n),i,r)},function(t,r){if(!v&&m||"string"==typeof r&&-1===r.indexOf(y)){var a=i(e,t,this,r);if(a.done)return a.value}var h=n(t),p=String(this),f="function"==typeof r;f||(r=String(r));var g=h.global;if(g){var x=h.unicode;h.lastIndex=0}for(var T=[];;){var S=c(h,p);if(null===S)break;if(T.push(S),!g)break;""===String(S[0])&&(h.lastIndex=l(p,s(h.lastIndex),x))}for(var w,A="",b=0,k=0;k<T.length;k++){S=T[k];for(var _=String(S[0]),P=u(d(o(S.index),p.length),0),I=[],D=1;D<S.length;D++)I.push(void 0===(w=S[D])?w:String(w));var E=S.groups;if(f){var M=[_].concat(I,P,p);void 0!==E&&M.push(E);var O=String(r.apply(void 0,M))}else O=C(_,p,P,I,E,r);P>=b&&(A+=p.slice(b,P)+O,b=P+_.length)}return A+p.slice(b)}];function C(t,i,r,n,s,o){var h=r+t.length,l=n.length,c=g;return void 0!==s&&(s=a(s),c=f),e.call(o,c,(function(e,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,r);case"'":return i.slice(h);case"<":o=s[a.slice(1,-1)];break;default:var c=+a;if(0===c)return e;if(c>l){var u=p(c/10);return 0===u?e:u<=l?void 0===n[u-1]?a.charAt(1):n[u-1]+a.charAt(1):e}o=n[c-1]}return void 0===o?"":o}))}}))},function(t,e,i){"use strict";var r=i(88),n=i(1),a=i(22),s=i(152),o=i(92);r("search",1,(function(t,e,i){return[function(e){var i=a(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,i):new RegExp(e)[t](String(i))},function(t){var r=i(e,t,this);if(r.done)return r.value;var a=n(t),h=String(this),l=a.lastIndex;s(l,0)||(a.lastIndex=0);var c=o(a,h);return s(a.lastIndex,l)||(a.lastIndex=l),null===c?-1:c.index}]}))},function(t,e,i){"use strict";var r=i(88),n=i(72),a=i(1),s=i(22),o=i(21),h=i(91),l=i(10),c=i(92),u=i(89),d=i(2),p=[].push,f=Math.min,g=!d((function(){return!RegExp(4294967295,"y")}));r("split",2,(function(t,e,i){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var r=String(s(this)),a=void 0===i?4294967295:i>>>0;if(0===a)return[];if(void 0===t)return[r];if(!n(t))return e.call(r,t,a);for(var o,h,l,c=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=new RegExp(t.source,d+"g");(o=u.call(g,r))&&!((h=g.lastIndex)>f&&(c.push(r.slice(f,o.index)),o.length>1&&o.index<r.length&&p.apply(c,o.slice(1)),l=o[0].length,f=h,c.length>=a));)g.lastIndex===o.index&&g.lastIndex++;return f===r.length?!l&&g.test("")||c.push(""):c.push(r.slice(f)),c.length>a?c.slice(0,a):c}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var n=s(this),a=null==e?void 0:e[t];return void 0!==a?a.call(e,n,i):r.call(String(n),e,i)},function(t,n){var s=i(r,t,this,n,r!==e);if(s.done)return s.value;var u=a(t),d=String(this),p=o(u,RegExp),v=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),y=new p(g?u:"^(?:"+u.source+")",m),C=void 0===n?4294967295:n>>>0;if(0===C)return[];if(0===d.length)return null===c(y,d)?[d]:[];for(var x=0,T=0,S=[];T<d.length;){y.lastIndex=g?T:0;var w,A=c(y,g?d:d.slice(T));if(null===A||(w=f(l(y.lastIndex+(g?0:T)),d.length))===x)T=h(d,T,v);else{if(S.push(d.slice(x,T)),S.length===C)return S;for(var b=1;b<=A.length-1;b++)if(S.push(A[b]),S.length===C)return S;T=x=w}}return S.push(d.slice(x)),S}]}),!g)},function(t,e,i){"use strict";var r,n=i(0),a=i(23).f,s=i(10),o=i(117),h=i(22),l=i(118),c=i(3),u="".startsWith,d=Math.min,p=l("startsWith");n({target:"String",proto:!0,forced:!!(c||p||(r=a(String.prototype,"startsWith"),!r||r.writable))&&!p},{startsWith:function(t){var e=String(h(this));o(t);var i=s(d(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return u?u.call(e,r,i):e.slice(i,i+r.length)===r}})},function(t,e,i){"use strict";var r=i(0),n=i(61).trim;r({target:"String",proto:!0,forced:i(122)("trim")},{trim:function(){return n(this)}})},function(t,e,i){"use strict";var r=i(0),n=i(61).start,a=i(122)("trimStart"),s=a?function(){return n(this)}:"".trimStart;r({target:"String",proto:!0,forced:a},{trimStart:s,trimLeft:s})},function(t,e,i){"use strict";var r=i(0),n=i(61).end,a=i(122)("trimEnd"),s=a?function(){return n(this)}:"".trimEnd;r({target:"String",proto:!0,forced:a},{trimEnd:s,trimRight:s})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("anchor")},{anchor:function(t){return n(this,"a","name",t)}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("big")},{big:function(){return n(this,"big","","")}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("blink")},{blink:function(){return n(this,"blink","","")}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("bold")},{bold:function(){return n(this,"b","","")}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("fixed")},{fixed:function(){return n(this,"tt","","")}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("fontcolor")},{fontcolor:function(t){return n(this,"font","color",t)}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("fontsize")},{fontsize:function(t){return n(this,"font","size",t)}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("italics")},{italics:function(){return n(this,"i","","")}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("link")},{link:function(t){return n(this,"a","href",t)}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("small")},{small:function(){return n(this,"small","","")}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("strike")},{strike:function(){return n(this,"strike","","")}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("sub")},{sub:function(){return n(this,"sub","","")}})},function(t,e,i){"use strict";var r=i(0),n=i(31);r({target:"String",proto:!0,forced:i(32)("sup")},{sup:function(){return n(this,"sup","","")}})},function(t,e,i){var r=i(9),n=i(5),a=i(66),s=i(94),o=i(13).f,h=i(48).f,l=i(72),c=i(60),u=i(90),d=i(24),p=i(2),f=i(17).set,g=i(50),v=i(7)("match"),m=n.RegExp,y=m.prototype,C=/a/g,x=/a/g,T=new m(C)!==C,S=u.UNSUPPORTED_Y;if(r&&a("RegExp",!T||S||p((function(){return x[v]=!1,m(C)!=C||m(x)==x||"/a/i"!=m(C,"i")})))){for(var w=function(t,e){var i,r=this instanceof w,n=l(t),a=void 0===e;if(!r&&n&&t.constructor===w&&a)return t;T?n&&!a&&(t=t.source):t instanceof w&&(a&&(e=c.call(t)),t=t.source),S&&(i=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var o=s(T?new m(t,e):m(t,e),r?this:y,w);return S&&i&&f(o,{sticky:i}),o},A=function(t){t in w||o(w,t,{configurable:!0,get:function(){return m[t]},set:function(e){m[t]=e}})},b=h(m),k=0;b.length>k;)A(b[k++]);y.constructor=w,w.prototype=y,d(n,"RegExp",w)}g("RegExp")},function(t,e,i){var r=i(9),n=i(13),a=i(60),s=i(90).UNSUPPORTED_Y;r&&("g"!=/./g.flags||s)&&n.f(RegExp.prototype,"flags",{configurable:!0,get:a})},function(t,e,i){var r=i(9),n=i(90).UNSUPPORTED_Y,a=i(13).f,s=i(17).get,o=RegExp.prototype;r&&n&&a(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==o){if(this instanceof RegExp)return!!s(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}})},function(t,e,i){"use strict";i(119);var r,n,a=i(0),s=i(8),o=(r=!1,(n=/[ac]/).exec=function(){return r=!0,/./.exec.apply(this,arguments)},!0===n.test("abc")&&r),h=/./.test;a({target:"RegExp",proto:!0,forced:!o},{test:function(t){if("function"!=typeof this.exec)return h.call(this,t);var e=this.exec(t);if(null!==e&&!s(e))throw new Error("RegExp exec method returned something other than an Object or null");return!!e}})},function(t,e,i){"use strict";var r=i(24),n=i(1),a=i(2),s=i(60),o=RegExp.prototype,h=o.toString,l=a((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),c="toString"!=h.name;(l||c)&&r(RegExp.prototype,"toString",(function(){var t=n(this),e=String(t.source),i=t.flags;return"/"+e+"/"+String(void 0===i&&t instanceof RegExp&&!("flags"in o)?s.call(t):i)}),{unsafe:!0})},function(t,e,i){var r=i(0),n=i(123);r({global:!0,forced:parseInt!=n},{parseInt:n})},function(t,e,i){var r=i(0),n=i(157);r({global:!0,forced:parseFloat!=n},{parseFloat:n})},function(t,e,i){"use strict";var r=i(9),n=i(5),a=i(66),s=i(24),o=i(15),h=i(39),l=i(94),c=i(33),u=i(2),d=i(27),p=i(48).f,f=i(23).f,g=i(13).f,v=i(61).trim,m=n.Number,y=m.prototype,C="Number"==h(d(y)),x=function(t){var e,i,r,n,a,s,o,h,l=c(t,!1);if("string"==typeof l&&l.length>2)if(43===(e=(l=v(l)).charCodeAt(0))||45===e){if(88===(i=l.charCodeAt(2))||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+l}for(s=(a=l.slice(2)).length,o=0;o<s;o++)if((h=a.charCodeAt(o))<48||h>n)return NaN;return parseInt(a,r)}return+l};if(a("Number",!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var T,S=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof S&&(C?u((function(){y.valueOf.call(i)})):"Number"!=h(i))?l(new m(x(e)),i,S):x(e)},w=r?p(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),A=0;w.length>A;A++)o(m,T=w[A])&&!o(S,T)&&g(S,T,f(m,T));S.prototype=y,y.constructor=S,s(n,"Number",S)}},function(t,e,i){i(0)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(t,e,i){i(0)({target:"Number",stat:!0},{isFinite:i(158)})},function(t,e,i){i(0)({target:"Number",stat:!0},{isInteger:i(159)})},function(t,e,i){i(0)({target:"Number",stat:!0},{isNaN:function(t){return t!=t}})},function(t,e,i){var r=i(0),n=i(159),a=Math.abs;r({target:"Number",stat:!0},{isSafeInteger:function(t){return n(t)&&a(t)<=9007199254740991}})},function(t,e,i){i(0)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,i){i(0)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,i){var r=i(0),n=i(157);r({target:"Number",stat:!0,forced:Number.parseFloat!=n},{parseFloat:n})},function(t,e,i){var r=i(0),n=i(123);r({target:"Number",stat:!0,forced:Number.parseInt!=n},{parseInt:n})},function(t,e,i){"use strict";var r=i(0),n=i(26),a=i(160),s=i(121),o=i(2),h=1..toFixed,l=Math.floor,c=function(t,e,i){return 0===e?i:e%2==1?c(t,e-1,i*t):c(t*t,e/2,i)};r({target:"Number",proto:!0,forced:h&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){h.call({})}))},{toFixed:function(t){var e,i,r,o,h=a(this),u=n(t),d=[0,0,0,0,0,0],p="",f="0",g=function(t,e){for(var i=-1,r=e;++i<6;)r+=t*d[i],d[i]=r%1e7,r=l(r/1e7)},v=function(t){for(var e=6,i=0;--e>=0;)i+=d[e],d[e]=l(i/t),i=i%t*1e7},m=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==d[t]){var i=String(d[t]);e=""===e?i:e+s.call("0",7-i.length)+i}return e};if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(h!=h)return"NaN";if(h<=-1e21||h>=1e21)return String(h);if(h<0&&(p="-",h=-h),h>1e-21)if(i=(e=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(h*c(2,69,1))-69)<0?h*c(2,-e,1):h/c(2,e,1),i*=4503599627370496,(e=52-e)>0){for(g(0,i),r=u;r>=7;)g(1e7,0),r-=7;for(g(c(10,r,1),0),r=e-1;r>=23;)v(1<<23),r-=23;v(1<<r),g(1,1),v(2),f=m()}else g(0,i),g(1<<-e,0),f=m()+s.call("0",u);return f=u>0?p+((o=f.length)<=u?"0."+s.call("0",u-o)+f:f.slice(0,o-u)+"."+f.slice(o-u)):p+f}})},function(t,e,i){"use strict";var r=i(0),n=i(2),a=i(160),s=1..toPrecision;r({target:"Number",proto:!0,forced:n((function(){return"1"!==s.call(1,void 0)}))||!n((function(){s.call({})}))},{toPrecision:function(t){return void 0===t?s.call(a(this)):s.call(a(this),t)}})},function(t,e,i){var r=i(0),n=i(161),a=Math.acosh,s=Math.log,o=Math.sqrt,h=Math.LN2;r({target:"Math",stat:!0,forced:!a||710!=Math.floor(a(Number.MAX_VALUE))||a(1/0)!=1/0},{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?s(t)+h:n(t-1+o(t-1)*o(t+1))}})},function(t,e,i){var r=i(0),n=Math.asinh,a=Math.log,s=Math.sqrt;r({target:"Math",stat:!0,forced:!(n&&1/n(0)>0)},{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):a(e+s(e*e+1)):e}})},function(t,e,i){var r=i(0),n=Math.atanh,a=Math.log;r({target:"Math",stat:!0,forced:!(n&&1/n(-0)<0)},{atanh:function(t){return 0==(t=+t)?t:a((1+t)/(1-t))/2}})},function(t,e,i){var r=i(0),n=i(124),a=Math.abs,s=Math.pow;r({target:"Math",stat:!0},{cbrt:function(t){return n(t=+t)*s(a(t),1/3)}})},function(t,e,i){var r=i(0),n=Math.floor,a=Math.log,s=Math.LOG2E;r({target:"Math",stat:!0},{clz32:function(t){return(t>>>=0)?31-n(a(t+.5)*s):32}})},function(t,e,i){var r=i(0),n=i(95),a=Math.cosh,s=Math.abs,o=Math.E;r({target:"Math",stat:!0,forced:!a||a(710)===1/0},{cosh:function(t){var e=n(s(t)-1)+1;return(e+1/(e*o*o))*(o/2)}})},function(t,e,i){var r=i(0),n=i(95);r({target:"Math",stat:!0,forced:n!=Math.expm1},{expm1:n})},function(t,e,i){i(0)({target:"Math",stat:!0},{fround:i(162)})},function(t,e,i){var r=i(0),n=Math.hypot,a=Math.abs,s=Math.sqrt;r({target:"Math",stat:!0,forced:!!n&&n(1/0,NaN)!==1/0},{hypot:function(t,e){for(var i,r,n=0,o=0,h=arguments.length,l=0;o<h;)l<(i=a(arguments[o++]))?(n=n*(r=l/i)*r+1,l=i):n+=i>0?(r=i/l)*r:i;return l===1/0?1/0:l*s(n)}})},function(t,e,i){var r=i(0),n=i(2),a=Math.imul;r({target:"Math",stat:!0,forced:n((function(){return-5!=a(4294967295,5)||2!=a.length}))},{imul:function(t,e){var i=+t,r=+e,n=65535&i,a=65535&r;return 0|n*a+((65535&i>>>16)*a+n*(65535&r>>>16)<<16>>>0)}})},function(t,e,i){var r=i(0),n=Math.log,a=Math.LOG10E;r({target:"Math",stat:!0},{log10:function(t){return n(t)*a}})},function(t,e,i){i(0)({target:"Math",stat:!0},{log1p:i(161)})},function(t,e,i){var r=i(0),n=Math.log,a=Math.LN2;r({target:"Math",stat:!0},{log2:function(t){return n(t)/a}})},function(t,e,i){i(0)({target:"Math",stat:!0},{sign:i(124)})},function(t,e,i){var r=i(0),n=i(2),a=i(95),s=Math.abs,o=Math.exp,h=Math.E;r({target:"Math",stat:!0,forced:n((function(){return-2e-17!=Math.sinh(-2e-17)}))},{sinh:function(t){return s(t=+t)<1?(a(t)-a(-t))/2:(o(t-1)-o(-t-1))*(h/2)}})},function(t,e,i){var r=i(0),n=i(95),a=Math.exp;r({target:"Math",stat:!0},{tanh:function(t){var e=n(t=+t),i=n(-t);return e==1/0?1:i==1/0?-1:(e-i)/(a(t)+a(-t))}})},function(t,e,i){i(34)(Math,"Math",!0)},function(t,e,i){var r=i(0),n=Math.ceil,a=Math.floor;r({target:"Math",stat:!0},{trunc:function(t){return(t>0?a:n)(t)}})},function(t,e,i){i(0)({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},function(t,e,i){"use strict";var r=i(0),n=i(2),a=i(12),s=i(33);r({target:"Date",proto:!0,forced:n((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(t){var e=a(this),i=s(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},function(t,e,i){var r=i(0),n=i(331);r({target:"Date",proto:!0,forced:Date.prototype.toISOString!==n},{toISOString:n})},function(t,e,i){"use strict";var r=i(2),n=i(120).start,a=Math.abs,s=Date.prototype,o=s.getTime,h=s.toISOString;t.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=h.call(new Date(-50000000000001))}))||!r((function(){h.call(new Date(NaN))}))?function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+n(a(t),i?6:4,0)+"-"+n(this.getUTCMonth()+1,2,0)+"-"+n(this.getUTCDate(),2,0)+"T"+n(this.getUTCHours(),2,0)+":"+n(this.getUTCMinutes(),2,0)+":"+n(this.getUTCSeconds(),2,0)+"."+n(e,3,0)+"Z"}:h},function(t,e,i){var r=i(24),n=Date.prototype,a=n.toString,s=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(n,"toString",(function(){var t=s.call(this);return t==t?a.call(this):"Invalid Date"}))},function(t,e,i){var r=i(16),n=i(334),a=i(7)("toPrimitive"),s=Date.prototype;a in s||r(s,a,n)},function(t,e,i){"use strict";var r=i(1),n=i(33);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return n(r(this),"number"!==t)}},function(t,e,i){var r=i(0),n=i(14),a=i(2),s=n("JSON","stringify"),o=/[\uD800-\uDFFF]/g,h=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,c=function(t,e,i){var r=i.charAt(e-1),n=i.charAt(e+1);return h.test(t)&&!l.test(n)||l.test(t)&&!h.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},u=a((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&r({target:"JSON",stat:!0,forced:u},{stringify:function(t,e,i){var r=s.apply(null,arguments);return"string"==typeof r?r.replace(o,c):r}})},function(t,e,i){var r=i(5);i(34)(r.JSON,"JSON",!0)},function(t,e,i){"use strict";var r,n,a,s,o=i(0),h=i(3),l=i(5),c=i(14),u=i(163),d=i(24),p=i(41),f=i(34),g=i(50),v=i(8),m=i(4),y=i(35),C=i(105),x=i(6),T=i(83),S=i(21),w=i(125).set,A=i(165),b=i(166),k=i(167),_=i(73),P=i(96),I=i(17),D=i(66),E=i(7),M=i(58),O=i(70),R=E("species"),L="Promise",N=I.get,$=I.set,j=I.getterFor(L),H=u,F=l.TypeError,V=l.document,B=l.process,W=c("fetch"),U=_.f,X=U,z=!!(V&&V.createEvent&&l.dispatchEvent),q="function"==typeof PromiseRejectionEvent,Y=D(L,(function(){if(!(C(H)!==String(H))){if(66===O)return!0;if(!M&&!q)return!0}if(h&&!H.prototype.finally)return!0;if(O>=51&&/native code/.test(H))return!1;var t=H.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[R]=e,!(t.then((function(){}))instanceof e)})),G=Y||!T((function(t){H.all(t).catch((function(){}))})),K=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},Z=function(t,e){if(!t.notified){t.notified=!0;var i=t.reactions;A((function(){for(var r=t.value,n=1==t.state,a=0;i.length>a;){var s,o,h,l=i[a++],c=n?l.ok:l.fail,u=l.resolve,d=l.reject,p=l.domain;try{c?(n||(2===t.rejection&&et(t),t.rejection=1),!0===c?s=r:(p&&p.enter(),s=c(r),p&&(p.exit(),h=!0)),s===l.promise?d(F("Promise-chain cycle")):(o=K(s))?o.call(s,u,d):u(s)):d(r)}catch(t){p&&!h&&p.exit(),d(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&J(t)}))}},Q=function(t,e,i){var r,n;z?((r=V.createEvent("Event")).promise=e,r.reason=i,r.initEvent(t,!1,!0),l.dispatchEvent(r)):r={promise:e,reason:i},!q&&(n=l["on"+t])?n(r):"unhandledrejection"===t&&k("Unhandled promise rejection",i)},J=function(t){w.call(l,(function(){var e,i=t.facade,r=t.value;if(tt(t)&&(e=P((function(){M?B.emit("unhandledRejection",r,i):Q("unhandledrejection",i,r)})),t.rejection=M||tt(t)?2:1,e.error))throw e.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t){w.call(l,(function(){var e=t.facade;M?B.emit("rejectionHandled",e):Q("rejectionhandled",e,t.value)}))},it=function(t,e,i){return function(r){t(e,r,i)}},rt=function(t,e,i){t.done||(t.done=!0,i&&(t=i),t.value=e,t.state=2,Z(t,!0))},nt=function(t,e,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===e)throw F("Promise can't be resolved itself");var r=K(e);r?A((function(){var i={done:!1};try{r.call(e,it(nt,i,t),it(rt,i,t))}catch(e){rt(i,e,t)}})):(t.value=e,t.state=1,Z(t,!1))}catch(e){rt({done:!1},e,t)}}};Y&&(H=function(t){y(this,H,L),m(t),r.call(this);var e=N(this);try{t(it(nt,e),it(rt,e))}catch(t){rt(e,t)}},(r=function(t){$(this,{type:L,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(H.prototype,{then:function(t,e){var i=j(this),r=U(S(this,H));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=M?B.domain:void 0,i.parent=!0,i.reactions.push(r),0!=i.state&&Z(i,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),n=function(){var t=new r,e=N(t);this.promise=t,this.resolve=it(nt,e),this.reject=it(rt,e)},_.f=U=function(t){return t===H||t===a?new n(t):X(t)},h||"function"!=typeof u||(s=u.prototype.then,d(u.prototype,"then",(function(t,e){var i=this;return new H((function(t,e){s.call(i,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof W&&o({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return b(H,W.apply(l,arguments))}}))),o({global:!0,wrap:!0,forced:Y},{Promise:H}),f(H,L,!1,!0),g(L),a=c(L),o({target:L,stat:!0,forced:Y},{reject:function(t){var e=U(this);return e.reject.call(void 0,t),e.promise}}),o({target:L,stat:!0,forced:h||Y},{resolve:function(t){return b(h&&this===a?H:this,t)}}),o({target:L,stat:!0,forced:G},{all:function(t){var e=this,i=U(e),r=i.resolve,n=i.reject,a=P((function(){var i=m(e.resolve),a=[],s=0,o=1;x(t,(function(t){var h=s++,l=!1;a.push(void 0),o++,i.call(e,t).then((function(t){l||(l=!0,a[h]=t,--o||r(a))}),n)})),--o||r(a)}));return a.error&&n(a.value),i.promise},race:function(t){var e=this,i=U(e),r=i.reject,n=P((function(){var n=m(e.resolve);x(t,(function(t){n.call(e,t).then(i.resolve,r)}))}));return n.error&&r(n.value),i.promise}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(163),s=i(2),o=i(14),h=i(21),l=i(166),c=i(24);r({target:"Promise",proto:!0,real:!0,forced:!!a&&s((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=h(this,o("Promise")),i="function"==typeof t;return this.then(i?function(i){return l(e,t()).then((function(){return i}))}:t,i?function(i){return l(e,t()).then((function(){throw i}))}:t)}}),n||"function"!=typeof a||a.prototype.finally||c(a.prototype,"finally",o("Promise").prototype.finally)},function(t,e,i){"use strict";i(98)("WeakSet",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),i(172))},function(t,e,i){"use strict";var r=i(0),n=i(5),a=i(99),s=i(50),o=a.ArrayBuffer;r({global:!0,forced:n.ArrayBuffer!==o},{ArrayBuffer:o}),s("ArrayBuffer")},function(t,e){var i=Math.abs,r=Math.pow,n=Math.floor,a=Math.log,s=Math.LN2;t.exports={pack:function(t,e,o){var h,l,c,u=new Array(o),d=8*o-e-1,p=(1<<d)-1,f=p>>1,g=23===e?r(2,-24)-r(2,-77):0,v=t<0||0===t&&1/t<0?1:0,m=0;for((t=i(t))!=t||t===1/0?(l=t!=t?1:0,h=p):(h=n(a(t)/s),t*(c=r(2,-h))<1&&(h--,c*=2),(t+=h+f>=1?g/c:g*r(2,1-f))*c>=2&&(h++,c/=2),h+f>=p?(l=0,h=p):h+f>=1?(l=(t*c-1)*r(2,e),h+=f):(l=t*r(2,f-1)*r(2,e),h=0));e>=8;u[m++]=255&l,l/=256,e-=8);for(h=h<<e|l,d+=e;d>0;u[m++]=255&h,h/=256,d-=8);return u[--m]|=128*v,u},unpack:function(t,e){var i,n=t.length,a=8*n-e-1,s=(1<<a)-1,o=s>>1,h=a-7,l=n-1,c=t[l--],u=127&c;for(c>>=7;h>0;u=256*u+t[l],l--,h-=8);for(i=u&(1<<-h)-1,u>>=-h,h+=e;h>0;i=256*i+t[l],l--,h-=8);if(0===u)u=1-o;else{if(u===s)return i?NaN:c?-1/0:1/0;i+=r(2,e),u-=o}return(c?-1:1)*i*r(2,u-e)}}},function(t,e,i){var r=i(0),n=i(11);r({target:"ArrayBuffer",stat:!0,forced:!n.NATIVE_ARRAY_BUFFER_VIEWS},{isView:n.isView})},function(t,e,i){"use strict";var r=i(0),n=i(2),a=i(99),s=i(1),o=i(44),h=i(10),l=i(21),c=a.ArrayBuffer,u=a.DataView,d=c.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:n((function(){return!new c(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(void 0!==d&&void 0===e)return d.call(s(this),t);for(var i=s(this).byteLength,r=o(t,i),n=o(void 0===e?i:e,i),a=new(l(this,c))(h(n-r)),p=new u(this),f=new u(a),g=0;r<n;)f.setUint8(g++,p.getUint8(r++));return a}})},function(t,e,i){var r=i(0),n=i(99);r({global:!0,forced:!i(127)},{DataView:n.DataView})},function(t,e,i){i(42)("Int8",(function(t){return function(e,i,r){return t(this,e,i,r)}}))},function(t,e,i){i(42)("Uint8",(function(t){return function(e,i,r){return t(this,e,i,r)}}))},function(t,e,i){i(42)("Uint8",(function(t){return function(e,i,r){return t(this,e,i,r)}}),!0)},function(t,e,i){i(42)("Int16",(function(t){return function(e,i,r){return t(this,e,i,r)}}))},function(t,e,i){i(42)("Uint16",(function(t){return function(e,i,r){return t(this,e,i,r)}}))},function(t,e,i){i(42)("Int32",(function(t){return function(e,i,r){return t(this,e,i,r)}}))},function(t,e,i){i(42)("Uint32",(function(t){return function(e,i,r){return t(this,e,i,r)}}))},function(t,e,i){i(42)("Float32",(function(t){return function(e,i,r){return t(this,e,i,r)}}))},function(t,e,i){i(42)("Float64",(function(t){return function(e,i,r){return t(this,e,i,r)}}))},function(t,e,i){"use strict";var r=i(128);(0,i(11).exportTypedArrayStaticMethod)("from",i(175),r)},function(t,e,i){"use strict";var r=i(11),n=i(128),a=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var t=0,e=arguments.length,i=new(a(this))(e);e>t;)i[t]=arguments[t++];return i}),n)},function(t,e,i){"use strict";var r=i(11),n=i(144),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("copyWithin",(function(t,e){return n.call(a(this),t,e,arguments.length>2?arguments[2]:void 0)}))},function(t,e,i){"use strict";var r=i(11),n=i(20).every,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("every",(function(t){return n(a(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,i){"use strict";var r=i(11),n=i(114),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("fill",(function(t){return n.apply(a(this),arguments)}))},function(t,e,i){"use strict";var r=i(11),n=i(20).filter,a=i(21),s=r.aTypedArray,o=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filter",(function(t){for(var e=n(s(this),t,arguments.length>1?arguments[1]:void 0),i=a(this,this.constructor),r=0,h=e.length,l=new(o(i))(h);h>r;)l[r]=e[r++];return l}))},function(t,e,i){"use strict";var r=i(11),n=i(20).find,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("find",(function(t){return n(a(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,i){"use strict";var r=i(11),n=i(20).findIndex,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("findIndex",(function(t){return n(a(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,i){"use strict";var r=i(11),n=i(20).forEach,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("forEach",(function(t){n(a(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,i){"use strict";var r=i(11),n=i(65).includes,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("includes",(function(t){return n(a(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,i){"use strict";var r=i(11),n=i(65).indexOf,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("indexOf",(function(t){return n(a(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,i){"use strict";var r=i(5),n=i(11),a=i(86),s=i(7)("iterator"),o=r.Uint8Array,h=a.values,l=a.keys,c=a.entries,u=n.aTypedArray,d=n.exportTypedArrayMethod,p=o&&o.prototype[s],f=!!p&&("values"==p.name||null==p.name),g=function(){return h.call(u(this))};d("entries",(function(){return c.call(u(this))})),d("keys",(function(){return l.call(u(this))})),d("values",g,!f),d(s,g,!f)},function(t,e,i){"use strict";var r=i(11),n=r.aTypedArray,a=r.exportTypedArrayMethod,s=[].join;a("join",(function(t){return s.apply(n(this),arguments)}))},function(t,e,i){"use strict";var r=i(11),n=i(147),a=r.aTypedArray;(0,r.exportTypedArrayMethod)("lastIndexOf",(function(t){return n.apply(a(this),arguments)}))},function(t,e,i){"use strict";var r=i(11),n=i(20).map,a=i(21),s=r.aTypedArray,o=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("map",(function(t){return n(s(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(o(a(t,t.constructor)))(e)}))}))},function(t,e,i){"use strict";var r=i(11),n=i(85).left,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduce",(function(t){return n(a(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,i){"use strict";var r=i(11),n=i(85).right,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("reduceRight",(function(t){return n(a(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},function(t,e,i){"use strict";var r=i(11),n=r.aTypedArray,a=r.exportTypedArrayMethod,s=Math.floor;a("reverse",(function(){for(var t,e=n(this).length,i=s(e/2),r=0;r<i;)t=this[r],this[r++]=this[--e],this[e]=t;return this}))},function(t,e,i){"use strict";var r=i(11),n=i(10),a=i(174),s=i(12),o=i(2),h=r.aTypedArray;(0,r.exportTypedArrayMethod)("set",(function(t){h(this);var e=a(arguments.length>1?arguments[1]:void 0,1),i=this.length,r=s(t),o=n(r.length),l=0;if(o+e>i)throw RangeError("Wrong length");for(;l<o;)this[e+l]=r[l++]}),o((function(){new Int8Array(1).set({})})))},function(t,e,i){"use strict";var r=i(11),n=i(21),a=i(2),s=r.aTypedArray,o=r.aTypedArrayConstructor,h=r.exportTypedArrayMethod,l=[].slice;h("slice",(function(t,e){for(var i=l.call(s(this),t,e),r=n(this,this.constructor),a=0,h=i.length,c=new(o(r))(h);h>a;)c[a]=i[a++];return c}),a((function(){new Int8Array(1).slice()})))},function(t,e,i){"use strict";var r=i(11),n=i(20).some,a=r.aTypedArray;(0,r.exportTypedArrayMethod)("some",(function(t){return n(a(this),t,arguments.length>1?arguments[1]:void 0)}))},function(t,e,i){"use strict";var r=i(11),n=r.aTypedArray,a=r.exportTypedArrayMethod,s=[].sort;a("sort",(function(t){return s.call(n(this),t)}))},function(t,e,i){"use strict";var r=i(11),n=i(10),a=i(44),s=i(21),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("subarray",(function(t,e){var i=o(this),r=i.length,h=a(t,r);return new(s(i,i.constructor))(i.buffer,i.byteOffset+h*i.BYTES_PER_ELEMENT,n((void 0===e?r:a(e,r))-h))}))},function(t,e,i){"use strict";var r=i(5),n=i(11),a=i(2),s=r.Int8Array,o=n.aTypedArray,h=n.exportTypedArrayMethod,l=[].toLocaleString,c=[].slice,u=!!s&&a((function(){l.call(new s(1))}));h("toLocaleString",(function(){return l.apply(u?c.call(o(this)):o(this),arguments)}),a((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!a((function(){s.prototype.toLocaleString.call([1,2])})))},function(t,e,i){"use strict";var r=i(11).exportTypedArrayMethod,n=i(2),a=i(5).Uint8Array,s=a&&a.prototype||{},o=[].toString,h=[].join;n((function(){o.call({})}))&&(o=function(){return h.call(this)});var l=s.toString!=o;r("toString",o,l)},function(t,e,i){var r=i(0),n=i(14),a=i(4),s=i(1),o=i(2),h=n("Reflect","apply"),l=Function.apply;r({target:"Reflect",stat:!0,forced:!o((function(){h((function(){}))}))},{apply:function(t,e,i){return a(t),s(i),h?h(t,e,i):l.call(t,e,i)}})},function(t,e,i){var r=i(0),n=i(14),a=i(4),s=i(1),o=i(8),h=i(27),l=i(148),c=i(2),u=n("Reflect","construct"),d=c((function(){function t(){}return!(u((function(){}),[],t)instanceof t)})),p=!c((function(){u((function(){}))})),f=d||p;r({target:"Reflect",stat:!0,forced:f,sham:f},{construct:function(t,e){a(t),s(e);var i=arguments.length<3?t:a(arguments[2]);if(p&&!d)return u(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var n=i.prototype,c=h(o(n)?n:Object.prototype),f=Function.apply.call(t,c,e);return o(f)?f:c}})},function(t,e,i){var r=i(0),n=i(9),a=i(1),s=i(33),o=i(13);r({target:"Reflect",stat:!0,forced:i(2)((function(){Reflect.defineProperty(o.f({},1,{value:1}),1,{value:2})})),sham:!n},{defineProperty:function(t,e,i){a(t);var r=s(e,!0);a(i);try{return o.f(t,r,i),!0}catch(t){return!1}}})},function(t,e,i){var r=i(0),n=i(1),a=i(23).f;r({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var i=a(n(t),e);return!(i&&!i.configurable)&&delete t[e]}})},function(t,e,i){var r=i(0),n=i(8),a=i(1),s=i(15),o=i(23),h=i(25);r({target:"Reflect",stat:!0},{get:function t(e,i){var r,l,c=arguments.length<3?e:arguments[2];return a(e)===c?e[i]:(r=o.f(e,i))?s(r,"value")?r.value:void 0===r.get?void 0:r.get.call(c):n(l=h(e))?t(l,i,c):void 0}})},function(t,e,i){var r=i(0),n=i(9),a=i(1),s=i(23);r({target:"Reflect",stat:!0,sham:!n},{getOwnPropertyDescriptor:function(t,e){return s.f(a(t),e)}})},function(t,e,i){var r=i(0),n=i(1),a=i(25);r({target:"Reflect",stat:!0,sham:!i(110)},{getPrototypeOf:function(t){return a(n(t))}})},function(t,e,i){i(0)({target:"Reflect",stat:!0},{has:function(t,e){return e in t}})},function(t,e,i){var r=i(0),n=i(1),a=Object.isExtensible;r({target:"Reflect",stat:!0},{isExtensible:function(t){return n(t),!a||a(t)}})},function(t,e,i){i(0)({target:"Reflect",stat:!0},{ownKeys:i(106)})},function(t,e,i){var r=i(0),n=i(14),a=i(1);r({target:"Reflect",stat:!0,sham:!i(71)},{preventExtensions:function(t){a(t);try{var e=n("Object","preventExtensions");return e&&e(t),!0}catch(t){return!1}}})},function(t,e,i){var r=i(0),n=i(1),a=i(8),s=i(15),o=i(2),h=i(13),l=i(23),c=i(25),u=i(38);r({target:"Reflect",stat:!0,forced:o((function(){var t=function(){},e=h.f(new t,"a",{configurable:!0});return!1!==Reflect.set(t.prototype,"a",1,e)}))},{set:function t(e,i,r){var o,d,p=arguments.length<4?e:arguments[3],f=l.f(n(e),i);if(!f){if(a(d=c(e)))return t(d,i,r,p);f=u(0)}if(s(f,"value")){if(!1===f.writable||!a(p))return!1;if(o=l.f(p,i)){if(o.get||o.set||!1===o.writable)return!1;o.value=r,h.f(p,i,o)}else h.f(p,i,u(0,r));return!0}return void 0!==f.set&&(f.set.call(p,r),!0)}})},function(t,e,i){var r=i(0),n=i(1),a=i(142),s=i(46);s&&r({target:"Reflect",stat:!0},{setPrototypeOf:function(t,e){n(t),a(e);try{return s(t,e),!0}catch(t){return!1}}})},function(t,e,i){var r=i(0),n=i(5),a=i(34);r({global:!0},{Reflect:{}}),a(n.Reflect,"Reflect",!0)},function(t,e,i){i(394)},function(t,e,i){var r=i(395);t.exports=r},function(t,e,i){i(396);var r=i(406);t.exports=r},function(t,e,i){i(397),i(398),i(399),i(400),i(401),i(402),i(403),i(404),i(405)},function(t,e,i){var r=i(0),n=i(43),a=i(1),s=n.toKey,o=n.set;r({target:"Reflect",stat:!0},{defineMetadata:function(t,e,i){var r=arguments.length<4?void 0:s(arguments[3]);o(t,e,a(i),r)}})},function(t,e,i){var r=i(0),n=i(43),a=i(1),s=n.toKey,o=n.getMap,h=n.store;r({target:"Reflect",stat:!0},{deleteMetadata:function(t,e){var i=arguments.length<3?void 0:s(arguments[2]),r=o(a(e),i,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var n=h.get(e);return n.delete(i),!!n.size||h.delete(e)}})},function(t,e,i){var r=i(0),n=i(43),a=i(1),s=i(25),o=n.has,h=n.get,l=n.toKey,c=function(t,e,i){if(o(t,e,i))return h(t,e,i);var r=s(e);return null!==r?c(t,r,i):void 0};r({target:"Reflect",stat:!0},{getMetadata:function(t,e){var i=arguments.length<3?void 0:l(arguments[2]);return c(t,a(e),i)}})},function(t,e,i){var r=i(0),n=i(171),a=i(43),s=i(1),o=i(25),h=i(6),l=a.keys,c=a.toKey,u=function(t,e){var i=l(t,e),r=o(t);if(null===r)return i;var a,s,c=u(r,e);return c.length?i.length?(a=new n(i.concat(c)),h(a,(s=[]).push,{that:s}),s):c:i};r({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var e=arguments.length<2?void 0:c(arguments[1]);return u(s(t),e)}})},function(t,e,i){var r=i(0),n=i(43),a=i(1),s=n.get,o=n.toKey;r({target:"Reflect",stat:!0},{getOwnMetadata:function(t,e){var i=arguments.length<3?void 0:o(arguments[2]);return s(t,a(e),i)}})},function(t,e,i){var r=i(0),n=i(43),a=i(1),s=n.keys,o=n.toKey;r({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var e=arguments.length<2?void 0:o(arguments[1]);return s(a(t),e)}})},function(t,e,i){var r=i(0),n=i(43),a=i(1),s=i(25),o=n.has,h=n.toKey,l=function(t,e,i){if(o(t,e,i))return!0;var r=s(e);return null!==r&&l(t,r,i)};r({target:"Reflect",stat:!0},{hasMetadata:function(t,e){var i=arguments.length<3?void 0:h(arguments[2]);return l(t,a(e),i)}})},function(t,e,i){var r=i(0),n=i(43),a=i(1),s=n.has,o=n.toKey;r({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,e){var i=arguments.length<3?void 0:o(arguments[2]);return s(t,a(e),i)}})},function(t,e,i){var r=i(0),n=i(43),a=i(1),s=n.toKey,o=n.set;r({target:"Reflect",stat:!0},{metadata:function(t,e){return function(i,r){o(t,e,a(i),s(r))}}})},function(t,e,i){i(407),i(412),i(414);var r=i(416);t.exports=r},function(t,e,i){i(408),i(409),i(410),i(411)},function(t,e,i){i(0)({target:"Math",stat:!0},{iaddh:function(t,e,i,r){var n=t>>>0,a=i>>>0;return(e>>>0)+(r>>>0)+((n&a|(n|a)&~(n+a>>>0))>>>31)|0}})},function(t,e,i){i(0)({target:"Math",stat:!0},{isubh:function(t,e,i,r){var n=t>>>0,a=i>>>0;return(e>>>0)-(r>>>0)-((~n&a|~(n^a)&n-a>>>0)>>>31)|0}})},function(t,e,i){i(0)({target:"Math",stat:!0},{imulh:function(t,e){var i=+t,r=+e,n=65535&i,a=65535&r,s=i>>16,o=r>>16,h=(s*a>>>0)+(n*a>>>16);return s*o+(h>>16)+((n*o>>>0)+(65535&h)>>16)}})},function(t,e,i){i(0)({target:"Math",stat:!0},{umulh:function(t,e){var i=+t,r=+e,n=65535&i,a=65535&r,s=i>>>16,o=r>>>16,h=(s*a>>>0)+(n*a>>>16);return s*o+(h>>>16)+((n*o>>>0)+(65535&h)>>>16)}})},function(t,e,i){i(413)},function(t,e,i){"use strict";var r=i(0),n=i(59).charAt;r({target:"String",proto:!0,forced:i(2)((function(){return"𠮷"!=="𠮷".at(0)}))},{at:function(t){return n(this,t)}})},function(t,e,i){i(176),i(178),i(129)},function(t,e,i){"use strict";var r=/[^\0-\u007E]/,n=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",s=Math.floor,o=String.fromCharCode,h=function(t){return t+22+75*(t<26)},l=function(t,e,i){var r=0;for(t=i?s(t/700):t>>1,t+=s(t/e);t>455;r+=36)t=s(t/35);return s(r+36*t/(t+38))},c=function(t){var e,i,r=[],n=(t=function(t){for(var e=[],i=0,r=t.length;i<r;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<r){var a=t.charCodeAt(i++);56320==(64512&a)?e.push(((1023&n)<<10)+(1023&a)+65536):(e.push(n),i--)}else e.push(n)}return e}(t)).length,c=128,u=0,d=72;for(e=0;e<t.length;e++)(i=t[e])<128&&r.push(o(i));var p=r.length,f=p;for(p&&r.push("-");f<n;){var g=2147483647;for(e=0;e<t.length;e++)(i=t[e])>=c&&i<g&&(g=i);var v=f+1;if(g-c>s((2147483647-u)/v))throw RangeError(a);for(u+=(g-c)*v,c=g,e=0;e<t.length;e++){if((i=t[e])<c&&++u>2147483647)throw RangeError(a);if(i==c){for(var m=u,y=36;;y+=36){var C=y<=d?1:y>=d+26?26:y-d;if(m<C)break;var x=m-C,T=36-C;r.push(o(h(C+x%T))),m=s(x/T)}r.push(o(h(m))),d=l(u,v,f==p),u=0,++f}}++u,++c}return r.join("")};t.exports=function(t){var e,i,a=[],s=t.toLowerCase().replace(n,".").split(".");for(e=0;e<s.length;e++)i=s[e],a.push(r.test(i)?"xn--"+c(i):i);return a.join(".")}},function(t,e,i){i(417),i(420),i(423),i(425),i(454),i(463),i(466),i(474),i(476),i(478),i(481),i(485),i(488),i(490),i(492),i(494);var r=i(496);t.exports=r},function(t,e,i){i(418),i(419)},function(t,e,i){"use strict";var r=i(0),n=i(20).filterOut,a=i(30);r({target:"Array",proto:!0},{filterOut:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("filterOut")},function(t,e,i){"use strict";var r=i(11),n=i(20).filterOut,a=i(21),s=r.aTypedArray,o=r.aTypedArrayConstructor;(0,r.exportTypedArrayMethod)("filterOut",(function(t){for(var e=n(s(this),t,arguments.length>1?arguments[1]:void 0),i=a(this,this.constructor),r=0,h=e.length,l=new(o(i))(h);h>r;)l[r]=e[r++];return l}))},function(t,e,i){i(421),i(422)},function(t,e,i){"use strict";var r=i(9),n=i(30),a=i(12),s=i(10),o=i(13).f;r&&!("lastIndex"in[])&&(o(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=a(this),e=s(t.length);return 0==e?0:e-1}}),n("lastIndex"))},function(t,e,i){"use strict";var r=i(9),n=i(30),a=i(12),s=i(10),o=i(13).f;r&&!("lastItem"in[])&&(o(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=a(this),e=s(t.length);return 0==e?void 0:t[e-1]},set:function(t){var e=a(this),i=s(e.length);return e[0==i?0:i-1]=t}}),n("lastItem"))},function(t,e,i){i(97),i(424)},function(t,e,i){"use strict";var r=i(0),n=i(10),a=i(12),s=i(14),o=i(57),h=i(30),l=[].push;r({target:"Array",proto:!0},{uniqueBy:function(t){var e,i,r,h,c=a(this),u=n(c.length),d=o(c,0),p=new(s("Map"));if("function"==typeof t)e=t;else{if(null!=t)throw new TypeError("Incorrect resolver!");e=function(t){return t}}for(i=0;i<u;i++)h=e(r=c[i]),p.has(h)||p.set(h,r);return p.forEach((function(t){l.call(d,t)})),d}}),h("uniqueBy")},function(t,e,i){i(426),i(427),i(428),i(429),i(430),i(431),i(432),i(433),i(435),i(436),i(437),i(438),i(439),i(440),i(441),i(442),i(443),i(444),i(445),i(446),i(447),i(448),i(449),i(450),i(451),i(452),i(453)},function(t,e,i){"use strict";var r=i(0),n=i(6),a=i(4);r({target:"Map",stat:!0},{groupBy:function(t,e){var i=new this;a(e);var r=a(i.has),s=a(i.get),o=a(i.set);return n(t,(function(t){var n=e(t);r.call(i,n)?s.call(i,n).push(t):o.call(i,n,[t])})),i}})},function(t,e,i){"use strict";var r=i(0),n=i(6),a=i(4);r({target:"Map",stat:!0},{keyBy:function(t,e){var i=new this;a(e);var r=a(i.set);return n(t,(function(t){r.call(i,e(t),t)})),i}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(100);r({target:"Map",proto:!0,real:!0,forced:n},{deleteAll:function(){return a.apply(this,arguments)}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(18),o=i(37),h=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{every:function(t){var e=a(this),i=o(e),r=s(t,arguments.length>1?arguments[1]:void 0,3);return!h(i,(function(t,i,n){if(!r(i,t,e))return n()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(18),l=i(21),c=i(37),u=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{filter:function(t){var e=s(this),i=c(e),r=h(t,arguments.length>1?arguments[1]:void 0,3),n=new(l(e,a("Map"))),d=o(n.set);return u(i,(function(t,i){r(i,t,e)&&d.call(n,t,i)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),n}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(18),o=i(37),h=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{find:function(t){var e=a(this),i=o(e),r=s(t,arguments.length>1?arguments[1]:void 0,3);return h(i,(function(t,i,n){if(r(i,t,e))return n(i)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(18),o=i(37),h=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{findKey:function(t){var e=a(this),i=o(e),r=s(t,arguments.length>1?arguments[1]:void 0,3);return h(i,(function(t,i,n){if(r(i,t,e))return n(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(37),o=i(434),h=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{includes:function(t){return h(s(a(this)),(function(e,i,r){if(o(i,t))return r()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(37),o=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{keyOf:function(t){return o(s(a(this)),(function(e,i,r){if(i===t)return r(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(18),l=i(21),c=i(37),u=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{mapKeys:function(t){var e=s(this),i=c(e),r=h(t,arguments.length>1?arguments[1]:void 0,3),n=new(l(e,a("Map"))),d=o(n.set);return u(i,(function(t,i){d.call(n,r(i,t,e),i)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),n}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(18),l=i(21),c=i(37),u=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{mapValues:function(t){var e=s(this),i=c(e),r=h(t,arguments.length>1?arguments[1]:void 0,3),n=new(l(e,a("Map"))),d=o(n.set);return u(i,(function(t,i){d.call(n,t,r(i,t,e))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),n}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(4),o=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{merge:function(t){for(var e=a(this),i=s(e.set),r=0;r<arguments.length;)o(arguments[r++],i,{that:e,AS_ENTRIES:!0});return e}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(4),o=i(37),h=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{reduce:function(t){var e=a(this),i=o(e),r=arguments.length<2,n=r?void 0:arguments[1];if(s(t),h(i,(function(i,a){r?(r=!1,n=a):n=t(n,a,i,e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty map with no initial value");return n}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(18),o=i(37),h=i(6);r({target:"Map",proto:!0,real:!0,forced:n},{some:function(t){var e=a(this),i=o(e),r=s(t,arguments.length>1?arguments[1]:void 0,3);return h(i,(function(t,i,n){if(r(i,t,e))return n()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(4);r({target:"Map",proto:!0,real:!0,forced:n},{update:function(t,e){var i=a(this),r=arguments.length;s(e);var n=i.has(t);if(!n&&r<3)throw TypeError("Updating absent value");var o=n?i.get(t):s(r>2?arguments[2]:void 0)(t,i);return i.set(t,e(o,t,i)),i}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(179);r({target:"Set",proto:!0,real:!0,forced:n},{addAll:function(){return a.apply(this,arguments)}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(100);r({target:"Set",proto:!0,real:!0,forced:n},{deleteAll:function(){return a.apply(this,arguments)}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(18),o=i(53),h=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{every:function(t){var e=a(this),i=o(e),r=s(t,arguments.length>1?arguments[1]:void 0,3);return!h(i,(function(t,i){if(!r(t,t,e))return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(18),l=i(21),c=i(53),u=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{filter:function(t){var e=s(this),i=c(e),r=h(t,arguments.length>1?arguments[1]:void 0,3),n=new(l(e,a("Set"))),d=o(n.add);return u(i,(function(t){r(t,t,e)&&d.call(n,t)}),{IS_ITERATOR:!0}),n}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(18),o=i(53),h=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{find:function(t){var e=a(this),i=o(e),r=s(t,arguments.length>1?arguments[1]:void 0,3);return h(i,(function(t,i){if(r(t,t,e))return i(t)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(53),o=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{join:function(t){var e=a(this),i=s(e),r=void 0===t?",":String(t),n=[];return o(i,n.push,{that:n,IS_ITERATOR:!0}),n.join(r)}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(18),l=i(21),c=i(53),u=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{map:function(t){var e=s(this),i=c(e),r=h(t,arguments.length>1?arguments[1]:void 0,3),n=new(l(e,a("Set"))),d=o(n.add);return u(i,(function(t){d.call(n,r(t,t,e))}),{IS_ITERATOR:!0}),n}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(4),o=i(53),h=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{reduce:function(t){var e=a(this),i=o(e),r=arguments.length<2,n=r?void 0:arguments[1];if(s(t),h(i,(function(i){r?(r=!1,n=i):n=t(n,i,i,e)}),{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return n}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(18),o=i(53),h=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{some:function(t){var e=a(this),i=o(e),r=s(t,arguments.length>1?arguments[1]:void 0,3);return h(i,(function(t,i){if(r(t,t,e))return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(100);r({target:"WeakMap",proto:!0,real:!0,forced:n},{deleteAll:function(){return a.apply(this,arguments)}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(179);r({target:"WeakSet",proto:!0,real:!0,forced:n},{addAll:function(){return a.apply(this,arguments)}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(100);r({target:"WeakSet",proto:!0,real:!0,forced:n},{deleteAll:function(){return a.apply(this,arguments)}})},function(t,e,i){i(455),i(456),i(457),i(458),i(459),i(460),i(461),i(462)},function(t,e,i){i(0)({target:"Map",stat:!0},{from:i(101)})},function(t,e,i){i(0)({target:"Map",stat:!0},{of:i(102)})},function(t,e,i){i(0)({target:"Set",stat:!0},{from:i(101)})},function(t,e,i){i(0)({target:"Set",stat:!0},{of:i(102)})},function(t,e,i){i(0)({target:"WeakMap",stat:!0},{from:i(101)})},function(t,e,i){i(0)({target:"WeakMap",stat:!0},{of:i(102)})},function(t,e,i){i(0)({target:"WeakSet",stat:!0},{from:i(101)})},function(t,e,i){i(0)({target:"WeakSet",stat:!0},{of:i(102)})},function(t,e,i){i(464),i(465)},function(t,e,i){var r=i(0),n=i(180),a=i(14),s=i(27),o=function(){var t=a("Object","freeze");return t?t(s(null)):s(null)};r({global:!0},{compositeKey:function(){return n.apply(Object,arguments).get("object",o)}})},function(t,e,i){var r=i(0),n=i(180),a=i(14);r({global:!0},{compositeSymbol:function(){return 1===arguments.length&&"string"==typeof arguments[0]?a("Symbol").for(arguments[0]):n.apply(null,arguments).get("symbol",a("Symbol"))}})},function(t,e,i){i(467),i(468),i(469),i(470),i(471),i(472),i(473)},function(t,e,i){var r=i(0),n=Math.min,a=Math.max;r({target:"Math",stat:!0},{clamp:function(t,e,i){return n(i,a(e,t))}})},function(t,e,i){i(0)({target:"Math",stat:!0},{DEG_PER_RAD:Math.PI/180})},function(t,e,i){var r=i(0),n=180/Math.PI;r({target:"Math",stat:!0},{degrees:function(t){return t*n}})},function(t,e,i){var r=i(0),n=i(181),a=i(162);r({target:"Math",stat:!0},{fscale:function(t,e,i,r,s){return a(n(t,e,i,r,s))}})},function(t,e,i){i(0)({target:"Math",stat:!0},{RAD_PER_DEG:180/Math.PI})},function(t,e,i){var r=i(0),n=Math.PI/180;r({target:"Math",stat:!0},{radians:function(t){return t*n}})},function(t,e,i){i(0)({target:"Math",stat:!0},{scale:i(181)})},function(t,e,i){i(475)},function(t,e,i){i(0)({target:"Math",stat:!0},{signbit:function(t){return(t=+t)==t&&0==t?1/t==-1/0:t<0}})},function(t,e,i){i(477)},function(t,e,i){"use strict";var r=i(0),n=i(26),a=i(123),s=/^[\da-z]+$/;r({target:"Number",stat:!0},{fromString:function(t,e){var i,r,o=1;if("string"!=typeof t)throw TypeError("Invalid number representation");if(!t.length)throw SyntaxError("Invalid number representation");if("-"==t.charAt(0)&&(o=-1,!(t=t.slice(1)).length))throw SyntaxError("Invalid number representation");if((i=void 0===e?10:n(e))<2||i>36)throw RangeError("Invalid radix");if(!s.test(t)||(r=a(t,i)).toString(i)!==t)throw SyntaxError("Invalid number representation");return o*r}})},function(t,e,i){i(479),i(480)},function(t,e,i){"use strict";var r=i(0),n=i(182);"function"==typeof BigInt&&r({target:"BigInt",stat:!0},{range:function(t,e,i){return new n(t,e,i,"bigint",BigInt(0),BigInt(1))}})},function(t,e,i){"use strict";var r=i(0),n=i(182);r({target:"Number",stat:!0},{range:function(t,e,i){return new n(t,e,i,"number",0,1)}})},function(t,e,i){i(482),i(483),i(484)},function(t,e,i){"use strict";var r=i(0),n=i(130);r({target:"Object",stat:!0},{iterateEntries:function(t){return new n(t,"entries")}})},function(t,e,i){"use strict";var r=i(0),n=i(130);r({target:"Object",stat:!0},{iterateKeys:function(t){return new n(t,"keys")}})},function(t,e,i){"use strict";var r=i(0),n=i(130);r({target:"Object",stat:!0},{iterateValues:function(t){return new n(t,"values")}})},function(t,e,i){i(486),i(487)},function(t,e,i){"use strict";var r=i(0),n=i(9),a=i(50),s=i(4),o=i(1),h=i(8),l=i(35),c=i(13).f,u=i(16),d=i(41),p=i(75),f=i(6),g=i(167),v=i(7),m=i(17),y=v("observable"),C=m.get,x=m.set,T=function(t){return null==t?void 0:s(t)},S=function(t){var e=t.cleanup;if(e){t.cleanup=void 0;try{e()}catch(t){g(t)}}},w=function(t){return void 0===t.observer},A=function(t,e){if(!n){t.closed=!0;var i=e.subscriptionObserver;i&&(i.closed=!0)}e.observer=void 0},b=function(t,e){var i,r=x(this,{cleanup:void 0,observer:o(t),subscriptionObserver:void 0});n||(this.closed=!1);try{(i=T(t.start))&&i.call(t,this)}catch(t){g(t)}if(!w(r)){var a=r.subscriptionObserver=new k(this);try{var h=e(a),l=h;null!=h&&(r.cleanup="function"==typeof h.unsubscribe?function(){l.unsubscribe()}:s(h))}catch(t){return void a.error(t)}w(r)&&S(r)}};b.prototype=d({},{unsubscribe:function(){var t=C(this);w(t)||(A(this,t),S(t))}}),n&&c(b.prototype,"closed",{configurable:!0,get:function(){return w(C(this))}});var k=function(t){x(this,{subscription:t}),n||(this.closed=!1)};k.prototype=d({},{next:function(t){var e=C(C(this).subscription);if(!w(e)){var i=e.observer;try{var r=T(i.next);r&&r.call(i,t)}catch(t){g(t)}}},error:function(t){var e=C(this).subscription,i=C(e);if(!w(i)){var r=i.observer;A(e,i);try{var n=T(r.error);n?n.call(r,t):g(t)}catch(t){g(t)}S(i)}},complete:function(){var t=C(this).subscription,e=C(t);if(!w(e)){var i=e.observer;A(t,e);try{var r=T(i.complete);r&&r.call(i)}catch(t){g(t)}S(e)}}}),n&&c(k.prototype,"closed",{configurable:!0,get:function(){return w(C(C(this).subscription))}});var _=function(t){l(this,_,"Observable"),x(this,{subscriber:s(t)})};d(_.prototype,{subscribe:function(t){var e=arguments.length;return new b("function"==typeof t?{next:t,error:e>1?arguments[1]:void 0,complete:e>2?arguments[2]:void 0}:h(t)?t:{},C(this).subscriber)}}),d(_,{from:function(t){var e="function"==typeof this?this:_,i=T(o(t)[y]);if(i){var r=o(i.call(t));return r.constructor===e?r:new e((function(t){return r.subscribe(t)}))}var n=p(t);return new e((function(t){f(n,(function(e,i){if(t.next(e),t.closed)return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}),t.complete()}))},of:function(){for(var t="function"==typeof this?this:_,e=arguments.length,i=new Array(e),r=0;r<e;)i[r]=arguments[r++];return new t((function(t){for(var r=0;r<e;r++)if(t.next(i[r]),t.closed)return;t.complete()}))}}),u(_.prototype,y,(function(){return this})),r({global:!0},{Observable:_}),a("Observable")},function(t,e,i){i(19)("observable")},function(t,e,i){i(489)},function(t,e,i){i(19)("patternMatch")},function(t,e,i){i(491)},function(t,e,i){"use strict";var r=i(0),n=i(73),a=i(96);r({target:"Promise",stat:!0},{try:function(t){var e=n.f(this),i=a(t);return(i.error?e.reject:e.resolve)(i.value),e.promise}})},function(t,e,i){i(493)},function(t,e,i){var r=i(0),n=i(1),a=i(158),s=i(51),o=i(17),h=o.set,l=o.getterFor("Seeded Random Generator"),c=s((function(t){h(this,{type:"Seeded Random Generator",seed:t%2147483647})}),"Seeded Random",(function(){var t=l(this);return{value:(1073741823&(t.seed=(1103515245*t.seed+12345)%2147483647))/1073741823,done:!1}}));r({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var e=n(t).seed;if(!a(e))throw TypeError('Math.seededPRNG() argument should have a "seed" field with a finite value.');return new c(e)}})},function(t,e,i){i(495)},function(t,e,i){"use strict";var r=i(0),n=i(51),a=i(22),s=i(17),o=i(59),h=o.codeAt,l=o.charAt,c=s.set,u=s.getterFor("String Iterator"),d=n((function(t){c(this,{type:"String Iterator",string:t,index:0})}),"String",(function(){var t,e=u(this),i=e.string,r=e.index;return r>=i.length?{value:void 0,done:!0}:(t=l(i,r),e.index+=t.length,{value:{codePoint:h(t,0),position:r},done:!1})}));r({target:"String",proto:!0},{codePoints:function(){return new d(String(a(this)))}})},function(t,e,i){i(497),i(499),i(529),i(535),i(543);var r=i(546);t.exports=r},function(t,e,i){i(498)},function(t,e,i){var r=i(0),n=i(45),a=Object.isFrozen,s=function(t,e){if(!a||!n(t)||!a(t))return!1;for(var i,r=0,s=t.length;r<s;)if(!("string"==typeof(i=t[r++])||e&&void 0===i))return!1;return 0!==s};r({target:"Array",stat:!0},{isTemplateObject:function(t){if(!s(t,!0))return!1;var e=t.raw;return!(e.length!==t.length||!s(e,!1))}})},function(t,e,i){i(500),i(502),i(503),i(504),i(505),i(506),i(507),i(508),i(509),i(510),i(511),i(512),i(513),i(514),i(515),i(516),i(517),i(518),i(519),i(520),i(521),i(522),i(523),i(524),i(525),i(526),i(527),i(528)},function(t,e,i){"use strict";var r=i(0),n=i(35),a=i(16),s=i(15),o=i(7),h=i(501),l=i(3),c=o("toStringTag"),u=function(){n(this,u)};u.prototype=h,s(h,c)||a(h,c,"AsyncIterator"),s(h,"constructor")&&h.constructor!==Object||a(h,"constructor",u),r({global:!0,forced:l},{AsyncIterator:u})},function(t,e,i){var r,n,a=i(5),s=i(78),o=i(25),h=i(15),l=i(16),c=i(7),u=i(3),d=c("asyncIterator"),p=a.AsyncIterator,f=s.AsyncIteratorPrototype;if(!u)if(f)r=f;else if("function"==typeof p)r=p.prototype;else if(s.USE_FUNCTION_CONSTRUCTOR||a.USE_FUNCTION_CONSTRUCTOR)try{n=o(o(o(Function("return async function*(){}()")()))),o(n)===Object.prototype&&(r=n)}catch(t){}r||(r={}),h(r,d)||l(r,d,(function(){return this})),t.exports=r},function(t,e,i){"use strict";var r=i(0),n=i(1),a=i(54)((function(t,e){var i=this,r=i.iterator;return e.resolve(n(i.next.call(r,t))).then((function(t){return n(t).done?(i.done=!0,{done:!0,value:void 0}):{done:!1,value:[i.index++,t.value]}}))}));r({target:"AsyncIterator",proto:!0,real:!0},{asIndexedPairs:function(){return new a({iterator:n(this),index:0})}})},function(t,e,i){"use strict";var r=i(0),n=i(1),a=i(74),s=i(54)((function(t,e){var i=this;return new e((function(r,a){var s=function(){try{e.resolve(n(i.next.call(i.iterator,i.remaining?void 0:t))).then((function(t){try{n(t).done?(i.done=!0,r({done:!0,value:void 0})):i.remaining?(i.remaining--,s()):r({done:!1,value:t.value})}catch(t){a(t)}}),a)}catch(t){a(t)}};s()}))}));r({target:"AsyncIterator",proto:!0,real:!0},{drop:function(t){return new s({iterator:n(this),remaining:a(t)})}})},function(t,e,i){"use strict";var r=i(0),n=i(76).every;r({target:"AsyncIterator",proto:!0,real:!0},{every:function(t){return n(this,t)}})},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(1),s=i(54)((function(t,e){var i=this,r=i.filterer;return new e((function(n,s){var o=function(){try{e.resolve(a(i.next.call(i.iterator,t))).then((function(t){try{if(a(t).done)i.done=!0,n({done:!0,value:void 0});else{var h=t.value;e.resolve(r(h)).then((function(t){t?n({done:!1,value:h}):o()}),s)}}catch(t){s(t)}}),s)}catch(t){s(t)}};o()}))}));r({target:"AsyncIterator",proto:!0,real:!0},{filter:function(t){return new s({iterator:a(this),filterer:n(t)})}})},function(t,e,i){"use strict";var r=i(0),n=i(76).find;r({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return n(this,t)}})},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(1),s=i(54),o=i(183),h=s((function(t,e){var i,r,s=this,h=s.mapper;return new e((function(l,c){var u=function(){try{e.resolve(a(s.next.call(s.iterator,t))).then((function(t){try{a(t).done?(s.done=!0,l({done:!0,value:void 0})):e.resolve(h(t.value)).then((function(t){try{if(void 0!==(r=o(t)))return s.innerIterator=i=a(r.call(t)),s.innerNext=n(i.next),d();c(TypeError(".flatMap callback should return an iterable object"))}catch(t){c(t)}}),c)}catch(t){c(t)}}),c)}catch(t){c(t)}},d=function(){if(i=s.innerIterator)try{e.resolve(a(s.innerNext.call(i))).then((function(t){try{a(t).done?(s.innerIterator=s.innerNext=null,u()):l({done:!1,value:t.value})}catch(t){c(t)}}),c)}catch(t){c(t)}else u()};d()}))}));r({target:"AsyncIterator",proto:!0,real:!0},{flatMap:function(t){return new h({iterator:a(this),mapper:n(t),innerIterator:null,innerNext:null})}})},function(t,e,i){"use strict";var r=i(0),n=i(76).forEach;r({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return n(this,t)}})},function(t,e,i){var r=i(0),n=i(36),a=i(4),s=i(1),o=i(12),h=i(54),l=i(183),c=n.AsyncIterator,u=h((function(t){return s(this.next.call(this.iterator,t))}),!0);r({target:"AsyncIterator",stat:!0},{from:function(t){var e,i=o(t),r=l(i);if(null!=r){if((e=a(r).call(i))instanceof c)return e}else e=i;return new u({iterator:e})}})},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(1),s=i(54)((function(t,e){var i=this,r=i.mapper;return e.resolve(a(i.next.call(i.iterator,t))).then((function(t){return a(t).done?(i.done=!0,{done:!0,value:void 0}):e.resolve(r(t.value)).then((function(t){return{done:!1,value:t}}))}))}));r({target:"AsyncIterator",proto:!0,real:!0},{map:function(t){return new s({iterator:a(this),mapper:n(t)})}})},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(1),s=i(14)("Promise");r({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){var e=a(this),i=n(e.next),r=arguments.length<2,o=r?void 0:arguments[1];return n(t),new s((function(n,h){var l=function(){try{s.resolve(a(i.call(e))).then((function(e){try{if(a(e).done)r?h(TypeError("Reduce of empty iterator with no initial value")):n(o);else{var i=e.value;r?(r=!1,o=i,l()):s.resolve(t(o,i)).then((function(t){o=t,l()}),h)}}catch(t){h(t)}}),h)}catch(t){h(t)}};l()}))}})},function(t,e,i){"use strict";var r=i(0),n=i(76).some;r({target:"AsyncIterator",proto:!0,real:!0},{some:function(t){return n(this,t)}})},function(t,e,i){"use strict";var r=i(0),n=i(1),a=i(74),s=i(54)((function(t,e){var i,r,n=this.iterator;return this.remaining--?this.next.call(n,t):(r={done:!0,value:void 0},this.done=!0,void 0!==(i=n.return)?e.resolve(i.call(n)).then((function(){return r})):r)}));r({target:"AsyncIterator",proto:!0,real:!0},{take:function(t){return new s({iterator:n(this),remaining:a(t)})}})},function(t,e,i){"use strict";var r=i(0),n=i(76).toArray;r({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return n(this)}})},function(t,e,i){"use strict";var r=i(0),n=i(5),a=i(35),s=i(16),o=i(2),h=i(15),l=i(7),c=i(116).IteratorPrototype,u=i(3),d=l("iterator"),p=l("toStringTag"),f=n.Iterator,g=u||"function"!=typeof f||f.prototype!==c||!o((function(){f({})})),v=function(){a(this,v)};u&&s(c={},d,(function(){return this})),h(c,p)||s(c,p,"Iterator"),!g&&h(c,"constructor")&&c.constructor!==Object||s(c,"constructor",v),v.prototype=c,r({global:!0,forced:g},{Iterator:v})},function(t,e,i){"use strict";var r=i(0),n=i(1),a=i(55)((function(t){var e=n(this.next.call(this.iterator,t));if(!(this.done=!!e.done))return[this.index++,e.value]}));r({target:"Iterator",proto:!0,real:!0},{asIndexedPairs:function(){return new a({iterator:n(this),index:0})}})},function(t,e,i){"use strict";var r=i(0),n=i(1),a=i(74),s=i(55)((function(t){for(var e,i=this.iterator,r=this.next;this.remaining;)if(this.remaining--,e=n(r.call(i)),this.done=!!e.done)return;if(e=n(r.call(i,t)),!(this.done=!!e.done))return e.value}));r({target:"Iterator",proto:!0,real:!0},{drop:function(t){return new s({iterator:n(this),remaining:a(t)})}})},function(t,e,i){"use strict";var r=i(0),n=i(6),a=i(4),s=i(1);r({target:"Iterator",proto:!0,real:!0},{every:function(t){return s(this),a(t),!n(this,(function(e,i){if(!t(e))return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(1),s=i(55),o=i(113),h=s((function(t){for(var e,i,r=this.iterator,n=this.filterer,s=this.next;;){if(e=a(s.call(r,t)),this.done=!!e.done)return;if(i=e.value,o(r,n,i))return i}}));r({target:"Iterator",proto:!0,real:!0},{filter:function(t){return new h({iterator:a(this),filterer:n(t)})}})},function(t,e,i){"use strict";var r=i(0),n=i(6),a=i(4),s=i(1);r({target:"Iterator",proto:!0,real:!0},{find:function(t){return s(this),a(t),n(this,(function(e,i){if(t(e))return i(e)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}})},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(1),s=i(47),o=i(55),h=i(82),l=o((function(t){for(var e,i,r,o,l=this.iterator,c=this.mapper;;)try{if(o=this.innerIterator){if(!(e=a(this.innerNext.call(o))).done)return e.value;this.innerIterator=this.innerNext=null}if(e=a(this.next.call(l,t)),this.done=!!e.done)return;if(i=c(e.value),void 0===(r=s(i)))throw TypeError(".flatMap callback should return an iterable object");this.innerIterator=o=a(r.call(i)),this.innerNext=n(o.next)}catch(t){throw h(l),t}}));r({target:"Iterator",proto:!0,real:!0},{flatMap:function(t){return new l({iterator:a(this),mapper:n(t),innerIterator:null,innerNext:null})}})},function(t,e,i){"use strict";var r=i(0),n=i(6),a=i(1);r({target:"Iterator",proto:!0,real:!0},{forEach:function(t){n(a(this),t,{IS_ITERATOR:!0})}})},function(t,e,i){var r=i(0),n=i(36),a=i(4),s=i(1),o=i(12),h=i(55),l=i(47),c=n.Iterator,u=h((function(t){var e=s(this.next.call(this.iterator,t));if(!(this.done=!!e.done))return e.value}),!0);r({target:"Iterator",stat:!0},{from:function(t){var e,i=o(t),r=l(i);if(null!=r){if((e=a(r).call(i))instanceof c)return e}else e=i;return new u({iterator:e})}})},function(t,e,i){"use strict";var r=i(0),n=i(4),a=i(1),s=i(55),o=i(113),h=s((function(t){var e=this.iterator,i=a(this.next.call(e,t));if(!(this.done=!!i.done))return o(e,this.mapper,i.value)}));r({target:"Iterator",proto:!0,real:!0},{map:function(t){return new h({iterator:a(this),mapper:n(t)})}})},function(t,e,i){"use strict";var r=i(0),n=i(6),a=i(4),s=i(1);r({target:"Iterator",proto:!0,real:!0},{reduce:function(t){s(this),a(t);var e=arguments.length<2,i=e?void 0:arguments[1];if(n(this,(function(r){e?(e=!1,i=r):i=t(i,r)}),{IS_ITERATOR:!0}),e)throw TypeError("Reduce of empty iterator with no initial value");return i}})},function(t,e,i){"use strict";var r=i(0),n=i(6),a=i(4),s=i(1);r({target:"Iterator",proto:!0,real:!0},{some:function(t){return s(this),a(t),n(this,(function(e,i){if(t(e))return i()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(t,e,i){"use strict";var r=i(0),n=i(1),a=i(74),s=i(55),o=i(82),h=s((function(t){var e=this.iterator;if(!this.remaining--)return this.done=!0,o(e);var i=n(this.next.call(e,t));return(this.done=!!i.done)?void 0:i.value}));r({target:"Iterator",proto:!0,real:!0},{take:function(t){return new h({iterator:n(this),remaining:a(t)})}})},function(t,e,i){"use strict";var r=i(0),n=i(6),a=i(1),s=[].push;r({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return n(a(this),s,{that:t,IS_ITERATOR:!0}),t}})},function(t,e,i){i(530),i(531),i(532),i(533),i(534)},function(t,e,i){"use strict";i(0)({target:"Map",proto:!0,real:!0,forced:i(3)},{emplace:i(184)})},function(t,e,i){"use strict";i(0)({target:"Map",proto:!0,real:!0,forced:i(3)},{updateOrInsert:i(131)})},function(t,e,i){"use strict";i(0)({target:"Map",proto:!0,real:!0,forced:i(3)},{upsert:i(131)})},function(t,e,i){"use strict";i(0)({target:"WeakMap",proto:!0,real:!0,forced:i(3)},{emplace:i(184)})},function(t,e,i){"use strict";i(0)({target:"WeakMap",proto:!0,real:!0,forced:i(3)},{upsert:i(131)})},function(t,e,i){i(536),i(537),i(538),i(539),i(540),i(541),i(542)},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(21),l=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{difference:function(t){var e=s(this),i=new(h(e,a("Set")))(e),r=o(i.delete);return l(t,(function(t){r.call(i,t)})),i}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(21),l=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{intersection:function(t){var e=s(this),i=new(h(e,a("Set"))),r=o(e.has),n=o(i.add);return l(t,(function(t){r.call(e,t)&&n.call(i,t)})),i}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(4),o=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{isDisjointFrom:function(t){var e=a(this),i=s(e.has);return!o(t,(function(t,r){if(!0===i.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(75),l=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{isSubsetOf:function(t){var e=h(this),i=s(t),r=i.has;return"function"!=typeof r&&(i=new(a("Set"))(t),r=o(i.has)),!l(e,(function(t,e){if(!1===r.call(i,t))return e()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(1),s=i(4),o=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{isSupersetOf:function(t){var e=a(this),i=s(e.has);return!o(t,(function(t,r){if(!1===i.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(21),l=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{union:function(t){var e=s(this),i=new(h(e,a("Set")))(e);return l(t,o(i.add),{that:i}),i}})},function(t,e,i){"use strict";var r=i(0),n=i(3),a=i(14),s=i(1),o=i(4),h=i(21),l=i(6);r({target:"Set",proto:!0,real:!0,forced:n},{symmetricDifference:function(t){var e=s(this),i=new(h(e,a("Set")))(e),r=o(i.delete),n=o(i.add);return l(t,(function(t){r.call(i,t)||n.call(i,t)})),i}})},function(t,e,i){i(544),i(545)},function(t,e,i){i(19)("asyncDispose")},function(t,e,i){i(19)("dispose")},function(t,e,i){i(547);var r=i(550);t.exports=r},function(t,e,i){i(548),i(549)},function(t,e,i){"use strict";var r=i(0),n=i(12),a=i(10),s=i(26),o=i(30);r({target:"Array",proto:!0},{at:function(t){var e=n(this),i=a(e.length),r=s(t),o=r>=0?r:i+r;return o<0||o>=i?void 0:e[o]}}),o("at")},function(t,e,i){"use strict";var r=i(11),n=i(10),a=i(26),s=r.aTypedArray;(0,r.exportTypedArrayMethod)("at",(function(t){var e=s(this),i=n(e.length),r=a(t),o=r>=0?r:i+r;return o<0||o>=i?void 0:e[o]}))},function(t,e,i){i(551),i(553),i(555),i(558),i(560);var r=i(36);t.exports=r},function(t,e,i){i(552);var r=i(5);t.exports=r},function(t,e,i){i(149)},function(t,e,i){i(554)},function(t,e,i){i(168)},function(t,e,i){i(556),i(557)},function(t,e,i){i(141)},function(t,e,i){i(169)},function(t,e,i){i(559)},function(t,e,i){i(153)},function(t,e,i){i(561),i(562)},function(t,e,i){i(156)},function(t,e,i){i(19)("replaceAll")},function(t,e,i){i(564),i(565),i(566),i(567),i(568),i(176),i(178),i(129);var r=i(36);t.exports=r},function(t,e,i){var r=i(5),n=i(185),a=i(146),s=i(16);for(var o in n){var h=r[o],l=h&&h.prototype;if(l&&l.forEach!==a)try{s(l,"forEach",a)}catch(t){l.forEach=a}}},function(t,e,i){var r=i(5),n=i(185),a=i(86),s=i(16),o=i(7),h=o("iterator"),l=o("toStringTag"),c=a.values;for(var u in n){var d=r[u],p=d&&d.prototype;if(p){if(p[h]!==c)try{s(p,h,c)}catch(t){p[h]=c}if(p[l]||s(p,l,u),n[u])for(var f in a)if(p[f]!==a[f])try{s(p,f,a[f])}catch(t){p[f]=a[f]}}}},function(t,e,i){var r=i(0),n=i(5),a=i(125);r({global:!0,bind:!0,enumerable:!0,forced:!n.setImmediate||!n.clearImmediate},{setImmediate:a.set,clearImmediate:a.clear})},function(t,e,i){var r=i(0),n=i(5),a=i(165),s=i(58),o=n.process;r({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(t){var e=s&&o.domain;a(e?e.bind(t):t)}})},function(t,e,i){var r=i(0),n=i(5),a=i(84),s=[].slice,o=function(t){return function(e,i){var r=arguments.length>2,n=r?s.call(arguments,2):void 0;return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,n)}:e,i)}};r({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:o(n.setTimeout),setInterval:o(n.setInterval)})},function(t,e,i){
/*! JsRender v0.9.91 (Beta): http://jsviews.com/#jsrender */
/*! **VERSION FOR WEB** (For NODE.JS see http://jsviews.com/download/jsrender-node.js) */
!function(e,i){var r=i.jQuery;t.exports=r?e(i,r):function(t){if(t&&!t.fn)throw"Provide jQuery or null";return e(i,t)}}((function(t,e){"use strict";var i=!1===e;e=e&&e.fn?e:t.jQuery;var r,n,a,s,o,h,l,c,u,d,p,f,g,v,m,y,C,x,T,S,w,A,b="v0.9.91",k=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,_=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$_])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,P=/[ \t]*(\r\n|\n|\r)/g,I=/\\(['"])/g,D=/['"\\]/g,E=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,M=/^if\s/,O=/<(\w+)[>\s]/,R=/[\x00`><\"'&=]/,L=/^on[A-Z]|^convert(Back)?$/,N=/^\#\d+_`[\s\S]*\/\d+_`$/,$=/[\x00`><"'&=]/g,j=/[&<>]/g,H=/&(amp|gt|lt);/g,F=/\[['"]?|['"]?\]/g,V=0,B={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},W={amp:"&",gt:">",lt:"<"},U="For #index in nested block use #getIndex().",X={},z=t.jsrender,q=z&&e&&!e.render,Y={template:{compile:function t(i,r,n,a){function o(r){var s,o;if(""+r===r||r.nodeType>0&&(h=r)){if(!h)if(/^\.\/[^\\:*?"<>]*$/.test(r))(o=c[i=i||r])?r=o:h=document.getElementById(r);else if(e.fn&&!f.rTmpl.test(r))try{h=e(r,document)[0]}catch(t){}h&&("SCRIPT"!==h.tagName&&yt(r+": Use script block, not "+h.tagName),a?r=h.innerHTML:((s=h.getAttribute("data-jsv-tmpl"))&&("jsvTmpl"!==s?(r=c[s],delete c[s]):e.fn&&(r=e.data(h).jsvTmpl)),s&&r||(i=i||(e.fn?"jsvTmpl":r),r=t(i,h.innerHTML,n,a)),r.tmplName=i=i||s,"jsvTmpl"!==i&&(c[i]=r),h.setAttribute("data-jsv-tmpl",i),e.fn&&e.data(h,"jsvTmpl",r))),h=void 0}else r.fn||(r=void 0);return r}var h,l,d=r=r||"";f._html=u.html,0===a&&(a=void 0,d=o(d));(a=a||(r.markup?r.bnds?et({},r):r:{})).tmplName=a.tmplName||i||"unnamed",n&&(a._parentTmpl=n);!d&&r.markup&&(d=o(r.markup))&&d.fn&&(d=d.markup);if(void 0!==d)return d.render||r.render?d.tmpls&&(l=d):(r=dt(d,a),xt(d.replace(D,"\\$&"),r)),l||function(t){var e,i,r;for(e in Y)t[i=e+"s"]&&(r=t[i],t[i]={},s[i](r,t))}(l=et((function(){return l.render.apply(l,arguments)}),r)),l}},tag:{compile:function(t,e,i){var r,n,a,s=new f._tg;function o(){this._={unlinked:!0},this.inline=!0,this.tagName=t}h(e)?e={depends:e.depends,render:e}:""+e===e&&(e={template:e});if(n=e.baseTag)for(a in e.flow=!!e.flow,(n=""+n===n?i&&i.tags[n]||p[n]:n)||yt('baseTag: "'+e.baseTag+'" not found'),s=et(s,n),e)s[a]=K(n[a],e[a]);else s=et(s,e);void 0!==(r=s.template)&&(s.template=""+r===r?c[r]||c(r):r);(o.prototype=s).constructor=s._ctr=o,i&&(s._parentTmpl=i);return s}},viewModel:{compile:function(t,i){var r,n,a=this,s=i.getters,c=i.extend,u=i.id,d=e.extend({_is:t||"unnamed",unmap:S,merge:T},c),p="",f="",g=s?s.length:0,v=e.observable,m={};function y(t){n.apply(this,t)}function C(){return new y(arguments)}function x(t,e){for(var i,r,n,o,h=0;h<g;h++)i=void 0,(n=s[h])+""!==n&&(n=(i=n).getter),void 0===(o=t[n])&&i&&void 0!==(r=i.defaultVal)&&(o=ct(r,t)),e(o,i&&a[i.type],n)}function T(t){t=t+""===t?JSON.parse(t):t;var e,i,r,n,a,s,h,c,d,p=0,f=this;if(l(f)){for(h={},d=[],i=t.length,r=f.length;p<i;p++){for(c=t[p],s=!1,e=0;e<r&&!s;e++)h[e]||(a=f[e],u&&(h[e]=s=u+""===u?c[u]&&(m[u]?a[u]():a[u])===c[u]:u(a,c)));s?(a.merge(c),d.push(a)):d.push(C.map(c))}v?v(f).refresh(d,!0):f.splice.apply(f,[0,f.length].concat(d))}else for(n in x(t,(function(t,e,i){e?f[i]().merge(t):f[i](t)})),t)n===o||m[n]||(f[n]=t[n])}function S(){var t,e,i,r,n=0;if(l(this))return ut(this);for(t={};n<g;n++)i=void 0,(e=s[n])+""!==e&&(e=(i=e).getter),r=this[e](),t[e]=i&&r&&a[i.type]?l(r)?ut(r):r.unmap():r;for(e in this)"_is"===e||m[e]||e===o||"_"===e.charAt(0)&&m[e.slice(1)]||h(this[e])||(t[e]=this[e]);return t}for(y.prototype=d,r=0;r<g;r++)!function(t){t=t.getter||t,m[t]=r+1;var e="_"+t;p+=(p?",":"")+t,f+="this."+e+" = "+t+";\n",d[t]=d[t]||function(i){if(!arguments.length)return this[e];v?v(this).setProperty(t,i):this[e]=i},v&&(d[t].set=d[t].set||function(t){this[e]=t})}(s[r]);return(n=new Function(p,f.slice(0,-1))).prototype=d,d.constructor=n,C.map=function(e){e=e+""===e?JSON.parse(e):e;var i,r,n=0,a=e,s=[];if(l(e)){for(i=(e=e||[]).length;n<i;n++)s.push(this.map(e[n]));return s._is=t,s.unmap=S,s.merge=T,s}if(e)for(r in x(e,(function(t,e){e&&(t=e.map(t)),s.push(t)})),a=this.apply(this,s),e)r===o||m[r]||(a[r]=e[r]);return a},C.getters=s,C.extend=c,C.id=u,C}},helper:{},converter:{}};function G(t,e){return function(){var i,r=this,n=r.base;return r.base=t,i=e.apply(r,arguments),r.base=n,i}}function K(t,e){return h(e)&&((e=G(t?t._d?t:G(J,t):J,e))._d=(t&&t._d||0)+1),e}function Z(t,e){var i,r=e.props;for(i in r)!L.test(i)||t[i]&&t[i].fix||(t[i]="convert"!==i?K(t.constructor.prototype[i],r[i]):r[i])}function Q(t){return t}function J(){return""}function tt(t){this.name=(e.link?"JsViews":"JsRender")+" Error",this.message=t||this.name}function et(t,e){if(t){for(var i in e)t[i]=e[i];return t}}function it(){var t=this.get("item");return t?t.index:void 0}function rt(){return this.index}function nt(t,e,i,r){var n,a,s,o=0;if(1===i&&(r=1,i=void 0),e)for(s=(a=e.split(".")).length;t&&o<s;o++)n=t,t=a[o]?t[a[o]]:t;return i&&(i.lt=i.lt||o<s),void 0===t?r?J:"":r?function(){return t.apply(n,arguments)}:t}function at(i,r,n){var a,s,o,l,c,u,p,g=this,v=!A&&arguments.length>1,m=g.ctx;if(i){if(g._||(c=g.index,g=g.tag),u=g,m&&m.hasOwnProperty(i)||(m=d).hasOwnProperty(i)){if(o=m[i],"tag"===i||"tagCtx"===i||"root"===i||"parentTags"===i||g._.it===i)return o}else m=void 0;if((g.tagCtx||g.linked)&&(o&&o._cxp||(g=g.tagCtx||h(o)?g:!(g=g.scope||g).isTop&&g.ctx.tag||g,void 0!==o&&g.tagCtx&&(g=g.tagCtx.view.scope),m=g._ocps,(o=m&&m.hasOwnProperty(i)&&m[i]||o)&&o._cxp||!n&&!v||((m||(g._ocps=g._ocps||{}))[i]=o=[{_ocp:o,_vw:u,_key:i}],o._cxp={path:"_ocp",ind:0,updateValue:function(t,i){return e.observable(o[0]).setProperty("_ocp",t),this}})),l=o&&o._cxp)){if(arguments.length>2)return(s=o[1]?f._ceo(o[1].deps):["_ocp"]).unshift(o[0]),s._cxp=l,s;if(c=l.tagElse,p=o[1]?l.tag&&l.tag.cvtArgs?l.tag.cvtArgs(1,c)[l.ind]:o[1](o[0].data,o[0],f):o[0]._ocp,v)return o&&p!==r&&f._ucp(i,r,g,l),g;o=p}return o&&h(o)&&(et(a=function(){return o.apply(this&&this!==t?this:u,arguments)},o),a._vw=u),a||o}}function st(t,e){var i,r,n,a,s,o,h,c=this;if(c.tagName?c=(o=c).tagCtxs?o.tagCtxs[e||0]:o.tagCtx:o=c.tag,s=o.bindFrom,a=c.args,(h=o.convert)&&""+h===h&&(h="true"===h?void 0:c.view.getRsc("converters",h)||yt("Unknown converter: '"+h+"'")),h&&!t&&(a=a.slice()),s){for(n=[],i=s.length;i--;)r=s[i],n.unshift(ot(c,r));t&&(a=n)}if(h){if(void 0===(h=h.apply(o,n||a)))return a;if(i=(s=s||[0]).length,l(h)&&h.length===i||(h=[h],s=[0],i=1),t)a=h;else for(;i--;)+(r=s[i])===r&&(a[r]=h[i])}return a}function ot(t,e){return(t=t[+e===e?"args":"props"])&&t[e]}function ht(t){return this.cvtArgs(1,t)}function lt(t,e,i,r,n,a,s,o){var h,l,c,u="array"===e;this.content=o,this.views=u?[]:{},this.data=r,this.tmpl=n,c=this._={key:0,useKey:u?0:1,id:""+V++,onRender:s,bnds:{}},this.linked=!!s,this.type=e||"top",(this.parent=i)?(this.root=i.root||this,h=i.views,l=i._,this.isTop=l.scp,this.scope=(!t.tag||t.tag===i.ctx.tag)&&!this.isTop&&i.scope||this,l.useKey?(h[c.key="_"+l.useKey++]=this,this.index=U,this.getIndex=it):h.length===(c.key=this.index=a)?h.push(this):h.splice(a,0,this),this.ctx=t||i.ctx):this.ctx=t||{}}function ct(t,e){return h(t)?t.call(e):t}function ut(t){for(var e=[],i=0,r=t.length;i<r;i++)e.push(t[i].unmap());return e}function dt(t,i){var r,n=v._wm||{},a={tmpls:[],links:{},bnds:[],_is:"template",render:vt};return i&&(a=et(a,i)),a.markup=t,a.htmlTag||(r=O.exec(t),a.htmlTag=r?r[1].toLowerCase():""),(r=n[a.htmlTag])&&r!==n.div&&(a.markup=e.trim(a.markup)),a}function pt(t,e){var i=t+"s";s[i]=function r(n,a,o){var h,l,c,u=f.onStore[t];if(n&&"object"==typeof n&&!n.nodeType&&!n.markup&&!n.getTgt&&!("viewModel"===t&&n.getters||n.extend)){for(l in n)r(l,n[l],a);return a||s}return void 0===a&&(a=n,n=void 0),n&&""+n!==n&&(o=a,a=n,n=void 0),c=o?"viewModel"===t?o:o[i]=o[i]||{}:r,h=e.compile,null===a?n&&delete c[n]:(h&&((a=h.call(c,n,a,o,0)||{})._is=t),n&&(c[n]=a)),u&&u(n,a,o,h),a}}function ft(t){m[t]=function(e){return arguments.length?(g[t]=e,m):g[t]}}function gt(t){function e(e,i){this.tgt=t.getTgt(e,i),i.map=this}return h(t)&&(t={getTgt:t}),t.baseMap&&(t=et(et({},t.baseMap),t)),t.map=function(t,i){return new e(t,i)},t}function vt(t,e,i,r,n,s){var o,c,u,d,p,g,m,y,C=r,x="";if(!0===e?(i=e,e=void 0):"object"!=typeof e&&(e=void 0),(u=this.tag)?(p=this,d=(C=C||p.view).getTmpl(u.template||p.tmpl),arguments.length||(t=u.contentCtx&&h(u.contentCtx)?t=u.contentCtx(t):C)):d=this,d){if(!r&&t&&"view"===t._is&&(C=t),C&&t===C&&(t=C.data),g=!C,A=A||g,C||((e=e||{}).root=t),!A||v.useViews||d.useViews||C&&C!==a)x=mt(d,t,e,i,C,n,s,u);else{if(C?(m=C.data,y=C.index,C.index=U):(m=(C=a).data,C.data=t,C.ctx=e),l(t)&&!i)for(o=0,c=t.length;o<c;o++)C.index=o,C.data=t[o],x+=d.fn(t[o],C,f);else C.data=t,x+=d.fn(t,C,f);C.data=m,C.index=y}g&&(A=void 0)}return x}function mt(t,e,i,r,n,a,s,o){function h(t){(T=et({},i))[x]=t}var c,u,d,p,g,v,m,y,C,x,T,S,w,A="";if(o&&(C=o.tagName,S=o.tagCtx,i=i?kt(i,o.ctx):o.ctx,t===n.content?m=t!==n.ctx._wrp?n.ctx._wrp:void 0:t!==S.content?t===o.template?(m=S.tmpl,i._wrp=S.content):m=S.content||n.content:m=n.content,!1===S.props.link&&((i=i||{}).link=!1),(x=S.props.itemVar)&&("~"!==x.charAt(0)&&Ct("Use itemVar='~myItem'"),x=x.slice(1))),n&&(s=s||n._.onRender,(w=i&&!1===i.link)&&n._.nl&&(s=void 0),i=kt(i,n.ctx)),!0===a&&(v=!0,a=0),s&&o&&o._.noVws&&(s=void 0),y=s,!0===s&&(y=void 0,s=n._.onRender),i=t.helpers?kt(t.helpers,i):i,T=i,l(e)&&!r)for((d=v?n:void 0!==a&&n||new lt(i,"array",n,e,t,a,s,m))._.nl=w,n&&n._.useKey&&(d._.bnd=!o||o._.bnd&&o,d.tag=o),c=0,u=e.length;c<u;c++)x&&h(e[c]),(p=new lt(T,"item",d,e[c],t,(a||0)+c,s,d.content))._.it=x,g=t.fn(e[c],p,f),A+=d._.onRender?d._.onRender(g,p):g;else x&&h(e),(d=v?n:new lt(T,C||"data",n,e,t,a,s,m))._.it=x,d.tag=o,d._.nl=w,A+=t.fn(e,d,f);return o&&(d.tagElse=S.index,S.contentView=d),y?y(A,d):A}function yt(t){throw new f.Err(t)}function Ct(t){yt("Syntax error\n"+t)}function xt(t,e,i,r,a){function s(e){(e-=v)&&S.push(t.substr(v,e).replace(P,"\\n"))}function o(e,i){e&&(e+="}}",Ct((i?"{{"+i+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+t))}var h,l,c,u,d,p=g.allowCode||e&&e.allowCode||!0===m.allowCode,f=[],v=0,C=[],S=f,w=[,,f];if(p&&e._is&&(e.allowCode=p),i&&(void 0!==r&&(t=t.slice(0,-r.length-2)+x),t=y+t+T),o(C[0]&&C[0][2].pop()[0]),t.replace(n,(function(n,h,l,d,f,g,m,y,x,T,A,b){(m&&h||x&&!l||y&&":"===y.slice(-1)||T)&&Ct(n),g&&(f=":",d="html");var k,_,D,O=(h||i)&&[[]],R="",N="",$="",j="",H="",F="",V="",B="",W=!(x=x||i&&!a)&&!f;l=l||(y=y||"#data",f),s(b),v=b+n.length,m?p&&S.push(["*","\n"+y.replace(/^:/,"ret+= ").replace(I,"$1")+";\n"]):l?("else"===l&&(M.test(y)&&Ct('For "{{else if expr}}" use "{{else expr}}"'),O=w[9]&&[[]],w[10]=t.substring(w[10],b),_=w[11]||w[0]||Ct("Mismatched: "+n),w=C.pop(),S=w[2],W=!0),y&&At(y.replace(P," "),O,e,i).replace(E,(function(t,e,i,r,n,a,s,o){return"this:"===r&&(a="undefined"),o&&(D=D||"@"===o.charAt(0)),r="'"+n+"':",s?(N+=i+a+",",j+="'"+o+"',"):i?($+=r+"j._cp("+a+',"'+o+'",view),',F+=r+"'"+o+"',"):e?V+=a:("trigger"===n&&(B+=a),"lateRender"===n&&(k="false"!==o),R+=r+a+",",H+=r+"'"+o+"',",u=u||L.test(n)),""})).slice(0,-1),O&&O[0]&&O.pop(),c=[l,d||!!r||u||"",W&&[],St(j||(":"===l?"'#data',":""),H,F),St(N||(":"===l?"data,":""),R,$),V,B,k,D,O||0],S.push(c),W&&(C.push(w),(w=c)[10]=v,w[11]=_)):A&&(o(A!==w[0]&&A!==w[11]&&A,w[0]),w[10]=t.substring(w[10],b),w=C.pop()),o(!w&&A),S=w[2]})),s(t.length),(v=f[f.length-1])&&o(""+v!==v&&+v[10]===v[10]&&v[0]),i){for(l=bt(f,t,i),d=[],h=f.length;h--;)d.unshift(f[h][9]);Tt(l,d)}else l=bt(f,e);return l}function Tt(t,e){var i,r,n=0,a=e.length;for(t.deps=[],t.paths=[];n<a;n++)for(i in t.paths.push(r=e[n]),r)"_jsvto"!==i&&r.hasOwnProperty(i)&&r[i].length&&!r[i].skp&&(t.deps=t.deps.concat(r[i]))}function St(t,e,i){return[t.slice(0,-1),e.slice(0,-1),i.slice(0,-1)]}function wt(t,e){return"\n\t"+(e?e+":{":"")+"args:["+t[0]+"],\n\tprops:{"+t[1]+"}"+(t[2]?",\n\tctx:{"+t[2]+"}":"")}function At(t,e,i,r){var n,s,o,h,l,c,u=e&&e[0],d={bd:u},p={0:d},f=0,g=(i?i.links:u&&(u.links=u.links||{}))||a.tmpl.links,v=0,m={},y={};return"@"===t.charAt(0)&&(t=t.replace(F,".")),c=(t+(i?" ":"")).replace(_,(function(a,c,T,S,w,A,b,_,P,I,D,E,M,O,R,L,N,$,j,H,F){S&&!_&&(w=S+w),A=A||"",T=T||c||M,w=w||P,I&&(I=!/\)|]/.test(F.charAt(H-1)))&&(w=w.slice(1).split(".").join("^"));var V,B,W,U,X,z=")";if("["===(D=D||$||"")&&(D="[j._sq(",z=")]"),!b||l||h){if(u&&N&&!l&&!h&&v&&(!n||o||s)&&(V=y[v-1],F.length-1>H-(V||0))){if(V=F.slice(V,H+a.length),!0!==B)if(W=s||p[v-1].bd,(U=W[W.length-1])&&U.prm){for(;U.sb&&U.sb.prm;)U=U.sb;X=U.sb={path:U.sb,bnd:U.bnd}}else W.push(X={path:W.pop()});(B=g[N=C+":"+V+" onerror=''"+x])||(g[N]=!0,g[N]=B=xt(N,i,!0)),!0!==B&&X&&(X._cpfn=B,X.prm=d.bd,X.bnd=X.bnd||X.path&&X.path.indexOf("^")>=0)}return l?(l=!O)?a:M+'"':h?(h=!R)?a:M+'"':(T?(y[v]=H++,d=p[++v]={bd:[]},T):"")+(j?v?"":(f=F.slice(f,H),(n?(n=o=s=!1,"\b"):"\b,")+f+(f=H+a.length,u&&e.push(d.bd=[]),"\b")):_?(v&&Ct(t),u&&e.pop(),n="_"+w,o=S,f=H+a.length,u&&((u=d.bd=e[n]=[]).skp=!S),w+":"):w?w.split("^").join(".").replace(k,(function(t,i,a,o,h,l,c,p){var f="."===a;if(a&&(w=w.slice(i.length),/^\.?constructor$/.test(p||w)&&Ct(t),f||(t=(I?(r?"":"(ltOb.lt=ltOb.lt||")+"(ob=":"")+(o?'view.ctxPrm("'+o+'")':h?"view":"data")+(I?")===undefined"+(r?"":")")+'?"":view.getOb(ob,"':"")+(p?(l?"."+l:o||h?"":"."+a)+(c||""):(p=o?"":h?l||"":a,"")),t=i+("view.data"===(t+=p?"."+p:"").slice(0,9)?t.slice(5):t)+(I?(r?'"':'",ltOb')+(D?",1)":")"):"")),u)){if(W="_linkTo"===n?s=e._jsvto=e._jsvto||[]:d.bd,U=f&&W[W.length-1]){if(U._cpfn){for(;U.sb;)U=U.sb;U.bnd&&(w="^"+w.slice(1)),U.sb=w,U.bnd=U.bnd||"^"===w.charAt(0)}}else W.push(w);y[v]=H+(f?1:0)}return t}))+(D?(d=p[++v]={bd:[]},m[v]=z,D):A):A||(L?(L=m[v]||L,m[v]=!1,d=p[--v],L+(D?(d=p[++v],m[v]=z,D):"")):E?(m[v]||Ct(t),","):c?"":(l=O,h=R,'"')))}Ct(t)})),!v&&c||Ct(t)}function bt(t,e,i){var r,n,a,s,o,h,l,c,u,d,f,m,y,C,x,T,S,w,A,b,k,_,D,E,M,O,R,L,N,$,j,H,F=0,V=v.useViews||e.useViews||e.tags||e.templates||e.helpers||e.converters,B="",W={},U=t.length;for(""+e===e?(S=i?'data-link="'+e.replace(P," ").slice(1,-1)+'"':e,e=0):(S=e.tmplName||"unnamed",e.allowCode&&(W.allowCode=!0),e.debug&&(W.debug=!0),d=e.bnds,T=e.tmpls),r=0;r<U;r++)if(""+(n=t[r])===n)B+='\n+"'+n+'"';else if("*"===(a=n[0]))B+=";\n"+n[1]+"\nret=ret";else{if(s=n[1],b=!i&&n[2],o=wt(n[3],"params")+"},"+wt(m=n[4]),N=n[6],$=n[7],n[8]?(j="\nvar ob,ltOb={},ctxs=",H=";\nctxs.lt=ltOb.lt;\nreturn ctxs;"):(j="\nreturn ",H=""),k=n[10]&&n[10].replace(I,"$1"),(E="else"===a)?f&&f.push(n[9]):(R=n[5]||!1!==g.debugMode&&"undefined",d&&(f=n[9])&&(f=[f],F=d.push(1))),V=V||m[1]||m[2]||f||/view.(?!index)/.test(m[0]),(M=":"===a)?s&&(a="html"===s?">":s+a):(b&&((w=dt(k,W)).tmplName=S+"/"+a,w.useViews=w.useViews||V,bt(b,w),V=w.useViews,T.push(w)),E||(A=a,V=V||a&&(!p[a]||!p[a].flow),D=B,B=""),_=(_=t[r+1])&&"else"===_[0]),L=R?";\ntry{\nret+=":"\n+",y="",C="",M&&(f||N||s&&"html"!==s||$)){if((O=new Function("data,view,j,u","// "+S+" "+ ++F+" "+a+j+"{"+o+"};"+H))._er=R,O._tag=a,O._bd=!!f,O._lr=$,i)return O;Tt(O,f),u=!0,y=(x='c("'+s+'",view,')+F+",",C=")"}if(B+=M?(i?(R?"try{\n":"")+"return ":L)+(u?(u=void 0,V=c=!0,x+(O?(d[F-1]=O,F):"{"+o+"}")+")"):">"===a?(l=!0,"h("+m[0]+")"):(!0,"((v="+m[0]+")!=null?v:"+(i?"null)":'"")'))):(h=!0,"\n{view:view,tmpl:"+(b?T.length:"0")+","+o+"},"),A&&!_){if(B="["+B.slice(0,-1)+"]",x='t("'+A+'",view,this,',i||f){if((B=new Function("data,view,j,u"," // "+S+" "+F+" "+A+j+B+H))._er=R,B._tag=A,f&&Tt(d[F-1]=B,f),B._lr=$,i)return B;y=x+F+",undefined,",C=")"}B=D+L+x+(f&&F||B)+")",f=0,A=0}R&&!_&&(V=!0,B+=";\n}catch(e){ret"+(i?"urn ":"+=")+y+"j._err(e,view,"+R+")"+C+";}"+(i?"":"ret=ret"))}B="// "+S+(W.debug?"\ndebugger;":"")+"\nvar v"+(h?",t=j._tag":"")+(c?",c=j._cnvt":"")+(l?",h=j._html":"")+(i?(n[8]?", ob":"")+";\n":',ret=""')+B+(i?"\n":";\nreturn ret;");try{B=new Function("data,view,j,u",B)}catch(t){Ct("Compiled template code:\n\n"+B+'\n: "'+(t.message||t)+'"')}return e&&(e.fn=B,e.useViews=!!V),B}function kt(t,e){return t&&t!==e?e?et(et({},e),t):t:e&&et({},e)}function _t(t,i){var r,n,a,s=i.tag,o=i.props,c=i.params.props,u=o.filter,d=o.sort,p=!0===d,f=parseInt(o.step),g=o.reverse?-1:1;if(!l(t))return t;if(p||d&&""+d===d?((r=t.map((function(t,e){return{i:e,v:""+(t=p?t:nt(t,d))===t?t.toLowerCase():t}}))).sort((function(t,e){return t.v>e.v?g:t.v<e.v?-g:0})),t=r.map((function(e){return t[e.i]}))):(d||g<0)&&!s.dataMap&&(t=t.slice()),h(d)&&(t=t.sort(d)),g<0&&!d&&(t=t.reverse()),t.filter&&u&&(t=t.filter(u,i),i.tag.onFilter&&i.tag.onFilter(i)),c.sorted&&(r=d||g<0?t:t.slice(),s.sorted?e.observable(s.sorted).refresh(r):i.map.sorted=r),n=o.start,a=o.end,(c.start&&void 0===n||c.end&&void 0===a)&&(n=a=0),isNaN(n)&&isNaN(a)||(n=+n||0,a=void 0===a||a>t.length?t.length:+a,t=t.slice(n,a)),f>1){for(n=0,a=t.length,r=[];n<a;n+=f)r.push(t[n]);t=r}return c.paged&&s.paged&&$observable(s.paged).refresh(t),t}function Pt(t,i,r){var n=this.jquery&&(this[0]||yt("Unknown template")),a=n.getAttribute("data-jsv-tmpl");return vt.call(a&&e.data(n).jsvTmpl||c(n),t,i,r)}function It(t){return B[t]||(B[t]="&#"+t.charCodeAt(0)+";")}function Dt(t,e){return W[e]||""}function Et(t){return null!=t?R.test(t)&&(""+t).replace($,It)||t:""}if(s={jsviews:b,sub:{View:lt,Err:tt,tmplFn:xt,parse:At,extend:et,extendCtx:kt,syntaxErr:Ct,onStore:{template:function(t,e){null===e?delete X[t]:X[t]=e}},addSetting:ft,settings:{allowCode:!1},advSet:J,_thp:Z,_gm:K,_tg:function(){},_cnvt:function(t,e,i,r){var n,a,s,o,h="number"==typeof i&&e.tmpl.bnds[i-1],l=e.linkCtx;void 0===r&&h&&h._lr&&(r="");void 0!==r?i=r={props:{},args:[r]}:h&&(i=h(e.data,e,f));if(h=h._bd&&h,t||h){if(n=l&&l.tag,i.view=e,!n){if(n=et(new f._tg,{_:{bnd:h,unlinked:!0,lt:i.lt},inline:!l,tagName:":",convert:t,flow:!0,tagCtx:i,tagCtxs:[i],_is:"tag"}),(s=i.args.length)>1)for(o=n.bindTo=[];s--;)o.unshift(s);l&&(l.tag=n,n.linkCtx=l),i.ctx=kt(i.ctx,(l?l.view:e).ctx),Z(n,i)}n._er=r&&a,n.ctx=i.ctx||n.ctx||{},i.ctx=void 0,a=n.cvtArgs()[0],n._er=r&&a}else a=i.args[0];return null!=(a=h&&e._.onRender?e._.onRender(a,e,n):a)?a:""},_tag:function(t,e,i,r,n,s){function o(t){var e=h[t];if(void 0!==e)for(e=l(e)?e:[e],m=e.length;m--;)L=e[m],isNaN(parseInt(L))||(e[m]=parseInt(L));return e||[0]}var h,c,d,p,g,v,m,y,C,x,T,S,w,A,b,k,_,P,I,D,E,M,O,R,L,$,j,H,F,V=0,B="",W=(e=e||a).linkCtx||0,U=e.ctx,X=i||e.tmpl,z="number"==typeof r&&e.tmpl.bnds[r-1];"tag"===t._is?(t=(h=t).tagName,r=h.tagCtxs,h.template):(c=e.getRsc("tags",t)||yt("Unknown tag: {{"+t+"}} "),c.template);void 0===s&&z&&(z._lr=c.lateRender&&!1!==z._lr||z._lr)&&(s="");void 0!==s?(B+=s,r=s=[{props:{},args:[],params:{props:{}}}]):z&&(r=z(e.data,e,f));for(v=r.length;V<v;V++)x=r[V],k=x.tmpl,(!W||!W.tag||V&&!W.tag.inline||h._er||k&&+k===k)&&(k&&X.tmpls&&(x.tmpl=x.content=X.tmpls[k-1]),x.index=V,x.ctxPrm=at,x.render=vt,x.cvtArgs=st,x.bndArgs=ht,x.view=e,x.ctx=kt(kt(x.ctx,c&&c.ctx),U)),(i=x.props.tmpl)&&(x.tmpl=e.getTmpl(i),x.content=x.content||x.tmpl),h?W&&W.fn._lr&&(_=!!h.init):(h=new c._ctr,_=!!h.init,h.parent=g=U&&U.tag,h.tagCtxs=r,W&&(h.inline=!1,W.tag=h,h.linkCtx=W),(h._.bnd=z||W.fn)?(h._.ths=x.params.props.this,h._.lt=r.lt,h._.arrVws={}):h.dataBoundOnly&&yt(t+" must be data-bound:\n{^{"+t+"}}")),O=h.dataMap,x.tag=h,O&&r&&(x.map=r[V].map),h.flow||(T=x.ctx=x.ctx||{},d=h.parents=T.parentTags=U&&kt(T.parentTags,U.parentTags)||{},g&&(d[g.tagName]=g),d[h.tagName]=T.tag=h,T.tagCtx=x);if(!(h._er=s)){for(Z(h,r[0]),h.rendering={rndr:h.rendering},V=0;V<v;V++){if(x=h.tagCtx=r[V],M=x.props,h.ctx=x.ctx,!V){if(_&&(h.init(x,W,h.ctx),_=void 0),x.args.length||!1===x.argDefault||!1===h.argDefault||(x.args=D=[x.view.data],x.params.args=["#data"]),w=o("bindTo"),void 0!==h.bindTo&&(h.bindTo=w),void 0!==h.bindFrom?h.bindFrom=o("bindFrom"):h.bindTo&&(h.bindFrom=h.bindTo=w),A=h.bindFrom||w,j=w.length,$=A.length,h._.bnd&&(H=h.linkedElement)&&(h.linkedElement=H=l(H)?H:[H],j!==H.length&&yt("linkedElement not same length as bindTo")),(H=h.linkedCtxParam)&&(h.linkedCtxParam=H=l(H)?H:[H],$!==H.length&&yt("linkedCtxParam not same length as bindFrom/bindTo")),A)for(h._.fromIndex={},h._.toIndex={},y=$;y--;)for(L=A[y],m=j;m--;)L===w[m]&&(h._.fromIndex[m]=y,h._.toIndex[y]=m);W&&(W.attr=h.attr=W.attr||h.attr||W._dfAt),p=h.attr,h._.noVws=p&&"html"!==p}if(D=h.cvtArgs(void 0,V),h.linkedCtxParam)for(E=h.cvtArgs(1,V),m=$,F=h.constructor.prototype.ctx;m--;)(S=h.linkedCtxParam[m])&&(L=A[m],b=E[m],x.ctx[S]=f._cp(F&&void 0===b?F[S]:b,void 0!==b&&ot(x.params,L),x.view,h._.bnd&&{tag:h,cvt:h.convert,ind:m,tagElse:V}));(P=M.dataMap||O)&&(D.length||M.dataMap)&&((I=x.map)&&I.src===D[0]&&!n||(I&&I.src&&I.unmap(),P.map(D[0],x,I,!h._.bnd),I=x.map),D=[I.tgt]),C=void 0,h.render&&(C=h.render.apply(h,D),e.linked&&C&&!N.test(C)&&((i={links:[]}).render=i.fn=function(){return C},C=mt(i,e.data,void 0,!0,e,void 0,void 0,h))),D.length||(D=[e]),void 0===C&&(R=D[0],h.contentCtx&&(R=!0===h.contentCtx?e:h.contentCtx(R)),C=x.render(R,!0)||(n?void 0:"")),B=B?B+(C||""):C}h.rendering=h.rendering.rndr}h.tagCtx=r[0],h.ctx=h.tagCtx.ctx,h._.noVws&&h.inline&&(B="text"===p?u.html(B):"");return z&&e._.onRender?e._.onRender(B,e,h):B},_er:yt,_err:function(t,e,i){var r=void 0!==i?h(i)?i.call(e.data,t,e):i||"":"{Error: "+(t.message||t)+"}";g.onError&&void 0!==(i=g.onError.call(e.data,t,i&&r,e))&&(r=i);return e&&!e.linkCtx?u.html(r):r},_cp:Q,_sq:function(t){return"constructor"===t&&Ct(""),t}},settings:{delimiters:function t(e,i,r){if(!e)return g.delimiters;if(l(e))return t.apply(s,e);return g.delimiters=[e,i,S=r?r.charAt(0):S],y=e.charAt(0),C=e.charAt(1),x=i.charAt(0),T=i.charAt(1),e="\\"+y+"(\\"+S+")?\\"+C,i="\\"+x+"\\"+T,n="(?:(\\w+(?=[\\/\\s\\"+x+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+x+"]|\\"+x+"(?!\\"+T+"))*?)",f.rTag="(?:"+n+")",n=new RegExp("(?:"+e+n+"(\\/)?|\\"+y+"(\\"+S+")?\\"+C+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+i,"g"),f.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+e+".*"+i),m},advanced:function(t){return t?(et(v,t),f.advSet(),m):v}},map:gt},(tt.prototype=new Error).constructor=tt,it.depends=function(){return[this.get("item"),"index"]},rt.depends="index",lt.prototype={get:function(t,e){e||!0===t||(e=t,t=void 0);var i,r,n,a,s=this,o=!e||"root"===e;if(t){if(!(a=e&&s.type===e&&s))if(i=s.views,s._.useKey){for(r in i)if(a=e?i[r].get(t,e):i[r])break}else for(r=0,n=i.length;!a&&r<n;r++)a=e?i[r].get(t,e):i[r]}else if(o)a=s.root;else for(;s&&!a;)a=s.type===e?s:void 0,s=s.parent;return a},getIndex:rt,getRsc:function(t,e){var i,r,n=this;if(""+e===e){for(;void 0===i&&n;)i=(r=n.tmpl&&n.tmpl[t])&&r[e],n=n.parent;return i||s[t][e]}},getTmpl:function(t){return t&&(t.fn?t:this.getRsc("templates",t)||c(t))},ctxPrm:at,getOb:nt,_is:"view"},f=s.sub,m=s.settings,!(z||e&&e.render)){for(r in Y)pt(r,Y[r]);if(u=s.converters,d=s.helpers,p=s.tags,f._tg.prototype={baseApply:function(t){return this.base.apply(this,t)},cvtArgs:st,bndArgs:ht,ctxPrm:at},a=f.topView=new lt,e){if(e.fn.render=Pt,o=e.expando,e.observable){if(b!==(b=e.views.jsviews))throw"JsObservable requires JsRender "+b;et(f,e.views.sub),s.map=e.views.map}}else e={},i&&(t.jsrender=e),e.renderFile=e.__express=e.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},e.isFunction=function(t){return"function"==typeof t},e.isArray=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},f._jq=function(t){t!==e&&(et(t,e),(e=t).fn.render=Pt,delete e.jsrender,o=e.expando)},e.jsrender=b;for(w in(g=f.settings).allowCode=!1,h=e.isFunction,e.render=X,e.views=s,e.templates=c=s.templates,g)ft(w);(m.debugMode=function(t){return void 0===t?g.debugMode:(g.debugMode=t,g.onError=t+""===t?function(){return t}:h(t)?t:void 0,m)})(!1),v=g.advanced={useViews:!1,_jsv:!1},p({if:{render:function(t){var e=this.tagCtx;return this.rendering.done||!t&&(e.args.length||!e.index)?"":(this.rendering.done=!0,void(this.selected=e.index))},contentCtx:!0,flow:!0},for:{sortDataMap:gt(_t),init:function(t,e){var i,r,n,a=this.tagCtxs;for(i=a.length;i--;)n=(r=a[i]).props,r.argDefault=void 0===n.end||r.args.length>0,!1!==r.argDefault&&l(r.args[0])&&(void 0!==n.sort||r.params.props.start||r.params.props.end||void 0!==n.step||n.filter||n.reverse)&&(n.dataMap=this.sortDataMap)},render:function(t){var e,i,r,n,a,s=this.tagCtx,o=!1===s.argDefault,h=s.props,c=o||s.args.length,u="",d=0;if(!this.rendering.done){if(e=c?t:s.view.data,o)for(o=h.reverse?"unshift":"push",n=+h.end,a=+h.step||1,e=[],r=+h.start||0;(n-r)*a>0;r+=a)e[o](r);void 0!==e&&(i=l(e),u+=s.render(e,!c||h.noIteration),d+=i?e.length:1),(this.rendering.done=d)&&(this.selected=s.index)}return u},flow:!0},props:{baseTag:"for",dataMap:gt((function(t,i){var r,n,a=[];if("object"==typeof t||h(t))for(r in t)n=t[r],r===o||!t.hasOwnProperty(r)||i.props.noFunctions&&e.isFunction(n)||a.push({key:r,prop:n});return _t(a,i)})),init:J,flow:!0},include:{flow:!0},"*":{render:Q,flow:!0},":*":{render:Q,flow:!0},dbg:d.dbg=u.dbg=function(t){try{throw console.log("JsRender dbg breakpoint: "+t),"dbg breakpoint"}catch(t){}return this.base?this.baseApply(arguments):t}}),u({html:Et,attr:Et,encode:function(t){return""+t===t?t.replace(j,It):t},unencode:function(t){return""+t===t?t.replace(H,Dt):t},url:function(t){return null!=t?encodeURI(""+t):null===t?t:""}})}return g=f.settings,l=(e||z).isArray,m.delimiters("{{","}}","^"),q&&z.views.sub._jq(e),e||z}),window)},function(t,e,i){var r;/*! UIkit 2.26.4 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */!function(n){if(void 0===(r=function(){var t=window.UIkit||n(window,window.jQuery,window.document);return t.load=function(e,i,r,n){var a,s=e.split(","),o=[],h=(n.config&&n.config.uikit&&n.config.uikit.base?n.config.uikit.base:"").replace(/\/+$/g,"");if(!h)throw new Error("Please define base path to UIkit in the requirejs config.");for(a=0;a<s.length;a+=1){var l=s[a].replace(/\./g,"/");o.push(h+"/components/"+l)}i(o,(function(){r(t)}))},t}.call(e,i,e,t))||(t.exports=r),!window.jQuery)throw new Error("UIkit requires jQuery");window&&window.jQuery&&n(window,window.jQuery,window.document)}((function(t,e,i){"use strict";var r,n,a,s={},o=t.UIkit?Object.create(t.UIkit):void 0;if(s.version="2.26.4",s.noConflict=function(){return o&&(t.UIkit=o,e.UIkit=o,e.fn.uk=o.fn),s},s.prefix=function(t){return t},s.$=e,s.$doc=s.$(document),s.$win=s.$(window),s.$html=s.$("html"),s.support={},s.support.transition=(r=function(){var t,e=i.body||i.documentElement,r={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in r)if(void 0!==e.style[t])return r[t]}())&&{end:r},s.support.animation=(n=function(){var t,e=i.body||i.documentElement,r={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(t in r)if(void 0!==e.style[t])return r[t]}())&&{end:n},function(){Date.now=Date.now||function(){return(new Date).getTime()};for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var i=t[e];window.requestAnimationFrame=window[i+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var r=0;window.requestAnimationFrame=function(t){var e=Date.now(),i=Math.max(r+16,e);return setTimeout((function(){t(r=i)}),i-e)},window.cancelAnimationFrame=clearTimeout}}(),s.support.touch="ontouchstart"in document||t.DocumentTouch&&document instanceof t.DocumentTouch||t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints>0||t.navigator.pointerEnabled&&t.navigator.maxTouchPoints>0||!1,s.support.mutationobserver=t.MutationObserver||t.WebKitMutationObserver||null,s.Utils={},s.Utils.isFullscreen=function(){return document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.fullscreenElement||!1},s.Utils.str2json=function(t,e){try{return e?JSON.parse(t.replace(/([\$\w]+)\s*:/g,(function(t,e){return'"'+e+'":'})).replace(/'([^']+)'/g,(function(t,e){return'"'+e+'"'}))):new Function("","var json = "+t+"; return JSON.parse(JSON.stringify(json));")()}catch(t){return!1}},s.Utils.debounce=function(t,e,i){var r;return function(){var n=this,a=arguments,s=function(){r=null,i||t.apply(n,a)},o=i&&!r;clearTimeout(r),r=setTimeout(s,e),o&&t.apply(n,a)}},s.Utils.throttle=function(t,e){var i=!1;return function(){i||(t.call(),i=!0,setTimeout((function(){i=!1}),e))}},s.Utils.removeCssRules=function(t){var e,i,r,n,a,s,o,h,l,c;t&&setTimeout((function(){try{for(c=document.styleSheets,n=0,o=c.length;n<o;n++){for(r=c[n],i=[],r.cssRules=r.cssRules,e=a=0,h=r.cssRules.length;a<h;e=++a)r.cssRules[e].type===CSSRule.STYLE_RULE&&t.test(r.cssRules[e].selectorText)&&i.unshift(e);for(s=0,l=i.length;s<l;s++)r.deleteRule(i[s])}}catch(t){}}),0)},s.Utils.isInView=function(t,i){var r=e(t);if(!r.is(":visible"))return!1;var n=s.$win.scrollLeft(),a=s.$win.scrollTop(),o=r.offset(),h=o.left,l=o.top;return i=e.extend({topoffset:0,leftoffset:0},i),l+r.height()>=a&&l-i.topoffset<=a+s.$win.height()&&h+r.width()>=n&&h-i.leftoffset<=n+s.$win.width()},s.Utils.checkDisplay=function(t,i){var r=s.$("[data-uk-margin], [data-uk-grid-match], [data-uk-grid-margin], [data-uk-check-display]",t||document);return t&&!r.length&&(r=e(t)),r.trigger("display.uk.check"),i&&("string"!=typeof i&&(i='[class*="uk-animation-"]'),r.find(i).each((function(){var t=s.$(this),e=t.attr("class").match(/uk-animation-(.+)/);t.removeClass(e[0]).width(),t.addClass(e[0])}))),r},s.Utils.options=function(t){if("string"!=e.type(t))return t;-1!=t.indexOf(":")&&"}"!=t.trim().substr(-1)&&(t="{"+t+"}");var i=t?t.indexOf("{"):-1,r={};if(-1!=i)try{r=s.Utils.str2json(t.substr(i))}catch(t){}return r},s.Utils.animate=function(t,i){var r=e.Deferred();return(t=s.$(t)).css("display","none").addClass(i).one(s.support.animation.end,(function(){t.removeClass(i),r.resolve()})),t.css("display",""),r.promise()},s.Utils.uid=function(t){return(t||"id")+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random())},s.Utils.template=function(t,e){for(var i,r,n,a,s=t.replace(/\n/g,"\\n").replace(/\{\{\{\s*(.+?)\s*\}\}\}/g,"{{!$1}}").split(/(\{\{\s*(.+?)\s*\}\})/g),o=0,h=[],l=0;o<s.length;){if((i=s[o]).match(/\{\{\s*(.+?)\s*\}\}/))switch(r=(i=s[o+=1])[0],n=i.substring(i.match(/^(\^|\#|\!|\~|\:)/)?1:0),r){case"~":h.push("for(var $i=0;$i<"+n+".length;$i++) { var $item = "+n+"[$i];"),l++;break;case":":h.push("for(var $key in "+n+") { var $val = "+n+"[$key];"),l++;break;case"#":h.push("if("+n+") {"),l++;break;case"^":h.push("if(!"+n+") {"),l++;break;case"/":h.push("}"),l--;break;case"!":h.push("__ret.push("+n+");");break;default:h.push("__ret.push(escape("+n+"));")}else h.push("__ret.push('"+i.replace(/\'/g,"\\'")+"');");o+=1}return a=new Function("$data",["var __ret = [];","try {","with($data){",l?'__ret = ["Not all blocks are closed correctly."]':h.join(""),"};","}catch(e){__ret = [e.message];}",'return __ret.join("").replace(/\\n\\n/g, "\\n");',"function escape(html) { return String(html).replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');}"].join("\n")),e?a(e):a},s.Utils.events={},s.Utils.events.click=s.support.touch?"tap":"click",t.UIkit=s,s.fn=function(t,i){var r=arguments,n=t.match(/^([a-z\-]+)(?:\.([a-z]+))?/i),a=n[1],o=n[2];return s[a]?this.each((function(){var t=e(this),n=t.data(a);n||t.data(a,n=s[a](this,o?void 0:i)),o&&n[o].apply(n,Array.prototype.slice.call(r,1))})):(e.error("UIkit component ["+a+"] does not exist."),this)},e.UIkit=s,e.fn.uk=s.fn,s.langdirection="rtl"==s.$html.attr("dir")?"right":"left",s.components={},s.component=function(t,i){var r=function(i,n){var a=this;return this.UIkit=s,this.element=i?s.$(i):null,this.options=e.extend(!0,{},this.defaults,n),this.plugins={},this.element&&this.element.data(t,this),this.init(),(this.options.plugins.length?this.options.plugins:Object.keys(r.plugins)).forEach((function(t){r.plugins[t].init&&(r.plugins[t].init(a),a.plugins[t]=!0)})),this.trigger("init.uk.component",[t,this]),this};return r.plugins={},e.extend(!0,r.prototype,{defaults:{plugins:[]},boot:function(){},init:function(){},on:function(t,e,i){return s.$(this.element||this).on(t,e,i)},one:function(t,e,i){return s.$(this.element||this).one(t,e,i)},off:function(t){return s.$(this.element||this).off(t)},trigger:function(t,e){return s.$(this.element||this).trigger(t,e)},find:function(t){return s.$(this.element?this.element:[]).find(t)},proxy:function(t,e){var i=this;e.split(" ").forEach((function(e){i[e]||(i[e]=function(){return t[e].apply(t,arguments)})}))},mixin:function(t,e){var i=this;e.split(" ").forEach((function(e){i[e]||(i[e]=t[e].bind(i))}))},option:function(){if(1==arguments.length)return this.options[arguments[0]]||void 0;2==arguments.length&&(this.options[arguments[0]]=arguments[1])}},i),this.components[t]=r,this[t]=function(){var i,r;if(arguments.length)switch(arguments.length){case 1:"string"==typeof arguments[0]||arguments[0].nodeType||arguments[0]instanceof jQuery?i=e(arguments[0]):r=arguments[0];break;case 2:i=e(arguments[0]),r=arguments[1]}return i&&i.data(t)?i.data(t):new s.components[t](i,r)},s.domready&&s.component.boot(t),r},s.plugin=function(t,e,i){this.components[t].plugins[e]=i},s.component.boot=function(t){s.components[t].prototype&&s.components[t].prototype.boot&&!s.components[t].booted&&(s.components[t].prototype.boot.apply(s,[]),s.components[t].booted=!0)},s.component.bootComponents=function(){for(var t in s.components)s.component.boot(t)},s.domObservers=[],s.domready=!1,s.ready=function(t){s.domObservers.push(t),s.domready&&t(document)},s.on=function(t,e,i){return t&&t.indexOf("ready.uk.dom")>-1&&s.domready&&e.apply(s.$doc),s.$doc.on(t,e,i)},s.one=function(t,e,i){return t&&t.indexOf("ready.uk.dom")>-1&&s.domready?(e.apply(s.$doc),s.$doc):s.$doc.one(t,e,i)},s.trigger=function(t,e){return s.$doc.trigger(t,e)},s.domObserve=function(t,e){s.support.mutationobserver&&(e=e||function(){},s.$(t).each((function(){var t=this,i=s.$(t);if(!i.data("observer"))try{var r=new s.support.mutationobserver(s.Utils.debounce((function(r){e.apply(t,[]),i.trigger("changed.uk.dom")}),50),{childList:!0,subtree:!0});r.observe(t,{childList:!0,subtree:!0}),i.data("observer",r)}catch(t){}})))},s.init=function(t){t=t||document,s.domObservers.forEach((function(e){e(t)}))},s.on("domready.uk.dom",(function(){s.init(),s.domready&&s.Utils.checkDisplay()})),document.addEventListener("DOMContentLoaded",(a=function(){s.$body=s.$("body"),s.trigger("beforeready.uk.dom"),s.component.bootComponents();var t,i,r=requestAnimationFrame((t={dir:{x:0,y:0},x:window.pageXOffset,y:window.pageYOffset},i=function(){var e=window.pageXOffset,n=window.pageYOffset;t.x==e&&t.y==n||(e!=t.x?t.dir.x=e>t.x?1:-1:t.dir.x=0,n!=t.y?t.dir.y=n>t.y?1:-1:t.dir.y=0,t.x=e,t.y=n,s.$doc.trigger("scrolling.uk.document",[{dir:{x:t.dir.x,y:t.dir.y},x:e,y:n}])),cancelAnimationFrame(r),r=requestAnimationFrame(i)},s.support.touch&&s.$html.on("touchmove touchend MSPointerMove MSPointerUp pointermove pointerup",i),(t.x||t.y)&&i(),i));if(s.trigger("domready.uk.dom"),s.support.touch&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&s.$win.on("load orientationchange resize",s.Utils.debounce(function(){var t=function(){return e(".uk-height-viewport").css("height",window.innerHeight),t};return t()}(),100)),s.trigger("afterready.uk.dom"),s.domready=!0,s.support.mutationobserver){var n=s.Utils.debounce((function(){requestAnimationFrame((function(){s.init(document.body)}))}),10);new s.support.mutationobserver((function(t){var e=!1;t.every((function(t){if("childList"!=t.type)return!0;for(var i,r=0;r<t.addedNodes.length;++r)if((i=t.addedNodes[r]).outerHTML&&-1!==i.outerHTML.indexOf("data-uk-"))return(e=!0)&&!1;return!0})),e&&n()})).observe(document.body,{childList:!0,subtree:!0})}},"complete"!=document.readyState&&"interactive"!=document.readyState||setTimeout(a),a)),s.$html.addClass(s.support.touch?"uk-touch":"uk-notouch"),s.support.touch){var h,l=!1,c=".uk-overlay, .uk-overlay-hover, .uk-overlay-toggle, .uk-animation-hover, .uk-has-hover";s.$html.on("mouseenter touchstart MSPointerDown pointerdown",c,(function(){l&&e(".uk-hover").removeClass("uk-hover"),l=e(this).addClass("uk-hover")})).on("mouseleave touchend MSPointerUp pointerup",(function(t){h=e(t.target).parents(c),l&&l.not(h).removeClass("uk-hover")}))}return s})),function(t){if(!t.fn.swipeLeft){var e,i,r,n,a,s={};t((function(){var u,d,p,f=0,g=0;"MSGesture"in window&&((a=new MSGesture).target=document.body),t(document).on("MSGestureEnd gestureend",(function(t){var e=t.originalEvent.velocityX>1?"Right":t.originalEvent.velocityX<-1?"Left":t.originalEvent.velocityY>1?"Down":t.originalEvent.velocityY<-1?"Up":null;e&&void 0!==s.el&&(s.el.trigger("swipe"),s.el.trigger("swipe"+e))})).on("touchstart MSPointerDown pointerdown",(function(i){("MSPointerDown"!=i.type||c(i.originalEvent))&&(p="MSPointerDown"==i.type||"pointerdown"==i.type?i:i.originalEvent.touches[0],u=Date.now(),d=u-(s.last||u),s.el=t("tagName"in p.target?p.target:p.target.parentNode),e&&clearTimeout(e),s.x1=p.pageX,s.y1=p.pageY,d>0&&d<=250&&(s.isDoubleTap=!0),s.last=u,n=setTimeout(o,750),!a||"MSPointerDown"!=i.type&&"pointerdown"!=i.type&&"touchstart"!=i.type||a.addPointer(i.originalEvent.pointerId))})).on("touchmove MSPointerMove pointermove",(function(t){("MSPointerMove"!=t.type||c(t.originalEvent))&&(p="MSPointerMove"==t.type||"pointermove"==t.type?t:t.originalEvent.touches[0],h(),s.x2=p.pageX,s.y2=p.pageY,f+=Math.abs(s.x1-s.x2),g+=Math.abs(s.y1-s.y2))})).on("touchend MSPointerUp pointerup",(function(n){("MSPointerUp"!=n.type||c(n.originalEvent))&&(h(),s.x2&&Math.abs(s.x1-s.x2)>30||s.y2&&Math.abs(s.y1-s.y2)>30?r=setTimeout((function(){var t,e,i,r;void 0!==s.el&&(s.el.trigger("swipe"),s.el.trigger("swipe"+(t=s.x1,e=s.x2,i=s.y1,r=s.y2,Math.abs(t-e)>=Math.abs(i-r)?t-e>0?"Left":"Right":i-r>0?"Up":"Down"))),s={}}),0):"last"in s&&(isNaN(f)||f<30&&g<30?i=setTimeout((function(){var i=t.Event("tap");i.cancelTouch=l,void 0!==s.el&&s.el.trigger(i),s.isDoubleTap?(void 0!==s.el&&s.el.trigger("doubleTap"),s={}):e=setTimeout((function(){e=null,void 0!==s.el&&s.el.trigger("singleTap"),s={}}),250)}),0):s={},f=g=0))})).on("touchcancel MSPointerCancel",l),t(window).on("scroll",l)})),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach((function(e){t.fn[e]=function(i){return t(this).on(e,i)}}))}function o(){n=null,s.last&&(void 0!==s.el&&s.el.trigger("longTap"),s={})}function h(){n&&clearTimeout(n),n=null}function l(){e&&clearTimeout(e),i&&clearTimeout(i),r&&clearTimeout(r),n&&clearTimeout(n),e=i=r=n=null,s={}}function c(t){return t.pointerType==t.MSPOINTER_TYPE_TOUCH&&t.isPrimary}}(jQuery),function(t){"use strict";var e,i,r,n=[];t.component("stackMargin",{defaults:{cls:"uk-margin-small-top",rowfirst:!1,observe:!1},boot:function(){t.ready((function(e){t.$("[data-uk-margin]",e).each((function(){var e=t.$(this);e.data("stackMargin")||t.stackMargin(e,t.Utils.options(e.attr("data-uk-margin")))}))}))},init:function(){var e,i=this;t.$win.on("resize orientationchange",(e=function(){i.process()},t.$((function(){e(),t.$win.on("load",e)})),t.Utils.debounce(e,20))),this.on("display.uk.check",function(t){this.element.is(":visible")&&this.process()}.bind(this)),this.options.observe&&t.domObserve(this.element,(function(t){i.element.is(":visible")&&i.process()})),n.push(this)},process:function(){var e=this.element.children();if(t.Utils.stackMargin(e,this.options),!this.options.rowfirst||!e.length)return this;var i={},r=!1;return e.removeClass(this.options.rowfirst).each((function(e,n){n=t.$(this),"none"!=this.style.display&&(e=n.offset().left,((i[e]=i[e]||[])&&i[e]).push(this),r=!1===r?e:Math.min(r,e))})),t.$(i[r]).addClass(this.options.rowfirst),this}}),e=[],i=function(t){if(t.is(":visible")){var e=t.parent().width(),i=t.data("width"),r=e/i,n=Math.floor(r*t.data("height"));t.css({height:e<i?n:t.data("height")})}},t.component("responsiveElement",{defaults:{},boot:function(){t.ready((function(e){t.$("iframe.uk-responsive-width, [data-uk-responsive]",e).each((function(){var e=t.$(this);e.data("responsiveElement")||t.responsiveElement(e,{})}))}))},init:function(){var t=this.element;t.attr("width")&&t.attr("height")&&(t.data({width:t.attr("width"),height:t.attr("height")}).on("display.uk.check",(function(){i(t)})),i(t),e.push(t))}}),t.$win.on("resize load",t.Utils.debounce((function(){e.forEach((function(t){i(t)}))}),15)),t.Utils.stackMargin=function(e,i){i=t.$.extend({cls:"uk-margin-small-top"},i),e=t.$(e).removeClass(i.cls);var r=!1;e.each((function(e,i,n,a){"none"!=(a=t.$(this)).css("display")&&(e=a.offset(),i=a.outerHeight(),n=e.top+i,a.data({ukMarginPos:n,ukMarginTop:e.top}),(!1===r||e.top<r.top)&&(r={top:e.top,left:e.left,pos:n}))})).each((function(e){"none"!=(e=t.$(this)).css("display")&&e.data("ukMarginTop")>r.top&&e.data("ukMarginPos")>r.pos&&e.addClass(i.cls)}))},t.Utils.matchHeights=function(e,i){e=t.$(e).css("min-height",""),i=t.$.extend({row:!0},i);var r=function(e){if(!(e.length<2)){var i=0;e.each((function(){i=Math.max(i,t.$(this).outerHeight())})).each((function(){var e=t.$(this),r=i-("border-box"==e.css("box-sizing")?0:e.outerHeight()-e.height());e.css("min-height",r+"px")}))}};i.row?(e.first().width(),setTimeout((function(){var i=!1,n=[];e.each((function(){var e=t.$(this),a=e.offset().top;a!=i&&n.length&&(r(t.$(n)),n=[],a=e.offset().top),n.push(e),i=a})),n.length&&r(t.$(n))}),0)):r(e)},r={},t.Utils.inlineSvg=function(e,i){t.$(e||'img[src$=".svg"]',i||document).each((function(){var e=t.$(this),i=e.attr("src");if(!r[i]){var n=t.$.Deferred();t.$.get(i,{nc:Math.random()},(function(e){n.resolve(t.$(e).find("svg"))})),r[i]=n.promise()}r[i].then((function(i){var r=t.$(i).clone();e.attr("id")&&r.attr("id",e.attr("id")),e.attr("class")&&r.attr("class",e.attr("class")),e.attr("style")&&r.attr("style",e.attr("style")),e.attr("width")&&(r.attr("width",e.attr("width")),e.attr("height")||r.removeAttr("height")),e.attr("height")&&(r.attr("height",e.attr("height")),e.attr("width")||r.removeAttr("width")),e.replaceWith(r)}))}))},t.ready((function(e){t.Utils.inlineSvg("[data-uk-svg]",e)}))}(UIkit),function(t){"use strict";function e(e,i){i=t.$.extend({duration:1e3,transition:"easeOutExpo",offset:0,complete:function(){}},i);var r=e.offset().top-i.offset,n=t.$doc.height(),a=window.innerHeight;r+a>n&&(r=n-a),t.$("html,body").stop().animate({scrollTop:r},i.duration,i.transition).promise().done(i.complete)}t.component("smoothScroll",{boot:function(){t.$html.on("click.smooth-scroll.uikit","[data-uk-smooth-scroll]",(function(e){var i=t.$(this);if(!i.data("smoothScroll")){t.smoothScroll(i,t.Utils.options(i.attr("data-uk-smooth-scroll")));i.trigger("click")}return!1}))},init:function(){var i=this;this.on("click",(function(r){r.preventDefault(),e(t.$(this.hash).length?t.$(this.hash):t.$("body"),i.options)}))}}),t.Utils.scrollToElement=e,t.$.easing.easeOutExpo||(t.$.easing.easeOutExpo=function(t,e,i,r,n){return e==n?i+r:r*(1-Math.pow(2,-10*e/n))+i})}(UIkit),function(t){"use strict";var e=t.$win,i=t.$doc,r=[],n=function(){for(var t=0;t<r.length;t++)window.requestAnimationFrame.apply(window,[r[t].check])};t.component("scrollspy",{defaults:{target:!1,cls:"uk-scrollspy-inview",initcls:"uk-scrollspy-init-inview",topoffset:0,leftoffset:0,repeat:!1,delay:0},boot:function(){i.on("scrolling.uk.document",n),e.on("load resize orientationchange",t.Utils.debounce(n,50)),t.ready((function(e){t.$("[data-uk-scrollspy]",e).each((function(){var e=t.$(this);if(!e.data("scrollspy"))t.scrollspy(e,t.Utils.options(e.attr("data-uk-scrollspy")))}))}))},init:function(){var e,i=this,n=this.options.cls.split(/,/),a=function(){var r=i.options.target?i.element.find(i.options.target):i.element,a=1===r.length?1:0,s=0;r.each((function(r){var o=t.$(this),h=o.data("inviewstate"),l=t.Utils.isInView(o,i.options),c=o.data("ukScrollspyCls")||n[s].trim();!l||h||o.data("scrollspy-idle")||(e||(o.addClass(i.options.initcls),i.offset=o.offset(),e=!0,o.trigger("init.uk.scrollspy")),o.data("scrollspy-idle",setTimeout((function(){o.addClass("uk-scrollspy-inview").toggleClass(c).width(),o.trigger("inview.uk.scrollspy"),o.data("scrollspy-idle",!1),o.data("inviewstate",!0)}),i.options.delay*a)),a++),!l&&h&&i.options.repeat&&(o.data("scrollspy-idle")&&(clearTimeout(o.data("scrollspy-idle")),o.data("scrollspy-idle",!1)),o.removeClass("uk-scrollspy-inview").toggleClass(c),o.data("inviewstate",!1),o.trigger("outview.uk.scrollspy")),s=n[s+1]?s+1:0}))};a(),this.check=a,r.push(this)}});var a=[],s=function(){for(var t=0;t<a.length;t++)window.requestAnimationFrame.apply(window,[a[t].check])};t.component("scrollspynav",{defaults:{cls:"uk-active",closest:!1,topoffset:0,leftoffset:0,smoothscroll:!1},boot:function(){i.on("scrolling.uk.document",s),e.on("resize orientationchange",t.Utils.debounce(s,50)),t.ready((function(e){t.$("[data-uk-scrollspy-nav]",e).each((function(){var e=t.$(this);if(!e.data("scrollspynav"))t.scrollspynav(e,t.Utils.options(e.attr("data-uk-scrollspy-nav")))}))}))},init:function(){var i,r=[],n=this.find("a[href^='#']").each((function(){"#"!==this.getAttribute("href").trim()&&r.push(this.getAttribute("href"))})),s=t.$(r.join(",")),o=this.options.cls,h=this.options.closest||this.options.closest,l=this,c=function(){i=[];for(var r=0;r<s.length;r++)t.Utils.isInView(s.eq(r),l.options)&&i.push(s.eq(r));if(i.length){var a,c=e.scrollTop(),u=function(){for(var t=0;t<i.length;t++)if(i[t].offset().top-l.options.topoffset>=c)return i[t]}();if(!u)return;l.options.closest?(n.blur().closest(h).removeClass(o),a=n.filter("a[href='#"+u.attr("id")+"']").closest(h).addClass(o)):a=n.removeClass(o).filter("a[href='#"+u.attr("id")+"']").addClass(o),l.element.trigger("inview.uk.scrollspynav",[u,a])}};this.options.smoothscroll&&t.smoothScroll&&n.each((function(){t.smoothScroll(this,l.options.smoothscroll)})),c(),this.element.data("scrollspynav",this),this.check=c,a.push(this)}})}(UIkit),function(t){"use strict";var e=[];t.component("toggle",{defaults:{target:!1,cls:"uk-hidden",animation:!1,duration:200},boot:function(){t.ready((function(i){t.$("[data-uk-toggle]",i).each((function(){var e=t.$(this);if(!e.data("toggle"))t.toggle(e,t.Utils.options(e.attr("data-uk-toggle")))})),setTimeout((function(){e.forEach((function(t){t.getToggles()}))}),0)}))},init:function(){var t=this;this.aria=-1!==this.options.cls.indexOf("uk-hidden"),this.getToggles(),this.on("click",(function(e){t.element.is('a[href="#"]')&&e.preventDefault(),t.toggle()})),e.push(this)},toggle:function(){if(this.totoggle.length){if(this.options.animation&&t.support.animation){var e=this,i=this.options.animation.split(",");1==i.length&&(i[1]=i[0]),i[0]=i[0].trim(),i[1]=i[1].trim(),this.totoggle.css("animation-duration",this.options.duration+"ms"),this.totoggle.each((function(){var r=t.$(this);r.hasClass(e.options.cls)?(r.toggleClass(e.options.cls),t.Utils.animate(r,i[0]).then((function(){r.css("animation-duration",""),t.Utils.checkDisplay(r)}))):t.Utils.animate(this,i[1]+" uk-animation-reverse").then((function(){r.toggleClass(e.options.cls).css("animation-duration",""),t.Utils.checkDisplay(r)}))}))}else this.totoggle.toggleClass(this.options.cls),t.Utils.checkDisplay(this.totoggle);this.updateAria()}},getToggles:function(){this.totoggle=this.options.target?t.$(this.options.target):[],this.updateAria()},updateAria:function(){this.aria&&this.totoggle.length&&this.totoggle.each((function(){t.$(this).attr("aria-hidden",t.$(this).hasClass("uk-hidden"))}))}})}(UIkit),function(t){"use strict";t.component("alert",{defaults:{fade:!0,duration:200,trigger:".uk-alert-close"},boot:function(){t.$html.on("click.alert.uikit","[data-uk-alert]",(function(e){var i=t.$(this);if(!i.data("alert")){var r=t.alert(i,t.Utils.options(i.attr("data-uk-alert")));t.$(e.target).is(r.options.trigger)&&(e.preventDefault(),r.close())}}))},init:function(){var t=this;this.on("click",this.options.trigger,(function(e){e.preventDefault(),t.close()}))},close:function(){var t=this.trigger("close.uk.alert"),e=function(){this.trigger("closed.uk.alert").remove()}.bind(this);this.options.fade?t.css("overflow","hidden").css("max-height",t.height()).animate({height:0,opacity:0,"padding-top":0,"padding-bottom":0,"margin-top":0,"margin-bottom":0},this.options.duration,e):e()}})}(UIkit),function(t){"use strict";t.component("buttonRadio",{defaults:{activeClass:"uk-active",target:".uk-button"},boot:function(){t.$html.on("click.buttonradio.uikit","[data-uk-button-radio]",(function(e){var i=t.$(this);if(!i.data("buttonRadio")){var r=t.buttonRadio(i,t.Utils.options(i.attr("data-uk-button-radio"))),n=t.$(e.target);n.is(r.options.target)&&n.trigger("click")}}))},init:function(){var e=this;this.find(e.options.target).attr("aria-checked","false").filter("."+e.options.activeClass).attr("aria-checked","true"),this.on("click",this.options.target,(function(i){var r=t.$(this);r.is('a[href="#"]')&&i.preventDefault(),e.find(e.options.target).not(r).removeClass(e.options.activeClass).blur(),r.addClass(e.options.activeClass),e.find(e.options.target).not(r).attr("aria-checked","false"),r.attr("aria-checked","true"),e.trigger("change.uk.button",[r])}))},getSelected:function(){return this.find("."+this.options.activeClass)}}),t.component("buttonCheckbox",{defaults:{activeClass:"uk-active",target:".uk-button"},boot:function(){t.$html.on("click.buttoncheckbox.uikit","[data-uk-button-checkbox]",(function(e){var i=t.$(this);if(!i.data("buttonCheckbox")){var r=t.buttonCheckbox(i,t.Utils.options(i.attr("data-uk-button-checkbox"))),n=t.$(e.target);n.is(r.options.target)&&n.trigger("click")}}))},init:function(){var e=this;this.find(e.options.target).attr("aria-checked","false").filter("."+e.options.activeClass).attr("aria-checked","true"),this.on("click",this.options.target,(function(i){var r=t.$(this);r.is('a[href="#"]')&&i.preventDefault(),r.toggleClass(e.options.activeClass).blur(),r.attr("aria-checked",r.hasClass(e.options.activeClass)),e.trigger("change.uk.button",[r])}))},getSelected:function(){return this.find("."+this.options.activeClass)}}),t.component("button",{defaults:{},boot:function(){t.$html.on("click.button.uikit","[data-uk-button]",(function(e){var i=t.$(this);if(!i.data("button")){t.button(i,t.Utils.options(i.attr("data-uk-button")));i.trigger("click")}}))},init:function(){var t=this;this.element.attr("aria-pressed",this.element.hasClass("uk-active")),this.on("click",(function(e){t.element.is('a[href="#"]')&&e.preventDefault(),t.toggle(),t.trigger("change.uk.button",[t.element.blur().hasClass("uk-active")])}))},toggle:function(){this.element.toggleClass("uk-active"),this.element.attr("aria-pressed",this.element.hasClass("uk-active"))}})}(UIkit),function(t){"use strict";var e,i=!1,r={x:{"bottom-left":"bottom-right","bottom-right":"bottom-left","bottom-center":"bottom-center","top-left":"top-right","top-right":"top-left","top-center":"top-center","left-top":"right-top","left-bottom":"right-bottom","left-center":"right-center","right-top":"left-top","right-bottom":"left-bottom","right-center":"left-center"},y:{"bottom-left":"top-left","bottom-right":"top-right","bottom-center":"top-center","top-left":"bottom-left","top-right":"bottom-right","top-center":"bottom-center","left-top":"left-bottom","left-bottom":"left-top","left-center":"left-center","right-top":"right-bottom","right-bottom":"right-top","right-center":"right-center"},xy:{"bottom-left":"top-right","bottom-right":"top-left","bottom-center":"top-center","top-left":"bottom-right","top-right":"bottom-left","top-center":"bottom-center","left-top":"right-bottom","left-bottom":"right-top","left-center":"right-center","right-top":"left-bottom","right-bottom":"left-top","right-center":"left-center"}};function n(e,i,r,n){if(e=t.$(e),i=t.$(i),r=r||window.innerWidth,n=n||e.offset(),i.length){var a=i.outerWidth();if(e.css("min-width",a),"right"==t.langdirection){var s=r-(i.offset().left+a),o=r-(e.offset().left+e.outerWidth());e.css("margin-right",s-o)}else e.css("margin-left",i.offset().left-n.left)}}t.component("dropdown",{defaults:{mode:"hover",pos:"bottom-left",offset:0,remaintime:800,justify:!1,boundary:t.$win,delay:0,dropdownSelector:".uk-dropdown,.uk-dropdown-blank",hoverDelayIdle:250,preventflip:!1},remainIdle:!1,boot:function(){var e=t.support.touch?"click":"mouseenter";t.$html.on(e+".dropdown.uikit","[data-uk-dropdown]",(function(i){var r=t.$(this);if(!r.data("dropdown")){var n=t.dropdown(r,t.Utils.options(r.attr("data-uk-dropdown")));("click"==e||"mouseenter"==e&&"hover"==n.options.mode)&&n.element.trigger(e),n.element.find(n.options.dropdownSelector).length&&i.preventDefault()}}))},init:function(){var r=this;this.dropdown=this.find(this.options.dropdownSelector),this.offsetParent=this.dropdown.parents().filter((function(){return-1!==t.$.inArray(t.$(this).css("position"),["relative","fixed","absolute"])})).slice(0,1),this.centered=this.dropdown.hasClass("uk-dropdown-center"),this.justified=!!this.options.justify&&t.$(this.options.justify),this.boundary=t.$(this.options.boundary),this.boundary.length||(this.boundary=t.$win),this.dropdown.hasClass("uk-dropdown-up")&&(this.options.pos="top-left"),this.dropdown.hasClass("uk-dropdown-flip")&&(this.options.pos=this.options.pos.replace("left","right")),this.dropdown.hasClass("uk-dropdown-center")&&(this.options.pos=this.options.pos.replace(/(left|right)/,"center")),this.element.attr("aria-haspopup","true"),this.element.attr("aria-expanded",this.element.hasClass("uk-open")),"click"==this.options.mode||t.support.touch?this.on("click.uk.dropdown",(function(e){var i=t.$(e.target);i.parents(r.options.dropdownSelector).length||((i.is("a[href='#']")||i.parent().is("a[href='#']")||r.dropdown.length&&!r.dropdown.is(":visible"))&&e.preventDefault(),i.blur()),r.element.hasClass("uk-open")?(!r.dropdown.find(e.target).length||i.is(".uk-dropdown-close")||i.parents(".uk-dropdown-close").length)&&r.hide():r.show()})):this.on("mouseenter",(function(t){r.trigger("pointerenter.uk.dropdown",[r]),r.remainIdle&&clearTimeout(r.remainIdle),e&&clearTimeout(e),i&&i==r||(e=i&&i!=r?setTimeout((function(){e=setTimeout(r.show.bind(r),r.options.delay)}),r.options.hoverDelayIdle):setTimeout(r.show.bind(r),r.options.delay))})).on("mouseleave",(function(){e&&clearTimeout(e),r.remainIdle=setTimeout((function(){i&&i==r&&r.hide()}),r.options.remaintime),r.trigger("pointerleave.uk.dropdown",[r])})).on("click",(function(e){var n=t.$(e.target);r.remainIdle&&clearTimeout(r.remainIdle),i&&i==r?(!r.dropdown.find(e.target).length||n.is(".uk-dropdown-close")||n.parents(".uk-dropdown-close").length)&&r.hide():((n.is("a[href='#']")||n.parent().is("a[href='#']"))&&e.preventDefault(),r.show())}))},show:function(){t.$html.off("click.outer.dropdown"),i&&i!=this&&i.hide(!0),e&&clearTimeout(e),this.trigger("beforeshow.uk.dropdown",[this]),this.checkDimensions(),this.element.addClass("uk-open"),this.element.attr("aria-expanded","true"),this.trigger("show.uk.dropdown",[this]),t.Utils.checkDisplay(this.dropdown,!0),i=this,this.registerOuterClick()},hide:function(t){this.trigger("beforehide.uk.dropdown",[this,t]),this.element.removeClass("uk-open"),this.remainIdle&&clearTimeout(this.remainIdle),this.remainIdle=!1,this.element.attr("aria-expanded","false"),this.trigger("hide.uk.dropdown",[this,t]),i==this&&(i=!1)},registerOuterClick:function(){var r=this;t.$html.off("click.outer.dropdown"),setTimeout((function(){t.$html.on("click.outer.dropdown",(function(n){e&&clearTimeout(e);t.$(n.target);i!=r||r.element.find(n.target).length||(r.hide(!0),t.$html.off("click.outer.dropdown"))}))}),10)},checkDimensions:function(){if(this.dropdown.length){this.dropdown.removeClass("uk-dropdown-top uk-dropdown-bottom uk-dropdown-left uk-dropdown-right uk-dropdown-stack").css({"top-left":"",left:"","margin-left":"","margin-right":""}),this.justified&&this.justified.length&&this.dropdown.css("min-width","");var e,i=t.$.extend({},this.offsetParent.offset(),{width:this.offsetParent[0].offsetWidth,height:this.offsetParent[0].offsetHeight}),a=this.options.offset,s=this.dropdown,o=(s.show().offset(),s.outerWidth()),h=s.outerHeight(),l=this.boundary.width(),c=(this.boundary[0]!==window&&this.boundary.offset()&&this.boundary.offset(),this.options.pos),u={"bottom-left":{top:0+i.height+a,left:0},"bottom-right":{top:0+i.height+a,left:0+i.width-o},"bottom-center":{top:0+i.height+a,left:0+i.width/2-o/2},"top-left":{top:0-h-a,left:0},"top-right":{top:0-h-a,left:0+i.width-o},"top-center":{top:0-h-a,left:0+i.width/2-o/2},"left-top":{top:0,left:0-o-a},"left-bottom":{top:0+i.height-h,left:0-o-a},"left-center":{top:0+i.height/2-h/2,left:0-o-a},"right-top":{top:0,left:0+i.width+a},"right-bottom":{top:0+i.height-h,left:0+i.width+a},"right-center":{top:0+i.height/2-h/2,left:0+i.width+a}},d={};if(e=c.split("-"),d=u[c]?u[c]:u["bottom-left"],this.justified&&this.justified.length)n(s.css({left:0}),this.justified,l);else if(!0!==this.options.preventflip){var p;switch(this.checkBoundary(i.left+d.left,i.top+d.top,o,h,l)){case"x":"x"!==this.options.preventflip&&(p=r.x[c]||"right-top");break;case"y":"y"!==this.options.preventflip&&(p=r.y[c]||"top-left");break;case"xy":this.options.preventflip||(p=r.xy[c]||"right-bottom")}p&&(e=p.split("-"),d=u[p]?u[p]:u["bottom-left"],this.checkBoundary(i.left+d.left,i.top+d.top,o,h,l)&&(e=c.split("-"),d=u[c]?u[c]:u["bottom-left"]))}o>l&&(s.addClass("uk-dropdown-stack"),this.trigger("stack.uk.dropdown",[this])),s.css(d).css("display","").addClass("uk-dropdown-"+e[0])}},checkBoundary:function(e,i,r,n,a){var s="";return(e<0||e-t.$win.scrollLeft()+r>a)&&(s+="x"),(i-t.$win.scrollTop()<0||i-t.$win.scrollTop()+n>window.innerHeight)&&(s+="y"),s}}),t.component("dropdownOverlay",{defaults:{justify:!1,cls:"",duration:200},boot:function(){t.ready((function(e){t.$("[data-uk-dropdown-overlay]",e).each((function(){var e=t.$(this);e.data("dropdownOverlay")||t.dropdownOverlay(e,t.Utils.options(e.attr("data-uk-dropdown-overlay")))}))}))},init:function(){var e=this;this.justified=!!this.options.justify&&t.$(this.options.justify),this.overlay=this.element.find("uk-dropdown-overlay"),this.overlay.length||(this.overlay=t.$('<div class="uk-dropdown-overlay"></div>').appendTo(this.element)),this.overlay.addClass(this.options.cls),this.on({"beforeshow.uk.dropdown":function(t,i){e.dropdown=i,e.justified&&e.justified.length&&n(e.overlay.css({display:"block","margin-left":"","margin-right":""}),e.justified,e.justified.outerWidth())},"show.uk.dropdown":function(i,r){var n=e.dropdown.dropdown.outerHeight(!0);e.dropdown.element.removeClass("uk-open"),e.overlay.stop().css("display","block").animate({height:n},e.options.duration,(function(){e.dropdown.dropdown.css("visibility",""),e.dropdown.element.addClass("uk-open"),t.Utils.checkDisplay(e.dropdown.dropdown,!0)})),e.pointerleave=!1},"hide.uk.dropdown":function(){e.overlay.stop().animate({height:0},e.options.duration)},"pointerenter.uk.dropdown":function(t,i){clearTimeout(e.remainIdle)},"pointerleave.uk.dropdown":function(t,i){e.pointerleave=!0}}),this.overlay.on({mouseenter:function(){e.remainIdle&&(clearTimeout(e.dropdown.remainIdle),clearTimeout(e.remainIdle))},mouseleave:function(){e.pointerleave&&i&&(e.remainIdle=setTimeout((function(){i&&i.hide()}),i.options.remaintime))}})}})}(UIkit),function(t){"use strict";var e=[];t.component("gridMatchHeight",{defaults:{target:!1,row:!0,ignorestacked:!1,observe:!1},boot:function(){t.ready((function(e){t.$("[data-uk-grid-match]",e).each((function(){var e=t.$(this);e.data("gridMatchHeight")||t.gridMatchHeight(e,t.Utils.options(e.attr("data-uk-grid-match")))}))}))},init:function(){var i,r=this;(this.columns=this.element.children(),this.elements=this.options.target?this.find(this.options.target):this.columns,this.columns.length)&&(t.$win.on("load resize orientationchange",(i=function(){r.element.is(":visible")&&r.match()},t.$((function(){i()})),t.Utils.debounce(i,50))),this.options.observe&&t.domObserve(this.element,(function(t){r.element.is(":visible")&&r.match()})),this.on("display.uk.check",function(t){this.element.is(":visible")&&this.match()}.bind(this)),e.push(this))},match:function(){var e=this.columns.filter(":visible:first");if(e.length)return Math.ceil(100*parseFloat(e.css("width"))/parseFloat(e.parent().css("width")))>=100&&!this.options.ignorestacked?this.revert():t.Utils.matchHeights(this.elements,this.options),this},revert:function(){return this.elements.css("min-height",""),this}}),t.component("gridMargin",{defaults:{cls:"uk-grid-margin",rowfirst:"uk-row-first"},boot:function(){t.ready((function(e){t.$("[data-uk-grid-margin]",e).each((function(){var e=t.$(this);e.data("gridMargin")||t.gridMargin(e,t.Utils.options(e.attr("data-uk-grid-margin")))}))}))},init:function(){t.stackMargin(this.element,this.options)}})}(UIkit),function(t){"use strict";var e,i=!1,r=0,n=t.$html;t.$win.on("resize orientationchange",t.Utils.debounce((function(){t.$(".uk-modal.uk-open").each((function(){t.$(this).data("modal").resize()}))}),150)),t.component("modal",{defaults:{keyboard:!0,bgclose:!0,minScrollHeight:150,center:!1,modal:!0},scrollable:!1,transition:!1,hasTransitioned:!0,init:function(){if(e||(e=t.$("body")),this.element.length){var i=this;this.paddingdir="padding-"+("left"==t.langdirection?"right":"left"),this.dialog=this.find(".uk-modal-dialog"),this.active=!1,this.element.attr("aria-hidden",this.element.hasClass("uk-open")),this.on("click",".uk-modal-close",(function(t){t.preventDefault(),i.hide()})).on("click",(function(e){t.$(e.target)[0]==i.element[0]&&i.options.bgclose&&i.hide()})),t.domObserve(this.element,(function(t){i.resize()}))}},toggle:function(){return this[this.isActive()?"hide":"show"]()},show:function(){if(this.element.length){var e=this;if(!this.isActive())return this.options.modal&&i&&i.hide(!0),this.element.removeClass("uk-open").show(),this.resize(!0),this.options.modal&&(i=this),this.active=!0,r++,t.support.transition?(this.hasTransitioned=!1,this.element.one(t.support.transition.end,(function(){e.hasTransitioned=!0})).addClass("uk-open")):this.element.addClass("uk-open"),n.addClass("uk-modal-page").height(),this.element.attr("aria-hidden","false"),this.element.trigger("show.uk.modal"),t.Utils.checkDisplay(this.dialog,!0),this}},hide:function(e){if(!e&&t.support.transition&&this.hasTransitioned){var i=this;this.one(t.support.transition.end,(function(){i._hide()})).removeClass("uk-open")}else this._hide();return this},resize:function(t){if(this.isActive()||t){var i=e.width();if(this.scrollbarwidth=window.innerWidth-i,e.css(this.paddingdir,this.scrollbarwidth),this.element.css("overflow-y",this.scrollbarwidth?"scroll":"auto"),!this.updateScrollable()&&this.options.center){var r=this.dialog.outerHeight(),n=parseInt(this.dialog.css("margin-top"),10)+parseInt(this.dialog.css("margin-bottom"),10);r+n<window.innerHeight?this.dialog.css({top:window.innerHeight/2-r/2-n}):this.dialog.css({top:""})}}},updateScrollable:function(){var t=this.dialog.find(".uk-overflow-container:visible:first");if(t.length){t.css("height",0);var e=Math.abs(parseInt(this.dialog.css("margin-top"),10)),i=this.dialog.outerHeight(),r=window.innerHeight-2*(e<20?20:e)-i;return t.css({"max-height":r<this.options.minScrollHeight?"":r,height:""}),!0}return!1},_hide:function(){this.active=!1,r>0?r--:r=0,this.element.hide().removeClass("uk-open"),this.element.attr("aria-hidden","true"),r||(n.removeClass("uk-modal-page"),e.css(this.paddingdir,"")),i===this&&(i=!1),this.trigger("hide.uk.modal")},isActive:function(){return this.element.hasClass("uk-open")}}),t.component("modalTrigger",{boot:function(){t.$html.on("click.modal.uikit","[data-uk-modal]",(function(e){var i=t.$(this);(i.is("a")&&e.preventDefault(),i.data("modalTrigger"))||t.modalTrigger(i,t.Utils.options(i.attr("data-uk-modal"))).show()})),t.$html.on("keydown.modal.uikit",(function(t){i&&27===t.keyCode&&i.options.keyboard&&(t.preventDefault(),i.hide())}))},init:function(){var e=this;this.options=t.$.extend({target:!!e.element.is("a")&&e.element.attr("href")},this.options),this.modal=t.modal(this.options.target,this.options),this.on("click",(function(t){t.preventDefault(),e.show()})),this.proxy(this.modal,"show hide isActive")}}),t.modal.dialog=function(e,i){var r=t.modal(t.$(t.modal.dialog.template).appendTo("body"),i);return r.on("hide.uk.modal",(function(){r.persist&&(r.persist.appendTo(r.persist.data("modalPersistParent")),r.persist=!1),r.element.remove()})),function(e,i){if(!i)return;"object"==typeof e?(e=e instanceof jQuery?e:t.$(e)).parent().length&&(i.persist=e,i.persist.data("modalPersistParent",e.parent())):e="string"==typeof e||"number"==typeof e?t.$("<div></div>").html(e):t.$("<div></div>").html("UIkit.modal Error: Unsupported data type: "+typeof e);e.appendTo(i.element.find(".uk-modal-dialog"))}(e,r),r},t.modal.dialog.template='<div class="uk-modal"><div class="uk-modal-dialog" style="min-height:0;"></div></div>',t.modal.alert=function(e,i){i=t.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:t.modal.labels},i);var r=t.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(e)+"</div>",'<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-button-primary uk-modal-close">'+i.labels.Ok+"</button></div>"].join(""),i);return r.on("show.uk.modal",(function(){setTimeout((function(){r.element.find("button:first").focus()}),50)})),r.show()},t.modal.confirm=function(e,i,r){var n=arguments.length>1&&arguments[arguments.length-1]?arguments[arguments.length-1]:{};i=t.$.isFunction(i)?i:function(){},r=t.$.isFunction(r)?r:function(){},n=t.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:t.modal.labels},t.$.isFunction(n)?{}:n);var a=t.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(e)+"</div>",'<div class="uk-modal-footer uk-text-right"><button class="uk-button js-modal-confirm-cancel">'+n.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-confirm">'+n.labels.Ok+"</button></div>"].join(""),n);return a.element.find(".js-modal-confirm, .js-modal-confirm-cancel").on("click",(function(){t.$(this).is(".js-modal-confirm")?i():r(),a.hide()})),a.on("show.uk.modal",(function(){setTimeout((function(){a.element.find(".js-modal-confirm").focus()}),50)})),a.show()},t.modal.prompt=function(e,i,r,n){r=t.$.isFunction(r)?r:function(t){},n=t.$.extend(!0,{bgclose:!1,keyboard:!1,modal:!1,labels:t.modal.labels},n);var a=t.modal.dialog([e?'<div class="uk-modal-content uk-form">'+String(e)+"</div>":"",'<div class="uk-margin-small-top uk-modal-content uk-form"><p><input type="text" class="uk-width-1-1"></p></div>','<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-modal-close">'+n.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-ok">'+n.labels.Ok+"</button></div>"].join(""),n),s=a.element.find("input[type='text']").val(i||"").on("keyup",(function(t){13==t.keyCode&&a.element.find(".js-modal-ok").trigger("click")}));return a.element.find(".js-modal-ok").on("click",(function(){!1!==r(s.val())&&a.hide()})),a.on("show.uk.modal",(function(){setTimeout((function(){s.focus()}),50)})),a.show()},t.modal.blockUI=function(e,i){var r=t.modal.dialog(['<div class="uk-margin uk-modal-content">'+String(e||'<div class="uk-text-center">...</div>')+"</div>"].join(""),t.$.extend({bgclose:!1,keyboard:!1,modal:!1},i));return r.content=r.element.find(".uk-modal-content:first"),r.show()},t.modal.labels={Ok:"Ok",Cancel:"Cancel"}}(UIkit),function(t){"use strict";function e(e){var i=t.$(e),r="auto";if(i.is(":visible"))r=i.outerHeight();else{var n={position:i.css("position"),visibility:i.css("visibility"),display:i.css("display")};r=i.css({position:"absolute",visibility:"hidden",display:"block"}).outerHeight(),i.css(n)}return r}t.component("nav",{defaults:{toggle:">li.uk-parent > a[href='#']",lists:">li.uk-parent > ul",multiple:!1},boot:function(){t.ready((function(e){t.$("[data-uk-nav]",e).each((function(){var e=t.$(this);if(!e.data("nav"))t.nav(e,t.Utils.options(e.attr("data-uk-nav")))}))}))},init:function(){var e=this;this.on("click.uk.nav",this.options.toggle,(function(i){i.preventDefault();var r=t.$(this);e.open(r.parent()[0]==e.element[0]?r:r.parent("li"))})),this.find(this.options.lists).each((function(){var i=t.$(this),r=i.parent(),n=r.hasClass("uk-active");i.wrap('<div style="overflow:hidden;height:0;position:relative;"></div>'),r.data("list-container",i.parent()[n?"removeClass":"addClass"]("uk-hidden")),r.attr("aria-expanded",r.hasClass("uk-open")),n&&e.open(r,!0)}))},open:function(i,r){var n=this,a=this.element,s=t.$(i),o=s.data("list-container");this.options.multiple||a.children(".uk-open").not(i).each((function(){var e=t.$(this);e.data("list-container")&&e.data("list-container").stop().animate({height:0},(function(){t.$(this).parent().removeClass("uk-open").end().addClass("uk-hidden")}))})),s.toggleClass("uk-open"),s.attr("aria-expanded",s.hasClass("uk-open")),o&&(s.hasClass("uk-open")&&o.removeClass("uk-hidden"),r?(o.stop().height(s.hasClass("uk-open")?"auto":0),s.hasClass("uk-open")||o.addClass("uk-hidden"),this.trigger("display.uk.check")):o.stop().animate({height:s.hasClass("uk-open")?e(o.find("ul:first")):0},(function(){s.hasClass("uk-open")?o.css("height",""):o.addClass("uk-hidden"),n.trigger("display.uk.check")})))}})}(UIkit),function(t){"use strict";var e={x:window.scrollX,y:window.scrollY},i=(t.$win,t.$doc,t.$html),r={show:function(r){if((r=t.$(r)).length){var n=t.$("body"),a=r.find(".uk-offcanvas-bar:first"),s="right"==t.langdirection,o=(a.hasClass("uk-offcanvas-bar-flip")?-1:1)*(s?-1:1),h=window.innerWidth-n.width();e={x:window.pageXOffset,y:window.pageYOffset},r.addClass("uk-active"),n.css({width:window.innerWidth-h,height:window.innerHeight}).addClass("uk-offcanvas-page"),n.css(s?"margin-right":"margin-left",(s?-1:1)*(a.outerWidth()*o)).width(),i.css("margin-top",-1*e.y),a.addClass("uk-offcanvas-bar-show"),this._initElement(r),a.trigger("show.uk.offcanvas",[r,a]),r.attr("aria-hidden","false")}},hide:function(r){var n=t.$("body"),a=t.$(".uk-offcanvas.uk-active"),s="right"==t.langdirection,o=a.find(".uk-offcanvas-bar:first"),h=function(){n.removeClass("uk-offcanvas-page").css({width:"",height:"","margin-left":"","margin-right":""}),a.removeClass("uk-active"),o.removeClass("uk-offcanvas-bar-show"),i.css("margin-top",""),window.scrollTo(e.x,e.y),o.trigger("hide.uk.offcanvas",[a,o]),a.attr("aria-hidden","true")};a.length&&(t.support.transition&&!r?(n.one(t.support.transition.end,(function(){h()})).css(s?"margin-right":"margin-left",""),setTimeout((function(){o.removeClass("uk-offcanvas-bar-show")}),0)):h())},_initElement:function(e){e.data("OffcanvasInit")||(e.on("click.uk.offcanvas swipeRight.uk.offcanvas swipeLeft.uk.offcanvas",(function(e){var i=t.$(e.target);if(!e.type.match(/swipe/)&&!i.hasClass("uk-offcanvas-close")){if(i.hasClass("uk-offcanvas-bar"))return;if(i.parents(".uk-offcanvas-bar:first").length)return}e.stopImmediatePropagation(),r.hide()})),e.on("click","a[href*='#']",(function(e){var i=t.$(this),n=i.attr("href");"#"!=n&&(t.$doc.one("hide.uk.offcanvas",(function(){var e;try{e=t.$(i[0].hash)}catch(t){e=""}e.length||(e=t.$('[name="'+i[0].hash.replace("#","")+'"]')),e.length&&t.Utils.scrollToElement?t.Utils.scrollToElement(e,t.Utils.options(i.attr("data-uk-smooth-scroll")||"{}")):window.location.href=n})),r.hide())})),e.data("OffcanvasInit",!0))}};t.component("offcanvasTrigger",{boot:function(){i.on("click.offcanvas.uikit","[data-uk-offcanvas]",(function(e){e.preventDefault();var i=t.$(this);if(!i.data("offcanvasTrigger")){t.offcanvasTrigger(i,t.Utils.options(i.attr("data-uk-offcanvas")));i.trigger("click")}})),i.on("keydown.uk.offcanvas",(function(t){27===t.keyCode&&r.hide()}))},init:function(){var e=this;this.options=t.$.extend({target:!!e.element.is("a")&&e.element.attr("href")},this.options),this.on("click",(function(t){t.preventDefault(),r.show(e.options.target)}))}}),t.offcanvas=r}(UIkit),function(t){"use strict";var e;function i(e,i,r){var n,a=t.$.Deferred(),s=e,o=e;return r[0]===i[0]?(a.resolve(),a.promise()):("object"==typeof e&&(s=e[0],o=e[1]||e[0]),t.$body.css("overflow-x","hidden"),n=function(){i&&i.hide().removeClass("uk-active "+o+" uk-animation-reverse"),r.addClass(s).one(t.support.animation.end,function(){setTimeout((function(){r.removeClass(""+s).css({opacity:"",display:""})}),0),a.resolve(),t.$body.css("overflow-x",""),i&&i.css({opacity:"",display:""})}.bind(this)).show()},r.css("animation-duration",this.options.duration+"ms"),i&&i.length?(i.css("animation-duration",this.options.duration+"ms"),i.css("display","none").addClass(o+" uk-animation-reverse").one(t.support.animation.end,function(){n()}.bind(this)).css("display","")):(r.addClass("uk-active"),n()),a.promise())}t.component("switcher",{defaults:{connect:!1,toggle:">*",active:0,animation:!1,duration:200,swiping:!0},animating:!1,boot:function(){t.ready((function(e){t.$("[data-uk-switcher]",e).each((function(){var e=t.$(this);if(!e.data("switcher"))t.switcher(e,t.Utils.options(e.attr("data-uk-switcher")))}))}))},init:function(){var e=this;if(this.on("click.uk.switcher",this.options.toggle,(function(t){t.preventDefault(),e.show(this)})),this.options.connect){this.connect=t.$(this.options.connect),this.connect.children().removeClass("uk-active"),this.connect.length&&(this.connect.children().attr("aria-hidden","true"),this.connect.on("click","[data-uk-switcher-item]",(function(i){i.preventDefault();var r=t.$(this).attr("data-uk-switcher-item");if(e.index!=r)switch(r){case"next":case"previous":e.show(e.index+("next"==r?1:-1));break;default:e.show(parseInt(r,10))}})),this.options.swiping&&this.connect.on("swipeRight swipeLeft",(function(t){t.preventDefault(),window.getSelection().toString()||e.show(e.index+("swipeLeft"==t.type?1:-1))})));var i=this.find(this.options.toggle),r=i.filter(".uk-active");if(r.length)this.show(r,!1);else{if(!1===this.options.active)return;r=i.eq(this.options.active),this.show(r.length?r:i.eq(0),!1)}i.not(r).attr("aria-expanded","false"),r.attr("aria-expanded","true")}},show:function(r,n){if(!this.animating){if(isNaN(r))r=t.$(r);else{var a=this.find(this.options.toggle);r=r<0?a.length-1:r,r=a.eq(a[r]?r:0)}var s=this,o=(a=this.find(this.options.toggle),t.$(r)),h=e[this.options.animation]||function(t,r){if(!s.options.animation)return e.none.apply(s);var n=s.options.animation.split(",");return 1==n.length&&(n[1]=n[0]),n[0]=n[0].trim(),n[1]=n[1].trim(),i.apply(s,[n,t,r])};!1!==n&&t.support.animation||(h=e.none),o.hasClass("uk-disabled")||(a.attr("aria-expanded","false"),o.attr("aria-expanded","true"),a.filter(".uk-active").removeClass("uk-active"),o.addClass("uk-active"),this.options.connect&&this.connect.length&&(this.index=this.find(this.options.toggle).index(o),-1==this.index&&(this.index=0),this.connect.each((function(){var e=t.$(this),i=t.$(e.children()),r=t.$(i.filter(".uk-active")),n=t.$(i.eq(s.index));s.animating=!0,h.apply(s,[r,n]).then((function(){r.removeClass("uk-active"),n.addClass("uk-active"),r.attr("aria-hidden","true"),n.attr("aria-hidden","false"),t.Utils.checkDisplay(n,!0),s.animating=!1}))}))),this.trigger("show.uk.switcher",[o]))}}}),e={none:function(){var e=t.$.Deferred();return e.resolve(),e.promise()},fade:function(t,e){return i.apply(this,["uk-animation-fade",t,e])},"slide-bottom":function(t,e){return i.apply(this,["uk-animation-slide-bottom",t,e])},"slide-top":function(t,e){return i.apply(this,["uk-animation-slide-top",t,e])},"slide-vertical":function(t,e,r){var n=["uk-animation-slide-top","uk-animation-slide-bottom"];return t&&t.index()>e.index()&&n.reverse(),i.apply(this,[n,t,e])},"slide-left":function(t,e){return i.apply(this,["uk-animation-slide-left",t,e])},"slide-right":function(t,e){return i.apply(this,["uk-animation-slide-right",t,e])},"slide-horizontal":function(t,e,r){var n=["uk-animation-slide-right","uk-animation-slide-left"];return t&&t.index()>e.index()&&n.reverse(),i.apply(this,[n,t,e])},scale:function(t,e){return i.apply(this,["uk-animation-scale-up",t,e])}},t.switcher.animations=e}(UIkit),function(t){"use strict";t.component("tab",{defaults:{target:">li:not(.uk-tab-responsive, .uk-disabled)",connect:!1,active:0,animation:!1,duration:200,swiping:!0},boot:function(){t.ready((function(e){t.$("[data-uk-tab]",e).each((function(){var e=t.$(this);if(!e.data("tab"))t.tab(e,t.Utils.options(e.attr("data-uk-tab")))}))}))},init:function(){var e=this;this.current=!1,this.on("click.uk.tab",this.options.target,(function(i){if(i.preventDefault(),!e.switcher||!e.switcher.animating){var r=e.find(e.options.target).not(this);r.removeClass("uk-active").blur(),e.trigger("change.uk.tab",[t.$(this).addClass("uk-active"),e.current]),e.current=t.$(this),e.options.connect||(r.attr("aria-expanded","false"),t.$(this).attr("aria-expanded","true"))}})),this.options.connect&&(this.connect=t.$(this.options.connect)),this.responsivetab=t.$('<li class="uk-tab-responsive uk-active"><a></a></li>').append('<div class="uk-dropdown uk-dropdown-small"><ul class="uk-nav uk-nav-dropdown"></ul><div>'),this.responsivetab.dropdown=this.responsivetab.find(".uk-dropdown"),this.responsivetab.lst=this.responsivetab.dropdown.find("ul"),this.responsivetab.caption=this.responsivetab.find("a:first"),this.element.hasClass("uk-tab-bottom")&&this.responsivetab.dropdown.addClass("uk-dropdown-up"),this.responsivetab.lst.on("click.uk.tab","a",(function(i){i.preventDefault(),i.stopPropagation();var r=t.$(this);e.element.children("li:not(.uk-tab-responsive)").eq(r.data("index")).trigger("click")})),this.on("show.uk.switcher change.uk.tab",(function(t,i){e.responsivetab.caption.html(i.text())})),this.element.append(this.responsivetab),this.options.connect&&(this.switcher=t.switcher(this.element,{toggle:">li:not(.uk-tab-responsive)",connect:this.options.connect,active:this.options.active,animation:this.options.animation,duration:this.options.duration,swiping:this.options.swiping})),t.dropdown(this.responsivetab,{mode:"click",preventflip:"y"}),e.trigger("change.uk.tab",[this.element.find(this.options.target).not(".uk-tab-responsive").filter(".uk-active")]),this.check(),t.$win.on("resize orientationchange",t.Utils.debounce((function(){e.element.is(":visible")&&e.check()}),100)),this.on("display.uk.check",(function(){e.element.is(":visible")&&e.check()}))},check:function(){var e=this.element.children("li:not(.uk-tab-responsive)").removeClass("uk-hidden");if(e.length){var i,r,n=e.eq(0).offset().top+Math.ceil(e.eq(0).height()/2),a=!1;if(this.responsivetab.lst.empty(),e.each((function(){t.$(this).offset().top>n&&(a=!0)})),a)for(var s=0;s<e.length;s++)(i=t.$(e.eq(s))).find("a"),"none"==i.css("float")||i.attr("uk-dropdown")||(i.hasClass("uk-disabled")||(r=i[0].outerHTML.replace("<a ",'<a data-index="'+s+'" '),this.responsivetab.lst.append(r)),i.addClass("uk-hidden"));this.responsivetab[this.responsivetab.lst.children("li").length?"removeClass":"addClass"]("uk-hidden")}else this.responsivetab.addClass("uk-hidden")}})}(UIkit),function(t){"use strict";t.component("cover",{defaults:{automute:!0},boot:function(){t.ready((function(e){t.$("[data-uk-cover]",e).each((function(){var e=t.$(this);if(!e.data("cover"))t.cover(e,t.Utils.options(e.attr("data-uk-cover")))}))}))},init:function(){if(this.parent=this.element.parent(),t.$win.on("load resize orientationchange",t.Utils.debounce(function(){this.check()}.bind(this),100)),this.on("display.uk.check",function(t){this.element.is(":visible")&&this.check()}.bind(this)),this.check(),this.element.is("iframe")&&this.options.automute){var e=this.element.attr("src");this.element.attr("src","").on("load",(function(){this.contentWindow.postMessage('{ "event": "command", "func": "mute", "method":"setVolume", "value":0}',"*")})).attr("src",[e,e.indexOf("?")>-1?"&":"?","enablejsapi=1&api=1"].join(""))}},check:function(){this.element.css({width:"",height:""}),this.dimension={w:this.element.width(),h:this.element.height()},this.element.attr("width")&&!isNaN(this.element.attr("width"))&&(this.dimension.w=this.element.attr("width")),this.element.attr("height")&&!isNaN(this.element.attr("height"))&&(this.dimension.h=this.element.attr("height")),this.ratio=this.dimension.w/this.dimension.h;var t,e,i=this.parent.width(),r=this.parent.height();i/this.ratio<r?(t=Math.ceil(r*this.ratio),e=r):(t=i,e=Math.ceil(i/this.ratio)),this.element.css({width:t,height:e})}})}(UIkit)},function(t,e){!function(t){window.$iguanaChart={},$iguanaChart.defaultTheme={},$iguanaChart.thems=[{name:"White",settings:{backgroundColor:"#ffffff",axisColor:"#999999",showAxes:!1,labelColor:"#595959",gridColor:"#cccccc",gridStyle:"dashed",watermarkColor:"rgba(238,238,238,1)",watermarkFont:"bold 40px Verdana",watermarkSubFont:"bold 25px Verdana",candleUp:"#66B85C",candleDown:"#C75757",candleBorder:!0,candleBorderUp:"#66B85C",candleBorderDown:"#C75757",candleWick:!0,candleWickStyle:"#595959",stockUp:"#66B85C",stockDown:"#C75757",stockWidth:1,lineColor:"#595959",lineWidth:1,areaColor:"#eff6fb",areaLineColor:"#cccccc",volumeStyle:"rgba(119, 119, 119, 0.3)",scrollerOverlayColor:"rgba(0,0,0, 0.1)",scrollerHandlerColor:"rgba(255,255,255, 1)",shadowColor:"#999999"}},{name:"Dark",settings:{backgroundColor:"#202020",axisColor:"#656565",showAxes:!1,showLabels:!0,labelColor:"#595959",gridColor:"#333333",gridStyle:"dashed",watermarkColor:"rgba(238,238,238, 0.2)",watermarkFont:"bold 40px Verdana",watermarkSubFont:"bold 25px Verdana",candleUp:"#66B85C",candleDown:"#C75757",candleBorder:!0,candleBorderUp:"#66B85C",candleBorderDown:"#C75757",candleWick:!0,candleWickStyle:"#878787",stockUp:"#66B85C",stockDown:"#C75757",stockWidth:1,lineColor:"#A4A4A4",lineWidth:1,areaColor:"#232323",areaLineColor:"#A4A4A4",volumeStyle:"rgba(119, 119, 119, 0.3)",scrollerOverlayColor:"rgba(255,255,255, 0.1)",scrollerHandlerColor:"rgba(130,130,130, 1)",shadowColor:"#000000"}}],$iguanaChart.defaultSettings={chartSettings:{contextSettings:{fillStyle:"rgba(82,175,201,.2)",strokeStyle:"rgba(82,175,201,1)",lineWidth:1,fontFamaly:"Arial,Helvetica,sans-serif",fontColor:"#444444",fontSize:"14"},indicatorsColor:{},indicatorsWidth:{},showTransactionsMode:0,tradingToolsEnable:0,autochartistEnable:0,defaultTheme:1},currentSecurity:{id:"",short_name:"",default_ticker:"",nt_ticker:"",firstDate:"",currency:"",min_step:""}},$iguanaChart.getTemplate=function(t,e){return'<div class="iChart-control-form" style="min-height: 200px"><div class="js-chartContainerWrapper"><div class="iChartToolsContainer"><div class="iChartToolsTop" style="display: none;"></div></div><div id="'+t+'" class="m-chart-container" style="height: 100%;"></div></div><div data-uk-modal="{center:true}" class="uk-modal iChart-form-simple-v js-chartTADialog uk-padding-remove '+e+'" id="iChart-tech-analysis-dialog" style="display: none;"><div class="uk-modal-dialog"><a class="uk-modal-close uk-close"></a><div class="uk-modal-header">'+_t("3101","Индикаторы")+'</div><div class="js-chartTADialogContainer"></div><div class="uk-modal-footer"><div class="uk-flex uk-flex-middle uk-flex-space-between tm-pad-large"><div class="js-indicator-add md-btn md-btn-small md-btn-success">'+_t("15460","Добавить индикатор")+'</div><div class="js-strategy-choose md-btn md-btn-small md-btn-success">'+_t("","Выбрать стратегию")+'</div><div class="md-btn-group"><a class="md-btn md-btn-small md-btn-primary indicators-set" href="#">'+_t("532","Применить")+'</a><a class="md-btn md-btn-small indicators-default" href="#">'+_t("15461","Для всех")+'</a><a class="md-btn md-btn-small indicators-close" href="#">'+_t("1403","Отмена")+'</a></div></div></div></div></div><div class="chart-loader-wrapper" style="top: 0; width: 100%; height: 100%;"><div class="chart-loader"></div></div></div>'},$iguanaChart.init=function(t,e){t.dataSource.preInit((function(i){t.initChart(i),void 0!==e.events&&t.addEvents(e.events)}),e)},$iguanaChart.optionsStore=function(){var e=JSON.parse(window.localStorage.getItem("chartsStore")||"{}");t.isPlainObject(arguments[0])&&!t.isEmptyObject(arguments[0])?e=t.extend(e,data):"string"==typeof arguments[0]&&(e[arguments[0]]=arguments[1]),window.localStorage.setItem("chartsStore",JSON.stringify(e))},$iguanaChart.optionsRestore=function(t){var e=JSON.parse(window.localStorage.getItem("chartsStore")||"{}");return t?e[t]:e};var e={init:function(e,i){var r=this;if(r.data("iguanaChart")){var n=r.data("iguanaChart");for(var a in n.timers)clearTimeout(n.timers[a]);n.ajaxDataRequest.abort(),n.viewData.chart._dataLoading=!1,$iguanaChart.init(r.data("iguanaChart"),e)}else{var s="chart"+i+"_"+(new Date).getTime(),o=s+"_container",h=$iguanaChart.getTemplate(o,s),l=e.lib_path||"",c=new IguanaChart({name:s,container:"#"+o,wrapper:r,lib_path:l,dataSource:t.extend(!0,{},e.dataSource)});r.html(h).data("iguanaChart",c).on("iguanaChartEvents",(function(t,e,i){switch(e){case"chartDataReceived":var n=r.data("tmLoader");clearTimeout(n),r.find(".chart-loader-wrapper").css({opacity:"0.0",height:0,left:"-2000px",transition:"opacity .75s ease-in-out, height 0s ease-in-out .75s, left 0s ease-in-out .75s"});break;case"chartDataRequest":n=r.data("tmLoader");clearTimeout(n),n=setTimeout((function(){r.find(".chart-loader-wrapper").css({opacity:"1.0",height:"100%",left:0,transition:"opacity .0s ease-in-out, height 0s ease-in-out .0s"})}),750),r.data("tmLoader",n)}})),$iguanaChart.init(r.data("iguanaChart"),e)}this.trigger("iguanaChartEvents",["initComplete",e])},setType:function(t){var e=this.data("iguanaChart");e.viewData.chart&&e.viewData.chart.setChartType(t),e.setHashValue("type",t),this.trigger("iguanaChartEvents",["setType",t])},setTheme:function(i){var r=i[0],n=t.grep($iguanaChart.thems,(function(t){return t.name==r?t:null}))[0];if(void 0===n)throw new Error('Theme "'+r+'" is not exist.');var a=this.data("iguanaChart").viewData.chart;t.extend(a.chartOptions,n.settings),e.render.call(this),this.trigger("iguanaChartEvents",["setTheme",r])},render:function(e){t.isArray(e)||(e=[]);var i=this.data("iguanaChart"),r=void 0===e[0]||!!e[0],n=void 0!==e[1]&&!!e[1],a=void 0!==e[2]&&!!e[2];if(i.viewData.chart){var s=i.viewData.chart;s.render({forceRecalc:r,resetViewport:n,testForIntervalChange:a}),t(i.container).find(".js-scrollerOverlay").css({background:s.chartOptions.scrollerOverlayColor}),t(i.container).find(".js-scrollerHandler").css({background:s.chartOptions.scrollerHandlerColor})}},chartOptions:function(i){var r=this.data("iguanaChart").viewData.chart;if(void 0===i[0])return r.chartOptions;"object"==typeof i[0]?t.extend(!0,r.chartOptions,i[0]):"string"==typeof i[0]&&void 0!==i[1]&&(r.chartOptions[i[0]]=i[1]),e.render.call(this)},events:function(t){var i=this.data("iguanaChart");i.clearEvents(),void 0!==t[0]&&i.addEvents(t[0]),e.render.call(this)},toolStart:function(t){var e=this.data("iguanaChart").viewData.chart;e.overlay&&e.overlay.start(t[0]).setSettings(t[1]);return!1},addPoint:function(t){this.data("iguanaChart").addPoint(t[0])},destroy:function(){if(this.data("iguanaChart")){var t=this.data("iguanaChart");for(var e in t.timers)clearTimeout(t.timers[e]),t.ajaxDataRequest.abort()}}};t.fn.iguanaChart=function(i){if(void 0===i||"object"==typeof i)return this.each((function(r){var n=t(this);return e.init.call(n,i,r),n}));if("string"==typeof i){var r=Array.prototype.slice.call(arguments,1);if(e[i]&&"function"==typeof e[i]){if(r.length)return this.each((function(n){var a=t(this);return e[i].call(a,r),a}));var n=t(this).eq(0);return e[i].call(n,r)}return console.error("Method should be function")}return console.error("Options should be object, string or undefined")}}(jQuery)},function(t,e){!function(t){var e={palettes:{basic:["#000000","#7f7f7f","#880015","#ed1c24","#ff7f27","#fff200","#22b14c","#00a2e8","#3f48cc","#a349a4","#ffffff","#c3c3c3","#b97a57","#ffaec9","#ffc90e","#efe4b0","#b5e61d","#99d9ea","#7092be","#c8bfe7"]},defaults:{palette:[],columns:1,size:20,value:"",change:function(){}},init:function(i){var r=t.extend({},e.defaults,i);"string"==typeof i.palette&&e.palettes[i.palette]&&(r.palette=e.palettes[i.palette]),r.element=this;for(var n=Math.ceil(r.palette.length/r.columns),a=t("<table>").css({"border-collapse":"collapse",position:"relative",width:+r.columns*(+r.size+2)+"px",margin:0,padding:0,border:0,outline:0,"text-decoration":"none","font-size":"100%","list-style":"none"}),s=0;s<n;s++){for(var o=t("<tr>"),h=0;h<r.columns;h++){var l=t("<td>",{class:"palette-item"}).attr("data-color",r.palette[s*r.columns+h]).css({width:r.size,height:r.size,"background-color":r.palette[s*r.columns+h]});o.append(l)}a.append(o)}a.on("click","td",(function(){r.value=t(this).data("color"),r.change.call(r)})),this.append(a).css({position:"relative","line-height":0,"border-width":0,display:"inline-block"}),this.data("palette",r)}};t.fn.palette=function(i){if(void 0===i||"object"==typeof i)return this.each((function(r){var n=t(this);return e.init.call(n,i,r),n}));if("string"==typeof i){var r=Array.prototype.slice.call(arguments,1);if(e[i]&&"function"==typeof e[i]){if(r.length)return this.each((function(n){var a=t(this);return e[i].call(a,r),a}));var n=t(this).eq(0);return e[i].call(n,r)}return console.error("Method should be function")}return console.error("Options should be object, string or undefined")}}(jQuery)},function(t,e){var i,r,n,a,s,o;i=[],r=$(document),n=navigator.userAgent.toLowerCase(),a=$(window),s=[],(o={ieQuirks:null,msie:/msie/.test(n)&&!/opera/.test(n),opera:/opera/.test(n)}).ie6=o.msie&&/msie 6./.test(n)&&"object"!=typeof window.XMLHttpRequest,o.ie7=o.msie&&/msie 7.0/.test(n),o.boxModel="CSS1Compat"===document.compatMode,$.modal=function(t,e){return $.modal.impl.init(t,e)},$.modal.close=function(){$.modal.impl.close()},$.modal.focus=function(t){$.modal.impl.focus(t)},$.modal.setContainerDimensions=function(){$.modal.impl.setContainerDimensions()},$.modal.setPosition=function(){$.modal.impl.setPosition()},$.modal.update=function(t,e){$.modal.impl.update(t,e)},$.fn.modal=function(t){return $.modal.impl.init(this,t)},$.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},title:"",titleId:"simplemodal-title",titleCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"uk-icon-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,draggable:!1,modal:!0,onOpen:null,onShow:null,onClose:null},$.modal.impl={d:{},init:function(t,e){var i=this;if(i.d.data)return i;if(o.ieQuirks=o.msie&&!o.boxModel,i.o=$.extend({},$.modal.defaults,e),i.zIndex=i.o.zIndex,i.occb=!1,"object"==typeof t)t=t instanceof $?t:$(t),i.d.placeholder=!1,t.parent().parent().length>0&&(t.before($("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),i.d.placeholder=!0,i.display=t.css("display"),i.o.persist||(i.d.orig=t.clone(!0)));else{if("string"!=typeof t&&"number"!=typeof t)return alert("SimpleModal Error: Unsupported data type: "+typeof t),i;t=$("<div></div>").html(t)}return i.create(t),t=null,i.open(),$.isFunction(i.o.onShow)&&i.o.onShow.apply(i,[i.d]),i},create:function(t){var e=this;e.getDimensions(),e.o.modal&&o.ie6&&(e.d.iframe=$('<iframe src="javascript:false;"></iframe>').css($.extend(e.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:s[0],width:s[1],zIndex:e.o.zIndex,top:0,left:0})).appendTo(e.o.appendTo)),e.d.overlay=$("<div></div>").attr("id",e.o.overlayId).addClass("simplemodal-overlay").css($.extend(e.o.overlayCss,{display:"none",opacity:e.o.opacity/100,height:e.o.modal?i[0]:0,width:e.o.modal?i[1]:0,position:"fixed",left:0,top:0,zIndex:e.o.zIndex+1})).appendTo(e.o.appendTo),e.d.container=$("<div></div>").attr("id",e.o.containerId).addClass("simplemodal-container").css($.extend({position:e.o.fixed?"fixed":"absolute"},e.o.containerCss,{display:"none",zIndex:e.o.zIndex+2})).append(e.o.close&&e.o.closeHTML?$(e.o.closeHTML).addClass(e.o.closeClass):"").appendTo(e.o.appendTo),e.d.title=$("<div></div>").attr("id",e.o.titleId).addClass("simplemodal-title").css($.extend({},e.o.titleCss)).append(e.o.title).appendTo(e.d.container),e.d.wrap=$("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").appendTo(e.d.container),e.d.data=t.attr("id",t.attr("id")||e.o.dataId).addClass("simplemodal-data").css($.extend(e.o.dataCss,{display:"none"})).appendTo("body"),t=null,e.setContainerDimensions(),e.d.data.appendTo(e.d.wrap),e.o.draggable&&"function"==typeof e.d.container.draggable&&e.d.container.draggable({handle:e.d.title,snap:!1}),(o.ie6||o.ieQuirks)&&e.fixIE()},bindEvents:function(){var t=this;$("."+t.o.closeClass).bind("click.simplemodal",(function(e){e.preventDefault(),t.close()})),t.o.modal&&t.o.close&&t.o.overlayClose&&t.d.overlay.bind("click.simplemodal",(function(e){e.preventDefault(),t.close()})),r.bind("keydown.simplemodal",(function(e){t.o.modal&&9===e.keyCode?t.watchTab(e):t.o.close&&t.o.escClose&&27===e.keyCode&&(e.preventDefault(),t.close())})),a.bind("resize.simplemodal orientationchange.simplemodal",(function(){t.getDimensions(),t.o.autoResize?t.setContainerDimensions():t.o.autoPosition&&t.setPosition(),o.ie6||o.ieQuirks?t.fixIE():t.o.modal&&(t.d.iframe&&t.d.iframe.css({height:s[0],width:s[1]}),t.d.overlay.css({height:i[0],width:i[1]}))}))},unbindEvents:function(){$("."+this.o.closeClass).unbind("click.simplemodal"),r.unbind("keydown.simplemodal"),a.unbind(".simplemodal"),this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var t=this,e=t.o.position;$.each([t.d.iframe||null,t.o.modal?t.d.overlay:null,"fixed"===t.d.container.css("position")?t.d.container:null],(function(t,i){if(i){var r="document.body.clientHeight",n="document.body.clientWidth",a="document.body.scrollHeight",s="document.body.scrollLeft",o="document.body.scrollTop",h="document.body.scrollWidth",l="document.documentElement.clientHeight",c="document.documentElement.clientWidth",u="document.documentElement.scrollLeft",d="document.documentElement.scrollTop",p=i[0].style;if(p.position="absolute",t<2)p.removeExpression("height"),p.removeExpression("width"),p.setExpression("height",a+" > "+r+" ? "+a+" : "+r+' + "px"'),p.setExpression("width",h+" > "+n+" ? "+h+" : "+n+' + "px"');else{var f,g;if(e&&e.constructor===Array){var v=e[0]?"number"==typeof e[0]?e[0].toString():e[0].replace(/px/,""):i.css("top").replace(/px/,"");if(f=-1===v.indexOf("%")?v+" + (t = "+d+" ? "+d+" : "+o+') + "px"':parseInt(v.replace(/%/,""))+" * (("+l+" || "+r+") / 100) + (t = "+d+" ? "+d+" : "+o+') + "px"',e[1]){var m="number"==typeof e[1]?e[1].toString():e[1].replace(/px/,"");g=-1===m.indexOf("%")?m+" + (t = "+u+" ? "+u+" : "+s+') + "px"':parseInt(m.replace(/%/,""))+" * (("+c+" || "+n+") / 100) + (t = "+u+" ? "+u+" : "+s+') + "px"'}}else f="("+l+" || "+r+") / 2 - (this.offsetHeight / 2) + (t = "+d+" ? "+d+" : "+o+') + "px"',g="("+c+" || "+n+") / 2 - (this.offsetWidth / 2) + (t = "+u+" ? "+u+" : "+s+') + "px"';p.removeExpression("top"),p.removeExpression("left"),p.setExpression("top",f),p.setExpression("left",g)}}}))},focus:function(t){var e=this,i=t&&-1!==$.inArray(t,["first","last"])?t:"first",r=$(":input:enabled:visible:"+i,e.d.wrap);setTimeout((function(){r.length>0?r.focus():e.d.wrap.focus()}),10)},getDimensions:function(){var t=void 0===window.innerHeight?a.height():window.innerHeight;i=[r.height(),r.width()],s=[t,a.width()]},getVal:function(t,e){return t?"number"==typeof t?t:"auto"===t?0:t.indexOf("%")>0?parseInt(t.replace(/%/,""))/100*("h"===e?s[0]:s[1]):parseInt(t.replace(/px/,"")):null},update:function(t,e){var i=this;if(!i.d.data)return!1;i.d.origHeight=i.getVal(t,"h"),i.d.origWidth=i.getVal(e,"w"),i.d.data.hide(),t&&i.d.container.css("height",t),e&&i.d.container.css("width",e),i.setContainerDimensions(),i.d.data.show(),i.o.focus&&i.focus(),i.unbindEvents(),i.bindEvents()},setContainerDimensions:function(){var t=this,e=(o.ie6||o.ie7,""),i="",r=t.d.data.outerHeight(!0)+t.d.container.height(),n=t.d.data.outerWidth(!0)+t.d.container.width();t.d.origHeight=t.d.origHeight||e,t.d.origWidth=t.d.origWidth||i;var a=t.o.maxHeight?t.getVal(t.o.maxHeight,"h"):null,h=t.o.maxWidth?t.getVal(t.o.maxWidth,"w"):null,l=a&&a<s[0]?a:s[0],c=h&&h<s[1]?h:s[1],u=t.o.minHeight?t.getVal(t.o.minHeight,"h"):"auto";e=e?t.o.autoResize&&e>l?l:e<u?u:e:r?r>l?l:t.o.minHeight&&"auto"!==u&&r<u?u:r:u;var d=t.o.minWidth?t.getVal(t.o.minWidth,"w"):"auto";i=i?t.o.autoResize&&i>c?c:i<d?d:i:n?n>c?c:t.o.minWidth&&"auto"!==d&&n<d?d:n:d,t.d.container.css({height:e,width:i}),t.d.wrap.css({overflow:r>e||n>i?"auto":"visible"}),t.o.autoPosition&&t.setPosition()},setPosition:function(){var t,e,i=this,r=s[0]/2-i.d.container.outerHeight(!0)/2,n=s[1]/2-i.d.container.outerWidth(!0)/2,o="fixed"!==i.d.container.css("position")?a.scrollTop():0;i.o.position&&"[object Array]"===Object.prototype.toString.call(i.o.position)?(t=parseFloat(o)+parseFloat(i.o.position[0]||r),e=i.o.position[1]||n):(t=o+r,e=n),i.d.container.css({left:e,top:t})},watchTab:function(t){var e=this;if($(t.target).parents(".simplemodal-container").length>0){if(e.inputs=$(":input:enabled:visible:first, :input:enabled:visible:last",e.d.data[0]),!t.shiftKey&&t.target===e.inputs[e.inputs.length-1]||t.shiftKey&&t.target===e.inputs[0]||0===e.inputs.length){t.preventDefault();var i=t.shiftKey?"last":"first";e.focus(i)}}else t.preventDefault(),e.focus()},open:function(){var t=this;t.d.iframe&&t.d.iframe.show(),$.isFunction(t.o.onOpen)?t.o.onOpen.apply(t,[t.d]):(t.d.overlay.show(),t.d.container.show(),t.d.data.show()),t.o.focus&&t.focus(),t.bindEvents()},close:function(t){t=void 0===t||!!t;var e=this;if(!e.d.data)return!1;if(e.unbindEvents(),$.isFunction(e.o.onClose)&&!e.occb&&t)e.occb=!0,e.o.onClose.apply(e,[e.d]);else{if(e.d.placeholder){var i=$("#simplemodal-placeholder");e.o.persist?i.replaceWith(e.d.data.removeClass("simplemodal-data").css("display",e.display)):(e.d.data.hide().remove(),i.replaceWith(e.d.orig))}else e.d.data.hide().remove();e.d.container.hide().remove(),e.d.overlay.hide(),e.d.iframe&&e.d.iframe.hide().remove(),e.d.overlay.remove(),e.d={}}}}},function(t,e){if(void 0===window.tzOffsetMoscow&&(window.tzOffsetMoscow=10800),void 0===window.LANG_NAME&&(window.LANG_NAME="en"),window.TEXT_TRANSLATOR_MODE,void 0===window.IGUANACHART_THEME&&(window.IGUANACHART_THEME="White"),void 0===window.MOBILE_BROWSER_DETECTED&&(window.MOBILE_BROWSER_DETECTED=!1),window.formatDate=function(t,e){var i=new Date;e=e||i.getTime();var r=new Date(e+864e5*+t);return i.setTime(r.getTime()),iChart.formatDateTime(i,"dd.MM.yyyy")+(e?" 23:59":"")},Date.parse=function(t){return t?t instanceof Date?t.getTime():(e=t.match(/^\s*([0-9]{4})-([0-9]{2})-([0-9]{2})[\s|T]{0,1}(?:\s*(\d\d{0,1}):?(\d\d{0,1})(?::?(\d\d{0,1}))?(?:\.([0-9]{0,3}))?)?\s*$/))?(i=new Date(e[1],e[2]-1,e[3]),void 0!==e[4]&&void 0!==e[5]&&i.setHours(e[4],e[5],e[6]||0,e[7]||0),i.getTime()):(e=t.match(new RegExp("^\\s*([0-9]{1,2})(?:.|-|/|\\s)([0-9]{1,2})(?:.|-|/|\\s)([0-9]{4})(?:\\s*([0-9]{1,2}):?([0-9]{1,2})(?::?([0-9]{1,2}))?)?\\s*$")))?(i=new Date(e[3],e[2]-1,e[1]),void 0!==e[4]&&void 0!==e[5]&&i.setHours(e[4],e[5],e[6]||0),i.getTime()):new Date(t).getTime():null;var e,i},void 0===window._t){function i(t,e){if(void 0!==i.data)return i.data[t]?i.data[t]:i18n[t]?(i.data[t]=i18n[t],i.data[t]):e}i.data={},window._t=function(t,e,r){var n="",a=!1,s="object"==typeof r&&void 0!==r.QTY&&-1!==e.indexOf("||");return void 0!==(n=i(t,e))&&n!==e||(n=e,a=!0),s&&(n=function(t,e,i){var r=parseInt(e)===e,n=2;if("ru"===i||"uk"===i)if(r)if("1"===((""+e).length>1&&(""+e).substr(-2,1)))n=3;else switch((""+e).substr(-1)){case"1":n=1;break;case"2":case"3":case"4":n=2;break;default:case"0":case"5":case"6":case"7":case"8":case"9":n=3}else n=2;else n=e>1?2:1;var a=t.split("||");return void 0===a[n-1]?a[0]:a[n-1]}(n,r.QTY,a?"ru":LANG_NAME)),"object"==typeof r&&$.each(r,(function(t,e){n=n.replace(new RegExp("%"+t+"%","g"),e)}))," "+n+" "}}void 0===String.prototype.hashCode&&(String.prototype.hashCode=function(){var t,e,i=0;if(0===this.length)return i;for(t=0,e=this.length;t<e;t++)i=(i<<5)-i+this.charCodeAt(t),i|=0;return i}),void 0===window.getTimeOffsetServer&&(window.getTimeOffsetServer=function(t){return(t=t||0)+60*(new Date).getTimezoneOffset()}),window.intervalNames=function(t){switch(t){case"S30":return _t("2072","30 секундный");case"I1":return _t("2073","минутный");case"I5":return _t("2074","5 минутный");case"I15":return _t("2075","15 минутный");case"H1":return _t("2076","Часовик");case"D1":return _t("2077","Дневной");case"D7":return _t("2078","Недельный");default:return""}};window.intervalShortNames=function(t){switch(t){case"S30":return _t("1176","30c");case"I1":return _t("1370","М");case"I5":return _t("3331","5М");case"I15":return _t("3332","15М");case"H1":return _t("3333","Ч");case"D1":return _t("1368","Д");case"D3":return _t("15824","3Д");case"D7":return _t("1369","Н");case"M1":return _t("1370","М");case"M3":return _t("1371","3М");default:return""}},function(t){"use strict";var e,i;"undefined"!=typeof JSON&&""!==JSON.stringify(document.createElement("input").value)&&(e=function(t,e){return""===e?"":e},i=JSON.stringify,JSON.stringify=function(t,r,n){return i(t,e,n)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if((e=void 0===e?0:parseInt(e,10))>=this.length)return-1;e<0&&(e=Math.max(0,this.length+e));for(var i=e;i<this.length;++i)if(this[i]===t)return i;return-1}),String.prototype.expandExponential=function(){return this.replace(/^([+-])?(\d+).?(\d*)[eE]([-+]?\d+)$/,(function(t,e,i,r,n){var a=+n<0,s=i.length+ +n,o=(t=(a?i:r).length,n=(n=Math.abs(n))>=t?n-t+a:0,new Array(n+1).join("0")),h=i+r;return(e||"")+(a?h=o+h:h+=o).substr(0,s+=a?o.length:0)+(s<h.length?"."+h.substr(s):"")}))},t.inheritPrototype=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t};var r=function(t){return t<10?"0"+t:t};void 0===t.iChart&&(t.iChart={}),t.iChart.dayShortNames=[_t("2129","Пн"),_t("2130","Вт"),_t("2131","Ср"),_t("2132","Чт"),_t("2133","Пт"),_t("2134","Сб"),_t("2135","Вс")],t.iChart.monthNames=[_t("3280","Январь"),_t("3281","Февраль"),_t("3282","Март"),_t("3283","Апрель"),_t("3284","Май"),_t("3285","Июнь"),_t("3286","Июль"),_t("3287","Август"),_t("3288","Сентябрь"),_t("3289","Октябрь"),_t("3290","Ноябрь"),_t("3291","Декабрь")],t.iChart.monthRNames=[_t("1889","января"),_t("1890","февраля"),_t("1891","марта"),_t("1892","апреля"),_t("1893","мая"),_t("1894","июня"),_t("1895","июля"),_t("1896","августа"),_t("1897","сентября"),_t("1898","октября"),_t("1899","ноября"),_t("1900","декабря")],t.iChart.monthShortNames=[_t("3502","янв"),_t("3503","фев"),_t("3504","мар"),_t("3505","апр"),_t("4939","май"),_t("3507","июн"),_t("3508","июл"),_t("3509","авг"),_t("3510","сен"),_t("3511","окт"),_t("3512","ноя"),_t("3513","дек")],t.iChart.declineNoun=function(t,e,i,r){return t=Math.abs(t),(t%=100)>=5&&t<=20?r:1===(t%=10)?e:t>=2&&t<=4?i:r},t.iChart.formatDateTime=function(e,i){if(!e)return"";i||(i=0===e.getHours()&&0===e.getMinutes()?"dd.MM.yyyy":0===e.getSeconds()?"dd.MM.yyyy HH:mm":"dd.MM.yyyy HH:mm:ss");for(var n="",a=[],s=0;s<i.length;++s){var o=i.charAt(s);if(0!==n.length){var h=n.charAt(n.length-1);if("d"!==o&&"M"!==o&&"y"!==o&&"H"!==o&&"m"!==o&&"s"!==o){if("d"!==h&&"M"!==h&&"y"!==h&&"H"!==h&&"m"!==h&&"s"!==h){n+=o;continue}}else if(o===h){n+=o;continue}a.push(n),n=o}else n=o}0!==n.length&&a.push(n);var l="";for(s=0;s<a.length;++s)switch(n=a[s]){case"d":l+=e.getDate();break;case"dd":l+=r(e.getDate());break;case"M":l+=e.getMonth()+1;break;case"MM":l+=r(e.getMonth()+1);break;case"MMM":l+=t.iChart.monthShortNames[e.getMonth()];break;case"MMMM":l+=t.iChart.monthRNames[e.getMonth()];break;case"yy":l+=e.getFullYear().toString().substr(2,2);break;case"yyyy":l+=e.getFullYear();break;case"H":l+=e.getHours();break;case"HH":l+=r(e.getHours());break;case"m":l+=e.getMinutes();break;case"mm":l+=r(e.getMinutes());break;case"s":l+=e.getSeconds();break;case"ss":l+=r(e.getSeconds());break;default:l+=n}return l},t.iChart.formatNumber=function(e,i){if(null==e)return"";0!==(i=$.extend({decimalPlaces:null,decimalPrecision:null,decimalSeparator:".",scale:0,thousandsSeparator:" "},i)).scale&&(e/=Math.pow(10,3*i.scale));var r=null!==i.decimalPlaces,n=(r?parseFloat(t.iChart.toFixed(e,i.decimalPlaces)):null!==i.decimalPrecision?parseFloat(e.toPrecision(i.decimalPrecision)):e).toString().expandExponential().split(".");n[0].length>3&&(n[0]=n[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,i.thousandsSeparator)),r&&(n[1]||"").length<i.decimalPlaces&&(n[1]=n[1]||"",n[1]+=new Array(i.decimalPlaces-n[1].length+1).join("0"));var a=n.join(i.decimalSeparator).replace("-","−");switch(i.scale){case 0:break;case 1:a+=_t("3496","тыс.");break;case 2:a+=_t("2137","млн");break;case 3:a+=_t("4708","млрд");break;case 4:a+=_t("2139","трлн");break;default:throw new Error("Number scale '"+i.scale+"' is invalid.")}return a},t.iChart.parseDateTime=function(t,e){if(!t)return null;if(t instanceof Date)return t;var i;if("yyyyMMddHHmm"===e)return(i=t.match(new RegExp("^([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})$")))?r=new Date(i[1],i[2]-1,i[3],i[4],i[5],0,0):null;if("yyyy-MM-dd HH:mm:ss"===e)return(i=t.match(new RegExp("^([0-9]{4})-([0-9]{2})-([0-9]{2})\\s([0-9]{2}):([0-9]{2}):([0-9]{2})")))?r=new Date(i[1],i[2]-1,i[3],i[4],i[5],i[6],0):null;if(!(i=t.match(new RegExp("^\\s*([0-9]{1,2})(?:.|-|/|\\s)([0-9]{1,2})(?:.|-|/|\\s)([0-9]{4})(?:\\s*([0-9]{1,2}):?([0-9]{1,2})(?::?([0-9]{1,2}))?)?\\s*$"))))return null;var r=new Date(i[3],i[2]-1,i[1]);return void 0!==i[4]&&void 0!==i[5]&&r.setHours(i[4],i[5],i[6]||0),r},t.iChart.parseQueryString=function(t){if("string"!=typeof t)return{};var e=t.indexOf("?");-1!==e&&(t=t.substr(e+1));for(var i=t.split("&"),r={},n=0;n<i.length;++n){var a=i[n].split("=");if(2===a.length){var s=decodeURIComponent(a[0]),o=decodeURIComponent(a[1]);switch(typeof r[s]){case"object":r[s].push(o);break;case"string":r[s]=[r[s],o];break;case"undefined":r[s]=o}}}return r},t.iChart.toFixed=function(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i},t.iChart.roundToPrecision=function(t,e){if((e=parseFloat(e))<1){var i=parseFloat(e).toString().length-2;return+(Math.round(t*(1/e))/(1/e)).toFixed(i)}return+(Math.round(t*(1/e))/(1/e)).toFixed(0)},t.iChart.toQueryString=function(t,e){var i=[];for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];if(null!=n&&""!==n)if($.isArray(n))for(var a=0;a<n.length;++a)i.push(encodeURIComponent(r)+"="+encodeURIComponent(n[a]));else n instanceof Date&&(n=iChart.formatDateTime(n)),i.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}var s="";return e&&0!==i.length&&(s+="?"),s+=i.join("&")},t.iChart.rgbToHex=function(t){if(/^#[a-fA-F0-9]{3,6}$/.test(t)){if(t.length<7){var e=t.split("");t=e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}return t}var i,r;for(r=(i=(((t=[].slice.call(arguments).join(",").match(/\d+/g))[0]<<16)+(t[1]<<8)+ +t[2]).toString(16)).length;r++<6;)i="0"+i;return"#"+i},t.iChart.rgbaGetAlfa=function(t){var e=t.match(/\((.*),(.*),(.*),(.*)\)/);return e&&e[4]?+e[4]:1},t.iChart.hexToRGB=function(t,e){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?"rgba("+parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+","+e+")":null},t.iChart.invertColor=function(t){t=[].slice.call(arguments).join(",").replace(/rgb\(|\)|rgba\(|\)|\s/gi,"").split(",");for(var e=0;e<t.length;e++)t[e]=(3===e?1:255)-t[e];return t.join(", ")},t.iChart.getIntersection=function(t,e,i,r){if((t.y-e.y)*(r.x-i.x)-(i.y-r.y)*(e.x-t.x)!=0&&r.x-i.x!=0){var n=-((t.x*e.y-e.x*t.y)*(r.x-i.x)-(i.x*r.y-r.x*i.y)*(e.x-t.x))/((t.y-e.y)*(r.x-i.x)-(i.y-r.y)*(e.x-t.x));return{x:n,y:((i.y-r.y)*-n-(i.x*r.y-r.x*i.y))/(r.x-i.x)}}return!1},t.iChart.getThirdPoint=function(t,e,i){var r=(parseFloat(i)-parseFloat(t.x))*(parseFloat(e.y)-parseFloat(t.y))/(parseFloat(e.x)-parseFloat(t.x))+parseFloat(t.y);return{x:parseFloat(i),y:r}},t.iChart.getLineEquation=function(t,e,i){var r=(+e.y-+t.y)/(+e.x-+t.x),n=+t.y-r*t.x;return{x:+i,y:r*+i+n,k:r,b:n}},t.iChart.getChartTimeframe=function(t){switch(t){case"I1":return 1;case"I5":return 5;case"I15":return 15;case"H1":return 60;case"D1":return 1440;case"D7":return 10080;default:return 1440}},t.iChart.getContext=function(t){var e=t.getContext("2d");if(!e.scaled){var i=Math.max(window.devicePixelRatio||1,1);e.scale(i,i),e.scaled=1}return e},t.iChart.animateId=null,t.iChart.animate=function(e){var i=performance.now();t.iChart.animateId=requestAnimationFrame((function r(n){var a=(n-i)/e.duration;a>1&&(a=1);var s=e.timing(a);e.draw(s),a<1?t.iChart.animateId=requestAnimationFrame(r):(cancelAnimationFrame(t.iChart.animateId),"function"==typeof e.complete&&e.complete())}))}}(window)},function(t,e){!function(){"use strict";iChart.ui=function(t){this.chart=t;var e=this;this.$uiContainer=this.chart.wrapper,this.$topToolBarContainer=this.chart.wrapper.find(".iChartToolsTop"),this.render=function(){this.chart.viewData.chart.chartOptions.uiTools.top&&this.renderTopBar(),this.bindUiControls()},this.renderTopBar=function(){this.$topToolBarContainer.empty(),this.renderTopToolBar(),this.$topToolBarContainer.show()},this.renderIndicators=function(){var t={indicators:Object.keys(iChart.indicators).map((function(t){return iChart.indicators[t]})),userData:this.chart.deserializeIndicators(this.chart.dataSource.dataSettings.graphicIndicators)},i=$.render.indicatorsDropdownTmpl(t);this.chart.wrapper.find(".js-chart-ui-indicators").append(i),$(this.chart.wrapper).off("click",".js-add-indicator").on("click",".js-add-indicator",(function(){var t=$(this).data("value"),i={};iChart.indicators[t].parameters.forEach((function(t){i[t.Code]=t.Value}));var r=e.chart.deserializeIndicators(e.chart.dataSource.dataSettings.graphicIndicators);r.push({name:t,params:i}),e.chart.dataSource.dataSettings.graphicIndicators=e.chart.serializeIndicators(r),e.chart.setIndicators(e.chart.dataSource.dataSettings.graphicIndicators),e.renderIndicatorsCurrent()})),$(this.chart.wrapper).off("click",".js-remove-indicator").on("click",".js-remove-indicator",(function(t){var i=e.chart.deserializeIndicators(e.chart.dataSource.dataSettings.graphicIndicators);i.splice($(this).data("index"),1),e.chart.dataSource.dataSettings.graphicIndicators=e.chart.serializeIndicators(i),e.chart.setIndicators(e.chart.dataSource.dataSettings.graphicIndicators),e.renderIndicatorsCurrent(),t.stopPropagation(),t.preventDefault()})),$(this.chart.wrapper).off("click",".js-edit-indicator").on("click",".js-edit-indicator",(function(t){var i=e.chart.deserializeIndicators(e.chart.dataSource.dataSettings.graphicIndicators),r=$(this).data("index"),n=$.extend({},iChart.indicators[i[r].name]);n.parameters.forEach((function(t){t.Value=i[r].params[t.Code]})),e.renderIndicatorDialog(n,r)}))},this.renderIndicatorsList=function(){var t={indicators:Object.keys(iChart.indicators).map((function(t){return iChart.indicators[t]}))},e=$.render.indicatorsListTmpl(t);this.$topToolBarContainer.find(".js-iChartTools-indicators-list").html(e)},this.renderIndicatorsCurrent=function(){var t={userData:this.chart.deserializeIndicators(this.chart.dataSource.dataSettings.graphicIndicators)},e=$.render.indicatorsCurrentTmpl(t);this.$topToolBarContainer.find(".js-iChartTools-indicators-current").html(e)},this.renderIndicatorDialog=function(t,i){$.modal.impl.d.data&&$.modal.impl.close(),$(".iChartDialog").remove();var r=$($.render.indicatorDialogTmpl(t)),n=r.find(".js-iChartTools-indicators-colorContainer"),a=r.find(".js-iChartTools-indicators-widthContainer"),s=i;if(iChart.indicators[t.value])for(var o=0;o<iChart.indicators[t.value].output;o++)if(void 0!==this.chart.viewData.chart){var h=this.chart.viewData.chart.chartOptions.indicatorColors[s][o];this.chart.userSettings.chartSettings.indicatorsColor[t.value]&&this.chart.userSettings.chartSettings.indicatorsColor[t.value][s]&&this.chart.userSettings.chartSettings.indicatorsColor[t.value][s][o]&&(h=this.chart.userSettings.chartSettings.indicatorsColor[t.value][s][o]),$("<input/>",{type:"hidden",class:"iChart-indicator-color iChart-indicator-color-"+s+o,id:"iChart-indicator-color-"+s+o,indicator:t.value,colorIndex:s+"-"+o,"ui-pos":s<2?"bottom":"top"}).val(h).appendTo(n),this.chart.initInsrMinicolors(n.find(".iChart-indicator-color-"+s+o));var l=2;this.chart.userSettings.chartSettings.indicatorsWidth[t.value]&&this.chart.userSettings.chartSettings.indicatorsWidth[t.value][s]&&this.chart.userSettings.chartSettings.indicatorsWidth[t.value][s][o]&&(l=this.chart.userSettings.chartSettings.indicatorsWidth[t.value][s][o]);var c=$('<span class="lineWidth indicatorWidthSelector-'+s+o+'" data-chartName="'+this.chart.name+'" data-style="'+l+'"></span>').appendTo(a);$('<div class="indicatorMenuHolder-'+s+o+'" data-chartName="'+this.chart.name+'" style="display: none" widthIndex="'+s+"-"+o+'"><div widthIndex="'+s+"-"+o+'" indicator="'+t.value+'"><span class="lineWidth js-lineWidth '+this.chart.name+'" data-style="1"></span><span class="lineWidth js-lineWidth '+this.chart.name+'" data-style="2"></span><span class="lineWidth js-lineWidth '+this.chart.name+'" data-style="3"></span><span class="lineWidth js-lineWidth '+this.chart.name+'" data-style="4"></span><span class="lineWidth js-lineWidth '+this.chart.name+'" data-style="5"></span><span class="lineWidth js-lineWidth '+this.chart.name+'" data-style="8"></span><span class="lineWidth js-lineWidth '+this.chart.name+'" data-style="10"></span></div></div>').appendTo(a),this.chart.initIndicatorWidthMenu(c,a.find(".indicatorMenuHolder-"+s+o+"[data-chartName='"+this.chart.name+"']").html())}$(document).off("click",".js-set-params-indicator").on("click",".js-set-params-indicator",(function(t){var r=e.chart.deserializeIndicators(e.chart.dataSource.dataSettings.graphicIndicators);$(".js-iChartTools-indicators-params input").serializeArray().forEach((function(t){r[i].params[t.name]=t.value})),r=e.chart.serializeIndicators(r),e.chart.setIndicators(r),$.modal.impl.close()})),this.chart.wrapper.append(r),$(".iChartDialog").modal({modal:!1,zIndex:1500,title:_t("17398","Настройки индикатора")})},this.renderThemeConfigDialog=function(t){t=t||[];var i=$($.render.themeConfigTmpl());if(t){var r=i.find(".js-themeAdditionButtons");r.empty(),t.forEach((function(t){var e=$("<button/>",{class:"uk-button "+t.class,text:t.title});r.append(e)}))}i.find(".js-themeConfigOptions").empty().append(this.renderThemeConfigOptions()),i.find(".js-themeConfigSelector").empty().append(this.renderThemeConfigSelector()),i.data("chartOptions",$.extend(!0,{},this.chart.wrapper.iguanaChart("chartOptions"))),this.chart.wrapper.find(".js-themeConfig").remove(),this.chart.wrapper.append(i);var n=this.chart.wrapper.find(".js-themeConfig"),a=function(){e.chart.wrapper.iguanaChart("chartOptions",i.data("chartOptions")),e.setUiStateForThemeConfig(!1),$.modal.impl.d.data&&$.modal.impl.close()};return n.modal({modal:!1,draggable:!0,maxWidth:600,zIndex:1500,title:_t("13754","Настройки вида"),onClose:a}),n.on("click",".js-chartOptions",(function(){switch($(this).attr("data-value")){case"ok":e.chart.wrapper.trigger("iguanaChartEvents",["hashChanged"]),e.chart.wrapper.trigger("iguanaChartEvents",["chartOptionsChanged",iChart.Charting.ChartOptions.getThemeOptions(e.chart.viewData.chart.chartOptions)]),e.chart.userSettings.chartSettings.defaultTheme=0,e.setUiStateForThemeConfig(!1),$.modal.impl.d.data&&$.modal.impl.close(!1);break;case"cancel":a()}})),n.on("click",".js-themeSelect",(function(){return e.chart.wrapper.iguanaChart("setTheme",$(this).data("theme")),i.find(".js-themeConfigOptions").empty().append(e.renderThemeConfigOptions()),!1})),n.on("click",".js-themeSaveAs",(function(){return UIkit.modal.prompt(_t("5228","Название")+":","",(function(t){if(t){var r={name:t,settings:iChart.Charting.ChartOptions.getThemeOptions(e.chart.viewData.chart.chartOptions)};$iguanaChart.thems.push($.extend({custom:!0},r)),r=JSON.stringify(r),e.chart.wrapper.trigger("iguanaChartEvents",["themeSave",r]),i.find(".js-themeConfigSelector").empty().append(e.renderThemeConfigSelector())}})),!1})),n.on("click",".js-themeDelete",(function(t){var i=$(this).data("name"),r=$.grep($iguanaChart.thems,(function(t,e){return t.name==i?t.i=e:null}))[0];return $iguanaChart.thems.splice(r,1),n.find('.js-themeSelect[data-theme="'+i+'"]').remove(),e.chart.wrapper.trigger("iguanaChartEvents",["themeDelete",i]),t.stopPropagation(),!1})),n},this.renderThemeConfigSelector=function(){return $($.render.themeConfigSelectorTmpl({themes:$iguanaChart.thems}))},this.renderThemeConfigOptions=function(){var t=$($.render.themeConfigOptionsTmpl({chartOptions:e.chart.viewData.chart.chartOptions}));t.find(".js-widthSlector").each((function(){var t=$(this),i=t.find(".menuHolder").html();t.qtip({style:{classes:"qtip-light"},position:{at:"center right",my:"left center",effect:!1},content:{text:i},hide:{fixed:!0,delay:300,effect:function(){$(this).slideUp(500)}},show:{solo:!0,effect:function(){$(this).slideDown(500)}},events:{show:function(i,r){$(this).find(".js-widthSlectorWrapper").each((function(){var i=$(this);i.off().on("click",".js-lineWidth",(function(){var r=$(this).attr("data-style");e.chart.wrapper.iguanaChart("chartOptions",i.attr("data-option"),r),t.find(".js-widthSlectorValue").attr("data-style",r)}))}))}}})}));var i=function(t,i){var r=$(this).val(),n=r,a=$(this).attr("data-option");r.match(/^rgb.*/)||(n=iChart.hexToRGB(r,i)),e.chart.wrapper.iguanaChart("chartOptions",a,n),$(".js-colorSelector[data-option='"+a+"']").css({"background-color":n}),$(this).minicolors("value",r),$(this).minicolors("opacity",i)},r=function(){var t=this.value,i=iChart.hexToRGB(t,1),r=this.element.attr("data-option");e.chart.wrapper.iguanaChart("chartOptions",r,i),$(".js-colorSelector[data-option='"+r+"']").css({"background-color":i}),this.element.parent().find(".js-colorPicker").minicolors("value",t)};return t.find(".js-colorSelector").each((function(){var t=$(this),n=t.find(".menuHolder").html();t.qtip({style:{classes:"qtip-light"},position:{at:"center right",my:"left center",effect:!1,viewport:$("html"),adjust:{method:"shift none"}},content:{text:n},hide:{fixed:!0,delay:300},show:{solo:!0},events:{show:function(t,n){$(t.currentTarget).find(".js-colorPicker").each((function(){e.addMinicolors(this,t.currentTarget,i,r)}))}}})})),t.find(".js-checkbox").on("click",".js-flag",(function(){e.chart.wrapper.iguanaChart("chartOptions",$(this).attr("data-option"),$(this).prop("checked"))})),t},this.initMinicolors=function(t,e){e="function"==typeof e?e:function(){};var i=$(t),r=!!i.first().attr("data-opacity"),n=(i.first().attr("data-opacity"),i.first().val());n=n||"rgba(82, 175, 201, 0.5)",$(t).minicolors({animationSpeed:50,animationEasing:"swing",change:e,changeDelay:0,control:"hue",defaultValue:n,hide:null,hideSpeed:100,inline:!0,letterCase:"lowercase",opacity:r,position:"bottom left",show:null,showSpeed:100,theme:"default"}),$(t).minicolors("value",n)},this.initColorPalette=function(t,e){e="function"==typeof e?e:function(){},$(t).find(".js-colorPalette").each((function(){null==$(this).data("palette")&&$(this).palette({palette:"basic",columns:2,size:13,change:e})}))},this.addMinicolors=function(t,e,i,r){if($(t).hasClass("minicolors-input")){var n=$(t).val();$(t).minicolors("value",n)}else this.initMinicolors(t,i),this.initColorPalette(e,r)},this.renderTopToolBar=function(){var t=$($.render.iChart_topToolBarTmpl());this.$topToolBarContainer.append(t),this.renderIndicators()},this.initStatesControls=function(){var t=this.chart.viewData.chart.chartOptions.chartType;this.setUiStateForChartType(t);var i=!!this.chart.viewData.chart.chartOptions.showVolumeByPrice;this.setUiStateForShowVolumeByPrice(i);i=e.chart.viewData.chart.chartOptions.showVolume;this.setUiStateForShowVolume(i);i=e.chart.viewData.chart.chartOptions.percentMode;this.setUiStateForPercentMode(i),this.setUiStateForDataInterval(e.chart.dataSource.dataSettings.interval)},this.bindUiControls=function(){this.$uiContainer.off("click",".js-chart-ui-control").on("click",".js-chart-ui-control",(function(t){var i=$(this),r=i.data("property"),n=i.data("value"),a="uiSet_"+r;"function"==typeof e[a]&&e[a](n)})),this.$uiContainer.on("show.uk.dropdown",'.js-chart-ui-control[data-property="fillStyle"]',(function(){var t=$(this);$(this).find(".js-colorPicker").each((function(){e.addMinicolors(this,t.find(".js-chart-ui-control-holder"),e.onMinicolorsChange,e.onPaletteChange)}))})),this.$uiContainer.on("show.uk.dropdown",'.js-chart-ui-control[data-property="strokeStyle"]',(function(){var t=$(this);$(this).find(".js-colorPicker").each((function(){e.addMinicolors(this,t.find(".js-chart-ui-control-holder"),e.onMinicolorsChange,e.onPaletteChange)}))}))},this.uiSet_chartType=function(t){this.chart.viewData.chart.setChartType(t),this.setUiStateForChartType(t),this.chart.wrapper.trigger("iguanaChartEvents",["chartOptionsChanged",{chartType:t}])},this.uiSet_showVolumeByPrice=function(t){this.chart.VolumeByPrice_onClick();var e=!!this.chart.viewData.chart.chartOptions.showVolumeByPrice;this.setUiStateForShowVolumeByPrice(e),this.chart.wrapper.trigger("iguanaChartEvents",["chartOptionsChanged",{showVolumeByPrice:e}])},this.uiSet_showVolume=function(t){this.chart.VolumeByDate_onClick();var i=e.chart.viewData.chart.chartOptions.showVolume;this.setUiStateForShowVolume(i),this.chart.wrapper.trigger("iguanaChartEvents",["chartOptionsChanged",{showVolume:i}])},this.uiSet_percentMode=function(t){var e=this.chart.percentMode_onClick();this.setUiStateForPercentMode(e),this.chart.wrapper.trigger("iguanaChartEvents",["chartOptionsChanged",{percentMode:e}])},this.uiSet_themeConfig=function(){$.modal.impl.d.data?($.modal.impl.close(),this.setUiStateForThemeConfig(!1)):(this.renderThemeConfigDialog(),this.setUiStateForThemeConfig(!0))},this.uiSet_instrumentLine=function(t){var e=$.extend({},this.chart.userSettings.chartSettings.contextSettings,this.chart.viewData.chart.chartOptions.elementStyle[t]);this.chart.wrapper.iguanaChart("toolStart",t,e),this.setUiStateForInstrumentLine(t,1),this.onSelectInstrument({settings:e})},this.uiSet_instrumentForm=function(t){var e=$.extend({},this.chart.userSettings.chartSettings.contextSettings,this.chart.viewData.chart.chartOptions.elementStyle[t]);this.chart.wrapper.iguanaChart("toolStart",t,e),this.setUiStateForInstrumentForm(t,1),this.onSelectInstrument({settings:e})},this.uiSet_instrumentText=function(t){var e=$.extend({},this.chart.userSettings.chartSettings.contextSettings,this.chart.viewData.chart.chartOptions.elementStyle[t]);this.chart.wrapper.iguanaChart("toolStart",t,e),this.setUiStateForInstrumentText(t,1),this.onSelectInstrument({settings:e})},this.uiSet_clearInstruments=function(){this.chart.removeAllInstruments_onClick()},this.uiSet_lineWidthSelector=function(t){this.chart.setLineWidthToCanvas(t),this.setUiStateForLineWidth(t)},this.uiSet_dataInterval=function(t){this.chart.setInterval(t),this.setUiStateForDataInterval(t)},this.uiSet_captureImage=function(){var t=this.chart.viewData.chart.toBase64("image/png");$.modal.impl.d.data&&$.modal.impl.close(),$(".iChartDialog").remove();var e=$($.render.captureDialogTmpl());e.find(".js-iChartTools-capture").attr("src","data:image/png;base64, "+t),this.chart.wrapper.append(e);var i=e.find(".js-iChartTools-capture").get(0).width;$(".iChartDialog").modal({modal:!1,zIndex:1500,maxWidth:i,title:_t("1724","Скачать картинку")})},this.onMinicolorsChange=function(t,i){var r=$(this).val(),n=r,a=$(this).attr("data-option");r.match(/^rgb.*/)||(n=iChart.hexToRGB(r,i)),e.chart.userSettings.chartSettings.contextSettings[a]=n,e.setUiStateForColorSelector(a,n),$(this).minicolors("value",n),e.chart.setStyleToCanvas(n,a)},this.onPaletteChange=function(){var t=this.value,i=this.element.attr("data-option"),r=t;t.match(/^rgb.*/)||(r=iChart.hexToRGB(t,1)),e.chart.userSettings.chartSettings.contextSettings[i]=r,e.setUiStateForColorSelector(i,r),this.element.parent().find(".js-colorPicker").minicolors("value",r),e.chart.setStyleToCanvas(r,i)},this.setUiStateForChartType=function(t,e){t&&(e=this.getUiStateForChartType(t)),this.$uiContainer.find('.js-chart-ui-control-state[data-property="chartType"]').removeClass("sprite-icon-line sprite-icon-candle sprite-icon-bars").addClass(e)},this.getUiStateForChartType=function(t){var e="sprite-icon-line";switch(t){case"Candlestick":e="sprite-icon-candle";break;case"Stock":e="sprite-icon-bars";break;case"Line":e="sprite-icon-line"}return e},this.setUiStateForShowVolumeByPrice=function(t){t?this.$uiContainer.find('.js-chart-ui-control-state[data-property="showVolumeByPrice"]').addClass("active"):this.$uiContainer.find('.js-chart-ui-control-state[data-property="showVolumeByPrice"]').removeClass("active")},this.setUiStateForShowVolume=function(t){"inside"==t||"outside"==t?this.$uiContainer.find('.js-chart-ui-control-state[data-property="showVolume"]').addClass("active"):this.$uiContainer.find('.js-chart-ui-control-state[data-property="showVolume"]').removeClass("active")},this.setUiStateForPercentMode=function(t){t?this.$uiContainer.find('.js-chart-ui-control-state[data-property="percentMode"]').addClass("active"):this.$uiContainer.find('.js-chart-ui-control-state[data-property="percentMode"]').removeClass("active")},this.setUiStateForThemeConfig=function(t){t?this.$uiContainer.find('.js-chart-ui-control-state[data-property="themeConfig"]').addClass("active"):this.$uiContainer.find('.js-chart-ui-control-state[data-property="themeConfig"]').removeClass("active")},this.setUiStateForLineWidth=function(t){this.$uiContainer.find('.js-chart-ui-control-state[data-property="lineWidthSelector"]').removeClass("sprite-icon-1px sprite-icon-2px sprite-icon-3px sprite-icon-4px sprite-icon-5px sprite-icon-8px sprite-icon-10px").addClass("sprite-icon-"+t+"px")},this.setUiStateForColorSelector=function(t,e){e.match(/^rgb.*/)||(e=iChart.hexToRGB(e,1)),this.$uiContainer.find('.js-chart-ui-control-state[data-property="'+t+'"]').css({"background-color":e}),this.$uiContainer.find('.js-chart-ui-control[data-property="'+t+'"] .js-colorPicker').val(e)},this.setUiStateForInstrumentLine=function(t,e){e=!!e;var i="";switch(t){case"Line":i="sprite-icon-free-line";break;case"HorizontalLine":i="sprite-icon-h-line";break;case"VerticalLine":i="sprite-icon-v-line";break;case"Channel":i="sprite-icon-channel";break;case"Trend":i="sprite-icon-angle-trend";break;case"Arrow":i="sprite-icon-arrow-line"}e?this.$uiContainer.find('.js-chart-ui-control-state[data-property="instrumentLine"]').addClass("active"):this.$uiContainer.find('.js-chart-ui-control-state[data-property="instrumentLine"]').removeClass("active"),t&&this.$uiContainer.find('.js-chart-ui-control-state[data-property="instrumentLine"] i.sprite').removeClass("sprite-icon-free-line sprite-icon-h-line sprite-icon-v-line sprite-icon-channel sprite-icon-angle-trend sprite-icon-arrow-line").addClass(i)},this.setUiStateForInstrumentForm=function(t,e){e=!!e;var i="";switch(t){case"Polygon":i="sprite-icon-f-poligon";break;case"Rectangle":i="sprite-icon-f-square";break;case"Triangle":i="sprite-icon-f-triangle";break;case"Ellipse":i="sprite-icon-f-ellipse";break;case"FibonacciArc":i="sprite-icon-f-fibonacci-arcs";break;case"FibonacciFan":i="sprite-icon-f-fibonacci-fan";break;case"FibonacciCorrection":i="sprite-icon-f-fibonacci-correction";break;case"HorizontalRange":i="sprite-icon-h-line-double"}e?this.$uiContainer.find('.js-chart-ui-control-state[data-property="instrumentForm"]').addClass("active"):this.$uiContainer.find('.js-chart-ui-control-state[data-property="instrumentForm"]').removeClass("active"),t&&this.$uiContainer.find('.js-chart-ui-control-state[data-property="instrumentForm"] i.sprite').removeClass("sprite-icon-f-poligon sprite-icon-f-square sprite-icon-f-triangle").removeClass("sprite-icon-f-ellipse sprite-icon-f-fibonacci-arcs sprite-icon-f-fibonacci-fan sprite-icon-f-fibonacci-correction").addClass(i)},this.setUiStateForInstrumentText=function(t,e){(e=!!e)?this.$uiContainer.find('.js-chart-ui-control-state[data-property="instrumentText"][data-value="'+t+'"]').addClass("active"):this.$uiContainer.find('.js-chart-ui-control-state[data-property="instrumentText"]').removeClass("active")},this.onSelectInstrument=function(t){t.settings&&(t.settings.lineWidth&&this.setUiStateForLineWidth(t.settings.lineWidth),t.settings.fillStyle&&this.setUiStateForColorSelector("fillStyle",t.settings.fillStyle),t.settings.strokeStyle&&this.setUiStateForColorSelector("strokeStyle",t.settings.strokeStyle))},this.setUiStateForDataInterval=function(t){this.$uiContainer.find('.js-chart-ui-control[data-property="dataInterval"]').removeClass("active"),t&&this.$uiContainer.find('.js-chart-ui-control[data-property="dataInterval"][data-value="'+t+'"]').addClass("active")}}}()},function(t,e){$.views.settings.allowCode(!0),$.templates("iChart_mainTmpl",'<div class="iChart-control-form" style="min-height: 200px"><div class="js-chartContainerWrapper"><div class="iChartToolsContainer"><div class="iChartToolsTop" style="display: none;"></div></div><div id="{{:id}}" class="m-chart-container" style="height: 100%;"></div></div><div data-uk-modal="{center:true}" class="uk-modal iChart-form-simple-v js-chartTADialog uk-padding-remove {{:name}}" id="iChart-tech-analysis-dialog" style="display: none;"><div class="uk-modal-dialog"><a class="uk-modal-close uk-close"></a><div class="uk-modal-header">'+_t("3101","Индикаторы")+'</div><div class="js-chartTADialogContainer"></div><div class="uk-modal-footer"><div class="uk-flex uk-flex-middle uk-flex-space-between tm-pad-large"><div class="js-indicator-add md-btn md-btn-small md-btn-success">'+_t("15460","Добавить индикатор")+'</div><div class="js-strategy-choose md-btn md-btn-small md-btn-success">'+_t("","Выбрать стратегию")+'</div><div class="md-btn-group"><a class="md-btn md-btn-small md-btn-primary indicators-set" href="#">'+_t("532","Применить")+'</a><a class="md-btn md-btn-small indicators-default" href="#">'+_t("15461","Для всех")+'</a><a class="md-btn md-btn-small indicators-close" href="#">'+_t("1403","Отмена")+'</a></div></div></div></div></div><div class="chart-loader-wrapper" style="top: 0; width: 100%; height: 100%;"><div class="chart-loader"></div></div></div>'),$.templates("iChart_topToolBarTmpl",'<div class="tm-tool-bar uk-flex uk-flex-space-between"><div class="uk-flex uk-flex-left uk-position-relative"><div data-uk-dropdown="" class="uk-position-relative"><div class="tm-graph-button active uk-flex uk-flex-center uk-flex-middle" data-uk-tooltip="{pos:\'top\'}" title=""><i class="sprite sprite-icon-line js-chart-ui-control-state" data-property="chartType"></i></div><div class="uk-dropdown-blank" style="width: auto"><div class="uk-flex uk-flex-left tm-shadow"><div class="tm-graph-button uk-flex uk-flex-column uk-flex-center uk-flex-middle" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17371","Line chart")+'"><i class="sprite sprite-icon-line js-chart-ui-control" data-property="chartType" data-value="Line"></i></div><div class="tm-graph-button uk-flex uk-flex-column uk-flex-center uk-flex-middle" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17372","Candlestick chart")+'"><i class="sprite sprite-icon-candle js-chart-ui-control" data-property="chartType" data-value="Candlestick"></i></div><div class="tm-graph-button uk-flex uk-flex-column uk-flex-center uk-flex-middle" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17373","Bar chart")+'"><i class="sprite sprite-icon-bars js-chart-ui-control" data-property="chartType" data-value="Stock"></i></div></div></div></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control js-chart-ui-control-state" data-property="showVolumeByPrice" data-value="false" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17374","Display volume horizontally")+'"><i class="sprite sprite-icon-h-volume"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control js-chart-ui-control-state" data-property="showVolume" data-value="false" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17375","Display volume vertically")+'"><i class="sprite sprite-icon-v-volume"></i></div><div class="tm-graph-button uk-flex uk-flex-column uk-flex-center uk-flex-middle js-chart-ui-control js-chart-ui-control-state" data-property="percentMode" data-value="false" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17376","Relative price")+'"><i class="sprite sprite-icon-price"></i></div><i class="sprite sprite-icon-divider"></i><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control js-chart-ui-control-state" data-property="themeConfig" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17377","Visual Settings")+'"><i class="sprite sprite-icon-palette"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control js-chart-ui-control-state" data-property="instrumentText" data-value="Text" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17378","Add Text")+'"><i class="sprite sprite-icon-font"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control js-chart-ui-control-state" data-property="instrumentText" data-value="Bubble" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17379","Add Tooltip")+'"><i class="sprite sprite-icon-f-comment"></i></div><div data-uk-dropdown="" class="uk-position-relative"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control-state" data-property="instrumentLine" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17380","Draw Line")+'"><i class="sprite sprite-icon-arrow-line"></i></div><div class="uk-dropdown-blank" style="width: auto"><div class="uk-flex uk-flex-left tm-shadow"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentLine" data-value="Arrow" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17386","Arrow")+'"><i class="sprite sprite-icon-arrow-line"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentLine" data-value="Line" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17381","Free Line")+'"><i class="sprite sprite-icon-free-line"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentLine" data-value="HorizontalLine" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17382","Horizontal line")+'"><i class="sprite sprite-icon-h-line"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentLine" data-value="VerticalLine" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17383","Vertical line")+'"><i class="sprite sprite-icon-v-line"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentLine" data-value="Channel" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17384","Channel")+'"><i class="sprite sprite-icon-channel"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentLine" data-value="Trend" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17385","Corner Trend")+'"><i class="sprite sprite-icon-angle-trend"></i></div></div></div></div><div data-uk-dropdown="" class="uk-position-relative"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control-state" data-property="instrumentForm" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17387","Draw Form")+'"><i class="sprite sprite sprite-icon-f-square"></i></div><div class="uk-dropdown-blank" style="width: auto"><div class="uk-flex uk-flex-left tm-shadow"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentForm" data-value="Polygon" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17388","Poligon")+'"><i class="sprite sprite-icon-f-poligon"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentForm" data-value="Rectangle" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17389","Rectangle")+'"><i class="sprite sprite-icon-f-square"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentForm" data-value="Triangle" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17390","Triangle")+'"><i class="sprite sprite-icon-f-triangle"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentForm" data-value="Ellipse" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17391","Ellipse")+'"><i class="sprite sprite-icon-f-ellipse"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentForm" data-value="FibonacciArc" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17392","Fibonacci Archs")+'"><i class="sprite sprite-icon-f-fibonacci-arcs"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentForm" data-value="FibonacciFan" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17393","Fibonacci Fan")+'"><i class="sprite sprite-icon-f-fibonacci-fan"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentForm" data-value="FibonacciCorrection" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17394","Fibonacci Retracement")+'"><i class="sprite sprite-icon-f-fibonacci-correction"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="instrumentForm" data-value="HorizontalRange" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17912","Горизонтальный диапазон")+'"><i class="sprite sprite-icon-h-line-double"></i></div></div></div></div><div data-uk-dropdown="" class="uk-position-relative"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle" data-uk-tooltip="{pos:\'top\'}" title=""><i class="sprite sprite-icon-1px js-chart-ui-control-state" data-property="lineWidthSelector"></i></div><div class="uk-dropdown-blank" style="width: auto"><div class="uk-flex uk-flex-left tm-shadow"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="lineWidthSelector" data-value="1" data-uk-tooltip="{pos:\'top\'}" title="Line 1px"><i class="sprite sprite-icon-1px"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="lineWidthSelector" data-value="2" data-uk-tooltip="{pos:\'top\'}" title="Line 2px"><i class="sprite sprite-icon-2px"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="lineWidthSelector" data-value="3" data-uk-tooltip="{pos:\'top\'}" title="Line 3px"><i class="sprite sprite-icon-3px"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="lineWidthSelector" data-value="4" data-uk-tooltip="{pos:\'top\'}" title="Line 4px"><i class="sprite sprite-icon-4px"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="lineWidthSelector" data-value="5" data-uk-tooltip="{pos:\'top\'}" title="Line 5px"><i class="sprite sprite-icon-5px"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="lineWidthSelector" data-value="8" data-uk-tooltip="{pos:\'top\'}" title="Line 8px"><i class="sprite sprite-icon-8px"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="lineWidthSelector" data-value="10" data-uk-tooltip="{pos:\'top\'}" title="Line 10px"><i class="sprite sprite-icon-10px"></i></div></div></div></div><div data-uk-dropdown="" class="uk-position-relative js-chart-ui-control" data-property="fillStyle"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle" data-uk-tooltip="{pos:\'top\'}" title="Fill Color"><div class="tm-fill-color js-chart-ui-control-state" data-property="fillStyle" style="background-color: rgba(82, 175, 201, 0.5);"></div><i class="sprite sprite-icon-fill-color"></i></div><div class="uk-dropdown-blank" style="width: auto"><div class="uk-flex uk-flex-left tm-shadow js-chart-ui-control-holder"><div class="js-colorPalette" data-option="fillStyle"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="fillStyle" data-element="canvas" value="" size="10"/></div></div></div><div data-uk-dropdown="" class="uk-position-relative js-chart-ui-control" data-property="strokeStyle"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle" data-uk-tooltip="{pos:\'top\'}" title="Line Color"><div class="tm-line-color js-chart-ui-control-state" data-property="strokeStyle" style="background-color: rgb(82, 175, 201);"></div><i class="sprite sprite-icon-line-color"></i></div><div class="uk-dropdown-blank" style="width: auto"><div class="uk-flex uk-flex-left tm-shadow js-chart-ui-control-holder"><div class="js-colorPalette" data-option="strokeStyle"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="strokeStyle" data-element="canvas" value="" size="10"/></div></div></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="captureImage" data-value="" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17493","Screenshot")+'"><i class="sprite sprite-icon-camera"></i></div><i class="sprite sprite-icon-divider"></i><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="clearInstruments" data-value="" data-uk-tooltip="{pos:\'top\'}" title="'+_t("17395","Clear Chart")+'"><i class="sprite sprite-icon-trash"></i></div></div><div class="uk-flex uk-flex-left"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="dataInterval" data-value="I1" data-uk-tooltip="{pos:\'top\'}" title="1 minute > day"><i class="sprite sprite-icon-1m"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="dataInterval" data-value="I5" data-uk-tooltip="{pos:\'top\'}" title="5 minutes > 3 days"><i class="sprite sprite-icon-5m"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="dataInterval" data-value="I15" data-uk-tooltip="{pos:\'top\'}" title="15 minutes > week"><i class="sprite sprite-icon-15m"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="dataInterval" data-value="H1" data-uk-tooltip="{pos:\'top\'}" title="Hour"><i class="sprite sprite-icon-h"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="dataInterval" data-value="D1" data-uk-tooltip="{pos:\'top\'}" title="Day"><i class="sprite sprite-icon-d"></i></div><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle js-chart-ui-control" data-property="dataInterval" data-value="D7" data-uk-tooltip="{pos:\'top\'}" title="Week"><i class="sprite sprite-icon-w"></i></div><i class="sprite sprite-icon-divider"></i><div class="js-chart-ui-indicators"></div></div>'),$.templates("indicatorsCurrentTmpl",'{{for userData}}<div><span>{{:name}}</span> <span>{{if params}}{{* window.i=0;}}({{props params}}{{* if (i>0) { }}, {{* } }}{{>prop}}{{* i++;}}{{/props}}){{/if}}</span><span><a href="javascript:void(0);" onclick="return false;" data-index="{{:#index}}" class="js-edit-indicator uk-icon-cog uk-margin-left"></a><a href="javascript:void(0);" onclick="return false;" data-index="{{:#index}}" class="js-remove-indicator uk-icon-close uk-margin-left"></a></span></div>{{/for}}'),$.templates("indicatorsListTmpl",'<ul class="uk-list uk-list-line">{{for indicators}}<li><a href="javascript:void(0);" onclick="return false;" class="js-add-indicator" data-value="{{:value}}">{{:value}}</a></li>{{/for}}</ul>'),$.templates("indicatorsDropdownTmpl",'<div class="js-iChartTools-indicators uk-button-dropdown" data-uk-dropdown="{mode:\'click\', pos:\'bottom-right\'}" class="uk-position-relative"><div class="tm-graph-button uk-flex uk-flex-center uk-flex-middle" data-uk-tooltip="{pos:\'top\'}" title="Add Indicator" style="min-width: 100px"><i class="sprite sprite-icon-text-indicators"></i></div><div class="uk-dropdown uk-dropdown-bottom uk-dropdown-scrollable" style="top: 30px; left: 0px;"><div class="tm-shadow"><div class="uk-panel js-iChartTools-indicators-current">{{include tmpl="indicatorsCurrentTmpl"/}}</div><div class="js-iChartTools-indicators-list">{{include tmpl="indicatorsListTmpl"/}}</div></div></div></div>'),$.templates("indicatorDialogTmpl",'<div class="iChartDialog" style="display: none; width: 300px;"><div> {{:name}} </div><div class="js-iChartTools-indicators-params">{{for parameters}}<div>{{:Name}} <input type="text" name="{{:Code}}" value="{{:Value}}" /></div>{{/for}}</div><div class="js-iChartTools-indicators-colorContainer"></div><div class="js-iChartTools-indicators-widthContainer"></div><div><a  href="javascript:void(0);" onclick="return false;" class="uk-button js-set-params-indicator">Ok</a><a  href="javascript:void(0);" onclick="$.modal.impl.close(); return false;" class="uk-button">Cancel</a></div></div>'),$.templates("captureDialogTmpl",'<div class="iChartDialog" style="display: none;"><img class="js-iChartTools-capture"/><div class="uk-flex uk-flex-right"><a  href="javascript:void(0);" onclick="$.modal.impl.close(); return false;" class="uk-button js-set-params-indicator">Ok</a></div></div>'),$.templates("themeConfigSelectorTmpl",'<div class="uk-button-dropdown" data-uk-dropdown="{mode:\'click\'}" aria-haspopup="true" aria-expanded="false"><button class="uk-button uk-button-success">'+_t("13663","Темы")+' <i class="uk-icon-caret-down"></i></button><div class="uk-dropdown uk-dropdown-up uk-dropdown-small uk-dropdown-scrollable"><ul class="uk-nav uk-nav-dropdown">{{for themes}}<li><a href="#" class="js-themeSelect" data-theme="{{: name }}">{{: name }}{{if custom}}<span class="js-themeDelete uk-icon-trash-o uk-margin-small-left uk-badge uk-badge-warning uk-panel-hover uk-float-right" data-name="{{: name }}" title="'+_t("4023","Удалить")+'"></span>{{/if}}</a></li>{{/for}}<li class="uk-nav-divider"></li><li><a href="#" class="js-themeSaveAs">'+_t("13664","Сохранить как")+"</a></li></ul></div></div>"),$.templates("themeConfigTmpl",'<div class="js-themeConfig" style="display: none"><div class="js-themeConfigOptions"></div><div class="uk-grid uk-grid-small"><div class="uk-width-1-1"><div class="js-themeConfigSelector"></div></div></div><hr class="uk-grid-divider" style="margin: 15px 0"><div class="uk-grid uk-grid-small"><div class="uk-width-7-10 js-themeAdditionButtons"></div><div class="uk-width-3-10 uk-text-right"><button class="uk-button js-chartOptions" data-value="cancel">'+_t("1403","Отмена")+'</button> <button class="uk-button  uk-button-primary js-chartOptions" data-value="ok">'+_t("3920","OK")+"</button></div></div></div>"),$.templates("themeConfigOptionsTmpl",'<div class="uk-grid"><div class="uk-width-1-2"><div class="uk-grid"><div class="uk-width-3-4">'+_t("13643","Фон")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="backgroundColor" style="background-color: {{: chartOptions.backgroundColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="backgroundColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="backgroundColor" data-element="canvas" value="{{: chartOptions.backgroundColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13644","Линии осей")+'</div><div class="uk-width-1-4"><div class="js-checkbox" data-option="showAxes"><input type="checkbox" class="js-flag" data-option="showAxes" {{if chartOptions.showAxes}}checked="checked"{{/if}}/></div></div><div class="uk-width-3-4">'+_t("13645","Цвет осей")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="axisColor" style="background-color: {{: chartOptions.axisColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="axisColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="axisColor" data-element="canvas" value="{{: chartOptions.axisColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13646","Цвет меток")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="labelColor" style="background-color: {{: chartOptions.labelColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="labelColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="labelColor" data-element="canvas" value="{{: chartOptions.labelColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13647","Цвет сетки")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="gridColor" style="background-color: {{: chartOptions.gridColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="gridColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="gridColor" data-element="canvas" value="{{: chartOptions.gridColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13648","Цвет текста подложки")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="watermarkColor" style="background-color: {{: chartOptions.watermarkColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="watermarkColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="watermarkColor" data-element="canvas" value="{{: chartOptions.watermarkColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13649","Цвет области")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="areaColor" style="background-color: {{: chartOptions.areaColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="areaColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="areaColor" data-element="canvas" value="{{: chartOptions.areaColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13650","Цвет границы области")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="areaLineColor" style="background-color: {{: chartOptions.areaLineColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="areaLineColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="areaLineColor" data-element="canvas" value="{{: chartOptions.areaLineColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13651","Цвет объемов")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="volumeStyle" style="background-color: {{: chartOptions.volumeStyle }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="volumeStyle"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="volumeStyle" data-element="canvas" value="{{: chartOptions.volumeStyle }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13652","Цвет фона скроллера")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="scrollerOverlayColor" style="background-color: {{: chartOptions.scrollerOverlayColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="scrollerOverlayColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="scrollerOverlayColor" data-element="canvas" value="{{: chartOptions.scrollerOverlayColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13653","Цвет скроллера")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="scrollerHandlerColor" style="background-color: {{: chartOptions.scrollerHandlerColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="scrollerHandlerColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="scrollerHandlerColor" data-element="canvas" value="{{: chartOptions.scrollerHandlerColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("15810","Цвет теней")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="shadowColor" style="background-color: {{: chartOptions.shadowColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="shadowColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="shadowColor" data-element="canvas" value="{{: chartOptions.shadowColor }}" size="10"/></div></div></div></div></div><div class="uk-width-1-2"><div class="uk-grid"><div class="uk-width-3-4">'+_t("3103","Свеча вверх")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="candleUp" style="background-color: {{: chartOptions.candleUp }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="candleUp"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="candleUp" data-element="canvas" value="{{: chartOptions.candleUp }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("3104","Свеча вниз")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="candleDown" style="background-color: {{: chartOptions.candleDown }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="candleDown"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="candleDown" data-element="canvas" value="{{: chartOptions.candleDown }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13654","Обводка свечи")+'</div><div class="uk-width-1-4"><div class="js-checkbox" data-option="candleBorder"><input type="checkbox" class="js-flag" data-option="candleBorder" {{if chartOptions.candleBorder}}checked="checked"{{/if}}/></div></div><div class="uk-width-3-4">'+_t("13655","Обводка свечи вверх")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="candleBorderUp" style="background-color: {{: chartOptions.candleBorderUp }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="candleBorderUp"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="candleBorderUp" data-element="canvas" value="{{: chartOptions.candleBorderUp }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13656","Обводка свечи вниз")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="candleBorderDown" style="background-color: {{: chartOptions.candleBorderDown }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="candleBorderDown"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="candleBorderDown" data-element="canvas" value="{{: chartOptions.candleBorderDown }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13657","Тень свечи")+'</div><div class="uk-width-1-4"><div class="js-checkbox" data-option="candleWick"><input type="checkbox" class="js-flag" data-option="candleWick" {{if chartOptions.candleWick}}checked="checked"{{/if}}/></div></div><div class="uk-width-3-4">'+_t("13658","Цвет тени свечи")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="candleWickStyle" style="background-color: {{: chartOptions.candleWickStyle }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="candleWickStyle"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="candleWickStyle" data-element="canvas" value="{{: chartOptions.candleWickStyle }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13659","Бар вверх")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="stockUp" style="background-color: {{: chartOptions.stockUp }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="stockUp"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="stockUp" data-element="canvas" value="{{: chartOptions.stockUp }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13660","Бар вниз")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="stockDown" style="background-color: {{: chartOptions.stockDown }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="stockDown"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="stockDown" data-element="canvas" value="{{: chartOptions.stockDown }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13661","Толщина бара")+'</div><div class="uk-width-1-4"><div class="js-widthSlector" data-option="stockWidth"><div class="js-widthSlectorValue lineWidth" data-option="stockWidth" data-style="{{: chartOptions.stockWidth }}"></div><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-widthSlectorWrapper" data-option="stockWidth" value="{{: chartOptions.stockWidth }}"><span class="lineWidth js-lineWidth" data-style="1"></span><span class="lineWidth js-lineWidth" data-style="2"></span><span class="lineWidth js-lineWidth" data-style="3"></span><span class="lineWidth js-lineWidth" data-style="4"></span></div></div></div></div><div class="uk-width-3-4">'+_t("1365","Линия")+'</div><div class="uk-width-1-4"><div class="js-colorSelector" data-option="lineColor" style="background-color: {{: chartOptions.lineColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="lineColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="lineColor" data-element="canvas" value="{{: chartOptions.lineColor }}" size="10"/></div></div></div><div class="uk-width-3-4">'+_t("13662","Толщина линии")+'</div><div class="uk-width-1-4"><div class="js-widthSlector" data-option="lineWidth"><div class="js-widthSlectorValue lineWidth" data-option="lineWidth" data-style="{{: chartOptions.lineWidth }}"></div><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-widthSlectorWrapper" data-option="lineWidth" value="{{: chartOptions.lineWidth }}"><span class="lineWidth js-lineWidth" data-style="1"></span><span class="lineWidth js-lineWidth" data-style="2"></span><span class="lineWidth js-lineWidth" data-style="3"></span><span class="lineWidth js-lineWidth" data-style="4"></span><span class="lineWidth js-lineWidth" data-style="5"></span><span class="lineWidth js-lineWidth" data-style="8"></span><span class="lineWidth js-lineWidth" data-style="10"></span></div></div></div></div></div></div></div>'),$.templates("iChart_intervalsTmpl",'<div class="uk-margin-small-left js-iChartTools-intervals" style="display: inline-block">{{for intervals}}<a class="uk-button js-chart-interval" href="javascript:void(0);" onclick="return false;" data-value="{{:value}}">{{:name}}</a>{{/for}}</div>'),$.templates("iChart_textPopupSettingsTmpl",'<div class="uk-margin-small-left js-iChartTools-textPopupSettings" style="display: none;"><div style=""><div class="uk-grid uk-grid-small"><div class="uk-width-1-5"><div class="uk-form-select" data-uk-form-select><span>'+_t("17600","Size")+'</span><select name="fontSize">{{for options.sizes}}<option value="{{:value}}" {{if value == ~root.values.fontSize}} selected {{/if}}>{{:name}}</option>{{/for}}</select></div></div><div class="uk-width-2-5"><div class="uk-form-select" data-uk-form-select><span>'+_t("17601","Font")+'</span><select name="fontFamaly">{{for options.fonts}}<option value="{{:value}}" {{if value == ~root.values.fontFamaly}} selected {{/if}}>{{:name}}</option>{{/for}}</select></div></div><div class="uk-width-2-5"><div class="js-colorSelector" data-option="fontColor" style="background-color: {{: values.fontColor }}"><div class="menuHolder" style="display: none; padding: 10px;"><div class="js-colorPalette" data-option="backgroundColor"></div><input type="hidden" class="js-colorPicker" data-opacity="1.0" data-option="fontColor" data-element="canvas" value="{{: values.fontColor }}" size="10"/></div></div></div><div class="uk-width-1-1"><textarea name="text" style="width: 100%; height: 150px;">{{:values.text}}</textarea></div><div class="uk-width-1-1 uk-text-right"><button class="uk-button  uk-button-primary js-textPopupSettings" data-value="ok">'+_t("3920","OK")+'</button><button class="uk-button js-textPopupSettings" data-value="cancel">'+_t("1403","Отмена")+"</button> </div></div></div></div>")},function(t,e){iChart.indicators={AD:{type:"TA_LIB",output:1,name:_t("428","AD (Распределение накопления)"),value:"AD",outputRegion:"self",description:_t("4789","Формула распределения накопления использует отношение между объемом и ценами, чтобы оценить интенсивность изменения цен; если объем увеличивается, весьма вероятно, что цены поднимутся.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5400">'+_t("15840","Подробнее.")+"</a>",parameters:[]},ADOSC:{type:"TA_LIB",output:1,name:_t("429","ADOSC (Осциллятор Чайкина)"),value:"ADOSC",outputRegion:"self",description:_t("4790","Индикатор осциллятора Чайкина – это разница между трехдневным экспоненциальным скользящим средним и десятидневным экспоненциальным скользящим средним, примененная к распределению накопления.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5425">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"FastPeriod",Name:_t("4791","Краткосрочный интервал"),Value:3},{Code:"SlowPeriod",Name:_t("4792","Долгосрочный интервал"),Value:10}]},ADX:{type:"TA_LIB",output:1,name:_t("430","ADX (Индекс направленного движения)"),value:"ADX",outputRegion:"self",description:_t("4793","Индикатор среднего направленного движения служит для определения вероятного направления основного тренда."),parameters:[{Code:"TimePeriod",Name:_t("5421","Интервал"),Value:14}]},ADXDI:{type:"TA_LIB",output:3,outputNames:["ADX","PLUS_DI","MINUS_DI"],name:_t("431","ADXDI (Индекс направленного движения (с индикаторами направления))"),value:"ADXDI",outputRegion:"self",description:_t("4793","Индикатор среднего направленного движения служит для определения вероятного направления основного тренда.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5421">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("5421","Интервал"),Value:14}]},AROON:{type:"TA_LIB",output:2,outputNames:["AroonDown","AroonUp"],name:_t("432","AROON (Арун)"),value:"AROON",outputRegion:"self",description:_t("4797","Индикатор Арун применяется для изучения силы и направления трендов."),parameters:[{Code:"TimePeriod",Name:_t("5421","Интервал"),Value:25}]},ATR:{type:"TA_LIB",output:1,name:_t("433","ATR (Средний истинный диапазон)"),value:"ATR",outputRegion:"self",description:_t("4799","Индикатор среднего истинного диапазона измеряет фиксацию и сравнивает диапазоны между высокими и низкими ценами и ценами закрытия."),parameters:[{Code:"TimePeriod",Name:_t("5421","Интервал"),Value:14}]},BBANDS:{type:"TA_LIB",output:3,outputNames:["UpperBand","MiddleBand","LowerBand"],name:_t("434","BBANDS (Уровни Боллинджера)"),value:"BBANDS",outputRegion:"price",description:_t("4801","Индикаторы с линиями Боллинджера наносятся на график как уровни стандартного отклонения выше и ниже скользящего среднего.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5397">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("5421","Интервал"),Value:7},{Code:"DeviationsUp",Name:_t("4803","Верхнее число станд. отклонения"),Value:2},{Code:"DeviationsDown",Name:_t("4804","Нижнее число станд. отклонения"),Value:2}]},CCI:{type:"TA_LIB",output:1,name:_t("435","CCI (Индекс товарного канала)"),value:"CCI",outputRegion:"self",description:_t("4805","Индикатор ценовых моментов сравнивает цены с их скользящими средними.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5424">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:10}]},CHV:{type:"TA_LIB",output:1,name:_t("436","CHV (Волатильность Чайкина)"),value:"CHV",outputRegion:"self",description:_t("4807","Индикатор волатильности Чайкина показывает разницу между максимальными и минимальными ценами и используется для обозначения верхних и нижних частей рынка."),parameters:[{Code:"TimePeriod",Name:_t("4808","Период EMA"),Value:10},{Code:"PeriodROC",Name:_t("4809","Период ROC"),Value:10}]},DPO:{type:"TA_LIB",output:1,name:_t("437","DPO (Осциллятор цен с исключенным трендом)"),value:"DPO",outputRegion:"self",description:_t("4810","Осциллятор цен с исключенным трендом пытается исключить из цен тренды.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5432">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:20}]},ELDR:{type:"TA_LIB",output:4,outputNames:["Bull","Bear","Rays"],name:_t("17699","ELDR (Лучи Элдера)"),value:"ELDR",outputRegion:"self",description:_t("17700","Индикатор Лучи Элдера поможет вам оценить, в какой момент времени «быки» и «медведи» становятся слабее или сильнее.")+" "+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:13}]},EMA:{type:"TA_LIB",output:1,name:_t("438","EMA (Экспоненциальное скользящее среднее)"),value:"EMA",outputRegion:"price",description:_t("4812","Экспоненциальное скользящее среднее – это среднее значение данных, рассчитанное за некий период времени, причем последние дни имеют в вычислении больший вес.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5396">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:12}]},ENV:{type:"TA_LIB",output:2,outputNames:["Upper","Lower"],name:_t("439","ENV (Конверты)"),value:"ENV",outputRegion:"price",description:_t("4815","Конверты наносятся над и под скользящим средним; смещение определяется указанным процентом.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5431">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:20},{Code:"shift",Name:_t("4817","Сдвиг, %"),Value:1}]},MACD:{type:"TA_LIB",output:3,outputNames:["MACD","MACDSignal","MACDHist"],name:_t("441","MACD (Конвергенция и дивергенция скользящих средних)"),value:"MACD",outputRegion:"self",description:_t("4818","Индикатор конвергенции и дивергенции скользящих средних сравнивает два скользящих средних цен и используется вместе с девятидневным экспоненциальным скользящим средним в качестве сигнала для моментов покупки и продажи.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5428">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"FastPeriod",Name:_t("4819","Краткосрочный период"),Value:12},{Code:"SlowPeriod",Name:_t("4820","Долгосрочный период"),Value:26},{Code:"SignalPeriod",Name:_t("4821","Период сигнальной линии"),Value:9}]},MEDPRICE:{type:"TA_LIB",output:1,name:_t("443","MEDPRICE (Медианная цена)"),value:"MEDPRICE",outputRegion:"price",description:_t("4822","Медианные цены – это средние значения цен за день, которые могут использоваться как фильтр для индикаторов трендов."),parameters:[]},MFI:{type:"TA_LIB",output:1,name:_t("444","MFI (Денежный поток)"),value:"MFI",outputRegion:"self",description:_t("4823","Индикатор денежных потоков сравнивает восходящие и нисходящие изменения типичных цен, приведенных к объему."),parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:14}]},OBV:{type:"TA_LIB",output:1,name:_t("445","OBV (Балансовый объём)"),value:"OBV",outputRegion:"self",description:_t("4828","Индикатор балансового объема измеряет положительный и отрицательный поток объема.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5434">'+_t("15840","Подробнее.")+"</a>",parameters:[]},PCH:{type:"TA_LIB",output:3,name:_t("17701","PCH (Price chanel)"),value:"PCH",outputRegion:"price",description:_t("17702","price channel это уровни потдержки и сопротивления, которые меняются вместе с ценой."),parameters:[{Code:"TimePeriodLower",Name:_t("17703","Период Lower"),Value:20},{Code:"TimePeriodUpper",Name:_t("17704","Период Upper"),Value:20}]},PSAR:{type:"TA_LIB",output:1,name:_t("447","PSAR (Параболик)"),value:"PSAR",outputRegion:"price",description:_t("4833","Индикатор Параболик помогает определять точки разворота тренда.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5399">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"Acceleration",Name:_t("860","Шаг"),Value:.02},{Code:"Maximum",Name:_t("4835","Максимальный шаг"),Value:.2}]},ROC:{type:"TA_LIB",output:1,name:_t("449","ROC (Темп изменения)"),value:"ROC",outputRegion:"self",description:_t("4840","Индикатор темпов изменений сравнивает указанную цену закрытия с текущей ценой.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5430">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:10}]},RSI:{type:"TA_LIB",output:1,name:_t("450","RSI (Индекс относительной силы)"),value:"RSI",outputRegion:"self",description:_t("4842","Индекс относительной силы – это осциллятор момента, сравнивающий восходящие изменения цены закрытия с нисходящими изменениями и выдающий значения в диапазоне от 0 до 100.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5411">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:10}]},SMA:{type:"TA_LIB",output:1,name:_t("451","SMA (Простое скользящее среднее)"),value:"SMA",outputRegion:"price",description:_t("4844","Простое скользящее среднее – это среднее значение данных, рассчитанное за некий период времени. Скользящее среднее – самый распространенный индикатор цен в техническом анализе, который можно использовать с любой ценой, например высокой, низкой, ценами открытия и закрытия, а также применять к другим индикаторам."),parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:10}]},STDDEV:{type:"TA_LIB",output:1,name:_t("452","STDDEV (Стандартное отклонение)"),value:"STDDEV",outputRegion:"self",description:_t("4846","Стандартное отклонение используется для обозначения волатильности и показывает, например, разницу между значениями цены закрытия и ее скользящего среднего."),parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:10}]},STOCH:{type:"TA_LIB",output:2,name:_t("453","STOCH (Вероятностный индикатор)"),value:"STOCH",description:_t("4848","Вероятностный индикатор помогает находить изменения трендов, обнаруживая моменты, когда цены закрытия приближаются к низким ценам на рынке, имеющем восходящий тренд, и когда цены закрытия близки к высоким ценам на рынке, имеющем нисходящий тренд."),parameters:[{Code:"PeriodFastK",Name:_t("4849","Краткосрочный период %K"),Value:5},{Code:"PeriodSlowK",Name:_t("4850","Долгосрочный период %K"),Value:3},{Code:"PeriodSlowD",Name:_t("4851","Период %D"),Value:3}]},TEMA:{type:"TA_LIB",output:1,name:_t("454","TEMA (Тройное экспоненциальное скользящее среднее)"),value:"TEMA",outputRegion:"price",description:_t("4852","Тройное экспоненциальное скользящее среднее основано на тройном скользящем среднем цены закрытия. Его назначение – исключить короткие циклы. Этот индикатор сохраняет цену закрытия в трендах, которые короче указанного периода."),parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:12}]},TRIMA:{type:"TA_LIB",output:1,name:_t("455","TRIMA (Треугольное скользящее среднее)"),value:"TRIMA",outputRegion:"price",description:_t("4854","Треугольное скользящее среднее – это среднее значение данных, рассчитанное за некий период времени, причем средняя часть данных имеет в вычислении больший вес."),parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:20}]},TYPPRICE:{type:"TA_LIB",output:1,name:_t("456","TYPPRICE (Типичная цена)"),value:"TYPPRICE",outputRegion:"price",description:_t("4856","Типичная цена – это среднее значение цен за день, которое может использоваться как фильтр для индикаторов трендов."),parameters:[]},VPT:{type:"TA_LIB",output:1,name:_t("457","VPT (Тренд объёма цен)"),value:"VPT",outputRegion:"self",description:_t("4857","Тренд объема цен – это совокупное значение объема, рассчитываемое на основе относительных изменений цены закрытия; его следует использовать с другими индикаторами."),parameters:[]},WCLPRICE:{type:"TA_LIB",output:1,name:_t("458","WCLPRICE (Взвешенная цена закрытия)"),value:"WCLPRICE",outputRegion:"price",description:_t("4858","Формула взвешенной цены закрытия вычисляет среднее значение цен за день. Единственное отличие взвешенной цены закрытия и типичной цены в том, что у цены закрытия больший вес и она считается самой важной ценой.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5433">'+_t("15840","Подробнее.")+"</a>",parameters:[]},WILLR:{type:"TA_LIB",output:1,name:_t("459","WILLR (Процентный диапазон Уильямса)"),value:"WILLR",outputRegion:"self",description:_t("4859","Процентный диапазон Уильямса – это индикатор момента, который показывает уровни перекупленности и перепроданности.")+' <a target="_blank" href="http://www.nettrader.ru/education/book/5410">'+_t("15840","Подробнее.")+"</a>",parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:14}]},WMA:{type:"TA_LIB",output:1,name:_t("460","WMA (Взвешенное скользящее среднее)"),value:"WMA",outputRegion:"price",description:_t("4861","Взвешенное скользящее среднее – это среднее значение данных, рассчитанное за некий период времени, причем последние данные имеют в вычислении больший вес."),parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:9}]},ZLEMA:{type:"TA_LIB",output:1,name:_t("17705","ZLEMA (Zero-Lag Moving Average Indicator)"),value:"ZLEMA",outputRegion:"price",description:_t("13667",""),parameters:[{Code:"TimePeriod",Name:_t("1296","Период"),Value:12}]},TRPLN:{type:"TA_LIB",output:0,name:_t("13838","TRPLN (Тенденциальная планиметрия)"),value:"TRPLN",outputRegion:"price",description:_t("13843","Тенденциальная планиметрия"),parameters:[]}}},function(t,e){!function(){"use strict";"undefined"==typeof iChart&&(iChart={}),iChart.Charting={},iChart.Charting.indexOfFirstElementGreaterThanOrEqualTo=function(t,e){var i,r=0,n=t.length-1;if(-1===n)return-1;if(t[r]>=e)return r;if(t[n]<e)return-1;for(;r<=n;){if(r===n)return r;if(r===n-1)return t[r]<e?n:r;t[i=Math.floor((r+n)/2)]<e?r=i+1:n=i}return i},iChart.Charting.indexOfLastElementLessThanOrEqualTo=function(t,e){var i,r=0,n=t.length-1;if(-1===n)return-1;if(t[r]>e)return-1;if(t[n]<=e)return n;for(;r<=n;){if(r===n)return r;if(r===n-1)return t[n]<=e?n:r;t[i=Math.floor((r+n)/2)]>e?n=i-1:r=i}return i},iChart.Charting.getNearestNotNullIndex=function(t,e){var i,r;for(i=r=e;;){if($.isArray(t[i])){if(null!=t[i][0])return i}else if(null!=t[i])return i;if($.isArray(t[r])){if(null!=t[r][0])return r}else if(null!=t[r])return r;if(i>0&&i--,r<t.length-1&&r++,i<0&&r>t.length-1)return!1}},iChart.Charting.initCanvas=function(t,e,i,r){if(t){var n=Math.max(window.devicePixelRatio||1,1);if(i*=n,r*=n,e){if(e.width===i&&e.height===r)return e;if("undefined"==typeof FlashCanvas)return e.width=i,e.height=r,e.getContext("2d").scaled=0,e;$(e).remove()}var a=document.createElement("canvas");if(a.style.left=0,a.style.position="absolute",a.style.top=0,$(a).unbind("selectstart"),$(a).attr("unselectable","on").css("user-select","none").on("selectstart",!1),t.appendChild(a),void 0===a.getContext){if("undefined"==typeof FlashCanvas)return alert("Ваш браузер не поддерживается."),null;FlashCanvas.initElement(a)}return a.width=i,a.height=r,a}console.log("No chart container. Abort")},iChart.Charting.pointToPointDistanceSquared=function(t,e){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r},iChart.Charting.pointToSegmentDistanceSquared=function(t,e,i){var r=(e.x-t[0].x)*(t[1].x-t[0].x)+(e.y-t[0].y)*(t[1].y-t[0].y);if(r<0)return i?1/0:iChart.Charting.pointToPointDistanceSquared(e,t[0]);var n=iChart.Charting.pointToPointDistanceSquared(t[1],t[0]);if(r>n||n<1e-5)return i?1/0:iChart.Charting.pointToPointDistanceSquared(e,t[1]);var a=r/n,s={x:t[0].x+a*(t[1].x-t[0].x),y:t[0].y+a*(t[1].y-t[0].y)};return iChart.Charting.pointToPointDistanceSquared(e,s)}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartWidgetLayer=function(t,e){if(this.canvas=null,this.chart=t,this.widget={widgetCurPrice:{enable:!1,width:200,height:44,valign:"top",halign:"left",vspace:0,hspace:50}},this.prevX=null,this.prevY=null,this.prevValueX=null,this.prevValueY=null,this.xIndex=null,this.xPoint=null,this.yPoint=null,void 0!==e)for(var i in e)this.widget[i]=$.extend(this.widget[i],e[i]);$(t.container).off("mousedown.WidgetLayer").off("mouseup.WidgetLayer").off("mousemove.WidgetLayer").off("mouseout.WidgetLayer"),$(t.container).on("mousedown.WidgetLayer",$.proxy(this.onMouseDown,this)).on("mouseup.WidgetLayer",$.proxy(this.onMouseUp,this)).on("mousemove.WidgetLayer",$.proxy(this.onMouseMove,this)).on("mouseout.WidgetLayer",$.proxy(this.onMmouseOut,this))},iChart.Charting.ChartWidgetLayer.prototype.clear=function(){if(!this.context)return console.log("ERROR: No context for render"),0;var t=this.context;this.context.clearRect(0,0,t.canvas.width,t.canvas.height),this.drawWidgets(t)},iChart.Charting.ChartWidgetLayer.prototype.render=function(t){if(!t){if(!this.context)return console.log("ERROR: No context for render"),0;(t=this.context).clearRect(0,0,t.canvas.width,t.canvas.height)}t.save(),this.drawWidgets(t),this.drawCrosshair(t,{}),t.restore(),"undefined"!=typeof FlashCanvas&&t.e()},iChart.Charting.ChartWidgetLayer.prototype.update=function(){if(this.chart.areas){this.area=this.chart.areas[0];var t=$(this.chart.container);this._initCanvas(t.width(),t.height()),this.render()}},iChart.Charting.ChartWidgetLayer.prototype._initCanvas=function(t,e){this.canvas=iChart.Charting.initCanvas(this.chart.container,this.canvas,t,e),this.canvas&&(this.context=iChart.getContext(this.canvas),this.offset=this.chart._containerSize.offset)},iChart.Charting.ChartWidgetLayer.prototype.drawWidgets=function(t){for(var e in this.widget)this.widget[e].enable&&this[e](t,this.widget[e])},iChart.Charting.ChartWidgetLayer.prototype.onMouseDown=function(t){},iChart.Charting.ChartWidgetLayer.prototype.onMouseUp=function(t){},iChart.Charting.ChartWidgetLayer.prototype.onMmouseOut=function(t){this.clear()},iChart.Charting.ChartWidgetLayer.prototype.onMouseMove=function(t){if(void 0!==this.offset){var e=t.pageX,i=t.pageY;if(e!==this.pageX||i!==this.pageY){this.pageX=e,this.pageY=i;var r=Math.round(t.pageX-this.offset.left-this.area.innerOffset.left),n=Math.round(t.pageY-this.offset.top-this.area.innerOffset.top);if(r!==this.prevX||n!==this.prevY){this.prevX=r,this.prevY=n;var a=1e3*this.area.getXValue(r),s=this.area.getYValue(n);this.prevValueX=a,this.prevValueY=s,this.render()}}}},iChart.Charting.ChartWidgetLayer.prototype.widgetCurPrice=function(t,e){var i=e.width,r=e.height;if("top"==e.valign)var n=this.area.innerOffset.top+e.vspace;else n=this.area.innerHeight+this.area.innerOffset.top-r-e.vspace;if("left"==e.halign)var a=this.area.innerOffset.left+e.hspace;else a=this.area.innerWidth+this.area.innerOffset.left-i-e.hspace;t.save(),t.translate(a,n),t.beginPath(),t.moveTo(0,r),t.lineTo(i,r),t.lineTo(i,0),t.lineTo(0,0),t.closePath(),t.clip(),t.fillStyle="rgba(214,218,225,0.75)",t.strokeStyle="rgba(171,177,192,1)",t.fillRect(0,0,i,r),t.rect(0,0,i,r),t.stroke();this.chart.env.userSettings.currentSecurity.q;if(t.fillStyle="#20232a",t.font="normal 26px Arial,Helvetica,sans-serif",t.textBaseline="middle",this.chart.areas[0].ySeries[0]){var s=this.chart.areas[0].ySeries[0].points.length-this.chart.chartOptions.futureAmount-1,o=this.chart.areas[0].xSeries[s],h=this.chart.areas[0].ySeries[0].points[s][3],l=1/this.chart.env.userSettings.currentSecurity.min_step>1?Math.round(1/this.chart.env.userSettings.currentSecurity.min_step).toString().length-1:0;h=h.toFormat(l,"."," "),t.fillText(h,10,30),t.textBaseline="top";var c=iChart.formatDateTime(new Date(1e3*o),"dd MMMM HH:mm");t.font="normal 11px Arial,Helvetica,sans-serif",t.fillText(c,10,5),t.restore()}},iChart.Charting.ChartWidgetLayer.prototype.widgetCurPrice2=function(t,e){var i=e.width,r=e.height;if(void 0!==this.chart.env.userSettings.currentSecurity.q){if("top"==e.valign)var n=this.area.innerOffset.top+e.vspace;else n=this.area.innerHeight+this.area.innerOffset.top-r-e.vspace;if("left"==e.halign)var a=this.area.innerOffset.left+e.hspace;else a=this.area.innerWidth+this.area.innerOffset.left-i-e.hspace;t.save(),t.translate(a,n),t.beginPath(),t.moveTo(0,r),t.lineTo(i,r),t.lineTo(i,0),t.lineTo(0,0),t.closePath(),t.clip(),t.fillStyle="rgba(214,218,225,0.75)",t.strokeStyle="rgba(171,177,192,1)",t.fillRect(0,0,i,r),t.rect(0,0,i,r),t.stroke();var s=this.chart.env.userSettings.currentSecurity.q;t.fillStyle="#20232a",t.font="normal 26px Arial,Helvetica,sans-serif",t.textBaseline="middle";var o=parseFloat(s.ltp),h=1/this.chart.env.userSettings.currentSecurity.min_step>1?Math.round(1/this.chart.env.userSettings.currentSecurity.min_step).toString().length-1:0;if(o=o.toFormat(h,"."," "),t.fillText(o,10,30),t.textBaseline="top","Invalid Date"!=new Date(s.ltt).toString()){var l=s.ltt;l=l.replace(/^[\d-]{10}T?/,"");var c=iChart.formatDateTime(new Date(s.ltt),"dd MMMM")+" "+l;t.font="normal 11px Arial,Helvetica,sans-serif",t.fillText(c,10,5)}s.chg>=0?t.fillStyle="#228B22":t.fillStyle="#b7333b";var u=parseFloat(s.chg),d=u>0?"▲+":"▼",p="0"==s.chg?"0.00":d+u.toFormat(Math.max(u.getDegree(),2),"."," ");if(t.fillText(p,140,13),s.pcp){s.pcp>=0?t.fillStyle="#228B22":t.fillStyle="#b7333b";var f=(d=parseFloat(s.pcp)>0?"▲+":"▼")+s.pcp+"%";t.fillText(f,140,28)}}t.restore()},iChart.Charting.ChartWidgetLayer.prototype.drawCrosshair=function(t,e){var i={};i.left=Math.round(this.pageX-this.offset.left),i.top=Math.round(this.pageY-this.offset.top);for(var r={x:!1,y:!1},n=0;n<this.chart.areas.length;++n){var a;if(!1!==(a=this.chart.areas[n]).enabled&&!a.isLayer&&!a.isScroller){if("top"==a.chart.chartOptions.tooltipPosition)a.innerOffset.top;else if("bottom"==a.chart.chartOptions.tooltipPosition)a.innerOffset.top,a.innerHeight;r[n]={},r.x=(r[n].x=i.left>=a.innerOffset.left&&i.left<=a.innerOffset.left+a.innerWidth)||r.x,r.y=(r[n].y=i.top>=a.innerOffset.top&&i.top<=a.innerOffset.top+a.innerHeight)||r.y}}if(r.x&&r.y&&0!==(a=this.chart.areas[0]).xSeries.length){var s=a.getXIndex(i.left-a.innerOffset.left);s<a.viewport.x.bounded.min||s>a.viewport.x.bounded.max||(this.xIndex=Math.max(a.viewport.x.bounded.min,Math.min(a.viewport.x.bounded.max,Math.round(s))),this.xPoint=Math.round(this.area.getXPositionByIndex(this.xIndex)),this.yPoint=this.prevY,t.save(),t.translate(.5,.5),this.drawCrossLines(t),t.restore())}},iChart.Charting.ChartWidgetLayer.prototype.drawCrossLines=function(t,e,i){for(var r=this.chart.areas,n=this.chart.chartOptions.legendAlign,a=0;a<r.length;++a){var s=r[a];if(!1!==s.enabled&&!s.isScroller&&"VolumeByPriceArea"!=s.name){if(s.isLayer){var o=$.grep(r,(function(t){return t.name===s.parentName}))[0];s.textOffset=o.textOffset;var h="top"===n?o.offset.top+2:s.offset.top}else{h=s.offset.top+("top"===n?2:0);s.textOffset=0}if(!s.isLayer&&(t.save(),t.setLineDash&&t.setLineDash([4,3]),t.strokeStyle="#999999",t.beginPath(),t.moveTo(this.xPoint,s.offset.top),t.lineTo(this.xPoint,s.offset.top+s.innerHeight),this.yPoint>=s.innerOffset.top&&this.yPoint<=s.innerOffset.top+s.innerHeight&&(t.setLineDash&&t.setLineDash([4,3]),t.moveTo(s.offset.left,this.yPoint),t.lineTo(s.offset.left+s.innerWidth,this.yPoint)),t.stroke(),t.closePath(),t.restore(),this.yPoint>=s.innerOffset.top&&this.yPoint<=s.innerOffset.top+s.innerHeight)){m=(m=s.getYValue(this.yPoint-s.offset.top))<100?iChart.formatNumber(m,{decimalPlaces:null,decimalPrecision:6,scale:0}):iChart.formatNumber(m,{decimalPlaces:2,decimalPrecision:null,scale:0});var l=s.offset.left+s.innerWidth,c=this.yPoint;t.fillStyle=this.chart.chartOptions.labelColor,t.fillRect(l+8,c-8,t.measureText(m).width+10,15),t.beginPath(),t.moveTo(l+9,c-9),t.lineTo(l+9,c+8),t.lineTo(l,c),t.lineTo(l+9,c-9),t.lineTo(l+9,c+8),t.closePath(),t.fill(),t.font="normal 10px Verdana,Tahoma,Geneva,Arial,Sans-serif",t.textAlign="left",t.textBaseline="top",t.fillStyle=this.chart.chartOptions.backgroundColor,t.fillText(m,l+8,c-6)}t.save();var u=new Date(1e3*s.xSeries[this.xIndex]);if(0==a&&!s.isLayer){var d=iChart.formatDateTime(u,this.chart.dateFormat).split("\n"),p=t.measureText(d[0]+" "+d[1]).width;t.fillStyle=this.chart.chartOptions.labelColor,t.fillRect(this.xPoint-Math.round(p/2)-4,s.offset.top+s.innerHeight+2,p+4,12),t.fillStyle=this.chart.chartOptions.backgroundColor,t.font="normal 8px Verdana,Tahoma,Geneva,Arial,Sans-serif",t.textAlign="left",t.textBaseline="top",t.fillText(d[0]+" "+d[1],this.xPoint-Math.round(p/2),s.offset.top+s.innerHeight+3)}if(!s.isLayer){t.fillStyle=this.chart.chartOptions.backgroundColor,"top"===n?t.fillRect(s.offset.left,h,100,15):t.fillRect(s.offset.left,h+s.innerHeight-15,100,15),t.font="normal 10px Verdana,Tahoma,Geneva,Arial,Sans-serif",t.textAlign="left",t.textBaseline="top";var f=iChart.formatDateTime(u,"dd.MM.yyyy"+(this.chart.showTime()?" HH:mm":""));s.textOffset+=t.measureText(f).width+20,t.fillStyle=this.chart.chartOptions.labelColor,"top"===n?t.fillText(f,s.offset.left,h):t.fillText(f,s.offset.left,h+s.innerHeight-12)}for(var g=0;g<s.ySeries.length;g++){var v=s.ySeries[g];if(v.points[this.xIndex]&&(4!=v.points[this.xIndex].length||null!=v.points[this.xIndex][0])){if(v.valuesPerPoint>1)var m=v.points[this.xIndex]?v.points[this.xIndex][v.dotIndex]:null;else m=v.points[this.xIndex]?v.points[this.xIndex][0]:null;if(m&&(t.beginPath(),t.fillStyle=v.color,t.arc(this.xPoint,s.offset.top+Math.round(s.getYPosition(m)),4,0,2*Math.PI,!0),t.closePath(),t.fill()),t.fillStyle=this.chart.chartOptions.backgroundColor,"top"===n?t.fillRect(s.offset.left+s.textOffset,h,15,15):t.fillRect(s.offset.left+s.textOffset,h+s.innerHeight-15,15,15),t.beginPath(),t.fillStyle=v.color,t.strokeStyle=v.color,"top"===n?t.arc(s.offset.left+s.textOffset,h+5,6,0,2*Math.PI,!0):t.arc(s.offset.left+s.textOffset,h+s.innerHeight-6,6,0,2*Math.PI,!0),t.closePath(),t.stroke(),t.fill(),s.textOffset+=15,f=(v.labels[0]&&v.labels[0][2]?v.labels[0][2]:v.name)+" ",v.points[this.xIndex]){if(4===v.valuesPerPoint)this.chart.isComparison?f+=v.points[this.xIndex][3]:f+=" H: "+v.points[this.xIndex][0]+" L: "+v.points[this.xIndex][1]+" O: "+v.points[this.xIndex][2]+" C: "+v.points[this.xIndex][3];else if(2==v.valuesPerPoint)f+=" "+_t("2589","Мин:")+" "+v.points[this.xIndex][0]+" "+_t("2590","Макс:")+" "+v.points[this.xIndex][0];else{var y=v.points[this.xIndex][0];f+=y=y<100?iChart.formatNumber(y,{decimalPlaces:null,decimalPrecision:6,scale:0}):iChart.formatNumber(y,{decimalPlaces:2,decimalPrecision:null,scale:0})}t.fillStyle=this.chart.chartOptions.backgroundColor,"top"===n?t.fillRect(s.offset.left+s.textOffset,h,t.measureText(f).width+20,15):t.fillRect(s.offset.left+s.textOffset,h+s.innerHeight-15,t.measureText(f).width+20,15),t.fillStyle=this.chart.chartOptions.labelColor,t.font="normal 10px Verdana,Tahoma,Geneva,Arial,Sans-serif",t.textAlign="left",t.textBaseline="top","top"===n?t.fillText(f,s.offset.left+s.textOffset,h):t.fillText(f,s.offset.left+s.textOffset,h+s.innerHeight-12),s.textOffset+=t.measureText(f).width+20}}}t.restore()}}this.chart.chartOptions.floatingLegend&&this.drawTooltip(t)},iChart.Charting.ChartWidgetLayer.prototype.drawPoints=function(t){},iChart.Charting.ChartWidgetLayer.prototype.drawTooltip=function(t){t.save();for(var e=this.chart.areas,i=0;i<e.length;++i){var r=e[i];if(!1!==r.enabled&&!r.isScroller&&"VolumeByPriceArea"!=r.name&&!r.isLayer&&(this.yPoint>=r.innerOffset.top&&this.yPoint<=r.innerOffset.top+r.innerHeight)){var n=r.ySeries[0],a=!0,s=this.chart.chartOptions.floatingLegendFontSize,o=s/2;t.font="normal "+s+"px Verdana,Tahoma,Geneva,Arial,Sans-serif",t.textAlign="left",t.textBaseline="top";var h=r.ySeries[0].points[this.xIndex];if("HLOC"==n.kind)var l=t.measureText(_t("21962","open:")+h[2]).width,c=t.measureText(_t("21963","close:")+h[3]).width,u=t.measureText(_t("21964","low:")+h[1]).width,d=t.measureText(_t("21965","high:")+h[0]).width,p=Math.max(l,c,u,d)+10,f=4*(s+2)+o;else p=t.measureText(n.name+": "+iChart.formatNumber(h[n.closeValueIndex],n.formatProvider)).width+10,f=s+2+o;var g=r.getYPosition(h[n.closeValueIndex])+r.innerOffset.top,v=g-20;this.xPoint>(r.offset.left+r.innerWidth)/2&&(a=!1);var m=9*(a?1:-1);if(a)var y=this.xPoint+m;else y=this.xPoint-p+m;var C=0;v+f>r.innerOffset.top+r.innerHeight&&(C=v+f-(r.innerOffset.top+r.innerHeight)),t.fillStyle=this.chart.chartOptions.floatingLegendBorderColor,t.beginPath(),t.moveTo(this.xPoint+m,g-9),t.lineTo(this.xPoint+m,g+8),t.lineTo(this.xPoint,g),t.lineTo(this.xPoint+m,g-9),t.lineTo(this.xPoint+m,g+8),t.closePath(),t.fill(),t.lineWidth=1,t.strokeStyle=this.chart.chartOptions.floatingLegendBorderColor;if(t.beginPath(),t.moveTo(y+5,v-C),t.lineTo(y+p-5,v-C),t.quadraticCurveTo(y+p,v-C,y+p,v-C+5),t.lineTo(y+p,v-C+f-5),t.quadraticCurveTo(y+p,v-C+f,y+p-5,v-C+f),t.lineTo(y+5,v-C+f),t.quadraticCurveTo(y,v-C+f,y,v-C+f-5),t.lineTo(y,v-C+5),t.quadraticCurveTo(y,v-C,y+5,v-C),t.closePath(),t.stroke(),t.fillStyle=this.chart.chartOptions.floatingLegendBackground,t.fill(),t.fillStyle=this.chart.chartOptions.floatingLegendTextColor,"HLOC"==n.kind){var x=v-C+o;t.fillText(_t("21962","open:")+h[2],y,x),t.fillText(_t("21963","close:")+h[3],y,x+s+2),t.fillText(_t("21964","low:")+h[1],y,x+2*s+2),t.fillText(_t("21965","high:")+h[0],y,x+3*s+2)}else{x=v-C+o;t.fillText(n.name+": "+iChart.formatNumber(h[n.closeValueIndex],n.formatProvider),y,x)}}}t.restore()}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartAreaLayer=function(t){this.$deleteButton=$("<span/>",{class:"m-chart-instrument-delete",text:"✕",title:"Удалить инструмент"}).hide().appendTo(t.container),this.$settingsButton=$("<span class ='m-chart-instrument-settings' href = '#' text = '' title = 'Свойства'><span class='elementSettingsHolder' style='position: relative'></span></span>").hide().appendTo(t.container),this.canvas=null,this.chart=t,this.defaultCursor="default",this.drag=null,this.history=[],this.hover=null,this.controlsHover=null,this.prevX=null,this.prevY=null,this.selected=null,this.unfinished=null},iChart.Charting.ChartAreaLayer.prototype.clear=function(t){if(t=!!t,this.history.length)if(t)this.$deleteButton.hide().removeClass("on"),this.$settingsButton.hide(),this.history=[],this.render(),this.syncHash();else{for(var e=this.history,i=0;i<e.length;i++){"manually"==e[i].drawType&&(e.splice(i,1),i--)}this.render(),this.syncHash()}},iChart.Charting.ChartAreaLayer.prototype.createElement=function(t){switch(t){case"Channel":return new iChart.Charting.ChartChannel(this);case"Ellipse":return new iChart.Charting.ChartEllipse(this);case"FibonacciArc":return new iChart.Charting.ChartFibonacciArc(this);case"FibonacciCorrection":return new iChart.Charting.ChartFibonacciCorrection(this);case"FibonacciFan":return new iChart.Charting.ChartFibonacciFan(this);case"HorizontalLine":return new iChart.Charting.ChartHorizontalLine(this);case"Line":return new iChart.Charting.ChartLine(this);case"Rectangle":return new iChart.Charting.ChartRectangle(this);case"Trend":return new iChart.Charting.ChartTrend(this);case"Triangle":return new iChart.Charting.ChartTriangle(this);case"VerticalLine":return new iChart.Charting.ChartVerticalLine(this);case"Mark":return new iChart.Charting.ChartMark(this);case"Label":return new iChart.Charting.ChartLabel(this);case"Arrow":return new iChart.Charting.ChartArrow(this);case"Polygon":return new iChart.Charting.ChartPolygon(this);case"Trade":return new iChart.Charting.ChartTrade(this);case"Bubble":return new iChart.Charting.ChartBubble(this);case"Text":return new iChart.Charting.ChartText(this);case"Order":return new iChart.Charting.ChartOrder(this);case"Trendorder":return new iChart.Charting.ChartTrendorder(this);case"Position":return new iChart.Charting.ChartPosition(this);case"Visualtrade":return new iChart.Charting.ChartVisualtrade(this);case"TradePanel":return new iChart.Charting.ChartTradePanel(this);case"Button":return new iChart.Charting.ChartButton(this);case"Event":return new iChart.Charting.ChartEvent(this);case"Level":return new iChart.Charting.ChartLevel(this);case"Range":return new iChart.Charting.ChartRange(this);case"HorizontalRange":return new iChart.Charting.ChartHorizontalRange(this);default:return}},iChart.Charting.ChartAreaLayer.prototype.deserialize=function(t){this.$deleteButton.unbind("mousedown").hide().removeClass("on"),this.$settingsButton.unbind("mousedown").hide(),this.history=[];var e=parseInt(t.L,10);if(!isNaN(e))t:for(var i=0;i<e;++i){var r=t["L"+i+"_T"],n=this.createElement(r);if(void 0!==n){n.points=[];for(var a=0;a<n.maxPointCount;++a){var s={x:parseFloat(t["L"+i+"_X"+a]),y:parseFloat(t["L"+i+"_Y"+a])};if(isNaN(s.x)||isNaN(s.y))continue t;n.points.push(s)}t["L"+i+"_S"]&&(n.settings=JSON.parse(decodeURIComponent(window.atob(t["L"+i+"_S"].replace(/@/g,"="))))),this.history.push(n)}}},iChart.Charting.ChartAreaLayer.prototype.elementAt=function(t,e){},iChart.Charting.ChartAreaLayer.prototype.finalizePoint=function(t,e){this.render()},iChart.Charting.ChartAreaLayer.prototype.getMarkers=function(t,e){for(var i=[],r=!1,n=0;n<this.drag.element.points.length;++n){var a=this.drag.element.points[n],s={};if(0===this.drag.mode||this.drag.mode===n+1){if((s=$.extend({},a)).x=1e3*this.area.getXValue(this.area.getXPositionByValue(a.x/1e3)+t),s.y=this.area.getYValue(this.area.getYPosition(a.y)+e),isNaN(s.x)||isNaN(s.y)){r=!0;break}}else s=$.extend({},a);i.push(s)}return{markers:i,outside:r}},iChart.Charting.ChartAreaLayer.prototype.getPixelPosition=function(t,e){var i=t.length;if(!(i<2||t[0][0]>=e))for(var r=1;r<i;++r){var n=t[r];if(n[0]>=e)return n[1]}},iChart.Charting.ChartAreaLayer.prototype.onMouseDown=function(t){},iChart.Charting.ChartAreaLayer.prototype.onMouseMove=function(t){},iChart.Charting.ChartAreaLayer.prototype.onMouseUp=function(t){},iChart.Charting.ChartAreaLayer.prototype.remove=function(t){var e=this.history.indexOf(t);-1!==e&&(this.$deleteButton.unbind("mousedown").hide().removeClass("on"),this.$settingsButton.unbind("mousedown").hide(),this.history.splice(e,1),this.render(),this.syncHash())},iChart.Charting.ChartAreaLayer.prototype.removeSelected=function(t){null===this.selected||t?this.remove(t):this.remove(this.selected)},iChart.Charting.ChartAreaLayer.prototype.render=function(t){if(!t){if(!this.context)return console.log("ERROR: No context for render"),0;(t=this.context).clearRect(0,0,t.canvas.width,t.canvas.height)}t.save(),t.translate(this.area.innerOffset.left+.5,this.area.innerOffset.top+.5),t.beginPath(),t.moveTo(0,this.area.innerHeight),t.lineTo(this.area.innerWidth,this.area.innerHeight),t.lineTo(this.area.innerWidth,0),t.lineTo(0,0),t.closePath(),t.clip(),void 0!==t.busyPoints&&(t.busyPoints={}),this.history.sort((function(t,e){return t.selected?1:t.inHover&&e.selected?-1:!t.inHover||e.inHover||e.selected?void 0:1}));for(var e=0;e<this.history.length;++e)this.history[e].draw(t,-1);t.restore(),t.save(),t.translate(this.area.innerOffset.left,this.area.innerOffset.top),t.beginPath(),t.moveTo(0,this.area.innerHeight),t.lineTo(this.area.outerWidth,this.area.innerHeight),t.lineTo(this.area.outerWidth,0),t.lineTo(0,0),t.closePath(),t.clip();for(e=0;e<this.history.length;++e)this.history[e].drawExtended(t,-1);t.restore(),"undefined"!=typeof FlashCanvas&&t.e()},iChart.Charting.ChartAreaLayer.prototype.serialize=function(){var t={},e=0;t.L=0;for(var i=0;i<this.history.length;++i){var r=this.history[i];if(r.isComplete()&&r.controlEnable&&r.storageEnable){t["L"+e+"_T"]=r.elementType;for(var n=0;n<r.points.length;++n)t["L"+e+"_X"+n]=r.points[n].x,t["L"+e+"_Y"+n]=r.points[n].y;r.hasSettings&&(t["L"+e+"_S"]=window.btoa(encodeURIComponent(JSON.stringify(r.settings))).replace(/=/g,"@")),e++,t.L=t.L+1}}return t},iChart.Charting.ChartAreaLayer.prototype.setControlsHover=function(t){if(this.controlsHover){if(t){if(this.controlsHover.value.id!=t.value.id||this.controlsHover.mode!=t.mode){if(this.controlsHover.toString().match(new RegExp("^c_","i")));else if(this.controlsHover.mode.toString().match(new RegExp("^a_","i")));else if(this.controlsHover.mode.toString().match(new RegExp("^m_","i"))){var e=this.controlsHover.mode.toString().match(new RegExp(/^m_(\d)/i));void 0!==this.controlsHover.value.maps&&"function"==typeof this.controlsHover.value.maps[e[1]].hoverOut&&(this.controlsHover.value.maps[e[1]].hoverOut(),this.controlsHover=null)}if(t.mode.toString().match(new RegExp("^c_","i")));else if(t.mode.toString().match(new RegExp("^a_","i")));else if(t.mode.toString().match(new RegExp("^m_","i"))){e=t.mode.toString().match(new RegExp(/^m_(\d)/i));void 0!==t.value.maps&&"function"==typeof t.value.maps[e[1]].hoverIn&&(this.controlsHover=t,t.value.maps[e[1]].hoverIn())}}}else if(this.controlsHover.toString().match(new RegExp("^c_","i")));else if(this.controlsHover.mode.toString().match(new RegExp("^a_","i")));else if(this.controlsHover.mode.toString().match(new RegExp("^m_","i"))){e=this.controlsHover.mode.toString().match(new RegExp(/^m_(\d)/i));void 0!==this.controlsHover.value.maps&&"function"==typeof this.controlsHover.value.maps[e[1]].hoverOut&&(this.controlsHover.value.maps[e[1]].hoverOut(),this.controlsHover=null)}}else if(t)if(t.mode.toString().match(new RegExp("^c_","i")));else if(t.mode.toString().match(new RegExp("^a_","i")));else if(t.mode.toString().match(new RegExp("^m_","i"))){e=t.mode.toString().match(new RegExp(/^m_(\d)/i));void 0!==t.value.maps&&"function"==typeof t.value.maps[e[1]].hoverIn&&(this.controlsHover=t,t.value.maps[e[1]].hoverIn())}},iChart.Charting.ChartAreaLayer.prototype.setHover=function(t,e,i){null===this.hover||null!=t&&this.hover===t||(this.hover.inHover=!1,this.hover.onOut()),null!==t&&(t.inHover=!0),this.hover!==t&&(this.hover=t,null!==t&&"function"==typeof t.onHover&&t.onHover(e,i),this.render())},iChart.Charting.ChartAreaLayer.prototype.setSelected=function(t){$("#elementSettings").remove(),this.selected!==t&&(null!=this.selected&&(this.selected.onOut(),this.selected.selected=!1,this.selected.onBlur(this.context)),this.selected=t,null===t?(this.$deleteButton.hide().removeClass("on"),this.$settingsButton.hide()):(this.$deleteButton.removeClass("on"),this.selected.selected=!0,this.selected.onSelect.call(this.selected,this.context)),this.render())},iChart.Charting.ChartAreaLayer.prototype.start=function(t){return this.unfinished=this.createElement(t),this.selected=this.unfinished,void 0!==this.unfinished&&this.history.push(this.unfinished),this.unfinished},iChart.Charting.ChartAreaLayer.prototype.syncHash=function(){},iChart.Charting.ChartAreaLayer.prototype.update=function(t){if(t){this.area=t;for(var e=0;e<this.history.length;++e)delete this.history[e].testContext;var i=$("canvas#"+t.name);if(i.length)this.canvas=i.get(0),this.context=iChart.getContext(this.canvas),this.offset=this.chart._containerSize.offset;else{var r=$(this.chart.container);this._initCanvas(r.width(),r.height()),this.canvas&&$(this.canvas).attr("id",this.area.name)}this.render()}},iChart.Charting.ChartAreaLayer.prototype._initCanvas=function(t,e){this.canvas=iChart.Charting.initCanvas(this.chart.container,this.canvas,t,e),this.canvas&&(this.context=iChart.getContext(this.canvas),this.offset=this.chart._containerSize.offset)}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartDrawingLayer=function(t){if(this.$deleteButton=$("<span/>",{class:"m-chart-instrument-delete",text:"✕",title:"Удалить инструмент"}).hide().appendTo(t.container),this.$settingsButton=$("<span class ='m-chart-instrument-settings' href = '#' text = '' title = 'Свойства'><span class='elementSettingsHolder' style='position: relative'></span></span>").hide().appendTo(t.container),this.canvas=null,this.chart=t,this.defaultCursor="default",this.drag=null,this.history=[],this.hover=null,this.controlsHover=null,this.prevX=null,this.prevY=null,this.selected=null,this.unfinished=null,$(t.container).off("mousedown.overlay").unbind("mouseup.overlay").unbind("mousemove.overlay"),$(t.container).on("mousedown.overlay",$.proxy(this.onMouseDown,this)).on("mouseup.overlay",$.proxy(this.onMouseUp,this)).on("mousemove.overlay",$.proxy(this.onMouseMove,this)),0==this.chart.env.dataSource.dataSettings.useHash)var e=this.chart.env.dataSource.dataSettings.hash;else e=document.location.hash;this.deserialize(iChart.parseQueryString((e||"#").substr(1)))},iChart.Charting.ChartDrawingLayer.prototype.clear=function(t){if(t=!!t,this.history.length)if(t)this.$deleteButton.hide().removeClass("on"),this.$settingsButton.hide(),this.history=[],this.render(),this.syncHash();else{for(var e=this.history,i=0;i<e.length;i++){"manually"==e[i].drawType&&(e.splice(i,1),i--)}this.render(),this.syncHash()}},iChart.Charting.ChartDrawingLayer.prototype.createElement=function(t){switch(t){case"Channel":return new iChart.Charting.ChartChannel(this);case"Ellipse":return new iChart.Charting.ChartEllipse(this);case"FibonacciArc":return new iChart.Charting.ChartFibonacciArc(this);case"FibonacciCorrection":return new iChart.Charting.ChartFibonacciCorrection(this);case"FibonacciFan":return new iChart.Charting.ChartFibonacciFan(this);case"HorizontalLine":return new iChart.Charting.ChartHorizontalLine(this);case"Line":return new iChart.Charting.ChartLine(this);case"Rectangle":return new iChart.Charting.ChartRectangle(this);case"Trend":return new iChart.Charting.ChartTrend(this);case"Triangle":return new iChart.Charting.ChartTriangle(this);case"VerticalLine":return new iChart.Charting.ChartVerticalLine(this);case"Mark":return new iChart.Charting.ChartMark(this);case"Label":return new iChart.Charting.ChartLabel(this);case"Arrow":return new iChart.Charting.ChartArrow(this);case"Polygon":return new iChart.Charting.ChartPolygon(this);case"Trade":return new iChart.Charting.ChartTrade(this);case"Bubble":return new iChart.Charting.ChartBubble(this);case"Text":return new iChart.Charting.ChartText(this);case"Order":return new iChart.Charting.ChartOrder(this);case"Trendorder":return new iChart.Charting.ChartTrendorder(this);case"Position":return new iChart.Charting.ChartPosition(this);case"Visualtrade":return new iChart.Charting.ChartVisualtrade(this);case"TradePanel":return new iChart.Charting.ChartTradePanel(this);case"Button":return new iChart.Charting.ChartButton(this);case"Event":return new iChart.Charting.ChartEvent(this);case"Level":return new iChart.Charting.ChartLevel(this);case"Range":return new iChart.Charting.ChartRange(this);case"HorizontalRange":return new iChart.Charting.ChartHorizontalRange(this);default:return}},iChart.Charting.ChartDrawingLayer.prototype.deserialize=function(t){this.$deleteButton.unbind("mousedown").hide().removeClass("on"),this.$settingsButton.unbind("mousedown").hide(),this.history=[];var e=parseInt(t.L,10);if(!isNaN(e))t:for(var i=0;i<e;++i){var r=t["L"+i+"_T"],n=this.createElement(r);if(void 0!==n){n.points=[];for(var a=0;a<n.maxPointCount;++a){var s={x:parseFloat(t["L"+i+"_X"+a]),y:parseFloat(t["L"+i+"_Y"+a])};if(isNaN(s.x)||isNaN(s.y))continue t;n.points.push(s)}t["L"+i+"_S"]&&(n.settings=JSON.parse(decodeURIComponent(window.atob(t["L"+i+"_S"].replace(/@/g,"="))))),this.history.push(n)}}},iChart.Charting.ChartDrawingLayer.prototype.elementAt=function(t,e){this.history.sort((function(t,e){return t&&t.selected||t&&"TradePanel"==t.elementType?-1:1}));for(var i=0;i<this.history.length;++i){var r=this.history[i],n=r.isMouseOver.call(r,t,e);if(-1!==n)return{mode:n,value:r}}},iChart.Charting.ChartDrawingLayer.prototype.finalizePoint=function(t,e){this.unfinished.points[this.unfinished.points.length-1].x=t,this.unfinished.points[this.unfinished.points.length-1].y=e,this.unfinished.isComplete()?(this.chart.env.wrapper.trigger("iguanaChartEvents",["drawComplete",this.unfinished]),this.unfinished=null,this.syncHash(),this.chart.container.style.cursor=this.defaultCursor):(this.unfinished.points.push({}),this.chart.container.style.cursor="crosshair"),this.render()},iChart.Charting.ChartDrawingLayer.prototype.getMarkers=function(t,e){for(var i=[],r=!1,n=0;n<this.drag.element.points.length;++n){var a=this.drag.element.points[n],s={};if(0===this.drag.mode||this.drag.mode===n+1){if((s=$.extend({},a)).x=1e3*this.area.getXValue(this.area.getXPositionByValue(a.x/1e3)+t),s.y=this.area.getYValue(this.area.getYPosition(a.y)+e),isNaN(s.x)||isNaN(s.y)){r=!0;break}}else s=$.extend({},a);i.push(s)}return{markers:i,outside:r}},iChart.Charting.ChartDrawingLayer.prototype.getPixelPosition=function(t,e){var i=t.length;if(!(i<2||t[0][0]>=e))for(var r=1;r<i;++r){var n=t[r];if(n[0]>=e)return n[1]}},iChart.Charting.ChartDrawingLayer.prototype.onMouseDown=function(t){if(void 0!==this.offset){var e=Math.round(t.pageX-this.offset.left-this.area.innerOffset.left),i=Math.round(t.pageY-this.offset.top-this.area.innerOffset.top),r=1e3*this.area.getXValue(e),n=this.area.getYValue(i);if($(window).data("mouseValueX",r),$(window).data("mouseValueY",n),this.chart.isComparison&&!isNaN(n)){var a=iChart.Charting.getNearestNotNullIndex(this.chart.areas[0].ySeries[0].points,this.chart.areas[0].viewport.x.bounded.min),s=this.chart.areas[0].ySeries[0].points[a][3];n=s+s/100*n}if(!isNaN(r)&&!isNaN(n)){if(null!==this.unfinished)return this.finalizePoint(r,n),void this.selected.onInsert();if(0!==this.history.length&&null===this.drag){var o=this.elementAt(e,i);if(o&&o.value&&"function"==typeof o.value.onMouseDown&&o.value.onMouseDown(t,e,i),void 0!==o){if(o.value.controlEnable){if(o.mode.toString().match(new RegExp("^m_","i"))){var h=o.mode.toString().match(new RegExp(/^m_(\d)/i));o.value.maps[h[1]].click()}else{if(o.mode.toString().match(new RegExp("^c_","i"))){var l=o.mode.toString().match(new RegExp(/^c_(\d)/i));return void o.value.controls[l[1]].click()}o.mode.toString().match(new RegExp("^a_","i"))}this.setSelected(o.value),o.hasSettings,this.drag={},this.drag.element=this.selected,this.drag.mode=o.mode,this.drag.x=e,this.drag.y=i,this.chart.selection&&this.chart.selection.disable()}}else this.setSelected(null)}}}},iChart.Charting.ChartDrawingLayer.prototype.onMouseMove=function(t){if(void 0!==this.offset){var e=Math.round(t.pageX-this.offset.left-this.area.innerOffset.left),i=Math.round(t.pageY-this.offset.top-this.area.innerOffset.top);if(e!==this.prevX||i!==this.prevY){this.prevX=e,this.prevY=i;var r=1e3*this.area.getXValue(e),n=this.area.getYValue(i);if(this.prevValueX=r,this.prevValueY=n,this.chart.isComparison&&!isNaN(n)){var a=iChart.Charting.getNearestNotNullIndex(this.chart.areas[0].ySeries[0].points,this.chart.areas[0].viewport.x.bounded.min),s=this.chart.areas[0].ySeries[0].points[a][3];n=s+s/100*n}if(isNaN(r)||isNaN(n))return this.setHover(null),void(this.chart.container.style.cursor=this.defaultCursor);if(null!==this.unfinished)return this.hover=null,this.unfinished.points[this.unfinished.points.length-1].x=r,this.unfinished.points[this.unfinished.points.length-1].y=n,this.render(),void(this.chart.container.style.cursor="crosshair");if(null!==this.drag){isNaN(parseInt(this.drag.mode))||(void 0!==this.drag.element.moveCursor?this.chart.container.style.cursor=this.drag.element.moveCursor:this.chart.container.style.cursor="move");var o=e-this.drag.x,h=i-this.drag.y;if(0===o&&0===h)return;var l=this.getMarkers(o,h);return this.drag.element.onDrag(l.markers),void(l.outside?void 0!==this.drag.element.markers&&(delete this.drag.element.markers,this.render()):(this.drag.element.markers=l.markers,this.render()))}var c=this.elementAt(e,i);if(void 0===c)this.setHover(null),this.setControlsHover(null),this.chart.container.style.cursor=this.defaultCursor;else if(c.mode.toString().match(new RegExp("^c_","i")))this.chart.container.style.cursor="pointer",this.setControlsHover(c);else if(c.mode.toString().match(new RegExp("^a_","i")))this.setHover(null),this.setControlsHover(c),this.chart.container.style.cursor=this.defaultCursor;else if(c.mode.toString().match(new RegExp("^m_","i"))){c.mode.toString().match(new RegExp(/^m_(\d)/i));this.setControlsHover(c),this.chart.container.style.cursor="pointer"}else this.setHover(c.value,e,i),this.setControlsHover(c),void 0!==c.value.hoverCursor||void 0!==c.value.hoverPointCursor?c.mode>0&&void 0!==c.value.hoverPointCursor?this.chart.container.style.cursor=c.value.hoverPointCursor:0==c.mode&&void 0!==c.value.hoverCursor?this.chart.container.style.cursor=c.value.hoverCursor:this.chart.container.style.cursor="pointer":this.chart.container.style.cursor="pointer"}}},iChart.Charting.ChartDrawingLayer.prototype.onMouseUp=function(t){var e=Math.round(t.pageX-this.offset.left-this.area.innerOffset.left),i=Math.round(t.pageY-this.offset.top-this.area.innerOffset.top),r=this.elementAt(e,i);if(void 0===r);else{if(!r.value.controlEnable)return;r.mode.toString().match(new RegExp("^c_","i"))||r.mode.toString().match(new RegExp("^a_","i"))}if(void 0!==this.offset&&null!==this.drag){e=Math.round(t.pageX-this.offset.left-this.area.innerOffset.left),i=Math.round(t.pageY-this.offset.top-this.area.innerOffset.top);var n=1e3*this.area.getXValue(e),a=this.area.getYValue(i);if(this.chart.isComparison&&!isNaN(a)){var s=this.chart.areas[0].ySeries[0].points[this.chart.areas[0].viewport.x.bounded.min][3];a=s+s/100*a}if(!isNaN(n)&&!isNaN(a)){var o=e-this.drag.x,h=i-this.drag.y;if(0!==o||0!==h){var l=this.getMarkers(o,h);this.drag.element.onDrag(l.markers),l.outside||(this.drag.element.points=l.markers,delete this.drag.element.testContext,this.syncHash(),this.drag.element.onDrop(this.drag.mode))}delete this.drag.element.markers,this.drag=null,this.render(),this.chart.selection&&this.chart.selection.enable()}}},iChart.Charting.ChartDrawingLayer.prototype.remove=function(t){var e=this.history.indexOf(t);-1!==e&&(this.$deleteButton.unbind("mousedown").hide().removeClass("on"),this.$settingsButton.unbind("mousedown").hide(),this.history.splice(e,1),this.render(),this.syncHash())},iChart.Charting.ChartDrawingLayer.prototype.removeSelected=function(t){null===this.selected||t?this.remove(t):this.remove(this.selected)},iChart.Charting.ChartDrawingLayer.prototype.render=function(t){if(!t){if(!this.context)return console.log("ERROR: No context for render"),0;(t=this.context).clearRect(0,0,t.canvas.width,t.canvas.height)}t.save(),t.translate(this.area.innerOffset.left,this.area.innerOffset.top),t.beginPath(),t.moveTo(0,this.area.innerHeight),t.lineTo(this.area.outerWidth,this.area.innerHeight),t.lineTo(this.area.outerWidth,0),t.lineTo(0,0),t.closePath(),t.clip();for(var e=0;e<this.history.length;++e)this.history[e].drawExtended(t,-1);t.restore(),t.save(),t.translate(this.area.innerOffset.left+.5,this.area.innerOffset.top+.5),t.beginPath(),t.moveTo(0,this.area.innerHeight),t.lineTo(this.area.innerWidth,this.area.innerHeight),t.lineTo(this.area.innerWidth,0),t.lineTo(0,0),t.closePath(),t.clip(),void 0!==t.busyPoints&&(t.busyPoints={}),this.history.sort((function(t,e){return t.selected?1:t.inHover&&e.selected?-1:!t.inHover||e.inHover||e.selected?void 0:1}));for(e=0;e<this.history.length;++e)this.history[e].draw(t,-1);t.restore(),"undefined"!=typeof FlashCanvas&&t.e()},iChart.Charting.ChartDrawingLayer.prototype.serialize=function(){var t={},e=0;t.L=0;for(var i=0;i<this.history.length;++i){var r=this.history[i];if(r.isComplete()&&r.controlEnable&&r.storageEnable){t["L"+e+"_T"]=r.elementType;for(var n=0;n<r.points.length;++n)t["L"+e+"_X"+n]=r.points[n].x,t["L"+e+"_Y"+n]=r.points[n].y;r.hasSettings&&(t["L"+e+"_S"]=window.btoa(encodeURIComponent(JSON.stringify(r.settings))).replace(/=/g,"@")),e++,t.L=t.L+1}}return t},iChart.Charting.ChartDrawingLayer.prototype.setControlsHover=function(t){if(this.controlsHover){if(t){if(this.controlsHover.value.id!=t.value.id||this.controlsHover.mode!=t.mode){if(this.controlsHover.toString().match(new RegExp("^c_","i")));else if(this.controlsHover.mode.toString().match(new RegExp("^a_","i")));else if(this.controlsHover.mode.toString().match(new RegExp("^m_","i"))){var e=this.controlsHover.mode.toString().match(new RegExp(/^m_(\d)/i));void 0!==this.controlsHover.value.maps&&"function"==typeof this.controlsHover.value.maps[e[1]].hoverOut&&(this.controlsHover.value.maps[e[1]].hoverOut(),this.controlsHover=null)}if(t.mode.toString().match(new RegExp("^c_","i")));else if(t.mode.toString().match(new RegExp("^a_","i")));else if(t.mode.toString().match(new RegExp("^m_","i"))){e=t.mode.toString().match(new RegExp(/^m_(\d)/i));void 0!==t.value.maps&&"function"==typeof t.value.maps[e[1]].hoverIn&&(this.controlsHover=t,t.value.maps[e[1]].hoverIn())}}}else if(this.controlsHover.toString().match(new RegExp("^c_","i")));else if(this.controlsHover.mode.toString().match(new RegExp("^a_","i")));else if(this.controlsHover.mode.toString().match(new RegExp("^m_","i"))){e=this.controlsHover.mode.toString().match(new RegExp(/^m_(\d)/i));void 0!==this.controlsHover.value.maps&&"function"==typeof this.controlsHover.value.maps[e[1]].hoverOut&&(this.controlsHover.value.maps[e[1]].hoverOut(),this.controlsHover=null)}}else if(t)if(t.mode.toString().match(new RegExp("^c_","i")));else if(t.mode.toString().match(new RegExp("^a_","i")));else if(t.mode.toString().match(new RegExp("^m_","i"))){e=t.mode.toString().match(new RegExp(/^m_(\d)/i));void 0!==t.value.maps&&"function"==typeof t.value.maps[e[1]].hoverIn&&(this.controlsHover=t,t.value.maps[e[1]].hoverIn())}},iChart.Charting.ChartDrawingLayer.prototype.setHover=function(t,e,i){null===this.hover||null!=t&&this.hover===t||(this.hover.inHover=!1,this.hover.onOut()),null!==t&&(t.inHover=!0),this.hover!==t&&(this.hover=t,null!==t&&"function"==typeof t.onHover&&t.onHover(e,i),this.render())},iChart.Charting.ChartDrawingLayer.prototype.setSelected=function(t){$("#elementSettings").remove(),this.selected!==t&&(null!=this.selected&&(this.selected.onOut(),this.selected.selected=!1,this.selected.onBlur(this.context)),this.selected=t,null===t?(this.$deleteButton.hide().removeClass("on"),this.$settingsButton.hide()):(this.$deleteButton.removeClass("on"),this.selected.selected=!0,this.selected.onSelect.call(this.selected,this.context)),this.render())},iChart.Charting.ChartDrawingLayer.prototype.start=function(t){return this.unfinished=this.createElement(t),this.selected=this.unfinished,void 0!==this.unfinished&&this.history.push(this.unfinished),this.unfinished},iChart.Charting.ChartDrawingLayer.prototype.syncHash=function(){this.chart.env.setHashValues(this.serialize())},iChart.Charting.ChartDrawingLayer.prototype.update=function(){if(this.chart.areas){this.area=this.chart.areas[0];for(var t=0;t<this.history.length;++t)delete this.history[t].testContext;var e=$(this.chart.container);this._initCanvas(e.width(),e.height()),this.render()}},iChart.Charting.ChartDrawingLayer.prototype._initCanvas=function(t,e){this.canvas=iChart.Charting.initCanvas(this.chart.container,this.canvas,t,e),this.canvas&&(this.context=iChart.getContext(this.canvas),this.offset=this.chart._containerSize.offset)}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartElement=function(t){this.layer=t,this.selected=!1,this.maxPointCount=2,this.points=[{}],this.testContext=void 0,this.id=t.history.length+"_"+(new Date).getTime(),this.controlEnable=!0,this.storageEnable=!0,this.hasSettings=!1,this.settings={},this.hasPopupSettings=!1,this.drawSingle=!1,this.positionAbsolute=!1,this.inHover=!1,t.setSelected(null)},iChart.Charting.ChartElement.prototype.draw=function(t){if(this===this.layer.hover)t.fillStyle="rgba(255,255,153,.2)",t.strokeStyle="#52afc9",t.inHover=!0;else if(t.inHover=!1,t.hasSettings){var e=t.settings;t.fillStyle=e.fillStyle,t.strokeStyle=e.strokeStyle,t.lineWidth=e.lineWidth}else t.fillStyle="rgba(0,0,0,.0)",t.strokeStyle="#000";if(this.drawSingle)if(void 0!==this.markers)t.fillStyle="rgba(82,175,201,.2)",t.strokeStyle="#52afc9",i=this.getCoordinates(t,this.markers),this.drawInternal(t,i),this.drawPoints(t,i);else{var i=this.getCoordinates(t,this.points);this.drawInternal(t,i),this.drawPoints(t,i)}else{i=this.getCoordinates(t,this.points);this.drawInternal(t,i),this.drawPoints(t,i),void 0!==this.markers&&(t.fillStyle="rgba(82,175,201,.2)",t.strokeStyle="#52afc9",i=this.getCoordinates(t,this.markers),this.drawInternal(t,i),this.drawPoints(t,i))}},iChart.Charting.ChartElement.prototype.drawInternal=function(t,e){},iChart.Charting.ChartElement.prototype.drawExtended=function(t){},iChart.Charting.ChartElement.prototype.onHover=function(t){},iChart.Charting.ChartElement.prototype.onOut=function(t){},iChart.Charting.ChartElement.prototype.onSelect=function(t){this.layer.chart.env.wrapper.trigger("iguanaChartEvents",["selectInstrument",this])},iChart.Charting.ChartElement.prototype.onBlur=function(t){},iChart.Charting.ChartElement.prototype.onRemove=function(){},iChart.Charting.ChartElement.prototype.onDrop=function(){},iChart.Charting.ChartElement.prototype.onDrag=function(t){},iChart.Charting.ChartElement.prototype.drawPopupSettings=function(t,e){},iChart.Charting.ChartElement.prototype.setSettings=function(t){this.settings=$.extend(this.settings,t),void 0!==this.layer&&this.layer.context&&(this.layer.render(),this.layer.syncHash())},iChart.Charting.ChartElement.prototype.initDrawSettings=function(t,e){null!=e&&(void 0!==(e=e).lineDash&&(void 0!==t.setLineDash&&t.setLineDash(e.lineDash),void 0!==t.mozDash&&(t.mozDash=e.lineDash)),t.inHover?(t.fillStyle=iChart.invertColor(e.fillStyle),t.strokeStyle=iChart.invertColor(e.strokeStyle),t.lineWidth=e.lineWidth):(t.fillStyle=e.fillStyle,t.strokeStyle=e.strokeStyle,t.lineWidth=e.lineWidth))},iChart.Charting.ChartElement.prototype.onInsert=function(){this.selected=!0},iChart.Charting.ChartElement.prototype.getCoordinates=function(t,e){for(var i=[],r=0;r<e.length;++r){var n={};if(n.x=Math.round(this.layer.area.getXPositionByValue(e[r].x/1e3)),isNaN(n.x))break;if(this.layer.chart.isComparison){var a=100*(e[r].y/this.layer.area.ySeries[0].points[this.layer.area.viewport.x.bounded.min][3]-1);n.y=Math.round(this.layer.area.getYPosition(a))}else n.y=Math.round(this.layer.area.getYPosition(e[r].y));if(isNaN(n.y))break;if(this===this.layer.selected&&this.controlEnable&&this.storageEnable&&0===r){var s=this;if(this.layer.$deleteButton.unbind("mousedown").mousedown((function(){return $(this).hasClass("on")?s.remove():$(this).addClass("on"),!1})).show().css({left:this.layer.area.innerOffset.left+n.x+2,top:this.layer.area.innerOffset.top+n.y+2}),this.hasSettings&&this.hasPopupSettings){this.layer.$settingsButton.unbind("mousedown").mousedown((function(){return s.drawPopupSettings(t,n),!1})).show().css({left:this.layer.area.innerOffset.left+n.x-10,top:this.layer.area.innerOffset.top+n.y+2})}}i.push(n)}return i},iChart.Charting.ChartElement.prototype.drawPoints=function(t,e){if(this===this.layer.selected&&this.controlEnable)for(var i=0;i<e.length;++i){var r=e[i];t.save(),t.beginPath(),t.arc(r.x,r.y,6,0,2*Math.PI,!0),t.fillStyle="#fff",t.globalAlpha=1,t.lineWidth=2,t.stokeStyle="#eee",t.fill(),t.stroke(),t.restore()}},iChart.Charting.ChartElement.prototype.getTestContext=function(t){if(t=!!t,void 0===this.testContext||t){this.testContext={};var e=this;this.testContext.points=$.map(this.points,(function(t,i){return{x:Math.round(e.layer.area.getXPositionByValue(t.x/1e3)),y:Math.round(e.layer.area.getYPosition(t.y))}})),this.setTestSegments()}return this.testContext},iChart.Charting.ChartElement.prototype.isComplete=function(){return this.points.length===this.maxPointCount},iChart.Charting.ChartElement.prototype.isMouseOver=function(t,e){if(!this.isComplete())return-1;var i=this.getTestContext();if(void 0!==i.maps)for(var r in i.maps){if(t>=(s=i.maps[r])[0].x&&t<=s[1].x&&e>=s[0].y&&e<=s[1].y)return"m_"+r}for(r=0;r<i.points.length;++r){var n=i.points[r];if(iChart.Charting.pointToPointDistanceSquared(n,{x:t,y:e})<=64)return r+1}for(r=0;r<i.segments.length;++r){var a=i.segments[r];if(iChart.Charting.pointToSegmentDistanceSquared(a,{x:t,y:e},!0)<=64)return 0}if(this.selected&&void 0!==i.controls)for(var r in i.controls){var s;if(t>=(s=i.controls[r])[0].x&&t<=s[1].x&&e>=s[0].y&&e<=s[1].y)return"c_"+r}if(void 0!==i.elementArea){var o=i.elementArea;if(t>=o[0].x&&t<=o[1].x&&e>=o[0].y&&e<=o[1].y)return"a_0"}return-1},iChart.Charting.ChartElement.prototype.remove=function(){this.onRemove(),this.layer.remove(this),delete this.layer,delete this.testContext},iChart.Charting.ChartElement.prototype.setTestSegments=function(){this.testContext.segments=[this.testContext.points],this.testContext.controls=[]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartChannel=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Channel",this.drawType="manually",this.maxPointCount=3,this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartChannel,iChart.Charting.ChartElement),iChart.Charting.ChartChannel.prototype.drawInternal=function(t,e){e.length<2||(this.initDrawSettings(t,this.settings),t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke(),e.length<3||(t.beginPath(),t.moveTo(e[2].x,e[2].y),t.lineTo(e[1].x+(e[2].x-e[0].x),e[1].y+(e[2].y-e[0].y)),t.stroke(),t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[1].x+(e[2].x-e[0].x),e[1].y+(e[2].y-e[0].y)),t.lineTo(e[2].x,e[2].y),t.fill()))},iChart.Charting.ChartChannel.prototype.setTestSegments=function(){this.testContext.segments=[this.testContext.points,[this.testContext.points[2],{x:this.testContext.points[1].x+(this.testContext.points[2].x-this.testContext.points[0].x),y:this.testContext.points[1].y+(this.testContext.points[2].y-this.testContext.points[0].y)}]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartEllipse=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Ellipse",this.drawType="manually",this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartEllipse,iChart.Charting.ChartElement),iChart.Charting.ChartEllipse.prototype.drawInternal=function(t,e){if(!(e.length<2)){var i=Math.abs(e[1].y-e[0].y),r=Math.abs(e[1].x-e[0].x);if(!(i<=4||r<=4)){var n=(e[0].x+e[1].x)/2,a=(e[0].y+e[1].y)/2,s=2*r/3;this.initDrawSettings(t,this.settings),t.beginPath(),t.moveTo(n,a-i/2),t.bezierCurveTo(n-s,a-i/2,n-s,a+i/2,n,a+i/2),t.bezierCurveTo(n+s,a+i/2,n+s,a-i/2,n,a-i/2),t.fill(),t.stroke()}}},iChart.Charting.ChartEllipse.prototype.setTestSegments=function(){this.testContext.segments=[[this.testContext.points[0],{x:this.testContext.points[0].x,y:this.testContext.points[1].y}],[{x:this.testContext.points[0].x,y:this.testContext.points[1].y},this.testContext.points[1]],[this.testContext.points[1],{x:this.testContext.points[1].x,y:this.testContext.points[0].y}],[{x:this.testContext.points[1].x,y:this.testContext.points[0].y},this.testContext.points[0]]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartFibonacciArc=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="FibonacciArc",this.drawType="manually",this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartFibonacciArc,iChart.Charting.ChartElement),iChart.Charting.ChartFibonacciArc.prototype.drawInternal=function(t,e){if(!(e.length<2)){t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke();var i=Math.sqrt(iChart.Charting.pointToPointDistanceSquared(e[0],e[1]));if(!(i<=4))for(var r=[.382,.5,.618],n=0;n<r.length;++n)t.beginPath(),t.arc(e[0].x,e[0].y,i*r[n],0,Math.PI,e[0].y>e[1].y),t.stroke()}}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartFibonacciCorrection=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="FibonacciCorrection",this.drawType="manually",this.percentages=[0,.382,.5,.618,.786,1,1.272,1.618],this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartFibonacciCorrection,iChart.Charting.ChartElement),iChart.Charting.ChartFibonacciCorrection.prototype.drawInternal=function(t,e){if(!(e.length<2)){t.save(),t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke();var i=e[1].y-e[0].y;if(Math.abs(i)<=4)t.restore();else{for(var r=0;r<this.percentages.length;++r){var n=Math.round(e[0].y+i*this.percentages[r]);if(t.beginPath(),t.moveTo(e[0].x,n),t.lineTo(t.canvas.width,n),t.stroke(),0!=this.percentages[r]){t.font="12px Arial";var a=t.measureText(this.percentages[r]);t.fillText(this.percentages[r],e[0].x-a.width-5,n+5)}}t.restore()}}}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartFibonacciFan=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="FibonacciFan",this.drawType="manually",this.percentages=[.382,.5,.618],this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartFibonacciFan,iChart.Charting.ChartElement),iChart.Charting.ChartFibonacciFan.prototype.drawInternal=function(t,e){if(!(e.length<2)){t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke();var i=e[1].y-e[0].y;if(!(Math.abs(i)<=4)){i/=e[1].x-e[0].x;for(var r=0;r<this.percentages.length;++r)t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(t.canvas.width,e[0].y+this.percentages[r]*i*(t.canvas.width-e[0].x)),t.stroke()}}}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartHorizontalLine=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="HorizontalLine",this.drawType="manually",this.maxPointCount=1,this.hasSettings=!0,this.settings=$.extend({drawLabel:!0},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartHorizontalLine,iChart.Charting.ChartElement),iChart.Charting.ChartHorizontalLine.prototype.drawInternal=function(t,e){if(!(e.length<1)){var i=this.layer.area.getXValue(t.canvas.width-200);this.points[0].x=1e3*i,e[0].x=t.canvas.width-200,t.save(),t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(0,e[0].y),t.lineTo(t.canvas.width,e[0].y),t.stroke(),t.restore()}},iChart.Charting.ChartHorizontalLine.prototype.drawExtended=function(t){if(this.settings.drawLabel){var e=this.getCoordinates(t,this.points);if(e.length<1)return;var i=this.settings,r=this.layer.chart.renderer.formatNumber(this.layer.area.getYValue(e[0].y),{decimalPrecision:this.layer.chart.labelPrecision,scale:0});this.layer.chart.renderer.drawLable(t,i.strokeStyle,0,this.layer.area.innerWidth,e[0].y,r)}},iChart.Charting.ChartHorizontalLine.prototype.setTestSegments=function(){this.testContext.segments=[[{x:this.layer.area.innerOffset.left,y:this.testContext.points[0].y},{x:this.layer.area.innerOffset.left+this.layer.area.innerWidth,y:this.testContext.points[0].y}]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartLine=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Line",this.drawType="manually",this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartLine,iChart.Charting.ChartElement),iChart.Charting.ChartLine.prototype.drawInternal=function(t,e){e.length<2||(t.save(),t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke(),t.restore())}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartRectangle=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Rectangle",this.drawType="manually",this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartRectangle,iChart.Charting.ChartElement),iChart.Charting.ChartRectangle.prototype.drawInternal=function(t,e){if(!(e.length<2)){t.save(),t.beginPath(),this.initDrawSettings(t,this.settings);var i=e[1].x-e[0].x,r=e[1].y-e[0].y;t.moveTo(e[0].x,e[0].y),t.lineTo(e[0].x,e[1].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[1].x,e[0].y),t.lineTo(e[0].x,e[0].y),t.lineTo(e[0].x,e[1].y),t.lineTo(e[1].x,e[1].y),t.stroke(),t.fillRect(e[0].x,e[0].y,i,r),t.restore()}},iChart.Charting.ChartRectangle.prototype.setTestSegments=function(){this.testContext.segments=[[this.testContext.points[0],{x:this.testContext.points[0].x,y:this.testContext.points[1].y}],[{x:this.testContext.points[0].x,y:this.testContext.points[1].y},this.testContext.points[1]],[this.testContext.points[1],{x:this.testContext.points[1].x,y:this.testContext.points[0].y}],[{x:this.testContext.points[1].x,y:this.testContext.points[0].y},this.testContext.points[0]]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartTrend=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Trend",this.drawType="manually",this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartTrend,iChart.Charting.ChartElement),iChart.Charting.ChartTrend.prototype.drawInternal=function(t,e){if(!(e.length<2)){t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke();var i=Math.sqrt(iChart.Charting.pointToPointDistanceSquared(e[0],e[1]));if(!(i<=4)){t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[0].x+i,e[0].y),t.stroke();var r=Math.acos((e[1].x-e[0].x)/i),n=e[0].y>=e[1].y;this===this.layer.selected&&(t.beginPath(),t.arc(e[0].x,e[0].y,i/4,0,n?2*Math.PI-r:r,n),t.stroke()),"function"==typeof t.strokeText&&(t.font="normal 15px Tahoma",t.fillStyle=t.strokeStyle,t.translate(-.5,-.5),n?(t.textBaseline="top",t.fillText(Math.round(180*r/Math.PI)+"°",e[0].x+18,e[0].y+3)):(t.textBaseline="bottom",t.fillText("-"+Math.round(180*r/Math.PI)+"°",e[0].x+18,e[0].y-3)),t.translate(.5,.5))}}},iChart.Charting.ChartTrend.prototype.setTestSegments=function(){var t=Math.sqrt(iChart.Charting.pointToPointDistanceSquared(this.testContext.points[0],this.testContext.points[1]));this.testContext.segments=[this.testContext.points,[this.testContext.points[0],{x:this.testContext.points[0].x+t,y:this.testContext.points[0].y}]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartTriangle=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Triangle",this.drawType="manually",this.maxPointCount=3,this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartTriangle,iChart.Charting.ChartElement),iChart.Charting.ChartTriangle.prototype.drawInternal=function(t,e){e.length<2||(t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke(),e.length<3||(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y),t.lineTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.fill(),t.stroke()))},iChart.Charting.ChartTriangle.prototype.setTestSegments=function(){this.testContext.segments=[[this.testContext.points[0],this.testContext.points[1]],[this.testContext.points[1],this.testContext.points[2]],[this.testContext.points[2],this.testContext.points[0]]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartVerticalLine=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="VerticalLine",this.drawType="manually",this.maxPointCount=1,this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartVerticalLine,iChart.Charting.ChartElement),iChart.Charting.ChartVerticalLine.prototype.drawInternal=function(t,e){e.length<1||(t.save(),t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(e[0].x,0),t.lineTo(e[0].x,t.canvas.height),t.stroke(),t.restore())},iChart.Charting.ChartVerticalLine.prototype.setTestSegments=function(){this.testContext.segments=[[{x:this.testContext.points[0].x,y:this.layer.area.innerOffset.top},{x:this.testContext.points[0].x,y:this.layer.area.innerOffset.top+this.layer.area.innerHeight}]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartMark=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Mark",this.drawType="manually",this.maxPointCount=1,this.hasSettings=!0,this.hasPopupSettings=!0,this.settings={mark:"smileUp"},this.img={},this.img.up=new Image,this.img.up.src=this.layer.chart.env.lib_path+"/images/icon-up.png",this.img.left=new Image,this.img.left.src=this.layer.chart.env.lib_path+"/images/icon-left.png",this.img.leftUp=new Image,this.img.leftUp.src=this.layer.chart.env.lib_path+"/images/icon-leftUp.png",this.img.rightUp=new Image,this.img.rightUp.src=this.layer.chart.env.lib_path+"/images/icon-rightUp.png",this.img.smileUp=new Image,this.img.smileUp.src=this.layer.chart.env.lib_path+"/images/icon-smileUp.png",this.img.exclamation=new Image,this.img.exclamation.src=this.layer.chart.env.lib_path+"/images/icon-exclamation.png",this.img.buy=new Image,this.img.buy.src=this.layer.chart.env.lib_path+"/images/icon-buy.png",this.img.down=new Image,this.img.down.src=this.layer.chart.env.lib_path+"/images/icon-down.png",this.img.right=new Image,this.img.right.src=this.layer.chart.env.lib_path+"/images/icon-right.png",this.img.leftDown=new Image,this.img.leftDown.src=this.layer.chart.env.lib_path+"/images/icon-leftDown.png",this.img.rightDown=new Image,this.img.rightDown.src=this.layer.chart.env.lib_path+"/images/icon-rightDown.png",this.img.smileDown=new Image,this.img.smileDown.src=this.layer.chart.env.lib_path+"/images/icon-smileDown.png",this.img.question=new Image,this.img.question.src=this.layer.chart.env.lib_path+"/images/icon-question.png",this.img.sell=new Image,this.img.sell.src=this.layer.chart.env.lib_path+"/images/icon-sell.png",$("#elementSettings").remove()},inheritPrototype(iChart.Charting.ChartMark,iChart.Charting.ChartElement),iChart.Charting.ChartMark.prototype.drawInternal=function(t,e){if(!(e.length<1)&&null!=this.settings){var i=this.settings,r=this.img[i.mark];t.save(),t.translate(-.5,-.5),t.drawImage(r,e[0].x-r.width/2,e[0].y-r.height/2,r.width,r.height),t.restore(),$(".Mark-select").hide()}},iChart.Charting.ChartMark.prototype.drawPopupSettings=function(t,e){$("#elementSettings").remove(),$('<div id="elementSettings" class="mark chartInstrument"><div class="uk-flex uk-flex-left"><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"up"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-up"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"left"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-left"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"leftUp"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-upLeft"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"rightUp"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-upRight"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"smileUp"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-smileUp"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"exclamation"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-exclamation"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"buy"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-buy"></i></div></div><div class="uk-flex uk-flex-left"><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"down"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-down"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"right"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-right"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"leftDown"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-downLeft"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"rightDown"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-downRight"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"smileDown"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-smileDown"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"question"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-question"></i></div><div class="chartTool uk-flex uk-flex-center uk-flex-middle" data-settings=\'{"mark":"sell"}\' name="SelectInstrument" data-instrument="Mark"><i class="sprite sprite-icon-sell"></i></div></div></div>').appendTo($(this.layer.chart.container));var i=e.x-$("#elementSettings.mark").width()+8;$("#elementSettings").css({left:this.layer.area.innerOffset.left+i,top:this.layer.area.innerOffset.top+e.y+15});var r=this;return $("#elementSettings .chartTool").off("mousedown").on("mousedown",(function(t){var e;t.stopPropagation(),e=$(this).data("settings"),r.setSettings(e),r.layer.render(),$("#elementSettings").remove()})),!1},iChart.Charting.ChartMark.prototype.drawPoints=function(t,e){},iChart.Charting.ChartMark.prototype.setTestSegments=function(){this.testContext.segments=[[this.testContext.points[0],{x:this.testContext.points[0].x,y:this.testContext.points[0].y}]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartLabel=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Label",this.drawType="manually",this.maxPointCount=1,this.hasSettings=!0,this.hasPopupSettings=!0,this.settings=0,this.settings={text:"",size:12},this.sizes=[12,15,19],$("#elementSettings").remove()},inheritPrototype(iChart.Charting.ChartLabel,iChart.Charting.ChartElement),iChart.Charting.ChartLabel.prototype.drawString=function(t,e,i,r,n,a,s,o){var h=e.split("\n");s||(s=0),o||(o="Arial,Helvetica,sans-serif"),n||(n=this.sizes[0]),a||(a="#000000"),t.save(),t.font=n+"px "+o,t.fillStyle=a,t.translate(i,r),t.rotate(s*Math.PI/180);for(var l=0;l<h.length;l++)t.fillText(h[l],0,l*n);t.restore()},iChart.Charting.ChartLabel.prototype.drawInternal=function(t,e){if(!(e.length<1)){var i=this.settings;this.drawString(t,i.text,e[0].x,e[0].y,i.size)}},iChart.Charting.ChartLabel.prototype.setSettings=function(t){this.settings=t,this.layer.context&&(this.layer.render(),this.layer.syncHash())},iChart.Charting.ChartLabel.prototype.drawPopupSettings=function(t,e){var i=this.settings,r=i.size==this.sizes[0]?"selected":"",n=i.size==this.sizes[1]?"selected":"",a=i.size==this.sizes[2]?"selected":"";$("#elementSettings").remove(),$('<div id="elementSettings" class="label"><textarea rows="3" style="width: 99%;">'+i.text+'</textarea><br/>Размер шрифта:<br/><select id="elementSize"><option '+r+' value="'+this.sizes[0]+'">Маленький</option><option '+n+' value="'+this.sizes[1]+'">Средний</option><option '+a+' value="'+this.sizes[2]+'">Большой</option></select><img class="save" style="margin-left: 15px; margin-top: 3px;" src="/i/admin/btn/save.gif"/><div class="close">[X]</div></div>').prependTo($(this.layer.chart.container).parent()),$("#elementSettings.label").css({"margin-left":e.x+2,"margin-top":e.y+2});var s=this,o=function(){s.remove()};return $("#elementSettings .save").unbind("mousedown").mousedown((function(t){t.stopPropagation();var e,i={text:$("#elementSettings.label textarea").val(),size:$("#elementSettings.label #elementSize").val()};$("#elementSettings.label textarea").val().length?(e=i,s.setSettings(e),$("#elementSettings.label").remove()):(o(),$("#elementSettings.label").remove())})),$("#elementSettings.label .close").unbind("mousedown").mousedown((function(t){t.stopPropagation(),s.settings.text.length||o(),$("#elementSettings.label").remove()})),!1},iChart.Charting.ChartLabel.prototype.setTestSegments=function(){var t=this.layer.context,e=this.settings,i=e.size;t.font=i+"px Arial,Helvetica,sans-serif",t.fillStyle="#000000";for(var r=0,n=0,a=e.text.split("\n"),s=0;s<a.length;s++)t.measureText(a[s]).width>r&&(r=t.measureText(a[s]).width,n+=i);this.testContext.segments=[[this.testContext.points[0],{x:this.testContext.points[0].x+r,y:this.testContext.points[0].y}],[{x:this.testContext.points[0].x+r,y:this.testContext.points[0].y},{x:this.testContext.points[0].x+r,y:this.testContext.points[0].y+n}],[{x:this.testContext.points[0].x+r,y:this.testContext.points[0].y+n},{x:this.testContext.points[0].x,y:this.testContext.points[0].y+n}],[{x:this.testContext.points[0].x,y:this.testContext.points[0].y+n},this.testContext.points[0]]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartArrow=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Arrow",this.drawType="manually",this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartArrow,iChart.Charting.ChartElement),iChart.Charting.ChartArrow.prototype.drawInternal=function(t,e){if(!(e.length<2)){t.save(),this.initDrawSettings(t,this.settings);var i=e[0].x,r=e[0].y,n=e[1].y,a=e[1].x,s=2*(5+t.lineWidth),o=(t.lineWidth,Math.atan2(n-r,a-i));t.beginPath(),t.moveTo(a,n),t.lineTo(a-s*Math.cos(o-Math.PI/6),n-s*Math.sin(o-Math.PI/6)),t.lineTo(a-s*Math.cos(o+Math.PI/6),n-s*Math.sin(o+Math.PI/6)),t.lineTo(a,n),t.lineTo(a-s*Math.cos(o-Math.PI/6),n-s*Math.sin(o-Math.PI/6)),t.fillStyle=t.strokeStyle,t.fill(),t.stroke(),t.beginPath(),t.moveTo(i,r),t.lineTo((a-s*Math.cos(o-Math.PI/6)+a-s*Math.cos(o+Math.PI/6))/2,(n-s*Math.sin(o-Math.PI/6)+n-s*Math.sin(o+Math.PI/6))/2),t.stroke(),t.restore()}}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartPolygon=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Polygon",this.drawType="manually",this.maxPointCount=4,this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartPolygon,iChart.Charting.ChartElement),iChart.Charting.ChartPolygon.prototype.drawInternal=function(t,e){if(!(e.length<2||(t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke(),e.length<3)))if(t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y),e.length<4)t.fill();else{var i=this.settings;t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke(),t.beginPath(),t.strokeStyle=i.strokeStyle2,t.lineTo(e[2].x,e[2].y),t.lineTo(e[3].x,e[3].y),t.stroke(),t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.lineTo(e[2].x,e[2].y),t.lineTo(e[3].x,e[3].y),t.fill()}},iChart.Charting.ChartPolygon.prototype.setTestSegments=function(){this.testContext.segments=[[this.testContext.points[0],this.testContext.points[1]],[this.testContext.points[2],this.testContext.points[3]]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartTrade=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Trade",this.drawType="manually",this.maxPointCount=1,this.hasSettings=!0,this.controlEnable=!1,this.id=0},inheritPrototype(iChart.Charting.ChartTrade,iChart.Charting.ChartElement),iChart.Charting.ChartTrade.prototype.drawInternal=function(t,e){e.length<1||(t.save(),t.beginPath(),t.arc(e[0].x,e[0].y,5,0,2*Math.PI,!0),1==this.settings.type_id||3==this.settings.type_id?t.fillStyle="#00ff00":t.fillStyle="#ff0000",t.inHover&&(t.fillStyle="#0000ff",t.stokeStyle="#000"),t.fill(),t.closePath(),""!==this.settings.qb&&(t.beginPath(),t.strokeStyle=t.fillStyle,t.moveTo(e[0].x+5,e[0].y),t.lineTo(t.canvas.width,e[0].y),t.closePath(),t.stroke()),2==this.settings.mode&&this.drawTradeLable(t,e[0].x,e[0].y,this.settings),t.globalAlpha=.3,t.lineWidth=1,t.stokeStyle="#eee",t.restore())},iChart.Charting.ChartTrade.prototype.drawTradeLable=function(t,e,i,r){var n=parseFloat(r.price),a=function(t,e){var i=parseInt(t.volume)+"@"+e;return 1===t.type_id?"B: "+i:2===t.type_id?"S: "+i:3===t.type_id?"TP: "+i:4===t.type_id?"SL: "+i:void 0}(r,n=n<100?iChart.formatNumber(n,{decimalPlaces:null,decimalPrecision:6,scale:0}):iChart.formatNumber(n,{decimalPlaces:2,decimalPrecision:null,scale:0}));t.save(),t.font="normal 11px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.busyPoints=t.busyPoints?t.busyPoints:{},t.setLineDash&&t.setLineDash([5]);var s=e+20,o=70,h=t.measureText(a).width+10,l=s+h,c=0;for(o=70;o<=this.layer.area.innerHeight;o+=30){c=1;for(var u=$.map(t.busyPoints,(function(t,e){return t.y==o?t:null})),d=0;d<u.length&&c;d++)(e<=u[d].maxX&&e>=u[d].minX||l<=u[d].maxX&&l>=u[d].minX||e<=u[d].minX&&l>=u[d].maxX)&&(c=0);if(c)break}t.beginPath(),t.strokeStyle="#C5C5C5",t.fillStyle="rgba(238,238,238,0.5)",t.rect(s,o-10,h,20),t.fill(),t.moveTo(e,i+(o>i?5:-5)),t.lineTo(e,o),t.lineTo(s,o),t.moveTo(e,i+(o>i?5:-5)),t.stroke(),t.fillStyle="#000",t.fillText(a,e+24,o),t.busyPoints[r.id]={minX:e,maxX:s+h,y:o},t.restore()},iChart.Charting.ChartTrade.prototype.onHover=function(t){var e=this.getCoordinates(t,this.points),i=e[0].y,r=e[0].x;this.drawTooltip(this.settings,i,r)},iChart.Charting.ChartTrade.prototype.onOut=function(t){$("[chart-element-tooltip]").hide()},iChart.Charting.ChartTrade.prototype.drawTooltip=function(t,e,i){0==this.layer.chart.env.wrapper.find("[chart-element-tooltip]").length&&$(this.layer.chart.container).append('<div chart-element-tooltip class="qtip qtip-default qtip-tipsy qtip-pos-rc" tracking="false" role="alert" aria-live="polite" aria-atomic="false" style="z-index: 15002;"><div class="qtip-tip" style="background-color: transparent ! important; border: 0px none ! important; height: 6px; width: 6px; line-height: 6px; top: 50%; margin-top: -3px; right: -6px;"><canvas style="background-color: transparent ! important; border: 0px none ! important;" height="6" width="6"></canvas></div><div class="qtip-content" id="qtip-34-content" aria-atomic="true"></div></div></div>');var r=$("<div>"+(1==t.type_id?"Покупка":"Продажа")+"<br/>Дата: "+(this.layer.chart._dataSettings.timeframe>=1440?t.date_time.substr(0,10):t.date_time)+"<br/>Сделок: "+t.count+"<br/>Количество: "+iChart.formatNumber(parseFloat(t.volume),{decimalPlaces:0,decimalPrecision:null,scale:0})+"<br/>Сумма: "+(t.summ<100?iChart.formatNumber(parseFloat(t.summ),{decimalPlaces:null,decimalPrecision:6,scale:0}):iChart.formatNumber(parseFloat(t.summ),{decimalPlaces:2,decimalPrecision:null,scale:0}))+"<br/>Цена: "+(t.price<100?iChart.formatNumber(parseFloat(t.price),{decimalPlaces:null,decimalPrecision:6,scale:0}):iChart.formatNumber(parseFloat(t.price),{decimalPlaces:2,decimalPrecision:null,scale:0}))+"<br/>"+(0==parseFloat(t.profit)?"":parseFloat(t.profit)>0?"Прибыль: ":"Убыток: ")+(0!=parseFloat(t.profit)?iChart.formatNumber(parseFloat(t.profit),{decimalPlaces:2,decimalPrecision:2,scale:0})+"<br/>":"")+"</div>");$("[chart-element-tooltip] .qtip-content").html(r),$("[chart-element-tooltip]").css({top:Math.max(e-$("[chart-element-tooltip]").height()-12,0)+"px",left:i+12+"px"}).show()},iChart.Charting.ChartTrade.prototype.setTestSegments=function(){this.testContext.segments=[[this.testContext.points[0],{x:this.testContext.points[0].x,y:this.testContext.points[0].y}]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartBubble=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Bubble",this.drawType="manually",this.maxPointCount=3,this.hasSettings=!0,this.hasPopupSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings,{text:""})},inheritPrototype(iChart.Charting.ChartBubble,iChart.Charting.ChartElement),iChart.Charting.ChartBubble.prototype.onInsert=function(){this.selected=!0;var t=this.getCoordinates(null,this.points);t.length<2||(this.settings.width=t[1].x-t[0].x,this.settings.height=t[1].y-t[0].y)},iChart.Charting.ChartBubble.prototype.drawInternal=function(t,e){if(!(e.length<2)){if(void 0!==this.markers){e[1].x,e[0].x,e[1].y,e[0].y;this.settings.width=e[1].x-e[0].x,this.settings.height=e[1].y-e[0].y}else this.settings.width&&this.settings.height&&(this.points[1].x=1e3*this.layer.area.getXValue(e[0].x+this.settings.width),this.points[1].y=this.layer.area.getYValue(e[0].y+this.settings.height),e[1].x=this.layer.area.getXPositionByValue(this.points[1].x/1e3),e[1].y=this.layer.area.getYPosition(this.points[1].y));this.initDrawSettings(t,this.settings),this.drawBubble(t,e)}},iChart.Charting.ChartBubble.prototype.drawBubble=function(t,e){var i,r,n=Math.abs(e[0].x-e[1].x),a=Math.abs(e[0].y-e[1].y),s=e[0].x<e[1].x,o=e[0].y<e[1].y,h=[{},{},{}],l=80,c=!1,u=!1;if(i=Math.min(parseInt(n/3),parseInt(a/3),25),t.save(),t.lineJoin="miter",t.beginPath(),void 0!==e[2]&&Math.abs(e[0].x-e[1].x)>2*i&&Math.abs(e[0].y-e[1].y)>2*i&&!(e[2].x<Math.max(e[0].x,e[1].x)&&e[2].x>Math.min(e[0].x,e[1].x)&&e[2].y<Math.max(e[0].y,e[1].y)&&e[2].y>Math.min(e[0].y,e[1].y)))if(Math.abs(e[0].x-e[2].x)<Math.abs(e[1].x-e[2].x)?h[0].x=e[0].x:h[0].x=e[1].x,Math.abs(e[0].y-e[2].y)<Math.abs(e[1].y-e[2].y)?h[0].y=e[0].y:h[0].y=e[1].y,e[2].x>Math.min(e[0].x,e[1].x)&&e[2].x<Math.max(e[0].x,e[1].x)?c=!0:e[2].y>Math.min(e[0].y,e[1].y)&&e[2].y<Math.max(e[0].y,e[1].y)||Math.abs((h[0].x-e[2].x)*(s?1:-1))>Math.abs((h[0].y-e[2].y)*(o?1:-1))?u=!0:c=!0,c){var d=Math.abs(h[0].y-e[2].y)*Math.sin(Math.PI/12);l=parseInt(n/6);var p=parseInt(n-2*i);r=d<l&&d<p?d:Math.min(l,p);var f=s?Math.min(e[1].x-i,Math.max(e[0].x+i,e[2].x)):Math.min(e[0].x-i,Math.max(e[1].x+i,e[2].x));h[1].x=f-r/2,h[2].x=f+r/2,h[1].y=h[2].y=h[0].y,s&&Math.min(h[1].x,h[2].x)<e[0].x+i||!s&&Math.min(h[1].x,h[2].x)<e[1].x+i?(h[1].x=h[0].x+i,h[2].x=h[1].x+r):(s&&Math.max(h[1].x,h[2].x)>e[1].x-i||!s&&Math.max(h[1].x,h[2].x)>e[0].x-i)&&(h[1].x=h[0].x-i,h[2].x=h[1].x-r)}else if(u){d=Math.abs(h[0].x-e[2].x)*Math.sin(Math.PI/12);l=parseInt(a/6);p=parseInt(a-2*i);r=d<l&&d<p?d:Math.min(l,p);var g=o?Math.min(e[1].y-i,Math.max(e[0].y+i,e[2].y)):Math.min(e[0].y-i,Math.max(e[1].y+i,e[2].y));h[1].y=g-r/2,h[2].y=g+r/2,h[1].x=h[2].x=h[0].x,o&&Math.min(h[1].y,h[2].y)<e[0].y+i||!o&&Math.min(h[1].y,h[2].y)<e[1].y+i?(h[1].y=h[0].y+i,h[2].y=h[1].y+r):(o&&Math.max(h[1].y,h[2].y)>e[1].y-i||!o&&Math.max(h[1].y,h[2].y)>e[0].y-i)&&(h[1].y=h[0].y-i,h[2].y=h[1].y-r)}t.moveTo(e[0].x+(s?i:-i),e[0].y),c&&h[0].y==e[0].y?(t.lineTo(s?Math.min(h[1].x,h[2].x):Math.max(h[1].x,h[2].x),h[1].y),t.lineTo(e[2].x,e[2].y),t.lineTo(s?Math.max(h[1].x,h[2].x):Math.min(h[1].x,h[2].x),h[2].y),t.lineTo(e[1].x-(s?i:-i),e[0].y)):t.lineTo(e[1].x-(s?i:-i),e[0].y),t.quadraticCurveTo(e[1].x,e[0].y,e[1].x,e[0].y+(o?i:-i)),u&&h[0].x==e[1].x?(t.lineTo(h[1].x,o?Math.min(h[1].y,h[2].y):Math.max(h[1].y,h[2].y)),t.lineTo(e[2].x,e[2].y),t.lineTo(h[1].x,o?Math.max(h[1].y,h[2].y):Math.min(h[1].y,h[2].y)),t.lineTo(e[1].x,e[1].y-(o?i:-i))):t.lineTo(e[1].x,e[1].y-(o?i:-i)),t.quadraticCurveTo(e[1].x,e[1].y,e[1].x-(s?i:-i),e[1].y),c&&h[0].y==e[1].y?(t.lineTo(s?Math.max(h[1].x,h[2].x):Math.min(h[1].x,h[2].x),h[2].y),t.lineTo(e[2].x,e[2].y),t.lineTo(s?Math.min(h[1].x,h[2].x):Math.max(h[1].x,h[2].x),h[1].y),t.lineTo(e[0].x+(s?i:-i),e[1].y)):t.lineTo(e[0].x+(s?i:-i),e[1].y),t.quadraticCurveTo(e[0].x,e[1].y,e[0].x,e[1].y-(o?i:-i)),u&&h[0].x==e[0].x?(t.lineTo(h[1].x,o?Math.max(h[1].y,h[2].y):Math.min(h[1].y,h[2].y)),t.lineTo(e[2].x,e[2].y),t.lineTo(h[1].x,o?Math.min(h[1].y,h[2].y):Math.max(h[1].y,h[2].y)),t.lineTo(e[0].x,e[0].y+(o?i:-i))):t.lineTo(e[0].x,e[0].y+(o?i:-i)),t.quadraticCurveTo(e[0].x,e[0].y,e[0].x+(s?i:-i),e[0].y),t.closePath(),t.fill(),t.stroke(),this.drawText(t,e,i,""),t.restore()},iChart.Charting.ChartBubble.prototype.drawText=function(t,e,i,r){var n=Math.abs(e[0].x-e[1].x)-parseInt(2*i/3)-10,a=Math.abs(e[0].y-e[1].y)-parseInt(2*i/3)-10,s=Math.min(e[0].x,e[1].x)+parseInt(i/3)+5,o=Math.min(e[0].y,e[1].y)+parseInt(i/3)+5,h=this.settings;if(this.selected){var l=o,c=s+this.layer.area.innerOffset.left;$("#chart-bubble-text").is(":visible")?this.settings.text=$("#chart-bubble-text").val():(0==$("#chart-element-bubble").length&&$(this.layer.chart.container).append('<div id="chart-element-bubble" style="z-index: 15002; position: absolute; "><textarea id="chart-bubble-text"></textarea></div>'),$("#chart-bubble-text").val("").focus().val(this.settings.text)),$("#chart-bubble-text").css({font:"normal "+this.settings.fontSize+"px/"+(parseInt(this.settings.fontSize)+Math.round(parseInt(this.settings.fontSize)/5))+"px "+this.settings.fontFamaly,background:"rgba(230,230,230,.0)",color:this.settings.fontColor,overflow:"hidden",border:"0px solid red",width:n+"px",height:a+"px"}),$("#chart-element-bubble").css({top:l+"px",left:c-2+"px"}).show(),$("#chart-bubble-text").width(n-2).height(a-2),$("#chart-element-bubble").off("click mousedown drag dragstart").on("click mousedown drag dragstart",(function(t){t.stopPropagation()}))}else{r=h.text,t.save(),t.beginPath(),t.fillStyle=this.settings.fontColor,t.font="normal "+this.settings.fontSize+"px "+this.settings.fontFamaly,t.textAlign="left",t.textBaseline="top",t.rect(s,o,n,a),t.clip(),t.translate(s,o);for(var u=(r=r.replace(/\n/g," [%br%] ")).split(/\s/),d=u.length,p="",f=0+Math.round(parseInt(this.settings.fontSize)/10),g=parseInt(this.settings.fontSize)+Math.round(parseInt(this.settings.fontSize)/5),v=0;v<d;v++){var m=p+u[v]+" ",y=t.measureText(m).width;"[%br%]"==u[v]?(t.fillText(p,0,f),p="",f+=g):y>n?(t.fillText(p,0,f),p=u[v]+" ",f+=g):p=m}t.fillText(p,0,f),t.closePath(),t.restore()}},iChart.Charting.ChartBubble.prototype.drawPopupSettings=function(t,e){var i={options:{sizes:[{name:8,value:8},{name:9,value:9},{name:10,value:10},{name:11,value:11},{name:12,value:12},{name:14,value:14},{name:16,value:16},{name:20,value:20},{name:24,value:24},{name:28,value:28},{name:32,value:32},{name:40,value:40}],fonts:[{name:"Verdana",value:"Verdana,Tahoma,Geneva,Arial,Sans-serif"},{name:"Courier New",value:"Courier New,Monospace"},{name:"Times New Roman",value:"TimesNewRoman,Times,Baskerville,Georgia,serif"},{name:"Arial",value:"Arial,Helvetica,sans-serif"}]},values:{fontSize:this.settings.fontSize,fontColor:this.settings.fontColor,fontFamaly:this.settings.fontFamaly,text:this.settings.text}},r=$($.render.iChart_textPopupSettingsTmpl(i)),n=this,a=function(t,e){var i=$(this).val(),n=i,a=$(this).attr("data-option");i.match(/^rgb.*/)||(n=iChart.hexToRGB(i,e)),r.find('.js-colorSelector[data-option="'+a+'"]').css("background-color",n),r.find('input[data-option="'+a+'"]').val(n),$(this).minicolors("value",n)},s=function(){var t=this.value,e=this.element.attr("data-option"),i=t;t.match(/^rgb.*/)||(i=iChart.hexToRGB(t,1)),r.find('.js-colorSelector[data-option="'+e+'"]').css("background-color",i),r.find('input[data-option="'+e+'"]').val(i),this.element.parent().find(".js-colorPicker").minicolors("value",i)};r.find(".js-colorSelector").each((function(){var t=$(this),e=t.find(".menuHolder").html();t.qtip({style:{classes:"qtip-light"},position:{at:"center right",my:"left center",effect:!1,viewport:$("html"),adjust:{method:"shift none"}},content:{text:e},hide:{fixed:!0,delay:300},show:{solo:!0},events:{show:function(t,e){$(t.currentTarget).find(".js-colorPicker").each((function(){n.layer.chart.env.ui.addMinicolors(this,t.currentTarget,a,s)}))}}})})),r.on("click",".js-textPopupSettings",{popupWindow:r,element:n},(function(t){"ok"==$(this).data("value")&&(t.data.element.settings.fontSize=t.data.popupWindow.find("[name='fontSize']").val(),t.data.element.settings.fontFamaly=t.data.popupWindow.find("[name='fontFamaly']").val(),t.data.element.settings.text=t.data.popupWindow.find("[name='text']").val(),$("#chart-bubble-text").val(t.data.element.settings.text),t.data.element.settings.fontColor=t.data.popupWindow.find("input[data-option='fontColor']").val(),t.data.element.layer.render()),$.modal.impl.d.data&&$.modal.impl.close()})),this.layer.chart.env.wrapper.append(r),r.modal({modal:!1,minWidth:500,zIndex:1500,position:[e.y+"px",e.x+"px"],title:_t("17599","Настройки текста")})},iChart.Charting.ChartBubble.prototype.onSelect=function(t){iChart.Charting.ChartElement.prototype.onSelect.call(this,t),0==$("#chart-element-bubble").length&&($(this.layer.chart.container).append('<div id="chart-element-bubble" style="z-index: 15002; position: absolute; "><textarea id="chart-bubble-text"></textarea></div>'),$("#chart-bubble-text").css({font:"normal "+this.settings.fontSize+"px/"+(parseInt(this.settings.fontSize)+Math.round(parseInt(this.settings.fontSize)/5))+"px "+this.settings.fontFamaly,background:"rgba(230,230,230,.0)",color:this.settings.fontColor,overflow:"hidden",border:"0px solid red"})),$("#chart-bubble-text").val("").focus().val(this.settings.text)},iChart.Charting.ChartBubble.prototype.onBlur=function(t){var e=this.settings;e.text=$("#chart-bubble-text").val(),this.setSettings(e),$("#chart-element-bubble").css({top:"-12000px",left:"-12000px"}).remove()},iChart.Charting.ChartBubble.prototype.onHover=function(t){this.selected&&(this.settings.text=$("#chart-bubble-text").val())},iChart.Charting.ChartBubble.prototype.onOut=function(t){this.selected&&(this.settings.text=$("#chart-bubble-text").val())},iChart.Charting.ChartBubble.prototype.onRemove=function(){$("#chart-element-bubble").css({top:"-12000px",left:"-12000px"}).hide()},iChart.Charting.ChartBubble.prototype.drawCheckPoint=function(t,e,i,r){t.strokeText(r,e,i),t.beginPath(),t.save(),t.strokeStyle="rgba(50,50,50,.4)",t.arc(e,i,40,0,2*Math.PI,!0),t.stroke(),t.beginPath(),t.lineWidth="3",t.arc(e,i,1,0,2*Math.PI,!0),t.stroke(),t.restore()},iChart.Charting.ChartBubble.prototype.setTestSegments=function(){this.testContext.segments=[[this.testContext.points[0],{x:this.testContext.points[0].x,y:this.testContext.points[1].y}],[{x:this.testContext.points[0].x,y:this.testContext.points[1].y},this.testContext.points[1]],[this.testContext.points[1],{x:this.testContext.points[1].x,y:this.testContext.points[0].y}],[{x:this.testContext.points[1].x,y:this.testContext.points[0].y},this.testContext.points[0]]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartText=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Text",this.drawType="manually",this.maxPointCount=2,this.hasSettings=!0,this.hasPopupSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings,{text:""})},inheritPrototype(iChart.Charting.ChartText,iChart.Charting.ChartElement),iChart.Charting.ChartText.prototype.onInsert=function(){this.selected=!0;var t=this.getCoordinates(null,this.points);t.length<2||(this.settings.width=t[1].x-t[0].x,this.settings.height=t[1].y-t[0].y)},iChart.Charting.ChartText.prototype.drawInternal=function(t,e){if(!(e.length<2)){if(void 0!==this.markers){e[1].x,e[0].x,e[1].y,e[0].y;this.settings.width=e[1].x-e[0].x,this.settings.height=e[1].y-e[0].y}else this.settings.width&&this.settings.height&&(this.points[1].x=1e3*this.layer.area.getXValue(e[0].x+this.settings.width),this.points[1].y=this.layer.area.getYValue(e[0].y+this.settings.height),e[1].x=this.layer.area.getXPositionByValue(this.points[1].x/1e3),e[1].y=this.layer.area.getYPosition(this.points[1].y));this.initDrawSettings(t,this.settings),this.drawLabel(t,e)}},iChart.Charting.ChartText.prototype.drawLabel=function(t,e){var i,r=Math.abs(e[0].x-e[1].x),n=Math.abs(e[0].y-e[1].y),a=e[0].x<e[1].x,s=e[0].y<e[1].y;i=Math.min(parseInt(r/3),parseInt(n/3),5),t.save(),t.beginPath(),t.moveTo(e[0].x+(a?i:-i),e[0].y),t.lineTo(e[1].x-(a?i:-i),e[0].y),t.quadraticCurveTo(e[1].x,e[0].y,e[1].x,e[0].y+(s?i:-i)),t.lineTo(e[1].x,e[1].y-(s?i:-i)),t.quadraticCurveTo(e[1].x,e[1].y,e[1].x-(a?i:-i),e[1].y),t.lineTo(e[0].x+(a?i:-i),e[1].y),t.quadraticCurveTo(e[0].x,e[1].y,e[0].x,e[1].y-(s?i:-i)),t.lineTo(e[0].x,e[0].y+(s?i:-i)),t.quadraticCurveTo(e[0].x,e[0].y,e[0].x+(a?i:-i),e[0].y),t.closePath(),t.fill(),t.stroke(),this.drawText(t,e,i,""),t.restore()},iChart.Charting.ChartText.prototype.drawText=function(t,e,i,r){var n=Math.abs(e[0].x-e[1].x)-parseInt(2*i/3)-10,a=Math.abs(e[0].y-e[1].y)-parseInt(2*i/3)-10,s=Math.min(e[0].x,e[1].x)+parseInt(i/3)+5,o=Math.min(e[0].y,e[1].y)+parseInt(i/3)+5,h=this.settings;if(this.selected){var l=o,c=s+this.layer.area.innerOffset.left;$("#chart-bubble-text").is(":visible")?this.settings.text=$("#chart-bubble-text").val():(0==$("#chart-element-bubble").length&&$(this.layer.chart.container).append('<div id="chart-element-bubble" style="z-index: 15002; position: absolute; "><textarea id="chart-bubble-text"></textarea></div>'),$("#chart-bubble-text").val("").focus().val(this.settings.text)),$("#chart-bubble-text").css({font:"normal "+this.settings.fontSize+"px/"+(parseInt(this.settings.fontSize)+Math.round(parseInt(this.settings.fontSize)/5))+"px "+this.settings.fontFamaly,background:"rgba(230,230,230,.0)",color:this.settings.fontColor,overflow:"hidden",border:"0px solid red",width:n+"px",height:a+"px"}),$("#chart-element-bubble").css({top:l-0+"px",left:c-1+"px"}).show(),$("#chart-bubble-text").width(n-2).height(a-2),$("#chart-element-bubble").off("click mousedown drag dragstart").on("click mousedown drag dragstart",(function(t){t.stopPropagation()}))}else{r=h.text,t.save(),t.beginPath(),t.fillStyle=this.settings.fontColor,t.font="normal "+this.settings.fontSize+"px "+this.settings.fontFamaly,t.textAlign="left",t.textBaseline="top",t.rect(s,o,n,a),t.clip(),t.translate(s,o);for(var u=(r=r.replace(/\n/g," [%br%] ")).split(/\s/),d=u.length,p="",f=0+Math.round(parseInt(this.settings.fontSize)/10),g=parseInt(this.settings.fontSize)+Math.round(parseInt(this.settings.fontSize)/5),v=0;v<d;v++){var m=p+u[v]+" ",y=t.measureText(m).width;"[%br%]"==u[v]?(t.fillText(p,0,f),p="",f+=g):y>n?(t.fillText(p,0,f),p=u[v]+" ",f+=g):p=m}t.fillText(p,0,f),t.closePath(),t.restore()}},iChart.Charting.ChartText.prototype.drawPopupSettings=function(t,e){var i={options:{sizes:[{name:8,value:8},{name:9,value:9},{name:10,value:10},{name:11,value:11},{name:12,value:12},{name:14,value:14},{name:16,value:16},{name:20,value:20},{name:24,value:24},{name:28,value:28},{name:32,value:32},{name:40,value:40}],fonts:[{name:"Verdana",value:"Verdana,Tahoma,Geneva,Arial,Sans-serif"},{name:"Courier New",value:"Courier New,Monospace"},{name:"Times New Roman",value:"TimesNewRoman,Times,Baskerville,Georgia,serif"},{name:"Arial",value:"Arial,Helvetica,sans-serif"}]},values:{fontSize:this.settings.fontSize,fontColor:this.settings.fontColor,fontFamaly:this.settings.fontFamaly,text:this.settings.text}},r=$($.render.iChart_textPopupSettingsTmpl(i)),n=this,a=function(t,e){var i=$(this).val(),n=i,a=$(this).attr("data-option");i.match(/^rgb.*/)||(n=iChart.hexToRGB(i,e)),r.find('.js-colorSelector[data-option="'+a+'"]').css("background-color",n),r.find('input[data-option="'+a+'"]').val(n),$(this).minicolors("value",n)},s=function(){var t=this.value,e=this.element.attr("data-option"),i=t;t.match(/^rgb.*/)||(i=iChart.hexToRGB(t,1)),r.find('.js-colorSelector[data-option="'+e+'"]').css("background-color",i),r.find('input[data-option="'+e+'"]').val(i),this.element.parent().find(".js-colorPicker").minicolors("value",i)};r.find(".js-colorSelector").each((function(){var t=$(this),e=t.find(".menuHolder").html();t.qtip({style:{classes:"qtip-light"},position:{at:"center right",my:"left center",effect:!1,viewport:$("html"),adjust:{method:"shift none"}},content:{text:e},hide:{fixed:!0,delay:300},show:{solo:!0},events:{show:function(t,e){$(t.currentTarget).find(".js-colorPicker").each((function(){n.layer.chart.env.ui.addMinicolors(this,t.currentTarget,a,s)}))}}})})),r.on("click",".js-textPopupSettings",{popupWindow:r,element:n},(function(t){"ok"==$(this).data("value")&&(t.data.element.settings.fontSize=t.data.popupWindow.find("[name='fontSize']").val(),t.data.element.settings.fontFamaly=t.data.popupWindow.find("[name='fontFamaly']").val(),t.data.element.settings.text=t.data.popupWindow.find("[name='text']").val(),$("#chart-bubble-text").val(t.data.element.settings.text),t.data.element.settings.fontColor=t.data.popupWindow.find("input[data-option='fontColor']").val(),t.data.element.layer.render()),$.modal.impl.d.data&&$.modal.impl.close()})),this.layer.chart.env.wrapper.append(r),r.modal({modal:!1,minWidth:500,zIndex:1500,position:[e.y+"px",e.x+"px"],title:_t("17599","Настройки текста")})},iChart.Charting.ChartText.prototype.onSelect=function(t){iChart.Charting.ChartElement.prototype.onSelect.call(this,t),0==$("#chart-element-bubble").length&&($(this.layer.chart.container).append('<div id="chart-element-bubble" style="z-index: 15002; position: absolute; "><textarea id="chart-bubble-text"></textarea></div>'),$("#chart-bubble-text").css({font:"normal "+this.settings.fontSize+"px/"+(parseInt(this.settings.fontSize)+Math.round(parseInt(this.settings.fontSize)/5))+"px "+this.settings.fontFamaly,background:"rgba(230,230,230,.0)",color:this.settings.fontColor,overflow:"hidden",border:"0px solid red"})),$("#chart-bubble-text").val("").focus().val(this.settings.text)},iChart.Charting.ChartText.prototype.onBlur=function(t){var e=this.settings;e.text=$("#chart-bubble-text").val(),this.setSettings(e),$("#chart-element-bubble").css({top:"-12000px",left:"-12000px"}).remove()},iChart.Charting.ChartText.prototype.onHover=function(t){this.selected&&(this.settings.text=$("#chart-bubble-text").val())},iChart.Charting.ChartText.prototype.onOut=function(t){this.selected&&(this.settings.text=$("#chart-bubble-text").val())},iChart.Charting.ChartText.prototype.onRemove=function(){$("#chart-element-bubble").css({top:"-12000px",left:"-12000px"}).hide()},iChart.Charting.ChartText.prototype.drawCheckPoint=function(t,e,i,r){t.strokeText(r,e,i),t.beginPath(),t.save(),t.strokeStyle="rgba(50,50,50,.4)",t.arc(e,i,40,0,2*Math.PI,!0),t.stroke(),t.beginPath(),t.lineWidth="3",t.arc(e,i,1,0,2*Math.PI,!0),t.stroke(),t.restore()},iChart.Charting.ChartText.prototype.setTestSegments=function(){this.testContext.segments=[[this.testContext.points[0],{x:this.testContext.points[0].x,y:this.testContext.points[1].y}],[{x:this.testContext.points[0].x,y:this.testContext.points[1].y},this.testContext.points[1]],[this.testContext.points[1],{x:this.testContext.points[1].x,y:this.testContext.points[0].y}],[{x:this.testContext.points[1].x,y:this.testContext.points[0].y},this.testContext.points[0]]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartOrder=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Order",this.drawType="auto",this.hoverCursor="row-resize",this.moveCursor="row-resize",this.maxPointCount=1,this.hasSettings=!0,this.controlEnable=!1,this.storageEnable=!1,this.settings={},this.positionAbsolute=!0},inheritPrototype(iChart.Charting.ChartOrder,iChart.Charting.ChartElement),iChart.Charting.ChartOrder.prototype.drawInternal=function(t,e){if(!(e.length<1)){this.settings.fillStyle=this.settings.fillStyle||"#3AAE3E";var i=this.layer.chart.areas[0].xSeries[this.layer.chart.areas[0].xSeries.length-this.layer.chart.chartOptions.futureAmount-1];this.points[0].x=1e3*i,e[0].x=this.layer.area.getXPositionByValue(i);var r=this.settings.fillStyle;if(this.selected||t.inHover)t.save(),t.beginPath(),t.strokeStyle=r,t.moveTo(0,e[0].y),t.lineTo(t.canvas.width,e[0].y),t.stroke(),t.restore(),this.drawLable(t,r,this.settings.textColor,e[0].x,e[0].y,this.settings.text);else{t.save(),t.strokeStyle=r,t.lineWidth=1,t.beginPath();for(var n=0;n<=t.canvas.width;n+=20)t.moveTo(n,e[0].y),t.lineTo(n+12,e[0].y);t.stroke(),t.restore()}}},iChart.Charting.ChartOrder.prototype.drawExtended=function(t){if(this.selected){if((i=this.getCoordinates(t,this.points)).length<1)return;var e=iChart.formatNumber(this.points[0].y,{decimalPrecision:this.layer.chart.labelPrecision,scale:0});if(this.layer.chart.renderer.drawLable(t,this.settings.fillStyle,0,this.layer.area.innerWidth,i[0].y,e),void 0!==this.markers){var i=this.getCoordinates(t,this.markers),r=(e=iChart.formatNumber(this.markers[0].y,{decimalPrecision:this.layer.chart.labelPrecision,scale:0}),t.inHover?void 0!==this.settings.fillStyleHover?this.settings.fillStyleHover:iChart.Charting.ChartOrder.lightColor(this.settings.fillStyle):this.settings.fillStyle);this.layer.chart.renderer.drawLable(t,r,0,this.layer.area.innerWidth,i[0].y,e)}}},iChart.Charting.ChartOrder.prototype.drawLable=function(t,e,i,r,n,a){e=e||"#333333",i=i||"#FFFFFF",t.save(),t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle=e,t.lineWidth="2";var s=t.measureText(a).width;r=t.canvas.width-120;t.beginPath(),t.moveTo(r-s-5,n+5),t.lineTo(r-s-5,n-5),t.quadraticCurveTo(r-s-5,n-10,r-s,n-10),t.lineTo(r,n-10),t.quadraticCurveTo(r+5,n-10,r+5,n-5),t.lineTo(r+5,n+5),t.quadraticCurveTo(r+5,n+10,r,n+10),t.lineTo(r-s,n+10),t.quadraticCurveTo(r-s-5,n+10,r-s-5,n+5),t.closePath(),t.save();var o=this.layer.chart.chartOptions.shadowColor;this.selected?(t.shadowColor=o,t.shadowBlur=20,t.shadowOffsetX=15,t.shadowOffsetY=15):t.inHover&&(t.shadowColor=o,t.shadowBlur=10,t.shadowOffsetX=5,t.shadowOffsetY=5),t.fill(),t.restore(),this.drawCancelButton(t,r,n-10),t.fillStyle=i,t.fillText(a,r-s,n),t.restore()},iChart.Charting.ChartOrder.prototype.drawCancelButton=function(t,e,i){t.beginPath(),t.moveTo(e,i),t.strokeStyle="#FFFFFF",t.lineWidth=2,t.lineTo(e,i+20),t.stroke(),t.lineTo(e+15,i+20),t.quadraticCurveTo(e+20,i+20,e+20,i+15),t.lineTo(e+20,i+5),t.quadraticCurveTo(e+20,i,e+15,i),t.closePath(),t.fillStyle="#e53935",t.fill(),t.beginPath(),t.moveTo(e+5,i+5),t.lineTo(e+15,i+15),t.moveTo(e+5,i+15),t.lineTo(e+15,i+5),t.stroke(),t.closePath()},iChart.Charting.ChartOrder.prototype.drawTestSegments=function(t){if(void 0!==this.testContext){for(var e in t.save(),t.beginPath(),t.fillStyle="rgba(0,0,0,0.75)",this.testContext.segments){var i=this.testContext.segments[e];t.moveTo(i[0].x,i[0].y),t.lineTo(i[1].x,i[1].y),t.stroke()}t.closePath(),t.restore()}},iChart.Charting.ChartOrder.prototype.setTestSegments=function(){if(this.selected){var t=this.layer.context;t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle";var e=t.measureText(this.settings.text).width,i=t.canvas.width-120;this.testContext.segments=[[{x:i-e,y:this.testContext.points[0].y-4},{x:i,y:this.testContext.points[0].y-4}],[{x:i,y:this.testContext.points[0].y-4},{x:i,y:this.testContext.points[0].y+4}],[{x:i,y:this.testContext.points[0].y+4},{x:i-e,y:this.testContext.points[0].y+4}],[{x:i-e,y:this.testContext.points[0].y+4},{x:i-e,y:this.testContext.points[0].y-4}],[{x:i-e,y:this.testContext.points[0].y},{x:i,y:this.testContext.points[0].y}],[{x:this.layer.area.innerOffset.left,y:this.testContext.points[0].y},{x:this.layer.area.innerOffset.left+this.layer.area.innerWidth,y:this.testContext.points[0].y}]]}else this.testContext&&(this.testContext.segments=[[{x:this.layer.area.innerOffset.left,y:this.testContext.points[0].y},{x:this.layer.area.innerOffset.left+this.layer.area.innerWidth,y:this.testContext.points[0].y}]])},iChart.Charting.ChartOrder.prototype.onDrag=function(t){"function"==typeof this.settings.restriction&&this.settings.restriction.call(this,t)},iChart.Charting.ChartOrder.prototype.onSelect=function(t){iChart.Charting.ChartElement.prototype.onSelect.call(this,t),this.setTestSegments()},iChart.Charting.ChartOrder.prototype.onBlur=function(){this.setTestSegments()},iChart.Charting.ChartOrder.prototype.onDrop=function(){"function"==typeof this.settings.onDrop&&this.settings.onDrop.call(this)},iChart.Charting.ChartOrder.prototype.onHover=function(){clearTimeout(this.layer.chart.env.timers.orderClose),this.cancelControl(1)},iChart.Charting.ChartOrder.prototype.onOut=function(){clearTimeout(this.layer.chart.env.timers.orderClose);var t=this;this.layer.chart.env.timers.orderClose=setTimeout((function(){t.cancelControl(0)}),300)},iChart.Charting.ChartOrder.prototype.cancelControl=function(t){if("function"==typeof this.settings.onCancel)if(t){$("#ichartOrderCancelCtrl").hide();var e=this.layer.context,i=e.canvas.width-120,r=this.getCoordinates(e,this.points);$("#ichartOrderCancelCtrl").length||$("<span/>",{id:"ichartOrderCancelCtrl",style:"color:transparent",class:"m-chart-instrument-delete",text:"✕",title:_t("2958","Снять")}).hide().appendTo(this.layer.chart.container);var n=this;$("#ichartOrderCancelCtrl").unbind("click").bind("click",(function(t){"function"==typeof n.settings.onCancel&&n.settings.onCancel.call(n),$("#ichartOrderCancelCtrl").hide()})).bind("mouseover",(function(){clearTimeout(n.layer.chart.env.timers.orderClose)})).bind("mouseleave",(function(){clearTimeout(n.layer.chart.env.timers.orderClose),n.layer.chart.env.timers.orderClose=setTimeout((function(){n.cancelControl(0)}),1e3)}));var a=r[0].y-8,s=i+2;$("#ichartOrderCancelCtrl").css({top:a,left:s}).show()}else $("#ichartOrderCancelCtrl").hide()},iChart.Charting.ChartOrder.lightColor=function(t){t=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);for(var e=0;e<3;e++)t[e]=parseInt(t[e])+40;return"rgba("+t.join(", ")+")"},iChart.Charting.ChartOrder.prototype.onMouseDown=function(t){"function"==typeof this.settings.onSelect&&this.settings.onSelect.call(this,t)}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartVisualtrade=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Visualtrade",this.drawType="auto",this.hoverCursor=MOBILE_BROWSER_DETECTED?"move":"url('"+this.layer.chart.env.lib_path+"/styles/cursors/red_vertical_cursor.cur'), move",this.moveCursor=MOBILE_BROWSER_DETECTED?"move":"url('"+this.layer.chart.env.lib_path+"/styles/cursors/red_vertical_cursor.cur'), move",this.maxPointCount=5,this.hasSettings=!0,this.controlEnable=!0,this.storageEnable=!1,this.settings={redColor:"#bc353d",greenColor:"#7fcc1a",blueColor:"#4684c6",greyColor:"#999999",offset:40},this.drawSingle=!0},inheritPrototype(iChart.Charting.ChartVisualtrade,iChart.Charting.ChartElement),iChart.Charting.ChartVisualtrade.prototype.setSettings=function(t){this.settings=$.extend(this.settings,t),this.settings.onDrop=function(t){if(!isNaN(parseInt(t))){var e=parseInt(t)-1;if(0===e)$(jNTChartTrading).trigger("priceExternalUpdate",["price",iChart.roundToPrecision(this.points[0].y,this.layer.chart.env.userSettings.currentSecurity.min_step)]);else if(1===e){"sell_at"==(i=this.getControlValue("order_type"))||"sell"==i?$(jNTChartTrading).trigger("priceExternalUpdate",["tp",iChart.roundToPrecision(this.points[1].y,this.layer.chart.env.userSettings.currentSecurity.min_step)]):$(jNTChartTrading).trigger("priceExternalUpdate",["sl",iChart.roundToPrecision(this.points[1].y,this.layer.chart.env.userSettings.currentSecurity.min_step)])}else if(2===e){var i;"sell_at"==(i=this.getControlValue("order_type"))||"sell"==i?$(jNTChartTrading).trigger("priceExternalUpdate",["sl",iChart.roundToPrecision(this.points[2].y,this.layer.chart.env.userSettings.currentSecurity.min_step)]):$(jNTChartTrading).trigger("priceExternalUpdate",["tp",iChart.roundToPrecision(this.points[2].y,this.layer.chart.env.userSettings.currentSecurity.min_step)])}}},this.priceControl={width:180,height:30},this.elementArea={top:70,bottom:47,left:10,right:10},this.points[0].fActive=1,this.points[1].fActive=0,this.points[2].fActive=0,this.points[0].enable=1,this.points[1].enable=!!this.settings.stoplossEnable,this.points[2].enable=!!this.settings.takeprofitEnable,this.points[1].fHover=0,this.points[2].fHover=0,this.controls={1:{enabled:!1,element:this,x:10,y:10,w:100,h:17,click:function(){this.element.switchControl(this)},type:"order_type",label:_t("4018","Продать"),value:"sell_at",active:!1},2:{enabled:!1,element:this,x:10,y:33,w:100,h:17,click:function(){this.element.switchControl(this)},type:"order_type",label:_t("4875","Продать по рынку"),value:"sell",active:!1},3:{enabled:!1,element:this,x:120,y:10,w:100,h:17,click:function(){this.element.switchControl(this)},type:"order_type",label:_t("4019","Купить"),value:"buy_at",active:!1},4:{enabled:!1,element:this,x:120,y:33,w:100,h:17,click:function(){this.element.switchControl(this)},type:"order_type",label:_t("5452","Купить по рынку"),value:"buy",active:!1},5:{enabled:!1,element:this,x:120,y:-27,w:100,h:17,click:function(){var t=this.element.getControlValue("order_type"),e=iChart.roundToPrecision(this.element.points[0].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step);"buy_at"==t||"buy"==t?(e==Math.min(iChart.roundToPrecision(this.element.points[1].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step),iChart.roundToPrecision(this.element.points[2].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step))&&null,Math.max(iChart.roundToPrecision(this.element.points[1].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step),iChart.roundToPrecision(this.element.points[2].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step))):"sell_at"!=t&&"sell"!=t||(e==Math.min(iChart.roundToPrecision(this.element.points[1].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step),iChart.roundToPrecision(this.element.points[2].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step))&&null,Math.max(iChart.roundToPrecision(this.element.points[1].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step),iChart.roundToPrecision(this.element.points[2].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step)))},type:"action",label:_t("614","Ok"),value:"ok",active:!1},6:{enabled:!1,element:this,x:10,y:-27,w:100,h:17,click:function(){this.element.remove()},type:"action",label:_t("1403","Отмена"),value:"cancel",active:!1},7:{enabled:!0,element:this,click:function(){jNTChartTrading.close(),this.element.layer.chart.env.removeVisualTrade()},type:"close",value:"stoploss"},8:{enabled:!0,element:this,click:function(){jNTChartTrading.close(),this.element.layer.chart.env.removeVisualTrade()},type:"close",value:"takeprofit"},9:{enabled:!0,element:this,active:!0,click:function(){this.element.points[0].fActive=0,jNTChartTrading.close(),this.element.layer.chart.env.removeVisualTrade()},type:"close",value:"price"}};for(var e=0;e<this.settings.controls.length;e++)for(var i in this.controls)this.settings.controls[e].type==this.controls[i].type&&this.settings.controls[e].value==this.controls[i].value&&(this.controls[i].active=!0);this.maps={0:{element:this,click:function(){this.element.points[0].fActive=1,this.element.points[1].fActive=0,this.element.points[2].fActive=0,this.element.setTestSegments(),$(jNTChartTrading).trigger("priceExternalUpdate",["price",iChart.roundToPrecision(this.element.points[0].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step)])},hoverIn:function(){this.element.points[0].fHover=1,this.element.layer.render()},hoverOut:function(){this.element.points[0].fHover=0,this.element.layer.render()},type:"sltp",value:"price"},1:{element:this,click:function(){this.element.points[1].fActive=1,this.element.points[0].fActive=0,this.element.points[2].fActive=0,this.element.setTestSegments();var t=this.element.getControlValue("order_type");"sell_at"==t||"sell"==t?$(jNTChartTrading).trigger("priceExternalUpdate",["tp",iChart.roundToPrecision(this.element.points[1].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step)]):$(jNTChartTrading).trigger("priceExternalUpdate",["sl",iChart.roundToPrecision(this.element.points[1].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step)])},hoverIn:function(){this.element.points[1].fHover=1,this.element.layer.render()},hoverOut:function(){this.element.points[1].fHover=0,this.element.layer.render()},type:"sltp",value:"stoploss"},2:{element:this,click:function(){this.element.points[2].fActive=1,this.element.points[0].fActive=0,this.element.points[1].fActive=0,this.element.setTestSegments();var t=this.element.getControlValue("order_type");"sell_at"==t||"sell"==t?$(jNTChartTrading).trigger("priceExternalUpdate",["sl",iChart.roundToPrecision(this.element.points[2].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step)]):$(jNTChartTrading).trigger("priceExternalUpdate",["tp",iChart.roundToPrecision(this.element.points[2].y,this.element.layer.chart.env.userSettings.currentSecurity.min_step)])},hoverIn:function(){this.element.points[2].fHover=1,this.element.layer.render()},hoverOut:function(){this.element.points[2].fHover=0,this.element.layer.render()},type:"sltp",value:"takeprofit"}}},iChart.Charting.ChartVisualtrade.prototype.drawInternal=function(t,e){if(!(e.length<3)){var i=this.layer.chart.env.viewData.chart.areas[0].getXPositionByIndex(this.layer.chart.env.viewData.chart.areas[0].xSeries.length-1-this.layer.chart.env.viewData.chart.chartOptions.futureAmount)+this.settings.offset;i=Math.min(i,this.layer.chart.env.viewData.chart.areas[0].getXPositionByIndex(this.layer.chart.env.viewData.chart.areas[0].xSeries.length-1));var r=this.layer.chart.env.viewData.chart.areas[0].getXValue(i);this.points[0].x=1e3*r,this.points[1].x=this.points[2].x=this.points[0].x,e[0].x=this.layer.area.getXPositionByValue(r),e[1].x=e[2].x=e[0].x,this.selected&&this.drawArea(t,e),t.fillStyle="rgba(255,255,255,1)";for(var n=e.length-1;n>=0;n--)n>=3||(this.drawPriceBox(t,e,n),this.drawLabel(t,e,n));var a=this.getElementAreaPos(e);this.points[3].y=this.layer.area.getYValue(a[0].y).toFixed(2),this.points[4].y=this.layer.area.getYValue(a[1].y).toFixed(2)}},iChart.Charting.ChartVisualtrade.prototype.drawPoints=function(t,e){},iChart.Charting.ChartVisualtrade.prototype.drawTestSegments=function(t){if(void 0!==this.testContext){for(var e in t.save(),t.fillStyle="#000000",this.testContext.controls){var i=this.testContext.controls[e];t.rect(i[0].x,i[0].y,i[1].x-i[0].x,i[1].y-i[0].y),t.stroke()}t.restore()}},iChart.Charting.ChartVisualtrade.prototype.getColorForPoint=function(t){var e="#999999";switch(t){case 0:e=this.settings.blueColor;break;case 1:this.points[t].fActive&&(e="sell"==this.getControlValue("order_type")||"sell_at"==this.getControlValue("order_type")?this.settings.greenColor:this.settings.redColor);break;case 2:this.points[t].fActive&&(e="sell"==this.getControlValue("order_type")||"sell_at"==this.getControlValue("order_type")?this.settings.redColor:this.settings.greenColor);break;default:e="#5a6378"}return e},iChart.Charting.ChartVisualtrade.prototype.drawExtended=function(t){if(void 0!==this.markers)var e=this.getCoordinates(t,this.markers),i=this.markers;else e=this.getCoordinates(t,this.points),i=this.points;if(!(e.length<1))for(var r=0;r<e.length&&r<3;r++)if(i[r].fActive){var n=iChart.roundToPrecision(i[r].y,this.layer.chart.env.userSettings.currentSecurity.min_step);this.layer.chart.renderer.drawLable(t,this.getColorForPoint(r),0,this.layer.area.innerWidth,e[r].y,n)}},iChart.Charting.ChartVisualtrade.prototype.drawArea=function(t,e){this.getElementAreaPos(e);if(this.selected)for(var i in this.controls){var r=this.controls[i];r.enabled&&this.drawControl(t,e,r)}},iChart.Charting.ChartVisualtrade.prototype.drawControl=function(t,e,i){t.save();var r=this.getElementAreaPos(e);if("order_type"==i.type||"action"==i.type)i.active?t.fillStyle="rgba(57,63,79,1)":t.fillStyle="#ffffff",i.y>=0?t.fillRect(r[0].x+i.x,r[0].y+i.y,i.w,i.h):t.fillRect(r[0].x+i.x,r[1].y+i.y,i.w,i.h),i.active?(t.fillStyle="#ffffff",t.font="normal 11px Arial,Helvetica,sans-serif"):(t.fillStyle="#428bca",t.font="normal 11px Arial,Helvetica,sans-serif"),t.textAlign="left",t.textBaseline="top",i.y>=0?t.fillText(i.label,r[0].x+i.x+2,r[0].y+i.y+4):t.fillText(i.label,r[0].x+i.x+2,r[1].y+i.y+4);else if("close"==i.type){if("stoploss"==i.value||"takeprofit"==i.value){if("sell"==this.getControlValue("order_type")||"sell_at"==this.getControlValue("order_type")){if("stoploss"==i.value&&this.points[2].fActive)var n=e[2];else if("takeprofit"==i.value&&this.points[1].fActive)n=e[1]}else if("buy"==this.getControlValue("order_type")||"buy_at"==this.getControlValue("order_type"))if("stoploss"==i.value&&this.points[1].fActive)n=e[1];else if("takeprofit"==i.value&&this.points[2].fActive)n=e[2]}else if(this.points[0].fActive)n=e[0];n&&(t.fillStyle="#ff9999",t.strokeStyle="#777777",t.beginPath(),t.lineWidth=2,t.moveTo(n.x+this.priceControl.width+10-4,n.y-15-4),t.lineTo(n.x+this.priceControl.width+10+4,n.y-15+4),t.moveTo(n.x+this.priceControl.width+10+4,n.y-15-4),t.lineTo(n.x+this.priceControl.width+10-4,n.y-15+4),t.closePath(),t.stroke())}t.restore()},iChart.Charting.ChartVisualtrade.prototype.drawPriceBox=function(t,e,i){var r="";switch(i){case 0:r=this.settings.blueColor;break;case 1:if(this.points[i].fActive)switch(this.getControlValue("order_type")){case"sell":case"sell_at":r=this.settings.greenColor;break;case"buy":case"buy_at":r=this.settings.redColor}else r=this.settings.greyColor;break;case 2:if(this.points[i].fActive)switch(this.getControlValue("order_type")){case"sell":case"sell_at":r=this.settings.redColor;break;case"buy":case"buy_at":r=this.settings.greenColor}else r=this.settings.greyColor;break;default:r="ffffff"}this.points[i].fActive?(t.save(),t.fillStyle=r,t.beginPath(),t.moveTo(e[i].x-10,e[i].y-10),t.lineTo(e[i].x+this.priceControl.width,e[i].y-10),t.lineTo(e[i].x+this.priceControl.width+8,e[i].y),t.lineTo(e[i].x+this.priceControl.width,e[i].y+10),t.lineTo(e[i].x-10,e[i].y+10),t.lineTo(e[i].x-10,e[i].y-10),t.moveTo(e[i].x+10,e[i].y-10),t.lineTo(e[i].x+10,e[i].y+10),t.closePath(),t.fill(),t.restore(),t.save(),t.strokeStyle="#ffffff",t.beginPath(),t.moveTo(e[i].x-5,e[i].y-3),t.lineTo(e[i].x+5,e[i].y-3),t.moveTo(e[i].x-5,e[i].y),t.lineTo(e[i].x+5,e[i].y),t.moveTo(e[i].x-5,e[i].y+3),t.lineTo(e[i].x+5,e[i].y+3),t.closePath(),t.stroke(),t.strokeStyle=r,t.beginPath(),t.moveTo(e[i].x+this.priceControl.width+8,e[i].y),t.lineTo(t.canvas.width,e[i].y),t.moveTo(0,e[i].y),t.lineTo(e[i].x-10,e[i].y),t.closePath(),t.stroke(),t.restore()):this.points[i].enable&&(t.save(),this.points[i].fHover?t.strokeStyle=this.settings.blueColor:t.strokeStyle="#AAAAAA",t.beginPath(),t.moveTo(e[i].x-10,e[i].y-10),t.lineTo(e[i].x+this.priceControl.width,e[i].y-10),t.lineTo(e[i].x+this.priceControl.width+8,e[i].y),t.lineTo(e[i].x+this.priceControl.width,e[i].y+10),t.lineTo(e[i].x-10,e[i].y+10),t.lineTo(e[i].x-10,e[i].y-10),t.closePath(),t.stroke(),t.restore())},iChart.Charting.ChartVisualtrade.prototype.drawLabel=function(t,e,i){var r="";switch(i){case 0:var n=this.points[0].y;switch(void 0!==this.markers&&(n=this.markers[0].y),this.getControlValue("order_type")){case"sell":r=_t("4875","Продать по рынку");break;case"sell_at":r=_t("4876","Продать по")+iChart.roundToPrecision(n,this.layer.chart.env.userSettings.currentSecurity.min_step);break;case"buy":r=_t("5452","Купить по рынку");break;case"buy_at":r=_t("5458","Купить по")+iChart.roundToPrecision(n,this.layer.chart.env.userSettings.currentSecurity.min_step)}break;case 1:n=this.points[1].y;switch(void 0!==this.markers&&(n=this.markers[1].y),this.getControlValue("order_type")){case"sell":case"sell_at":r=_t("3917","TakeProfit")+" ";var a=100*(this.points[0].y/n-1);break;case"buy":case"buy_at":r=_t("3916","StopLoss")+" ";a=100*(1-this.points[0].y/n)}r+=a.toFixed(2)+"%";break;case 2:n=this.points[2].y;switch(void 0!==this.markers&&(n=this.markers[2].y),this.getControlValue("order_type")){case"sell":case"sell_at":r=_t("3916","StopLoss")+" ";a=100*(1-n/this.points[0].y);break;case"buy":case"buy_at":r=_t("3917","TakeProfit")+" ";a=100*(n/this.points[0].y-1)}r+=a.toFixed(2)+"%"}t.save(),t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle="#ffffff",this.points[i].fActive?t.fillText(r,e[i].x+15,e[i].y):(this.points[i].fHover?t.fillStyle=this.settings.blueColor:t.fillStyle="#AAAAAA",this.points[i].enable&&t.fillText(r,e[i].x+15,e[i].y)),t.restore()},iChart.Charting.ChartVisualtrade.prototype.setTestSegments=function(){this.testContext.segments=[];var t=this.getElementAreaPos(this.testContext.points);for(var e in this.testContext.elementArea=t,this.testContext.controls={},this.controls)if(this.controls[e].enabled)if("order_type"==this.controls[e].type||"action"==this.controls[e].type)this.controls[e].y>=0?this.testContext.controls[e]=[{x:t[0].x+this.controls[e].x,y:t[0].y+this.controls[e].y},{x:t[0].x+this.controls[e].x+this.controls[e].w,y:t[0].y+this.controls[e].y+this.controls[e].h}]:this.testContext.controls[e]=[{x:t[0].x+this.controls[e].x,y:t[1].y+this.controls[e].y},{x:t[0].x+this.controls[e].x+this.controls[e].w,y:t[1].y+this.controls[e].y+this.controls[e].h}];else if("close"==this.controls[e].type){var i=this.controls[e];if("stoploss"==i.value||"takeprofit"==i.value){if("sell"==this.getControlValue("order_type")||"sell_at"==this.getControlValue("order_type")){if("stoploss"==i.value&&this.points[2].fActive)var r=this.testContext.points[2];else if("takeprofit"==i.value&&this.points[1].fActive)r=this.testContext.points[1]}else if("stoploss"==i.value&&this.points[1].fActive)r=this.testContext.points[1];else if("takeprofit"==i.value&&this.points[2].fActive)r=this.testContext.points[2]}else if(this.points[0].fActive)r=this.testContext.points[0];r&&(this.testContext.controls[e]=[{x:r.x+this.priceControl.width+2,y:r.y-23},{x:r.x+this.priceControl.width+2+16,y:r.y-23+16}])}this.testContext.maps={},this.points[0].fActive||(this.testContext.maps[0]=[{x:this.testContext.points[0].x+10,y:this.testContext.points[0].y-10},{x:this.testContext.points[0].x+this.priceControl.width+10,y:this.testContext.points[0].y+10}]),!this.points[1].fActive&&this.points[1].enable&&(this.testContext.maps[1]=[{x:this.testContext.points[1].x+10,y:this.testContext.points[1].y-10},{x:this.testContext.points[1].x+this.priceControl.width+10,y:this.testContext.points[1].y+10}]),!this.points[2].fActive&&this.points[2].enable&&(this.testContext.maps[2]=[{x:this.testContext.points[2].x+10,y:this.testContext.points[2].y-10},{x:this.testContext.points[2].x+this.priceControl.width+10,y:this.testContext.points[2].y+10}])},iChart.Charting.ChartVisualtrade.prototype.onDrag=function(t){"function"==typeof this.settings.restriction&&this.settings.restriction.call(this,t)},iChart.Charting.ChartVisualtrade.prototype.onDrop=function(t){"function"==typeof this.settings.onDrop&&this.settings.onDrop.call(this,t)},iChart.Charting.ChartVisualtrade.prototype.getElementAreaPos=function(t){var e=Math.max.apply(Math,t.map((function(t,e){return e<3?t.y:null}))),i=Math.min.apply(Math,t.map((function(t,i){return i<3?t.y:e})));return this.selected?[{x:t[0].x-this.elementArea.left,y:i-this.elementArea.top},{x:t[0].x+this.priceControl.width+this.elementArea.right,y:e+this.elementArea.bottom}]:[{x:t[0].x-this.elementArea.left,y:i-this.elementArea.top+30},{x:t[0].x+this.priceControl.width+this.elementArea.right,y:e+this.elementArea.bottom}]},iChart.Charting.ChartVisualtrade.prototype.switchControl=function(t){for(var e in this.controls)t.type==this.controls[e].type&&(this.controls[e].active=!1);t.active=!0,this.layer.render()},iChart.Charting.ChartVisualtrade.prototype.getControl=function(t,e){for(var i in this.controls)if(this.controls[i].type==t&&this.controls[i].value==e)return this.controls[i]},iChart.Charting.ChartVisualtrade.prototype.getControlValue=function(t){for(var e in this.controls)if(this.controls[e].type==t&&this.controls[e].active)return this.controls[e].value},iChart.Charting.ChartVisualtrade.lightColor=function(t){t=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);for(var e=0;e<3;e++)t[e]=parseInt(t[e])+40;return"rgba("+t.join(", ")+")"}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartButton=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Button",this.drawType="auto",this.maxPointCount=1,this.hasSettings=!0,this.controlEnable=!0,this.storageEnable=!1,this.settings={controls:[]}},inheritPrototype(iChart.Charting.ChartButton,iChart.Charting.ChartElement),iChart.Charting.ChartButton.prototype.setSettings=function(t){this.settings=$.extend(this.settings,t),this.points[0].fActive=1,this.controls={1:{enabled:!0,element:this,x:0,y:0,w:100,h:17,click:function(){console.log(this)},label:_t("6346","Новый приказ"),fillColor:"rgba(220,220,220,1)",strokeStyle:"#999999"}};for(var e=0;e<this.settings.controls.length;e++)for(var i in this.controls)this.settings.controls[e].type==this.controls[i].type&&this.settings.controls[e].value==this.controls[i].value&&(this.controls[i].active=!0);this.maps={0:{element:this,click:function(){this.element.settings.click.call(this)},hoverIn:function(){this.element.points[0].fHover=1,this.element.layer.render()},hoverOut:function(){this.element.points[0].fHover=0,this.element.layer.render()}}}},iChart.Charting.ChartButton.prototype.drawInternal=function(t,e){if(!(e.length<1)){this.settings.fillStyle=this.settings.fillStyle||"#3AAE3E";var i=this.layer.chart.areas[0].getXPositionByIndex(this.layer.chart.areas[0].xSeries.length-1-this.layer.chart.chartOptions.futureAmount)+40;i=Math.min(i,this.layer.chart.areas[0].getXPositionByIndex(this.layer.chart.areas[0].xSeries.length-1));var r=this.layer.chart.areas[0].getXValue(i),n=this.layer.chart.areas[0].ySeries[0].points[this.layer.chart.areas[0].ySeries[0].points.length-this.layer.chart.chartOptions.futureAmount-1];for(var a in this.points[0].x=1e3*r,this.points[0].y=n[2],e[0].x=this.layer.area.getXPositionByValue(r),this.controls){var s=this.controls[a];s.enabled&&this.drawControl(t,e,s)}}},iChart.Charting.ChartButton.prototype.drawControl=function(t,e,i){t.save(),t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.points[0].fHover?"rgba(58,174,62,1)":i.fillColor,t.lineWidth="1";var r=t.measureText(i.label).width,n=e[0];t.strokeStyle=i.strokeStyle;var a=r;t.beginPath(),t.moveTo(n.x,n.y+Math.round(i.h/2)),t.lineTo(n.x,n.y-Math.round(i.h/2)),t.quadraticCurveTo(n.x,n.y-Math.round(i.h/2)-5,n.x+5,n.y-Math.round(i.h/2)-5),t.lineTo(n.x+a+5,n.y-Math.round(i.h/2)-5),t.quadraticCurveTo(n.x+a+10,n.y-Math.round(i.h/2)-5,n.x+a+10,n.y-Math.round(i.h/2)),t.lineTo(n.x+a+10,n.y+Math.round(i.h/2)),t.quadraticCurveTo(n.x+a+10,n.y+Math.round(i.h/2)+5,n.x+a+5,n.y+Math.round(i.h/2)+5),t.lineTo(n.x+5,n.y+Math.round(i.h/2)+5),t.quadraticCurveTo(n.x,n.y+Math.round(i.h/2)+5,n.x,n.y+Math.round(i.h/2)),t.closePath(),t.fill(),t.stroke(),t.fillStyle="#FFFFFF",t.fillText(i.label,n.x+5,n.y),t.restore()},iChart.Charting.ChartButton.prototype.drawPoints=function(t,e){},iChart.Charting.ChartButton.prototype.setTestSegments=function(){var t=this.layer.context;t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle";var e=t.measureText(this.controls[1].label).width;this.testContext.segments=[],this.testContext.maps={},this.testContext.maps[0]=[{x:this.testContext.points[0].x,y:this.testContext.points[0].y-Math.round(this.controls[1].h/2)-5},{x:this.testContext.points[0].x+e+10,y:this.testContext.points[0].y+Math.round(this.controls[1].h/2)+5}]},iChart.Charting.ChartButton.prototype.lightColor=function(t){t=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);for(var e=0;e<3;e++)t[e]=parseInt(t[e])+40;return"rgba("+t.join(", ")+")"}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartEvent=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Event",this.drawType="auto",this.maxPointCount=1,this.hasSettings=!0,this.controlEnable=!1,this.id=0,this.settings={color:"red",size:5,shape:"disk",pointFormatter:function(){return""},onHover:function(){},onOut:function(){}}},inheritPrototype(iChart.Charting.ChartEvent,iChart.Charting.ChartElement),iChart.Charting.ChartEvent.prototype.setSettings=function(t){this.settings=$.extend(this.settings,t)},iChart.Charting.ChartEvent.prototype.drawInternal=function(t,e){if(!(e.length<1)){switch(t.save(),t.fillStyle=this.settings.color,t.inHover&&(t.fillStyle="#0000ff",t.stokeStyle="#000"),this.settings.shape){case"circle":this.drawCircle(t,e);break;case"disk":this.drawDisc(t,e);break;case"square":this.drawSquare(t,e);break;case"diamond":this.drawDiamond(t,e);break;case"triangle":this.drawTriangle(t,e);break;default:this.drawDisc(t,e)}t.restore()}},iChart.Charting.ChartEvent.prototype.drawDisc=function(t,e){t.beginPath(),t.arc(e[0].x,e[0].y,this.settings.size,0,2*Math.PI,!0),t.fill(),t.closePath()},iChart.Charting.ChartEvent.prototype.drawCircle=function(t,e){t.beginPath(),t.lineWidth=.5*this.settings.size,t.arc(e[0].x,e[0].y,this.settings.size,0,2*Math.PI,!0),t.closePath(),t.inHover||(t.strokeStyle=this.settings.color),t.stroke()},iChart.Charting.ChartEvent.prototype.drawSquare=function(t,e){t.beginPath();var i=this.settings.size;t.moveTo(e[0].x-i,e[0].y-i),t.lineTo(e[0].x-i,e[0].y+i),t.lineTo(e[0].x+i,e[0].y+i),t.lineTo(e[0].x+i,e[0].y-i),t.lineTo(e[0].x-i,e[0].y-i),t.fill(),t.closePath()},iChart.Charting.ChartEvent.prototype.drawDiamond=function(t,e){t.beginPath();var i=this.settings.size;t.moveTo(e[0].x,e[0].y-i),t.lineTo(e[0].x-2*i/3,e[0].y),t.lineTo(e[0].x,e[0].y+i),t.lineTo(e[0].x+2*i/3,e[0].y),t.lineTo(e[0].x,e[0].y-i),t.fill(),t.closePath()},iChart.Charting.ChartEvent.prototype.drawTriangle=function(t,e){t.beginPath();var i=2*this.settings.size*Math.sin(Math.PI/3)/2;t.moveTo(e[0].x,e[0].y-i),t.lineTo(e[0].x-i,e[0].y+this.settings.size),t.lineTo(e[0].x+i,e[0].y+this.settings.size),t.lineTo(e[0].x,e[0].y-i),t.fill(),t.closePath()},iChart.Charting.ChartEvent.prototype.onHover=function(t){var e=this.getCoordinates(t,this.points),i=e[0].y+$(this.layer.chart.container).offset().top,r=e[0].x+$(this.layer.chart.container).offset().left;this.drawTooltip(this.settings,i,r),"function"==typeof this.settings.onHover&&this.settings.onHover.call(this)},iChart.Charting.ChartEvent.prototype.onOut=function(t){$("[chart-element-tooltip]").hide(),"function"==typeof this.settings.onOut&&this.settings.onOut.call(this)},iChart.Charting.ChartEvent.prototype.drawTooltip=function(t,e,i){0==this.layer.chart.env.wrapper.find("[chart-element-tooltip]").length&&$("body").append('<div chart-element-tooltip class="qtip qtip-default qtip-tipsy qtip-pos-rc" tracking="false" role="alert" aria-live="polite" aria-atomic="false" style="z-index: 15002;"><div class="qtip-tip" style="background-color: transparent ! important; border: 0px none ! important; height: 6px; width: 6px; line-height: 6px; top: 50%; margin-top: -3px; right: -6px;"><canvas style="background-color: transparent ! important; border: 0px none ! important;" height="6" width="6"></canvas></div><div class="qtip-content" id="qtip-34-content" aria-atomic="true"></div></div></div>');var r=this.settings.pointFormatter.call(this.settings);r&&($("[chart-element-tooltip] .qtip-content").html(r),$("[chart-element-tooltip]").css({top:e-$("[chart-element-tooltip]").height()-0+"px",left:i+12+"px"}).show())},iChart.Charting.ChartEvent.prototype.setTestSegments=function(){this.testContext.segments=[[this.testContext.points[0],{x:this.testContext.points[0].x,y:this.testContext.points[0].y}]]}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartLevel=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Level",this.drawType="auto",this.hoverCursor=MOBILE_BROWSER_DETECTED?"move":"url('"+this.layer.chart.env.lib_path+"/styles/cursors/red_vertical_cursor.cur'), move",this.moveCursor=MOBILE_BROWSER_DETECTED?"move":"url('"+this.layer.chart.env.lib_path+"/styles/cursors/red_vertical_cursor.cur'), move",this.maxPointCount=1,this.hasSettings=!0,this.controlEnable=!0,this.storageEnable=!1,this.settings={text:"",color:"#ED1ACE",textColor:"red",inactiveHoverColor:"#4684c6",inactiveColor:"#AAAAAA",offset:40,width:150,height:30},this.drawSingle=!0},inheritPrototype(iChart.Charting.ChartLevel,iChart.Charting.ChartElement),iChart.Charting.ChartLevel.prototype.setSettings=function(t){this.points[0].fActive=1,this.points[0].fHover=0,this.settings.onDrop=function(t){if(!isNaN(parseInt(t))){parseInt(t);var e={event:"drop",element:this,value:this.points[0].y};this.layer.chart.env.wrapper.trigger("iguanaChartEvents",["instrument",e])}},this.controls={0:{active:!0,enabled:!1,element:this,click:function(){var t={event:"close",element:this,value:this.points[0].y};this.layer.chart.env.wrapper.trigger("iguanaChartEvents",["instrument",t]),this.element.setTestSegments(),this.element.layer.render()},type:"close",value:"element"}},this.maps={0:{element:this,click:function(){this.element.points[0].fActive=1,this.element.setTestSegments();var t={event:"click",element:this.element,value:this.element.points[0].y};this.element.layer.chart.env.wrapper.trigger("iguanaChartEvents",["instrument",t])},hoverIn:function(){this.element.points[0].fHover=1,this.element.layer.render();var t={event:"hoverIn",element:this.element,value:this.element.points[0].y};this.element.layer.chart.env.wrapper.trigger("iguanaChartEvents",["instrument",t])},hoverOut:function(){this.element.points[0].fHover=0,this.element.layer.render();var t={event:"hoverOut",element:this.element,value:this.element.points[0].y};this.element.layer.chart.env.wrapper.trigger("iguanaChartEvents",["instrument",t])},type:"element",value:"element"}},this.settings=$.extend(this.settings,t)},iChart.Charting.ChartLevel.prototype.drawInternal=function(t,e){if(!(e.length<1)){var i=this.layer.chart.env.viewData.chart.areas[0].getXPositionByIndex(this.layer.chart.env.viewData.chart.areas[0].xSeries.length-1-this.layer.chart.env.viewData.chart.chartOptions.futureAmount)+this.settings.offset;i=Math.min(i,this.layer.chart.env.viewData.chart.areas[0].getXPositionByIndex(this.layer.chart.env.viewData.chart.areas[0].xSeries.length-1));var r=this.layer.chart.env.viewData.chart.areas[0].getXValue(i);for(var n in this.points[0].x=1e3*r,e[0].x=this.layer.area.getXPositionByValue(r),this.controls){var a=this.controls[n];a.enabled&&this.drawControl(t,e,a)}t.fillStyle="rgba(255,255,255,1)";for(n=e.length-1;n>=0;n--)n>=3||(this.drawPriceBox(t,e,n),this.drawLabel(t,e,n))}},iChart.Charting.ChartLevel.prototype.drawPoints=function(t,e){},iChart.Charting.ChartLevel.prototype.drawExtended=function(t){if(void 0!==this.markers)var e=this.getCoordinates(t,this.markers),i=this.markers;else e=this.getCoordinates(t,this.points),i=this.points;if(!(e.length<1))for(var r=0;r<e.length&&r<3;r++)if(i[r].fActive){var n=iChart.roundToPrecision(i[r].y,this.layer.chart.env.userSettings.currentSecurity.min_step);this.layer.chart.renderer.drawLable(t,this.settings.color,this.settings.textColor,this.layer.area.innerWidth,e[r].y,n)}},iChart.Charting.ChartLevel.prototype.drawControl=function(t,e,i){if(t.save(),"close"==i.type){var r=e[0];r&&(t.fillStyle="#ff9999",t.strokeStyle="#777777",t.beginPath(),t.lineWidth=2,t.moveTo(r.x+this.settings.width+10-4,r.y-15-4),t.lineTo(r.x+this.settings.width+10+4,r.y-15+4),t.moveTo(r.x+this.settings.width+10+4,r.y-15-4),t.lineTo(r.x+this.settings.width+10-4,r.y-15+4),t.closePath(),t.stroke())}t.restore()},iChart.Charting.ChartLevel.prototype.drawPriceBox=function(t,e,i){var r=this.settings.color;this.points[i].fActive?(t.save(),t.fillStyle=r,t.beginPath(),t.moveTo(e[i].x-10,e[i].y-10),t.lineTo(e[i].x+this.settings.width,e[i].y-10),t.lineTo(e[i].x+this.settings.width+8,e[i].y),t.lineTo(e[i].x+this.settings.width,e[i].y+10),t.lineTo(e[i].x-10,e[i].y+10),t.lineTo(e[i].x-10,e[i].y-10),t.moveTo(e[i].x+10,e[i].y-10),t.lineTo(e[i].x+10,e[i].y+10),t.closePath(),t.fill(),t.restore(),t.save(),t.strokeStyle=this.settings.textColor,t.beginPath(),t.moveTo(e[i].x-5,e[i].y-3),t.lineTo(e[i].x+5,e[i].y-3),t.moveTo(e[i].x-5,e[i].y),t.lineTo(e[i].x+5,e[i].y),t.moveTo(e[i].x-5,e[i].y+3),t.lineTo(e[i].x+5,e[i].y+3),t.closePath(),t.stroke(),t.strokeStyle=r,t.beginPath(),t.moveTo(e[i].x+this.settings.width+8,e[i].y),t.lineTo(t.canvas.width,e[i].y),t.moveTo(0,e[i].y),t.lineTo(e[i].x-10,e[i].y),t.closePath(),t.stroke(),t.restore()):(t.save(),this.points[i].fHover?t.strokeStyle=this.settings.inactiveHoverColor:t.strokeStyle=this.settings.inactiveColor,t.beginPath(),t.moveTo(e[i].x-10,e[i].y-10),t.lineTo(e[i].x+this.settings.width,e[i].y-10),t.lineTo(e[i].x+this.settings.width+8,e[i].y),t.lineTo(e[i].x+this.settings.width,e[i].y+10),t.lineTo(e[i].x-10,e[i].y+10),t.lineTo(e[i].x-10,e[i].y-10),t.closePath(),t.stroke(),t.restore())},iChart.Charting.ChartLevel.prototype.drawLabel=function(t,e,i){var r;this.points[0].y;void 0!==this.markers&&this.markers[0].y,r=this.settings.text,t.save(),t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.settings.textColor,this.points[i].fActive||(this.points[i].fHover?t.fillStyle=this.settings.inactiveHoverColor:t.fillStyle=this.settings.inactiveColor),t.fillText(r,e[i].x+15,e[i].y),t.restore()},iChart.Charting.ChartLevel.prototype.setTestSegments=function(){for(var t in this.testContext.segments=[],this.testContext.controls={},this.controls){var e=this.testContext.points[t];e&&(this.testContext.controls[t]=[{x:e.x+this.settings.width+2,y:e.y-23},{x:e.x+this.settings.width+2+16,y:e.y-23+16}])}this.testContext.maps={},this.testContext.maps[0]=[{x:this.testContext.points[0].x+10,y:this.testContext.points[0].y-10},{x:this.testContext.points[0].x+this.settings.width+10,y:this.testContext.points[0].y+10}]},iChart.Charting.ChartLevel.prototype.onDrag=function(t){"function"==typeof this.settings.restriction&&this.settings.restriction.call(this,t)},iChart.Charting.ChartLevel.prototype.onDrop=function(t){"function"==typeof this.settings.onDrop&&this.settings.onDrop.call(this,t)},iChart.Charting.ChartLevel.prototype.setValue=function(t){this.points[0].y=t,this.layer.render()},iChart.Charting.ChartLevel.lightColor=function(t){t=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);for(var e=0;e<3;e++)t[e]=parseInt(t[e])+40;return"rgba("+t.join(", ")+")"}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartRange=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Range",this.drawType="auto",this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartRange,iChart.Charting.ChartElement),iChart.Charting.ChartRange.prototype.drawInternal=function(t,e){if(!(e.length<2)){t.save(),t.beginPath(),this.initDrawSettings(t,this.settings);e[1].x,e[0].x,e[1].y,e[0].y;t.beginPath(),t.moveTo(e[0].x,0),t.lineTo(e[0].x,t.canvas.height),t.stroke(),t.beginPath(),t.lineTo(e[1].x,0),t.lineTo(e[1].x,t.canvas.height),t.stroke(),t.beginPath(),t.moveTo(e[0].x,0),t.lineTo(e[0].x,t.canvas.height),t.lineTo(e[1].x,t.canvas.height),t.lineTo(e[1].x,0),t.fill(),t.restore()}},iChart.Charting.ChartRange.prototype.setTestSegments=function(){this.layer.context;var t=this.testContext.points[0].x,e=this.testContext.points[1].x;this.testContext.segments=[];for(var i=t;i<=e;i+=16)this.testContext.segments.push([{x:i,y:0},{x:i,y:1e11}]);this.testContext.segments.push([{x:e,y:0},{x:e,y:1e11}])}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartPosition=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Position",this.drawType="auto",this.hoverCursor="default",this.moveCursor="default",this.maxPointCount=1,this.hasSettings=!0,this.controlEnable=!1,this.storageEnable=!1,this.settings={},this.positionAbsolute=!0},inheritPrototype(iChart.Charting.ChartPosition,iChart.Charting.ChartElement),iChart.Charting.ChartPosition.prototype.drawInternal=function(t,e){if(!(e.length<1)){this.settings.fillStyle=this.settings.fillStyle||"#3AAE3E";var i=this.layer.chart.areas[0].xSeries[this.layer.chart.areas[0].xSeries.length-this.layer.chart.chartOptions.futureAmount-1];this.points[0].x=1e3*i,e[0].x=this.layer.area.getXPositionByValue(i);var r=this.settings.fillStyle,n=this.getCoordinates(t,[{x:this.settings.time,y:0}]),a=0;if(n.length&&(a=n[0].x),this.selected||t.inHover)t.save(),t.beginPath(),t.strokeStyle=r,t.lineWidth=1,t.moveTo(a,e[0].y),t.lineTo(t.canvas.width,e[0].y),t.stroke(),t.restore(),this.drawLable(t,r,this.settings.textColor,e[0].x,e[0].y,this.settings);else{t.save(),t.strokeStyle=r,t.lineWidth=1,t.beginPath();for(var s=0;s<=t.canvas.width;s+=20)t.moveTo(s,e[0].y),t.lineTo(s+12,e[0].y);t.stroke(),t.restore()}}},iChart.Charting.ChartPosition.prototype.drawExtended=function(t){if(this.selected){if((i=this.getCoordinates(t,this.points)).length<1)return;var e=iChart.formatNumber(this.points[0].y,{decimalPrecision:this.layer.chart.labelPrecision,scale:0});if(this.layer.chart.renderer.drawLable(t,this.settings.fillStyle,0,this.layer.area.innerWidth,i[0].y,e),void 0!==this.markers){var i=this.getCoordinates(t,this.markers),r=(e=iChart.formatNumber(this.markers[0].y,{decimalPrecision:this.layer.chart.labelPrecision,scale:0}),t.inHover?void 0!==this.settings.fillStyleHover?this.settings.fillStyleHover:iChart.Charting.ChartPosition.lightColor(this.settings.fillStyle):this.settings.fillStyle);this.layer.chart.renderer.drawLable(t,r,0,this.layer.area.innerWidth,i[0].y,e)}}},iChart.Charting.ChartPosition.prototype.drawTrades=function(t,e,i){var r=[];$.each(i.trades,(function(t,e){r.push({x:e.x,y:e.y})})),this.getCoordinates(t,r).forEach((function(i){i.x>e||(t.save(),t.beginPath(),t.arc(i.x,i.y,5,0,2*Math.PI,!0),t.fillStyle="#607d8b",t.fill(),t.arc(i.x,i.y,2,0,2*Math.PI,!0),t.fillStyle="#ffffff",t.fill(),t.closePath(),t.restore())}))},iChart.Charting.ChartPosition.prototype.drawLable=function(t,e,i,r,n,a){e=e||"#333333",i=i||"#FFFFFF",t.save(),t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle=e,t.lineWidth="1";var s=t.measureText(a.positionText+a.profitText).width;r=t.canvas.width-120;var o=t.canvas.width-120-s;t.beginPath(),t.moveTo(r-s-5,n+5),t.lineTo(r-s-5,n-5),t.quadraticCurveTo(r-s-5,n-10,r-s,n-10),t.lineTo(r,n-10),t.quadraticCurveTo(r+5,n-10,r+5,n-5),t.lineTo(r+5,n+5),t.quadraticCurveTo(r+5,n+10,r,n+10),t.lineTo(r-s,n+10),t.quadraticCurveTo(r-s-5,n+10,r-s-5,n+5),t.closePath(),t.fill(),a.profitText&&(t.fillStyle=i,t.fillText(a.positionText,r-s,n),s=t.measureText(a.profitText).width,t.fillStyle=a.profitColor,t.beginPath(),t.moveTo(r-s,n+5),t.lineTo(r-s,n-5),t.lineTo(r-s,n-10),t.lineTo(r,n-10),t.quadraticCurveTo(r+5,n-10,r+5,n-5),t.lineTo(r+5,n+5),t.quadraticCurveTo(r+5,n+10,r,n+10),t.lineTo(r-s,n+10),t.lineTo(r-s,n+10),t.closePath(),t.fill(),this.drawCancelButton(t,r,n-10),t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle=i,t.fillText(a.profitText,r-s,n)),t.restore(),this.drawTrades(t,o,this.settings)},iChart.Charting.ChartPosition.prototype.drawCancelButton=function(t,e,i){t.beginPath(),t.moveTo(e,i),t.strokeStyle="#FFFFFF",t.lineWidth=2,t.lineTo(e,i+20),t.stroke(),t.lineTo(e+15,i+20),t.quadraticCurveTo(e+20,i+20,e+20,i+15),t.lineTo(e+20,i+5),t.quadraticCurveTo(e+20,i,e+15,i),t.closePath(),t.fillStyle="#e53935",t.fill(),t.beginPath(),t.moveTo(e+5,i+5),t.lineTo(e+15,i+15),t.moveTo(e+5,i+15),t.lineTo(e+15,i+5),t.stroke(),t.closePath(),t.restore()},iChart.Charting.ChartPosition.prototype.drawPoints=function(t,e){},iChart.Charting.ChartPosition.prototype.drawTestSegments=function(t){if(void 0!==this.testContext){for(var e in t.save(),t.beginPath(),t.fillStyle="rgba(0,0,0,0.75)",this.testContext.segments){var i=this.testContext.segments[e];t.moveTo(i[0].x,i[0].y),t.lineTo(i[1].x,i[1].y),t.stroke()}t.closePath(),t.restore()}},iChart.Charting.ChartPosition.prototype.setTestSegments=function(){if(this.selected){var t=this.layer.context;t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle";var e=t.measureText(this.settings.text).width,i=t.canvas.width-120;this.testContext.segments=[[{x:i-e,y:this.testContext.points[0].y-4},{x:i,y:this.testContext.points[0].y-4}],[{x:i,y:this.testContext.points[0].y-4},{x:i,y:this.testContext.points[0].y+4}],[{x:i,y:this.testContext.points[0].y+4},{x:i-e,y:this.testContext.points[0].y+4}],[{x:i-e,y:this.testContext.points[0].y+4},{x:i-e,y:this.testContext.points[0].y-4}],[{x:i-e,y:this.testContext.points[0].y},{x:i,y:this.testContext.points[0].y}],[{x:this.layer.area.innerOffset.left,y:this.testContext.points[0].y},{x:this.layer.area.innerOffset.left+this.layer.area.innerWidth,y:this.testContext.points[0].y}]]}else this.testContext&&(this.testContext.segments=[[{x:this.layer.area.innerOffset.left,y:this.testContext.points[0].y},{x:this.layer.area.innerOffset.left+this.layer.area.innerWidth,y:this.testContext.points[0].y}]])},iChart.Charting.ChartPosition.prototype.onDrag=function(t){"function"==typeof this.settings.restriction&&this.settings.restriction.call(this,t)},iChart.Charting.ChartPosition.prototype.onSelect=function(t){iChart.Charting.ChartElement.prototype.onSelect.call(this,t),this.setTestSegments()},iChart.Charting.ChartPosition.prototype.onBlur=function(){this.setTestSegments()},iChart.Charting.ChartPosition.prototype.onDrop=function(){"function"==typeof this.settings.onDrop&&this.settings.onDrop.call(this)},iChart.Charting.ChartPosition.prototype.onHover=function(){clearTimeout(this.layer.chart.env.timers.positionClose),this.cancelControl(1)},iChart.Charting.ChartPosition.prototype.onOut=function(){clearTimeout(this.layer.chart.env.timers.positionClose);var t=this;this.layer.chart.env.timers.orderClose=setTimeout((function(){t.cancelControl(0)}),300)},iChart.Charting.ChartPosition.prototype.cancelControl=function(t){if("function"==typeof this.settings.onCancel)if(t){$("#ichartPositionCancelCtrl").hide();var e=this.layer.context,i=e.canvas.width-120,r=this.getCoordinates(e,this.points);$("#ichartPositionCancelCtrl").length||$("<span/>",{id:"ichartPositionCancelCtrl",style:"color:transparent",class:"m-chart-instrument-delete",text:"✕",title:_t("15807","Закрыть позицию по рынку")}).hide().appendTo(this.layer.chart.container);var n=this;$("#ichartPositionCancelCtrl").unbind("click").bind("click",(function(t){"function"==typeof n.settings.onCancel&&n.settings.onCancel.call(n),$("#ichartOrderCancelCtrl").hide()})).bind("mouseover",(function(){clearTimeout(n.layer.chart.env.timers.positionClose)})).bind("mouseleave",(function(){clearTimeout(n.layer.chart.env.timers.positionClose),n.layer.chart.env.timers.positionClose=setTimeout((function(){n.cancelControl(0)}),1e3)}));var a=r[0].y-8,s=i+2;$("#ichartPositionCancelCtrl").css({top:a,left:s}).show()}else $("#ichartPositionCancelCtrl").hide()},iChart.Charting.ChartPosition.lightColor=function(t){t=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);for(var e=0;e<3;e++)t[e]=parseInt(t[e])+40;return"rgba("+t.join(", ")+")"}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartTradePanel=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="TradePanel",this.drawType="auto",this.hoverCursor=this.selected?"row-resize":"pointer",this.moveCursor=this.selected?"row-resize":"pointer",this.maxPointCount=1,this.hasSettings=!0,this.controlEnable=!1,this.storageEnable=!1,this.settings={},this.positionAbsolute=!0},inheritPrototype(iChart.Charting.ChartTradePanel,iChart.Charting.ChartElement),iChart.Charting.ChartTradePanel.prototype.drawInternal=function(t,e){if(!(e.length<1)){this.hoverCursor=this.selected?"row-resize":"pointer",this.moveCursor=this.selected?"row-resize":"pointer",this.settings.autoInit&&(this.selected=!0,this.layer.selected=this,this.settings.autoInit=!1),this.layer.history.sort((function(t,e){return t&&"TradePanel"==t.elementType&&t.selected?1:-1})),(this.selected&&!this.layer.selected||this.selected&&this.id!=this.layer.selected.id)&&(this.selected=!1),e[0].x=this.layer.area.getXPositionByValue(n);var i=this.markers?this.markers[0].y:this.points[0].y;"limit"==this.settings.type?this.settings.fillStyle=jNTChartTrading.order.operation_type<3?"#7cb342":"#e53935":"sl"==this.settings.type?this.settings.fillStyle="#e53935":"tp"==this.settings.type&&(this.settings.fillStyle="#7cb342"),this.settings.fillStyle=this.selected?this.settings.fillStyle:"rgba(238, 238, 238, 0.3)",this.settings.fillStyle=!this.selected&&t.inHover?"rgba(238, 238, 238, 1)":this.settings.fillStyle,this.settings.textColor=this.selected?"#FFFFFF":this.layer.chart.chartOptions.labelColor,this.settings.text=jNTChartTrading.order.operation_type<3?this.settings.buyText:this.settings.sellText,this.settings.price=_s(i,_d(this.settings.min_step)),this.settings.quantity=_s(this.settings.quantity);var r=100*(this.settings.price/this.settings.ltp-1);r=(r>0?"+":"")+_s(r,2)+"%",this.settings.text=this.settings.text.replace("%quantity%",this.settings.quantity.trim()),this.settings.text=this.settings.text.replace("%price%",this.settings.price.trim()),this.settings.text=this.settings.text.replace("%percent%",r),this.settings.sendingOrder&&(this.settings.text=_t("15808","Выставляем новый приказ ..."),this.settings.fillStyle="rgba(119,119,119,1)",this.settings.textColor="#ffffff");var n=this.layer.chart.areas[0].xSeries[this.layer.chart.areas[0].xSeries.length-this.layer.chart.chartOptions.futureAmount-1];this.points[0].x=1e3*n,e[0].x=this.layer.area.getXPositionByValue(n)+50;var a=this.settings.fillStyle;(this.selected||t.inHover)&&(t.save(),t.beginPath(),t.strokeStyle=a,t.moveTo(0,e[0].y),t.lineTo(t.canvas.width,e[0].y),t.stroke(),t.restore()),this.drawLable(t,a,this.settings.textColor,e[0].x,e[0].y,this.settings.text)}},iChart.Charting.ChartTradePanel.prototype.drawExtended=function(t){if(this.selected){if((i=this.getCoordinates(t,this.points)).length<1)return;var e=iChart.formatNumber(this.points[0].y,{decimalPrecision:this.layer.chart.labelPrecision,scale:0});if(this.layer.chart.renderer.drawLable(t,this.settings.fillStyle,0,this.layer.area.innerWidth,i[0].y,e),void 0!==this.markers){var i=this.getCoordinates(t,this.markers),r=(e=iChart.formatNumber(this.markers[0].y,{decimalPrecision:this.layer.chart.labelPrecision,scale:0}),t.inHover?void 0!==this.settings.fillStyleHover?this.settings.fillStyleHover:iChart.Charting.ChartTradePanel.lightColor(this.settings.fillStyle):this.settings.fillStyle);this.layer.chart.renderer.drawLable(t,r,0,this.layer.area.innerWidth,i[0].y,e)}}},iChart.Charting.ChartTradePanel.prototype.drawLable=function(t,e,i,r,n,a){t.save(),t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.settings.fillStyle,t.strokeStyle="#eeeeee",t.lineWidth="1";var s=t.measureText(a).width;r+=s,t.beginPath(),t.moveTo(r-s-5,n+5),t.lineTo(r-s-5,n-5),t.quadraticCurveTo(r-s-5,n-10,r-s,n-10),t.lineTo(r,n-10),t.lineTo(r+8,n),t.lineTo(r,n+10),t.lineTo(r-s,n+10),t.quadraticCurveTo(r-s-5,n+10,r-s-5,n+5),t.closePath(),t.save();var o=this.layer.chart.chartOptions.shadowColor;this.selected?(t.shadowColor=o,t.shadowBlur=10,t.shadowOffsetX=5,t.shadowOffsetY=5,t.fill(),t.lineWidth="3",t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(r+10,n-10),t.lineTo(r+18,n),t.lineTo(r+10,n+10),t.moveTo(r+10,n-10),t.closePath(),t.stroke()):t.inHover?(t.shadowColor=o,t.shadowBlur=5,t.shadowOffsetX=2,t.shadowOffsetY=2,t.fill()):t.stroke(),t.restore(),t.fillStyle=this.settings.textColor,t.fillText(a,r-s,n),t.restore()},iChart.Charting.ChartTradePanel.prototype.drawPoints=function(t,e){},iChart.Charting.ChartTradePanel.prototype.drawTestSegments=function(t){if(void 0!==this.testContext){for(var e in t.save(),t.beginPath(),t.fillStyle="rgba(0,0,0,0.75)",this.testContext.segments){var i=this.testContext.segments[e];t.moveTo(i[0].x,i[0].y),t.lineTo(i[1].x,i[1].y),t.stroke()}t.closePath(),t.restore()}},iChart.Charting.ChartTradePanel.prototype.setTestSegments=function(){if(this.testContext){var t=this.layer.context;t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle";var e=t.measureText(this.settings.text).width,i=this.layer.area.getXPositionByValue(this.points[0].x/1e3)+e+50;this.testContext.segments=[[{x:i-e,y:this.testContext.points[0].y-4},{x:i,y:this.testContext.points[0].y-4}],[{x:i,y:this.testContext.points[0].y+4},{x:i-e,y:this.testContext.points[0].y+4}]]}},iChart.Charting.ChartTradePanel.prototype.onDrag=function(t){"function"==typeof this.settings.restriction&&this.settings.restriction.call(this,t),"function"==typeof this.settings.onDrag&&this.settings.onDrag.call(this,t)},iChart.Charting.ChartTradePanel.prototype.onSelect=function(t){iChart.Charting.ChartElement.prototype.onSelect.call(this,t)},iChart.Charting.ChartTradePanel.prototype.onBlur=function(){},iChart.Charting.ChartTradePanel.prototype.onDrop=function(){"function"==typeof this.settings.onDrop&&this.settings.onDrop.call(this)},iChart.Charting.ChartTradePanel.lightColor=function(t){t=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);for(var e=0;e<3;e++)t[e]=parseInt(t[e])+40;return"rgba("+t.join(", ")+")"},iChart.Charting.ChartTradePanel.prototype.onMouseDown=function(t){"function"==typeof this.settings.onSelect&&this.settings.onSelect.call(this,t)}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartTrendorder=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="Trendorder",this.drawType="auto",this.hoverCursor="row-resize",this.moveCursor="row-resize",this.hoverPointCursor="move",this.movePointCursor="move",this.maxPointCount=2,this.hasSettings=!0,this.controlEnable=!0,this.storageEnable=!1,this.drawSingle=!0,this.freezed=!0,this.settings={text:"",textHeight:13,fillStyle:"#f44336",textColor:"#FFFFFF",mode:"line"},this.positionAbsolute=!0},inheritPrototype(iChart.Charting.ChartTrendorder,iChart.Charting.ChartElement),iChart.Charting.ChartTrendorder.prototype.setSettings=function(t){if(this.settings=$.extend(this.settings,t),void 0===t.price2)this.points[0]={x:t.date,y:t.price},this.points[1]={x:t.date,y:t.price};else{this.points[0]={x:t.date,y:t.price},this.points[1]={x:t.date2,y:t.price2};var e=this.getFloatCoords();this.trendLineSettings={points:this.getBorderPoints(e)}}},iChart.Charting.ChartTrendorder.prototype.calcPointsPosition=function(t,e){e=e||150;var i=this.getCoordinates(this.layer.context,this.points),r=this.getBorderPoints(i),n=(r[0].x+r[1].x)/2;if(t<n){this.points[0].x=1e3*this.layer.area.getXValue(t);var a=iChart.getLineEquation(this.trendLineSettings.points[0],this.trendLineSettings.points[1],t);this.points[0].y=this.layer.area.getYValue(a.y);a=iChart.getLineEquation(this.trendLineSettings.points[0],this.trendLineSettings.points[1],n);this.points[1].x=1e3*this.layer.area.getXValue(n),this.points[1].y=this.layer.area.getYValue(a.y);i=this.getCoordinates(this.layer.context,this.points);if(Math.sqrt(Math.pow(i[0].x-i[1].x,2)+Math.pow(i[0].y-i[1].y,2))<e){var s=Math.atan((i[0].y-i[1].y)/(i[0].x-i[1].x)),o=i[0].x+(e+5)*Math.cos(s);a=iChart.getLineEquation(this.trendLineSettings.points[0],this.trendLineSettings.points[1],o);this.points[1].x=1e3*this.layer.area.getXValue(o),this.points[1].y=this.layer.area.getYValue(a.y)}}else{this.points[1].x=1e3*this.layer.area.getXValue(t);a=iChart.getLineEquation(this.trendLineSettings.points[0],this.trendLineSettings.points[1],t);this.points[1].y=this.layer.area.getYValue(a.y);a=iChart.getLineEquation(this.trendLineSettings.points[0],this.trendLineSettings.points[1],n);this.points[0].x=1e3*this.layer.area.getXValue(n),this.points[0].y=this.layer.area.getYValue(a.y);i=this.getCoordinates(this.layer.context,this.points);if(Math.sqrt(Math.pow(i[0].x-i[1].x,2)+Math.pow(i[0].y-i[1].y,2))<e){s=Math.atan((i[0].y-i[1].y)/(i[0].x-i[1].x)),o=i[1].x-(e+5)*Math.cos(s),a=iChart.getLineEquation(this.trendLineSettings.points[0],this.trendLineSettings.points[1],o);this.points[0].x=1e3*this.layer.area.getXValue(o),this.points[0].y=this.layer.area.getYValue(a.y)}}},iChart.Charting.ChartTrendorder.prototype.getFloatCoords=function(t){t=void 0!==t?t:this.points;var e=[{x:0,y:0},{x:0,y:0}];return e[0].x=this.layer.area.getXPositionByValue(t[0].x/1e3),e[0].y=this.layer.area.getYPosition(t[0].y),e[1].x=this.layer.area.getXPositionByValue(t[1].x/1e3),e[1].y=this.layer.area.getYPosition(t[1].y),e},iChart.Charting.ChartTrendorder.prototype.normalizeCoords=function(t,e){return this.moveForward(),this.getCoordinates(t,this.points)},iChart.Charting.ChartTrendorder.prototype.lineNormalizeCoords=function(t,e){e[1].x=t.canvas.width-80,this.points[1].x=1e3*this.layer.area.getXValue(e[1].x),t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle";var i=t.measureText(this.settings.text).width;e[0].x=t.canvas.width-80-i-80,this.points[0].x=1e3*this.layer.area.getXValue(e[0].x)},iChart.Charting.ChartTrendorder.prototype.drawLineMode=function(t,e){this.settings.fillStyle=this.settings.fillStyle||"#3AAE3E";var i=this.settings.fillStyle;if(this.selected||t.inHover)t.save(),t.beginPath(),t.strokeStyle=i,t.moveTo(0,e[0].y),t.lineTo(t.canvas.width,e[0].y),t.stroke(),t.restore(),this.drawLable(t,i,this.settings.textColor,e[0].x,e[0].y,this.settings.text),this.selected&&(this.drawPoint(t,e[0].x,e[0].y,i,4),this.drawPoint(t,e[1].x,e[1].y,i,4));else{t.save(),t.strokeStyle=i,t.lineWidth=1,t.beginPath();for(var r=0;r<=t.canvas.width;r+=20)t.moveTo(r,e[0].y),t.lineTo(r+12,e[0].y);t.stroke(),t.restore()}},iChart.Charting.ChartTrendorder.prototype.getOpenOrderData=function(){var t=this.layer.chart.areas[0].xSeries[this.layer.chart.areas[0].xSeries.length-this.layer.chart.chartOptions.futureAmount-1];return{time:t,x:this.layer.area.getXPositionByValue(t)}},iChart.Charting.ChartTrendorder.prototype.getExpireOrderData=function(){var t=this.getOpenOrderData(),e=new Date(1e3*(t.time+60*this.layer.chart.env.dataSource.dataSettings.timeframe));return{time:e,x:this.layer.area.getXPositionByValue(e/1e3)}},iChart.Charting.ChartTrendorder.prototype.getOpenCoords=function(t){var e=this.getOpenOrderData();return iChart.getLineEquation(t[0],t[1],e.x)},iChart.Charting.ChartTrendorder.prototype.getExpireCoords=function(t){var e=this.getExpireOrderData();return iChart.getLineEquation(t[0],t[1],e.x)},iChart.Charting.ChartTrendorder.prototype.getOrderParams=function(t){var e=this.getOpenCoords(t),i=this.getExpireCoords(t);return{points:[{x:1e3*this.layer.area.getXValue(e.x),y:this.layer.area.getYValue(e.y)},{x:1e3*this.layer.area.getXValue(i.x),y:this.layer.area.getYValue(i.y)}]}},iChart.Charting.ChartTrendorder.prototype.getBorderPoints=function(t){if(t[0].y<0||t[0].y>this.layer.canvas.height||t[0].x<0||t[0].x>this.layer.canvas.width)var e=iChart.getLineEquation(t[0],t[1],0),i=iChart.getLineEquation(t[0],t[1],this.layer.canvas.width);else(e=iChart.getLineEquation(t[0],t[1],0)).y<0?(e.y=0,e.x=(e.y-e.b)/e.k):e.y>this.layer.canvas.height&&(e.y=this.layer.canvas.height,e.x=(e.y-e.b)/e.k),(i=iChart.getLineEquation(t[0],t[1],this.layer.canvas.width)).y<0?(i.y=0,i.x=(i.y-i.b)/i.k):i.y>this.layer.canvas.height&&(i.y=this.layer.canvas.height,i.x=(i.y-i.b)/i.k);return[e,i]},iChart.Charting.ChartTrendorder.prototype.drawTrendMode=function(t,e){if(void 0!==this.markers)var i=this.markers;else{this.selected||this.freezed||(console.trace(),this.moveForward());i=this.points}this.trendLineSettings={points:this.getBorderPoints(this.getFloatCoords(i))};var r=this.getOpenCoords(e);t.save(),t.beginPath(),t.setLineDash([8,3]);var n=this.settings.fillStyle;t.strokeStyle=n,t.moveTo(r.x,r.y),t.lineTo(this.trendLineSettings.points[0].x,this.trendLineSettings.points[0].y),t.stroke(),t.restore(),t.save(),t.lineWidth=4,t.strokeStyle=this.settings.fillStyle,t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(this.trendLineSettings.points[1].x,this.trendLineSettings.points[1].y),t.stroke(),t.restore(),this.settings.newOrderParams=this.getOrderParams(e),this.selected?(this.drawPoint(t,e[0].x,e[0].y,n,4),this.drawPoint(t,e[1].x,e[1].y,n,4),this.drawLableTrend(t,e)):t.inHover&&this.drawLableTrend(t,e)},iChart.Charting.ChartTrendorder.prototype.findYForward=function(t){for(var e=iChart.Charting.indexOfFirstElementGreaterThanOrEqualTo(this.layer.chart.areas[0].xSeries,this.settings.date/1e3),i=this.layer.area.getXIndexByValue(t/1e3),r=60*this.layer.chart.env.dataSource.dataSettings.timeframe,n={x:this.settings.date,y:this.settings.price},a={x:this.settings.date2,y:this.settings.price2},s=0,o=e+1;o<=i;o++){var h=this.layer.chart.areas[0].xSeries[o]-this.layer.chart.areas[0].xSeries[o-1];if(h/r>1){var l=iChart.getLineEquation(n,a,1e3*this.layer.chart.areas[0].xSeries[o-1]),c=iChart.getLineEquation(n,a,1e3*(this.layer.chart.areas[0].xSeries[o-1]+h-r));s+=l.y-c.y}}return iChart.getLineEquation(n,a,t).y+s},iChart.Charting.ChartTrendorder.prototype.moveForward=function(){this.points[1].x<$.now()&&(this.points[1].x=$.now(),this.points[1].y=this.findYForward(this.points[1].x))},iChart.Charting.ChartTrendorder.prototype.pointsForward=function(t){for(var e=iChart.Charting.indexOfFirstElementGreaterThanOrEqualTo(this.layer.chart.areas[0].xSeries,this.settings.date/1e3),i=this.layer.chart.areas[0].xSeries.length-1,r=60*this.layer.chart.env.dataSource.dataSettings.timeframe,n={x:this.settings.date,y:this.settings.price},a={x:this.settings.date2,y:this.settings.price2},s=e;s<=i;s++){var o=iChart.getLineEquation(n,a,1e3*this.layer.chart.areas[0].xSeries[s]),h=this.layer.area.getXPositionByValue(o.x/1e3),l=this.layer.area.getYPosition(o.y);this.drawPoint(t,h,l,"rgba(255,100,100, 0.3)",4)}var c=0;for(s=e+1;s<=i;s++){var u=this.layer.chart.areas[0].xSeries[s]-this.layer.chart.areas[0].xSeries[s-1];if(u/r>1){var d=iChart.getLineEquation(n,a,1e3*this.layer.chart.areas[0].xSeries[s-1]),p=iChart.getLineEquation(n,a,1e3*(this.layer.chart.areas[0].xSeries[s-1]+u-r));c+=d.y-p.y}o=iChart.getLineEquation(n,a,1e3*this.layer.chart.areas[0].xSeries[s]),h=this.layer.area.getXPositionByValue(o.x/1e3),l=this.layer.area.getYPosition(o.y+c);this.drawPoint(t,h,l,"#66FF66",3)}},iChart.Charting.ChartTrendorder.prototype.pointsBack=function(t){for(var e=this.layer.chart.areas[0].xSeries.length-2,i=this.layer.chart.areas[0].viewport.x.min,r=60*this.layer.chart.env.dataSource.dataSettings.timeframe,n={x:this.settings.date,y:this.settings.price},a={x:this.settings.date2,y:this.settings.price2},s=0,o=e;o>i;o--){var h=this.layer.chart.areas[0].xSeries[o+1]-this.layer.chart.areas[0].xSeries[o];if(h/r>1){h/86400>1&&(h-=h%86400);var l=iChart.getLineEquation(n,a,1e3*this.layer.chart.areas[0].xSeries[o-1]);s+=iChart.getLineEquation(n,a,1e3*(this.layer.chart.areas[0].xSeries[o-1]+h-r)).y-l.y}var c=iChart.getLineEquation(n,a,1e3*this.layer.chart.areas[0].xSeries[o]),u=this.layer.area.getXPositionByValue(c.x/1e3),d=this.layer.area.getYPosition(c.y+s);this.drawPoint(t,u,d,"#66FF66")}},iChart.Charting.ChartTrendorder.prototype.drawInternal=function(t,e){if(!(e.length<2))if("line"==this.settings.mode)this.lineNormalizeCoords(t,e),this.drawLineMode(t,e);else{var i=!1;this.settings.newOrderParams||(e=this.normalizeCoords(t,e),i=!0),this.drawTrendMode(t,e),i&&this.calcPointsPosition(e[1].x,150)}},iChart.Charting.ChartTrendorder.prototype.drawPoint=function(t,e,i,r,n){t.save(),t.beginPath(),t.lineWidth=1,t.strokeStyle=r,t.fillStyle=r,n=n||2,t.arc(e,i,n,0,2*Math.PI,!0),t.closePath(),t.fill(),t.restore()},iChart.Charting.ChartTrendorder.prototype.drawExtended=function(t){if(this.selected){if((i=this.getCoordinates(t,this.points)).length<1)return;var e=iChart.formatNumber(this.points[0].y,{decimalPrecision:this.layer.chart.labelPrecision,scale:0});if(this.layer.chart.renderer.drawLable(t,this.settings.fillStyle,0,this.layer.area.innerWidth,i[0].y,e),void 0!==this.markers){var i=this.getCoordinates(t,this.markers),r=(e=iChart.formatNumber(this.markers[0].y,{decimalPrecision:this.layer.chart.labelPrecision,scale:0}),t.inHover?void 0!==this.settings.fillStyleHover?this.settings.fillStyleHover:iChart.Charting.ChartTrendorder.lightColor(this.settings.fillStyle):this.settings.fillStyle);this.layer.chart.renderer.drawLable(t,r,0,this.layer.area.innerWidth,i[0].y,e)}}},iChart.Charting.ChartTrendorder.prototype.drawLable=function(t,e,i,r,n,a){e=e||"#333333",i=i||"#FFFFFF",t.save(),t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle=e,t.lineWidth="2";var s=t.measureText(a).width+5;r=t.canvas.width-120;t.beginPath(),t.moveTo(r-s-5,n+5),t.lineTo(r-s-5,n-5),t.quadraticCurveTo(r-s-5,n-10,r-s,n-10),t.lineTo(r,n-10),t.quadraticCurveTo(r+5,n-10,r+5,n-5),t.lineTo(r+5,n+5),t.quadraticCurveTo(r+5,n+10,r,n+10),t.lineTo(r-s,n+10),t.quadraticCurveTo(r-s-5,n+10,r-s-5,n+5),t.closePath(),t.save();var o=this.layer.chart.chartOptions.shadowColor;this.selected?(t.shadowColor=o,t.shadowBlur=20,t.shadowOffsetX=15,t.shadowOffsetY=15):t.inHover&&(t.shadowColor=o,t.shadowBlur=10,t.shadowOffsetX=5,t.shadowOffsetY=5),t.restore(),t.fill(),this.drawCancelButton(t,r,n-10),t.fillStyle=i,t.fillText(a,r-s,n),t.restore()},iChart.Charting.ChartTrendorder.prototype.drawLableTrend=function(t,e){var i=this.settings.text,r=this.settings.textColor,n=this.settings.textHeight,a=1.2*n,s=(e[0].x+e[1].x)/2,o=(e[0].y+e[1].y)/2,h={center:{x:"",y:""},left:{x:"",y:""},right:{x:"",y:""}},l=Math.atan((e[0].y-e[1].y)/(e[0].x-e[1].x));t.save(),t.font="normal "+n+"px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.lineWidth="1";var c=t.measureText(i).width;t.restore(),h.center.x=s-a*Math.cos(Math.PI/2+l),h.center.y=o-a*Math.sin(Math.PI/2+l),h.left.x=h.center.x-c/2*Math.cos(l),h.left.y=h.center.y-c/2*Math.sin(l),h.right.x=h.center.x+(c/2+20)*Math.cos(l),h.right.y=h.center.y+(c/2+20)*Math.sin(l),this.trendLabelSettings={alpha:l,labelCoords:h},t.save(),t.font="normal "+n+"px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.lineWidth="1",t.strokeStyle=this.settings.fillStyle,t.fillStyle=this.settings.fillStyle;var u=Math.round(n/2);t.translate(h.left.x,h.left.y),t.rotate(l),t.beginPath(),t.moveTo(-3,0+u),t.lineTo(-3,0-u),t.quadraticCurveTo(-3,0-u-3,0,0-u-3),t.lineTo(0+c,0-u-3),t.quadraticCurveTo(0+c+3,0-u-3,0+c+3,0-u),t.lineTo(0+c+3,0+u),t.quadraticCurveTo(0+c+3,0+u+3,0+c,0+u+3),t.lineTo(0,0+u+3),t.quadraticCurveTo(-3,0+u+3,-3,0+u),t.closePath(),t.fill(),t.fillStyle=r,t.fillText(i,0,0),this.drawCancelButton(t,0+c+3,0-u-3),t.restore()},iChart.Charting.ChartTrendorder.prototype.drawCancelButton=function(t,e,i){t.beginPath(),t.moveTo(e,i),t.strokeStyle="#FFFFFF",t.lineWidth=2,t.lineTo(e,i+20),t.stroke(),t.lineTo(e+15,i+20),t.quadraticCurveTo(e+20,i+20,e+20,i+15),t.lineTo(e+20,i+5),t.quadraticCurveTo(e+20,i,e+15,i),t.closePath(),t.fillStyle="#e53935",t.fill(),t.beginPath(),t.moveTo(e+5,i+5),t.lineTo(e+15,i+15),t.moveTo(e+5,i+15),t.lineTo(e+15,i+5),t.stroke(),t.closePath()},iChart.Charting.ChartTrendorder.prototype.drawPoints=function(t,e){if(!this.selected)return 0;function i(t,e,i,r,n,a){e+=(a?-1:1)*r*Math.cos(n),i+=(a?-1:1)*r*Math.sin(n);t.lineWidth=1;var s=a?-.2*Math.PI+n:.8*Math.PI+n,o=a?.2*Math.PI+n:1.2*Math.PI+n,h=a?0*Math.PI+n:1*Math.PI+n,l=e+10*(a?-1:1)*Math.cos(Math.PI/2+n),c=i+10*(a?-1:1)*Math.sin(Math.PI/2+n),u=e+10*(a?1:-1)*Math.cos(Math.PI/2+n),d=i+10*(a?1:-1)*Math.sin(Math.PI/2+n);t.beginPath(),t.arc(l,c,r,s,h),t.stroke(),t.beginPath(),t.arc(u,d,r,h,o),t.stroke();var p=l+r*Math.cos(s),f=c+r*Math.sin(s),g=s+Math.PI/16,v=l+.9*r*Math.cos(g),m=c+.9*r*Math.sin(g),y=l+1.1*r*Math.cos(g),C=c+1.1*r*Math.sin(g);t.beginPath(),t.moveTo(v,m),t.lineTo(p,f),t.lineTo(y,C);p=u+r*Math.cos(o),f=d+r*Math.sin(o),g=o-Math.PI/16,v=u+.9*r*Math.cos(g),m=d+.9*r*Math.sin(g),y=u+1.1*r*Math.cos(g),C=d+1.1*r*Math.sin(g);t.moveTo(v,m),t.lineTo(p,f),t.lineTo(y,C),t.stroke()}var r=Math.atan((e[0].y-e[1].y)/(e[0].x-e[1].x));t.save(),t.strokeStyle=this.settings.fillStyle,t.fillStyle=this.settings.fillStyle,i(t,e[0].x,e[0].y,30,r,!1),i(t,e[1].x,e[1].y,30,r,!0),t.restore()},iChart.Charting.ChartTrendorder.prototype.setTestSegments=function(){if("line"==this.settings.mode)if(this.selected){var t=this.layer.context;t.font="normal 13px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle";var e=t.measureText(this.settings.text).width,i=t.canvas.width-120;this.testContext.segments=[[{x:i-e,y:this.testContext.points[0].y-4},{x:i,y:this.testContext.points[0].y-4}],[{x:i-e,y:this.testContext.points[0].y+4},{x:i,y:this.testContext.points[0].y+4}],[{x:this.layer.area.innerOffset.left,y:this.testContext.points[0].y},{x:this.layer.area.innerOffset.left+this.layer.area.innerWidth,y:this.testContext.points[0].y}]]}else this.testContext&&(this.testContext.segments=[[{x:this.layer.area.innerOffset.left,y:this.testContext.points[0].y},{x:this.layer.area.innerOffset.left+this.layer.area.innerWidth,y:this.testContext.points[0].y}]]);else this.testContext.segments=[],this.testContext.segments=[[{x:this.trendLineSettings.points[0].x,y:this.trendLineSettings.points[0].y},{x:this.trendLineSettings.points[1].x,y:this.trendLineSettings.points[1].y}]],this.trendLabelSettings&&this.testContext.segments.push([{x:this.trendLabelSettings.labelCoords.left.x,y:this.trendLabelSettings.labelCoords.left.y},{x:this.trendLabelSettings.labelCoords.right.x,y:this.trendLabelSettings.labelCoords.right.y}])},iChart.Charting.ChartTrendorder.prototype.onDrag=function(t){if(!t[0]||!t[1])return!1;if("line"==this.settings.mode&&(t[0].y!=this.points[0].y&&this.points[1].y==t[1].y||t[0].y==this.points[0].y&&this.points[1].y!=t[1].y)){this.settings.mode="trend",this.settings.date2=new Date(t[1].x),this.settings.price2=this.points[1].y;var e=this.getCoordinates(this.layer.context,t);this.settings.newOrderParams=this.getOrderParams(e)}var i=1e3*(this.layer.area.getXValue(1)-this.layer.area.getXValue(0));this.points[0].x!=t[0].x&&t[0].x>=t[1].x-i?t[0].x=t[1].x-i:this.points[1].x!=t[1].x&&t[1].x<=t[0].x+i&&(t[1].x=t[0].x+i),"function"==typeof this.settings.restriction&&this.settings.restriction.call(this,t)},iChart.Charting.ChartTrendorder.prototype.onSelect=function(t){iChart.Charting.ChartElement.prototype.onSelect.call(this,t),this.getTestContext(!0)},iChart.Charting.ChartTrendorder.prototype.onBlur=function(){this.settings.mode,this.getTestContext(!0)},iChart.Charting.ChartTrendorder.prototype.onDrop=function(){"trend"==this.settings.mode&&console.log("newOrderParams",this.settings.newOrderParams),"function"==typeof this.settings.onDrop&&this.settings.onDrop.call(this)},iChart.Charting.ChartTrendorder.prototype.onHover=function(t,e){clearTimeout(this.layer.chart.env.timers.orderClose),this.cancelControl(1)},iChart.Charting.ChartTrendorder.prototype.onOut=function(){clearTimeout(this.layer.chart.env.timers.orderClose);var t=this;this.layer.chart.env.timers.orderClose=setTimeout((function(){t.cancelControl(0)}),300)},iChart.Charting.ChartTrendorder.prototype.cancelControl=function(t){if("function"==typeof this.settings.onCancel)if(t){$("#ichartOrderCancelCtrl").hide();var e=this.layer.context,i=e.canvas.width-120,r=this.getCoordinates(e,this.points);$("#ichartOrderCancelCtrl").length||$("<span/>",{id:"ichartOrderCancelCtrl",style:"color:transparent",class:"m-chart-instrument-delete",text:"✕",title:_t("2958","Снять")}).hide().appendTo(this.layer.chart.container);var n=this;if($("#ichartOrderCancelCtrl").unbind("click").bind("click",(function(t){"function"==typeof n.settings.onCancel&&n.settings.onCancel.call(n),$("#ichartOrderCancelCtrl").hide()})).bind("mouseover",(function(){clearTimeout(n.layer.chart.env.timers.orderClose)})).bind("mouseleave",(function(){clearTimeout(n.layer.chart.env.timers.orderClose),n.layer.chart.env.timers.orderClose=setTimeout((function(){n.cancelControl(0)}),1e3)})),"line"==this.settings.mode)var a=r[0].y-8,s=i+2;else if(this.trendLabelSettings)a=this.trendLabelSettings.labelCoords.right.y-10-10*Math.sin(this.trendLabelSettings.alpha),s=this.trendLabelSettings.labelCoords.right.x-10-10*Math.cos(this.trendLabelSettings.alpha);$("#ichartOrderCancelCtrl").css({top:a,left:s}).show()}else $("#ichartOrderCancelCtrl").hide()},iChart.Charting.ChartTrendorder.prototype.onMouseDown=function(t,e,i){"trend"!=this.settings.mode||this.selected||this.calcPointsPosition(e,150),"function"==typeof this.settings.onSelect&&this.settings.onSelect.call(this,t)},iChart.Charting.ChartTrendorder.lightColor=function(t){}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartHorizontalRange=function(t){iChart.Charting.ChartElement.prototype.constructor.call(this,t),this.elementType="HorizontalRange",this.drawType="manually",this.maxPointCount=2,this.hasSettings=!0,this.settings=$.extend({},t.chart.env.userSettings.chartSettings.contextSettings)},inheritPrototype(iChart.Charting.ChartHorizontalRange,iChart.Charting.ChartElement),iChart.Charting.ChartHorizontalRange.prototype.drawInternal=function(t,e){if(!(e.length<2)){var i=this.layer.area.getXValue(t.canvas.width-200);this.points[0].x=1e3*i,e[0].x=t.canvas.width-200,this.points[1].x=1e3*i,e[1].x=t.canvas.width-200,t.save(),t.beginPath(),this.initDrawSettings(t,this.settings),t.moveTo(0,e[0].y),t.lineTo(t.canvas.width,e[0].y),t.stroke(),t.moveTo(0,e[1].y),t.lineTo(t.canvas.width,e[1].y),t.stroke(),t.moveTo(0,e[0].y),t.lineTo(t.canvas.width,e[0].y),t.lineTo(t.canvas.width,e[1].y),t.lineTo(0,e[1].y),t.lineTo(0,e[0].y),t.fill(),t.restore()}},iChart.Charting.ChartHorizontalRange.prototype.drawExtended=function(t){if(this.settings.drawLabel){var e=this.getCoordinates(t,this.points);if(e.length<2)return;var i=this.settings,r=this.layer.chart.renderer.formatNumber(this.layer.area.getYValue(e[0].y),{decimalPrecision:this.layer.chart.labelPrecision,scale:0});this.layer.chart.renderer.drawLable(t,i.strokeStyle,0,this.layer.area.innerWidth,e[0].y,r)}},iChart.Charting.ChartHorizontalRange.prototype.setTestSegments=function(){this.testContext.segments=[[{x:this.layer.area.innerOffset.left,y:this.testContext.points[0].y},{x:this.layer.area.innerOffset.left+this.layer.area.innerWidth,y:this.testContext.points[0].y}],[{x:this.layer.area.innerOffset.left,y:this.testContext.points[1].y},{x:this.layer.area.innerOffset.left+this.layer.area.innerWidth,y:this.testContext.points[1].y}]]}}()},function(t,e){!function(t){"use strict";iChart.Charting.Crosshair=function(t){this.$chart=t.$chart,this.container=null,this.areas=null,this.dots=null,this.hidden=!0,this.pageX=null,this.pageY=null,this.pointMap=void 0,this.yLabel=null},iChart.Charting.Crosshair.prototype.hide=function(){if(!this.hidden){for(var t=0;t<this.dots.length;++t)this.dots[t].style.display="none";null!==this.yLabel&&(this.yLabel.style.display="none");for(t=0;t<this.areas.length;++t){var e=this.areas[t];!1===e.enabled||e.isLayer||e.isScroller||(e.horizontal.style.display="none",e.vertical.style.display="none",e.tooltip.innerHTML=e.tooltipInnerHtml||"")}this.hidden=!0}},iChart.Charting.Crosshair.prototype.render=function(e,i,r){if(r=void 0!==typeof r&&r,e!==this.pageX||i!==this.pageY||r){this.pageX=e,this.pageY=i;var n=this.$chart.offset(),a=(n=this.areas[0].chart._containerSize.offset,{});a.left=Math.round(this.pageX-n.left),a.top=Math.round(this.pageY-n.top);for(var s={x:!1,y:!1},o=0;o<this.areas.length;++o){if(!1!==(S=this.areas[o]).enabled&&!S.isLayer&&!S.isScroller){if("top"==S.chart.chartOptions.tooltipPosition)var h=S.innerOffset.top-20;else if("bottom"==S.chart.chartOptions.tooltipPosition)h=S.innerOffset.top-38+S.innerHeight;t(S.tooltip).css({left:S.innerOffset.left+"px",top:h+"px"}),s[o]={},s.x=(s[o].x=a.left>=S.innerOffset.left&&a.left<=S.innerOffset.left+S.innerWidth)||s.x,s.y=(s[o].y=a.top>=S.innerOffset.top&&a.top<=S.innerOffset.top+S.innerHeight)||s.y}}if(s.x&&s.y){var l;if(void 0===this.pointMap){if(0===(S=this.areas[0]).xSeries.length)return void this.hide();var c=S.getXIndex(a.left-S.innerOffset.left);if(c<S.viewport.x.bounded.min||c>S.viewport.x.bounded.max)return void this.hide();c=Math.max(S.viewport.x.bounded.min,Math.min(S.viewport.x.bounded.max,Math.round(c))),a.left=S.innerOffset.left+Math.round(S.getXPositionByIndex(c));for(o=0;o<this.dots.length;++o){var u=this.dots[o];if(x=(v=(S=this.areas[u.areaIndex]).ySeries[u.seriesIndex2]).points[c]){var d=x[u.yValueIndex];v.multiplier&&(d=v.multiplier*d-100),(T=S.getYPosition(d))>=0&&T<=S.innerHeight?(u.style.display="",u.style.left=a.left-4+"px",u.style.top=S.innerOffset.top+T-4+"px"):u.style.display="none"}else u.style.display="none"}for(o=0;o<this.areas.length;++o){if(!1!==(S=this.areas[o]).enabled&&!S.isScroller){var p=[];if(!S.isLayer){var f=new Date(1e3*S.xSeries[c]);p.push(iChart.formatDateTime(f,"dd.MM.yyyy"+(this.showTime?" HH:mm":"")))}for(var g=0;g<S.ySeries.length;++g)for(var v=S.ySeries[g],m=0;m<v.labels.length;++m){var y=v.labels[m][0],C=v.labels[m][1];if(x=v.points[c]){d=x[y];d=v.multiplier?((d=v.multiplier*d-100)>0?"+":"")+iChart.formatNumber(d,v.formatProvider)+"%":d<100?iChart.formatNumber(d,{decimalPlaces:null,decimalPrecision:6,scale:0}):iChart.formatNumber(d,{decimalPlaces:2,decimalPrecision:null,scale:0}),p.push(C+" <span class='m-chart-legend-value'>"+d+"</span>")}}S.isLayer?t.grep(this.areas,(function(t){return t.name===S.parentName}))[0].tooltip.innerHTML+=" &ensp; "+p.join(" &ensp; "):S.tooltip.innerHTML=p.join(" &ensp; ")}}}else{if(void 0===(l=this.pointMap[a.left]))return void this.hide();a.left=l.offset;for(o=0;o<this.dots.length;++o){var x;u=this.dots[o];if(x=l.y[u.seriesIndex]){var T=x[u.yValueIndex].p;if(!1===(S=this.areas[u.areaIndex]).enabled||S.isScroller)continue;T>=S.innerOffset.top&&T<=S.innerOffset.top+S.innerHeight?(u.style.display="",u.style.left=a.left-4+"px",u.style.top=T-4+"px"):u.style.display="none"}else u.style.display="none"}for(o=0;o<this.areas.length;++o){!1===(S=this.areas[o]).enabled||S.isScroller||(S.tooltip.innerHTML=l.tooltips[o])}}for(o=0;o<this.areas.length;++o){var S;!1===(S=this.areas[o]).enabled||S.isLayer||S.isScroller||(S.tooltip.style.display="",s[o].x?(S.vertical.style.display="",S.vertical.style.left=a.left+"px",s[o].y?(S.horizontal.style.display="",S.horizontal.style.top=a.top-0+"px",null===this.yLabel||S.chart.overlay.drag?this.yLabel.style.display="none":(this.yLabel.innerHTML=iChart.formatNumber(this._getYValue(S,a.top-S.innerOffset.top),{decimalPrecision:5}),this.yLabel.style.display="",this.yLabel.style.top=a.top-8+"px")):S.horizontal.style.display="none"):(S.horizontal.style.display="none",S.vertical.style.display="none"))}this.hidden=!1}else this.hide()}},iChart.Charting.Crosshair.prototype.mouseMoveHandler=function(t){var e,i;void 0===t&&(t=window.event),void 0!==t.pageX?(e=t.pageX,i=t.pageY):(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),e=Math.round(e),i=Math.round(i),this.render(e,i)},iChart.Charting.Crosshair.prototype.update=function(t,e){if(this.container=e,this._clear(),!t||!t.areas)throw"No data available.";this.areas=t.areas,this.chartWidth=this.areas[0].chart._containerSize.width,this.showTime=t.showTime,this._initDots(),this._initYLabel(),this._initPointMap(t),this.addMouseMoveHandler(this)},iChart.Charting.Crosshair.prototype._clear=function(){this.removeMouseMoveHandler(),t(".m-chart-d, .m-chart-h, .m-chart-t, .m-chart-v, .m-chart-y",this.$chart.parent()).remove(),this.areas=[],this.dots=[],this.yLabel=null},iChart.Charting.Crosshair.prototype._getYValue=function(t,e){return 0===t.axisY.scale?t.axisY.max:t.axisY.max-e/t.axisY.scale},iChart.Charting.Crosshair.prototype._initDots=function(){this.dots=[];for(var e=0;e<this.areas.length;++e){var i=this.areas[e];if(!1!==i.enabled&&!i.isLayer&&!i.isScroller)for(var r=0;r<i.ySeries.length;++r){var n=i.ySeries[r],a=n.dotColor||n.color||"";if(""!==a){var s=t("<div/>",{class:"m-chart-d"}).css({"background-color":a,display:"none"}).insertAfter(this.$chart).get(0);s.areaIndex=e,s.seriesIndex=n.index,s.seriesIndex2=r,s.yValueIndex=n.dotIndex||0,this.dots.push(s)}}}},iChart.Charting.Crosshair.prototype._initPointMap=function(e){for(var i=0;i<this.areas.length;++i){var r=this.areas[i];if(!1!==r.enabled&&!r.isScroller){if(r.isLayer||(r.horizontal=t("<div/>",{class:"m-chart-h"}).css({display:"none",left:r.innerOffset.left+"px",width:r.innerWidth+"px"}).insertAfter(this.$chart).get(0),r.vertical=t("<div/>",{class:"m-chart-v"}).css({display:"none",top:r.innerOffset.top+"px",height:r.innerHeight+"px"}).insertAfter(this.$chart).get(0)),void 0===e.pointMap){if(r.viewport.x.bounded.min<=r.viewport.x.bounded.max){var n=[],a=Math.min(r.viewport.x.bounded.max,r.xSeries.length-1-r.chart.chartOptions.futureAmount);if(!r.isLayer){var s=new Date(1e3*r.xSeries[a]);n.push(iChart.formatDateTime(s,"dd.MM.yyyy"+(this.showTime?" HH:mm":"")))}for(var o=0;o<r.ySeries.length;++o)for(var h=r.ySeries[o],l=0;l<h.labels.length;++l){var c=h.labels[l][0],u=h.labels[l][1],d=h.points[a];if(d){var p=d[c];p=h.multiplier?((p=h.multiplier*p-100)>0?"+":"")+iChart.formatNumber(p,h.formatProvider)+"%":p<100?iChart.formatNumber(p,{decimalPlaces:null,decimalPrecision:6,scale:0}):iChart.formatNumber(p,{decimalPlaces:2,decimalPrecision:null,scale:0}),n.push(u+" <span class='m-chart-legend-value'>"+p+"</span>")}}r.isLayer?t.grep(this.areas,(function(t){return t.name===r.parentName}))[0].tooltipInnerHtml+=" &ensp; "+n.join(" &ensp; "):r.tooltipInnerHtml=n.join(" &ensp; ")}}else for(var f in e.pointMap)if(e.pointMap.hasOwnProperty(f)){void 0===(C=e.pointMap[f]).tooltips&&(C.tooltips=new Array(this.areas.length)),(n=[]).push(C.x);for(o=0;o<r.ySeries.length;++o){var g=r.ySeries[o];for(l=0;l<g.labels.length;++l){c=g.labels[l][0],u=g.labels[l][1];var v=C.y[g.index];v&&n.push(u+" <span class='m-chart-legend-value'>"+v[c].v+"</span>")}}r.tooltipInnerHtml=n.join(" &nbsp; "),C.offset=f,C.tooltips[i]=r.tooltipInnerHtml}if(r.isLayer){var m=t.grep(this.areas,(function(t){return t.name===r.parentName}))[0];t(m.tooltip).html(m.tooltipInnerHtml||"")}else{if("top"==r.chart.chartOptions.tooltipPosition)var y=r.innerOffset.top-20;else if("bottom"==r.chart.chartOptions.tooltipPosition)y=r.innerOffset.top-38+r.innerHeight;r.tooltip=t("<div/>",{class:"m-chart-t"}).css({left:r.innerOffset.left+"px",top:y+"px",background:r.chart.chartOptions.backgroundColor}).html(r.tooltipInnerHtml||"").insertAfter(this.$chart).get(0)}}}if(void 0!==e.pointMap){this.pointMap=new Array(this.chartWidth);for(i=0;i<this.chartWidth;++i){o=0;for(var C=e.pointMap[i];this._isEmptyPoint(C)&&(i-o>0||i+o<this.chartWidth);)++o,C=e.pointMap[i-o],this._isEmptyPoint(C)&&(C=e.pointMap[i+o]);this._isEmptyPoint(C)||(this.pointMap[i]=C)}}},iChart.Charting.Crosshair.prototype._initYLabel=function(){var e=this.areas[0];e&&!1!==e.enabled&&!e.isScroller&&(this.yLabel=t("<div/>",{class:"m-chart-y"}).css({background:e.chart.chartOptions.backgroundColor,display:"none",left:e.innerOffset.left+e.innerWidth-(e.chart.chartOptions.yLabelsOutside?0:50)+"px",position:"absolute",margin:"0 0 0 5px"}).insertAfter(this.$chart).get(0))},iChart.Charting.Crosshair.prototype._isEmptyPoint=function(t){if(void 0===t)return!0;for(var e=0;e<t.y.length;++e)if(null!==t.y[e])return!1;return!0},iChart.Charting.Crosshair.prototype.addMouseMoveHandler=function(e){this.mouseMoveHandler&&this.removeMouseMoveHandler(),this.mouseMoveHandler=e.mouseMoveHandler.bind(this),t(this.container).on("mousemove",this.mouseMoveHandler)},iChart.Charting.Crosshair.prototype.removeMouseMoveHandler=function(){void 0!==this.mouseMoveHandler&&t(this.container).off("mousemove ",this.mouseMoveHandler)},t.fn.crosshair=function(t,e){if(!this.length)return this;var i=this.data("crosshair");return void 0===i&&(i=new iChart.Charting.Crosshair({$chart:this}),this.data("crosshair",i)),i.update(t,e),this}}(jQuery)},function(t,e){!function(){"use strict";iChart.Charting.ChartDataSource=function(t,e){var i={useHash:!1,date_from:formatDate(-90),date_to:formatDate(0),graphicIndicators:"",hash:"",id:"",interval:"D1",timeframe:1440,strategies:[]};e=e||{},this.chart=t,this.data=e.data||{},this.dataSettings=e.dataSettings||i,this.preInitCallback="function"==typeof e.preInitCallback?e.preInitCallback.bind(this):function(t,e){t(e.chartOptions)}.bind(this),this.onRequestCallback="function"==typeof e.onRequestCallback?e.onRequestCallback.bind(this):function(t,e){console.log(e);var i=this.dataAdapter(this.data,e);this.chart.wrapper.trigger("iguanaChartEvents",["chartDataReceived",i]),t(i),this.chart.wrapper.trigger("iguanaChartEvents",["chartDataReady",i]),this.chart.dataRequestCounter++}.bind(this)},iChart.Charting.ChartDataSource.prototype.set=function(t){},iChart.Charting.ChartDataSource.prototype.preInit=function(t,e){if(this.dataSettings.date_from=e.date_from||this.dataSettings.date_from||formatDate(-90),this.dataSettings.date_to=e.date_to||this.dataSettings.date_to||formatDate(0),e.period){var i=this.chart.getPeriodDates(e.period);this.dataSettings.date_from=i.date_from,this.dataSettings.date_to=i.date_to}if(this.dataSettings.start=this.dataSettings.start||this.dataSettings.date_from,this.dataSettings.end=this.dataSettings.end||this.dataSettings.date_to,this.dataSettings.interval=e.interval||this.dataSettings.interval,this.dataSettings.timeframe=iChart.getChartTimeframe(this.dataSettings.interval),e.chartOptions=$.extend(!0,{},e.chartOptions),e.theme=void 0!==e.theme?e.theme:IGUANACHART_THEME,e.theme){var r=$.grep($iguanaChart.thems,(function(t){return t.name==e.theme?t:null}))[0];void 0!==r?e.chartOptions=$.extend(!0,{},e.chartOptions,r.settings):"default"==e.theme&&(e.chartOptions=$.extend(!0,{},e.chartOptions,$iguanaChart.defaultTheme))}this.preInitCallback(t,e)},iChart.Charting.ChartDataSource.prototype.onRequest=function(t,e){this.onRequestCallback(t,e)},iChart.Charting.ChartDataSource.prototype.dataAdapter=function(t,e){var i={xSeries:[],ySeries:[],success:!0,warnings:[],message:""},r={chartType:"Column",enabled:!0,formatProvider:{decimalPlaces:"2",decimalPrecision:null},indicatorIndex:null,indicatorIndex2:null,kind:"HLOC",name:e.id,overlay:!1,points:[],valuesPerPoint:4},n={chartType:"Column",enabled:!0,formatProvider:{decimalPlaces:null,decimalPrecision:null},indicatorIndex:null,indicatorIndex2:null,kind:"Volume",name:e.id+" - V",overlay:!1,points:[],valuesPerPoint:1};if(t.hloc){var a=Object.keys(t.hloc);if(1==a.length){i.ySeries[0]=$.extend(!0,{},r),i.ySeries[1]=$.extend(!0,{},n),i.ySeries[0].name=a[0];for(var s=0;s<t.xSeries[a[0]].length;s++)i.xSeries.push(+t.xSeries[a[0]][s]+getTimeOffsetServer(tzOffsetMoscow)),i.ySeries[0].points.push(t.hloc[a[0]][s]),i.ySeries[1].points.push([t.vl[a[0]][s]])}else if(a.length>1){for(var o={},h=0;h<a.length;h++)for(s=0;s<t.xSeries[a[h]].length;s++)void 0===o[t.xSeries[a[h]][s]]&&(o[t.xSeries[a[h]][s]]={}),o[t.xSeries[a[h]][s]][a[h]]=t.hloc[a[h]][s];for(h=0;h<a.length;h++)i.ySeries[h]=$.extend(!0,{},r),i.ySeries[h].name=a[h];for(var l in o){i.xSeries.push(+l+getTimeOffsetServer(tzOffsetMoscow));for(h=0;h<a.length;h++)void 0===o[l][a[h]]?i.ySeries[h].points.push([null,null,null,null]):i.ySeries[h].points.push(o[l][a[h]])}}}return i}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartOptions=function(){this.backgroundColor="#ffffff",this.axisColor="#999999",this.labelColor="#595959",this.labelFont="10px Arial",this.showLabels=!0,this.gridColor="#cccccc",this._gridStyle="dashed",this.watermarkShow=!0,this.watermarkColor="rgba(238,238,238,1)",this.watermarkFont="bold 40px Verdana",this.watermarkSubFont="bold 25px Verdana",this.watermarkText="",this.watermarkSubText="",this.candleUp="#66B85C",this.candleDown="#C75757",this.candleBorderUp="#66B85C",this.candleBorderDown="#C75757",this.candleWick=!0,this.candleWickStyle="#595959",this.stockUp="#66B85C",this.stockDown="#C75757",this.stockWidth=1,this.lineColor="#595959",this.lineWidth=1,this.areaColor="#eff6fb",this.areaLineColor="#cccccc",this.volumeStyle="rgba(119, 119, 119, 0.3)",this.scrollerOverlayColor="rgba(0,0,0, 0.1)",this.scrollerHandlerColor="rgba(255,255,255, 1)",this.areaPaddingBottom=30,this.areaPaddingLeft=0,this.areaPaddingRight=60,this.areaPaddingTop=0,this.paddingBottom=0,this.candleBorder=0,this.tooltipPosition="bottom",this.showAxes=0,this.shadowColor="#999999",this.indicatorColors=[["#3D96AE","#80699B","#DB843D","#B5CA92"],["#A47D7C","#B5CA92","#e0400a","#617db4"],["#ff8c00","#617db4","#999999","#80699B"],["#3D96AE","#80699B","#DB843D","#B5CA92"],["#A47D7C","#B5CA92","#e0400a","#617db4"],["#ff8c00","#617db4","#999999","#80699B"],["#3D96AE","#80699B","#DB843D","#B5CA92"],["#A47D7C","#B5CA92","#e0400a","#617db4"],["#ff8c00","#617db4","#999999","#80699B"],["#3D96AE","#80699B","#DB843D","#B5CA92"],["#A47D7C","#B5CA92","#e0400a","#617db4"],["#ff8c00","#617db4","#999999","#80699B"]],this.minAreaHeight=100,this.minHeight=0,this.seriesColors=["#4BA1B8","#FF8C00","#A47D7C","#3D96AE","#80699B","#DB843D","#80699B"],this.mousewheelZoom=!0,this.maxZoom=20,this.panStep=.3,this.primaryAreaHeight=350,this.primaryAreaAxisYpaddingTop=30,this.primaryAreaAxisYpaddingBottom=30,this.primaryToSecondaryAreaHeightRatio=2,this.scrollerHeight=80,this.updateInterval=!0,this.showCurrentLabel=!0,this.yLabelsOutside=!0,this.percentMode=!1,this.futureAmount=100,this.crosshairEnable=!0,this._chartType="Candlestick",this._showVolume="hidden",this.showVolumeByPrice=!1,this.floatingLegend=!1,this.floatingLegendFontSize=12,this.floatingLegendTextColor="#444444",this.floatingLegendBorderColor="rgba(82,175,201,1)",this.floatingLegendBackground="rgba(82,175,201,.6)",this.legendAlign="top",this.elementStyle={Arrow:{fillStyle:"rgba(255,0,0,.2)",strokeStyle:"rgba(255,0,0,1)",lineWidth:3},Text:{fontColor:"#777777",fontSize:"28"}},this.uiTools={top:!1},this.inertialScrolling=!0},iChart.Charting.ChartOptions.themesParams=["backgroundColor","axisColor","showAxes","labelColor","gridColor","gridStyle","watermarkColor","watermarkFont","watermarkSubFont","candleUp","candleDown","candleBorder","candleBorderUp","candleBorderDown","candleWick","candleWickStyle","stockUp","stockDown","stockWidth","lineColor","lineWidth","areaColor","areaLineColor","volumeStyle","scrollerOverlayColor","scrollerHandlerColor","shadowColor","chartType"],iChart.Charting.ChartOptions.getThemeOptions=function(t){var e={};return t&&$.each(this.themesParams,(function(i,r){"object"==typeof t[r]?$.isArray(t[r])?e[r]=$.extend(!0,[],t[r]):e[r]=$.extend(!0,{},t[r]):t[r]&&(e[r]=t[r])})),e},Object.defineProperty(iChart.Charting.ChartOptions.prototype,"chartType",{get:function(){return this._chartType},set:function(t){["Candlestick","Stock","Line","Area"].indexOf(t)>=0?this._chartType=t:(this._chartType="Candlestick",console.warn("ChartOptions: Недопустимое значение chartType:'%s'. Установлен по умлчанию: 'Candlestick'",t))}}),Object.defineProperty(iChart.Charting.ChartOptions.prototype,"showVolume",{get:function(){return this._showVolume},set:function(t){["inside","outside","hidden"].indexOf(t)>=0?this._showVolume=t:(this._showVolume="hidden",console.warn("ChartOptions: Недопустимое значение showVolume. Установлен по умлчанию: 'hidden'"))}}),Object.defineProperty(iChart.Charting.ChartOptions.prototype,"gridStyle",{get:function(){return this._gridStyle},set:function(t){["dashed","solid"].indexOf(t)>=0?this._gridStyle=t:(this._gridStyle="dashed",console.warn("ChartOptions: Недопустимое значение gridStyle. Установлен по умлчанию: 'dashed'"))}})}()},function(t,e){!function(){"use strict";var t=0;iChart.Charting.Chart=function(e){this.env=e.env,this._id=t++,this.chartOptions=new iChart.Charting.ChartOptions,this.dataCountMin=50,this.historyEnd=e.historyEnd,this.labelPrecision=5,this.dataCallback=e.dataCallback,this.onCreateAreas=e.onCreateAreas||$.noop,this.onDataSettingsChange=e.onDataSettingsChange||$.noop,this.onIntervalChange=e.onIntervalChange||$.noop,this.onPositionAreas=e.onPositionAreas||$.noop,this.onPostRender=e.onPostRender||$.noop,this.onPreRender=e.onPreRender||$.noop,this.contextmenuCallback=e.contextmenuCallback||$.noop,this._dataLoading=!1,this.areas=null,this.canvas=null,this.isComparison=!1,this.viewport={x:{min:null,max:null},y:{min:null,max:null}},this.container=e.container,$(this.container).unbind("selectstart"),$(this.container).attr("unselectable","on").css("user-select","none").on("selectstart",!1),this.overlay=new iChart.Charting.ChartDrawingLayer(this),this.widgetLay=new iChart.Charting.ChartWidgetLayer(this,e.widget),this.renderer=new iChart.Charting.ChartRenderer(this),this.selection=new iChart.Charting.ChartSelection(this.container),this.selection.movestart=$.proxy(this._selectionMoveStartCallback,this),this.selection.move=$.proxy(this._selectionMoveCallback,this),this.selection.moveend=$.proxy(this._selectionMoveEndCallback,this),this.setSelectionMode("pan");var i=this;if($(this.container).on("mousewheel",(function(t){$.proxy(i._mousewheelCallback(t),i)})),this.touches=new iChart.Charting.ChartTouches(this),$(this.container).off("contextmenu").on("contextmenu",(function(t){$.proxy(i.contextmenuCallback(t),i),i.env.wrapper.trigger("iguanaChartEvents",["contextmenuCallback",t])})),!$(this.env.container).height()){var r=this.calculateHeight();$(this.env.container).height(r.height)}this.chartOptions=$.extend(!0,this.chartOptions,e),this.crosshair=!1,this._resized=!0,this._containerSize={}},iChart.Charting.Chart.prototype.clearIndicators=function(t){for(var e=0;e<this.areas.length;++e){var i=this.areas[e];if(!t||i===t){for(var r=[],n=0;n<i.ySeries.length;++n)"TechnicalAnalysis"!==i.ySeries[n].kind&&"TA_LIB"!==i.ySeries[n].kind||(r.push(i.ySeries[n].indicatorIndex),i.ySeries.splice(n,1),--n);if(r.length){for(var a in this._dataSettings)for(n=0;n<r.length;n++)this._dataSettings.hasOwnProperty(a)&&a.match(new RegExp("^i"+r[n],"i"))&&delete this._dataSettings[a];if(0===i.ySeries.length)void 0!==i.overlay&&$(i.overlay.canvas).remove(),this.areas.splice(e,1)[0].dispose(),--e}}}this.onDataSettingsChange.call(this),this.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1}),this.env.wrapper.trigger("iguanaChartEvents",["clearIndicators"])},iChart.Charting.Chart.prototype.findAreaAtPosition=function(t,e){for(var i={},r=0;r<this.areas.length;++r)if(i.area=this.areas[r],i.area.enabled&&t>=i.area.offset.left&&t<=i.area.offset.left+i.area.outerWidth&&e>=i.area.offset.top&&e<=i.area.offset.top+i.area.outerHeight)return i.insideX=t>=i.area.innerOffset.left&&t<=i.area.innerOffset.left+i.area.innerWidth,i.insideY=e>=i.area.innerOffset.top&&e<=i.area.innerOffset.top+i.area.innerHeight,i.insideX||i.insideY?i:null;return null},iChart.Charting.Chart.prototype.getSeriesCollection=function(){for(var t=[],e=0;e<this.areas.length;++e)for(var i=this.areas[e].ySeries,r=0;r<i.length;++r)"TA_LIB"!=i[r].kind&&-1===t.indexOf(i[r])&&t.push(i[r]);return t},iChart.Charting.Chart.prototype.loadMissingData=function(){var t=this.areas[0];if(this._dataStart){var e=Math.round(t.xSeries.min-this.viewport.x.min);if(e>0){(n=$.extend(!0,{},this._dataSettings)).count=-Math.max(this.dataCountAdapt(e),e),n.intervalMode="OpenRay",n.start=iChart.formatDateTime(this._dataStart),delete n.end;var i=iChart.parseDateTime(n.start),r=iChart.parseDateTime(n.start);return i.setHours(0),i.setMinutes(0),i.setSeconds(0),r.setHours(0),r.setMinutes(0),r.setSeconds(0),1440==n.timeframe?(i.setMonth(0),i.setDate(0),r.setFullYear(r.getFullYear()+1,0,0),n.count=-1):60==n.timeframe||15==n.timeframe?(i.setMonth(i.getMonth()-1),i.setDate(0),r.setMonth(r.getMonth()+1),r.setDate(0),n.count=-1):5==n.timeframe?(r.setDate(r.getDate()+(7-(0==r.getDay()?7:r.getDay()))),i.setDate(i.getDate()-(0==i.getDay()?7:i.getDay())),n.count=-1):1==n.timeframe&&(r.setDate(r.getDate()+1),i.setDate(i.getDate()-1),n.count=-100),n.date_from=iChart.formatDateTime(i,"dd.MM.yyyy HH:mm"),n.date_to=iChart.formatDateTime(r,"dd.MM.yyyy HH:mm"),n.start=n.date_to,void this.requestData(n,!1,!1)}}if(this._dataEnd){var n,a=Math.round(this.viewport.x.max-t.xSeries.max);if(a>0)(n=$.extend(!0,{},this._dataSettings)).count=Math.max(this.dataCountAdapt(a),a)+this.chartOptions.futureAmount,n.intervalMode="OpenRay",n.start=iChart.formatDateTime(this._dataEnd),n.date_to=iChart.formatDateTime(this._dataEnd,"dd.MM.yyyy HH:mm"),delete n.end,this.requestData(n,!1,!1)}},iChart.Charting.Chart.prototype.dataCountAdapt=function(t){var e=50;switch(this._dataSettings.timeframe){case 1:e=500;break;case 5:e=300;break;case 15:e=200;break;case 30:e=150;break;case 60:e=120;break;case 1440:e=100}return e+t},iChart.Charting.Chart.prototype.pan=function(t){for(var e,i=0;i<this.areas.length&&(e=this.areas[i]).name!==this.viewport.areaName;++i)e=null;if(null===e&&(e=this.areas[0]),this.viewport.areaName=e.name,"left"===t||"right"===t){null===this.viewport.x.min&&(this.viewport.x.min=e.viewport.x.bounded.min),null===this.viewport.x.max&&(this.viewport.x.max=e.viewport.x.bounded.max);var r=Math.max(1,this.chartOptions.panStep*(this.viewport.x.max-this.viewport.x.min));"left"===t&&(r*=-1),this.viewport.x.min+=r,this.viewport.x.max+=r}else{if("top"!==t&&"bottom"!==t)return;null===this.viewport.y.min&&(this.viewport.y.min=e.viewport.y.min),null===this.viewport.y.max&&(this.viewport.y.max=e.viewport.x.max);r=this.chartOptions.panStep*(this.viewport.y.max-this.viewport.y.min);"bottom"===t&&(r*=-1),this.viewport.y.min+=r,this.viewport.y.max+=r}this._fixViewportBounds(),this.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0}),this.loadMissingData()},iChart.Charting.Chart.prototype.parseDataSettings=function(t){var e=$.extend(!0,{},t);return e.start=iChart.parseDateTime(e.start),e.end=iChart.parseDateTime(e.end),e.timeframe=parseInt(e.timeframe,10),isNaN(Date.parse(e.date_from))&&(e.date_from=new Date),isNaN(Date.parse(e.date_to))&&(e.date_to=new Date),e},iChart.Charting.Chart.prototype.render=function(t,e){if(!this.areas)return console.log("No ares to render. Abort"),!1;if(t.context&&t.forceRecalc)throw new Error("Parameters 'forceRecalc' and 'context' parameters cannot be specified at the same time.");var i,r;t.resetViewport&&(this.viewport.x.min=null,this.viewport.x.max=null,this.viewport.y.min=null,this.viewport.y.max=null);var n=t.context;if(t.forceRecalc){if(this._positionAreas(),!this.canvas)return console.log("No canvas to render. Abort"),!1;n=iChart.getContext(this.canvas),(r={}).x={},r.x.min=this.viewport.x.min,r.x.max=this.viewport.x.max,r.y={};for(var a=0;a<this.areas.length;++a)(i=this.areas[a]).name===this.viewport.areaName?(r.y.min=this.viewport.y.min,r.y.max=this.viewport.y.max):(r.y.min=null,r.y.max=null),i.calculateInnerDimensions(r)}return this.onPreRender.call(this,t,n),this.renderer.renderChart(n),this.onPostRender.call(this,t,n),t.forceRecalc&&(this.widgetLay&&this.widgetLay.update(),this.overlay&&this.overlay.update()),"undefined"!=typeof FlashCanvas&&n.e(),t.testForIntervalChange&&this._testForIntervalChange(e),!0},iChart.Charting.Chart.prototype.requestData=function(t,e,i,r){var n=new RegExp("^i[0-9]+$","i");for(var a in t)n.test(a)&&t[a]&&this.env.viewData.indicators[t[a]]&&"TA_LIB"==this.env.viewData.indicators[t[a]].type&&(t[a]="");if(!this._dataLoading){this._dataLoading=!0,this.touches.disabled=!0;var s=this,o=0;this.env.dataSource.onRequest((function(n){s.setWarnings(n.warnings),n.success&&(o=s.updateData(n,t,e),s.render({forceRecalc:!0,resetViewport:i,testForIntervalChange:!0},r)),setTimeout((function(){s.scheduleUpdate()}),2e3),s._dataLoading=!1,s&&s.areas&&o&&s.areas[0].xSeries.min>s.viewport.x.min&&s.loadMissingData(),s.indicatorsApply()}),t)}},iChart.Charting.Chart.prototype.indicatorsApply=function(){if(void 0!==this.env.TA){var t={};if(this.areas)for(var e=0;e<this.areas.length;++e)for(var i=this.areas[e],r=0;r<i.ySeries.length;++r)if("TA_LIB"===i.ySeries[r].kind){var n=i.ySeries[r].indicatorIndex,a=i.ySeries[r].name,s=$.extend(!0,{},i.ySeries[r].params);this.env.TA[a]&&!t[a+"/"+n]&&(this.env.TA[a](0,n),this.env.TA[a](1,n,s),t[a+"/"+n]=!0)}var o=this,h=iChart.parseQueryString(this.env.dataSource.dataSettings.graphicIndicators);$.each(h,(function(e,i){if(i&&e.match(/^i[0-9]+$/)&&o.env.viewData.indicators[i]&&"TA_LIB"==o.env.viewData.indicators[i].type){var r=e.match(/^i([0-9]+)$/)[1];if(!t[i+"/"+r]){for(var n={},a=0;a<o.env.viewData.indicators[i].parameters.length;a++){var s=o.env.viewData.indicators[i].parameters[a],l=o.env.TA.mapParam(s.Code);h[e+"_"+l]?n[s.Code]=+h[e+"_"+l]:n[s.Code]=+h[e+"_"+s.Code]||s.Value}o.env.TA[i](0,r),o.env.TA[i](1,r,n)}}}))}},iChart.Charting.Chart.prototype.resetZoom=function(){this.render({forceRecalc:!0,resetViewport:!0,testForIntervalChange:!0})},iChart.Charting.Chart.prototype.resize=function(){this._resized=!0,this.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1}),this.selection.recalculateContainerPosition()},iChart.Charting.Chart.prototype.scheduleUpdate=function(){clearTimeout(this.env.timers.scheduleUpdate),this.chartOptions.updateInterval&&this._dataSettings.id==this.env.viewData.chart._dataSettings.id&&$(this.env.container).length&&(this.env.timers.scheduleUpdate=setTimeout($.proxy(this.update,this,!0),2e4*this.env.viewData.chart._dataSettings.timeframe))},iChart.Charting.Chart.prototype.setChartType=function(t){this.chartOptions.chartType===t||this.isComparison||(this.chartOptions.chartType=t,this.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1}))},iChart.Charting.Chart.prototype.setDataSettings=function(t,e){var i=this._dataSettings;this._dataSettings=this.parseDataSettings(t);var r=$.extend(!0,{},this._dataSettings);if(void 0!==i){var n={};i.interval!=this._dataSettings.interval&&(n.interval=this._dataSettings.interval,this.env.wrapper.trigger("iguanaChartEvents",["intervalChange",this._dataSettings.interval])),i.id!=this._dataSettings.id&&(n.id=this._dataSettings.id),i.type!=this._dataSettings.type&&(n.type=this._dataSettings.type),Object.keys(n).length&&this.env.wrapper.trigger("iguanaChartEvents",["settingsChange",n])}var a=new Date(1800,0,1),s=this.historyEnd||new Date,o=(r.start||a).getTime(),h=(r.end||s).getTime();if(i&&i.id===r.id&&i.timeframe===r.timeframe&&!e){var l=!0,c=new RegExp("^i[0-9]+(_.*)?$","i");for(var u in i)if(i.hasOwnProperty(u)&&c.test(u)&&(!r.hasOwnProperty(u)||i[u]!==r[u])){l=!1;break}if(l)for(var u in r)if(r.hasOwnProperty(u)&&c.test(u)&&(!i.hasOwnProperty(u)||i[u]!==r[u])){l=!1;break}if(l){var d=(i.start||a).getTime(),p=(i.end||s).getTime();if(d==o&&p===h)return!1;if(d=(this._dataStart||a).getTime(),p=(this._dataEnd||s).getTime(),d<=o&&h<=p)return this.env.wrapper.trigger("iguanaChartEvents",["clearLoader"]),this.render({forceRecalc:!0,resetViewport:!0,testForIntervalChange:!0}),!0;o<d&&p===h?(r.intervalMode="OpenRay",r.count=-Math.max(this.dataCountMin,Math.round((d-o)/(6e4*r.timeframe))+50),r.start=new Date(d)):d==o&&p<h&&(r.intervalMode="OpenRay",r.count=Math.max(this.dataCountMin,Math.round((h-p)/(6e4*r.timeframe))+50),r.start=new Date(p))}}var f=!r.intervalMode;if(f){r.intervalMode="ClosedRay",r.count=-Math.max(this.dataCountMin,Math.round((h-o)/(6e4*r.timeframe)/2)),r.start=r.end;var g=iChart.parseDateTime(r.date_to),v=iChart.parseDateTime(r.date_from);1440==r.timeframe?(g.setFullYear(g.getFullYear()-5),(v=new Date(Math.max(v.getTime(),g.getTime()))).setMonth(0),v.setDate(0),r.count=-1):60==r.timeframe?(g.setMonth(g.getMonth()-3),(v=new Date(Math.max(v.getTime(),g.getTime()))).setMonth(v.getMonth()-1),v.setDate(0),r.count=-10):15==r.timeframe?(g.setMonth(g.getMonth()-1),(v=new Date(Math.max(v.getTime(),g.getTime()))).setDate(0),r.count=-10):5==r.timeframe?(g.setDate(g.getDate()-14),(v=new Date(Math.max(v.getTime(),g.getTime()))).setHours(0),v.setMinutes(0),v.setSeconds(0),v.setDate(v.getDate()-v.getDay()),r.count=-100):1==r.timeframe&&(g.setDate(g.getDate()-5),(v=new Date(Math.max(v.getTime(),g.getTime()))).setHours(0),v.setMinutes(0),v.setSeconds(0),v.setDate(v.getDate()-1),r.count=-200),v.setHours(0),v.setMinutes(0),v.setSeconds(0),r.date_from=iChart.formatDateTime(v,"dd.MM.yyyy HH:mm")}return delete r.end,r.start=iChart.formatDateTime(iChart.parseDateTime(r.start),"dd.MM.yyyy HH:mm"),this.requestData(r,f,!0),!0},iChart.Charting.Chart.prototype.setSelectionMode=function(t){if(this.container){switch(t){case"pan":this.container.style.cursor=this.overlay.defaultCursor=MOBILE_BROWSER_DETECTED?"move":"url('"+this.env.lib_path+"/styles/cursors/grab.cur'), move";break;case"zoom":this.container.style.cursor=this.overlay.defaultCursor="crosshair";break;case"wait":this.container.style.cursor=this.overlay.defaultCursor="wait";break;default:throw new Error("Selection mode '"+t+"' is invalid.")}this.selection.mode=t}},iChart.Charting.Chart.prototype.setWarnings=function(t){var e=$(".m-chart-warnings",this.container);t&&t.length?(0===e.length?e=$("<div/>",{class:"m-chart-warnings"}).appendTo(this.container):e.show(),e.text(t.join("\r\n"))):e.hide()},iChart.Charting.Chart.prototype.showTime=function(){return parseInt(this._dataSettings.timeframe,10)%1440!=0},iChart.Charting.Chart.prototype.toBase64=function(t){var e=document.createElement("canvas");if(e.id="iChart-chart",e.style.left=0,e.style.position="absolute",e.style.top=-this.canvas.height,document.body.appendChild(e),void 0===e.getContext){if("undefined"==typeof FlashCanvas)return void alert("Ваш браузер не поддерживается.");FlashCanvas.initElement(e)}e.width=this.canvas.width,e.height=this.canvas.height;var i=iChart.getContext(e);this.render({context:i,forceRecalc:!1,resetViewport:!1,testForIntervalChange:!1}),this.overlay.render(i),this.renderer.renderLegends(i);var r=e.toDataURL(t);$(e).remove();return r.substring(r.indexOf(";base64,")+";base64,".length)},iChart.Charting.Chart.prototype.update=function(t){var e=$.extend(!0,{},this._dataSettings);e.intervalMode="ClosedRay",t&&(e.intervalMode="OpenRay"),e.count=this.dataCountMin;var i=this.areas[0].xSeries;0!==i.length&&(e.date_from=iChart.formatDateTime(new Date(1e3*i[i.length-this.chartOptions.futureAmount-1]),"dd.MM.yyyy HH:mm"),e.date_to=e.date_from,e.start=e.date_from),delete e.end,this.requestData(e,!1,!1,t)},iChart.Charting.Chart.prototype.updateData=function(t,e,i){if("ClosedRay"!==e.intervalMode&&"OpenRay"!==e.intervalMode)throw new Error("Interval mode '"+e.intervalMode+"' is invalid.");if(e.count<0?(t.xSeries.length<-e.count?this._dataStart=null:this._dataStart=new Date(1e3*t.xSeries[0]),i&&(this._dataEnd=iChart.parseDateTime(e.start))):(i&&(this._dataStart=iChart.parseDateTime(e.start)),t.xSeries.length<e.count?this._dataEnd=null:this._dataEnd=new Date(1e3*t.xSeries[t.xSeries.length-1])),0!==t.xSeries.length){var r=new Date(1e3*t.xSeries[t.xSeries.length-1]);(!this.historyEnd||r.getTime()>this.historyEnd.getTime())&&(this.historyEnd=r)}if(i)return this._setData(t,e);if(0!==t.xSeries.length){var n=this._mergeData(t,e);return e.count<0&&!n?this._dataStart=null:e.count>0&&!n&&(this._dataEnd=null),n}},iChart.Charting.Chart.prototype.zoom=function(t){this._zoomInternal(null,t)},iChart.Charting.Chart.prototype.addFuture=function(){var t=this.areas[0].xSeries,e=this._dataSettings;if(this.chartOptions.futureAmount)for(var i=60*e.timeframe,r=0;r<this.chartOptions.futureAmount;r++)t.push(t[t.length-1]+i);var n=$.grep(this.getSeriesCollection(),(function(t){return t.enableMerge}));for(r=0;r<n.length;++r){var a=n[r];if(this.chartOptions.futureAmount)if(1==a.valuesPerPoint)for(var s=0;s<this.chartOptions.futureAmount;s++)a.points.push([null]);else for(s=0;s<this.chartOptions.futureAmount;s++)a.points.push([null,null,null,null])}for(r=0;r<this.areas.length;++r)this.areas[r].setMinMax();this._setXLabelFormat()},iChart.Charting.Chart.prototype.removeFuture=function(){var t=this.areas[0].xSeries;this.chartOptions.futureAmount&&t.splice(-this.chartOptions.futureAmount,this.chartOptions.futureAmount);var e=$.grep(this.getSeriesCollection(),(function(t){return t.enableMerge}));if(this.chartOptions.futureAmount)for(var i=0;i<e.length;i++)e[i].points.splice(-this.chartOptions.futureAmount,this.chartOptions.futureAmount);for(i=0;i<this.areas.length;++i)this.areas[i].setMinMax();this._setXLabelFormat()},iChart.Charting.Chart.prototype._fixViewportBounds=function(){for(var t,e,i=null,r=0;r<this.areas.length;++r)this.areas[r].name===this.viewport.areaName&&(i=this.areas[r]);null!==i&&(null!==this.viewport.x.min&&null!==this.viewport.x.max&&(t=.7*(this.viewport.x.max-this.viewport.x.min),(e=this.viewport.x.max-(i.xSeries.max-i.chart.chartOptions.futureAmount)-t)>0?(this.viewport.x.min-=e,this.viewport.x.max-=e):(e=i.xSeries.min-this.viewport.x.min-t)>0&&(this.viewport.x.min+=e,this.viewport.x.max+=e)),null!==this.viewport.y.min&&null!==this.viewport.y.max&&(t=.7*(this.viewport.y.max-this.viewport.y.min),(e=this.viewport.y.max-i.ySeries.bounds.max-t)>0?(this.viewport.y.min-=e,this.viewport.y.max-=e):(e=i.ySeries.bounds.min-this.viewport.y.min-t)>0&&(this.viewport.y.min+=e,this.viewport.y.max+=e)))},iChart.Charting.Chart.prototype._mergeData=function(t,e){var i=!1,r=this.areas[0].xSeries,n=r.length;this.chartOptions.futureAmount&&r.splice(-this.chartOptions.futureAmount,this.chartOptions.futureAmount);var a=$.grep(this.getSeriesCollection(),(function(t){return t.enableMerge}));if(this.chartOptions.futureAmount)for(var s=0;s<a.length;s++)a[s].points.splice(-this.chartOptions.futureAmount,this.chartOptions.futureAmount);if(e.count<0){for(var o=s=t.xSeries.length-1;t.xSeries[s]>r[0]&&s>0;)s--;var h=s;t.xSeries.splice(h,o-h+1);for(var l=t.ySeries.length-1;l>=0;--l)t.ySeries[l].points.splice(h,o-h+1);var c=t.xSeries.length;t.xSeries[t.xSeries.length-1]===r[0]&&(r.splice(0,1),--c,i=!0),null!==this.viewport.x.min&&(this.viewport.x.min+=c),null!==this.viewport.x.max&&(this.viewport.x.max+=c),this.selection&&this.selection.shiftAnchor(c);for(l=t.xSeries.length-1;l>=0;--l)r.splice(0,0,t.xSeries[l])}else{for(var u=r.length,d=u,p=0;r[d-1]>=t.xSeries[0];)d--;r[d]!=t.xSeries[0]&&d!=u&&(p=1),d-=p,r.splice(d,t.xSeries.length);for(l=0;l<t.xSeries.length;++l)r.splice(d+l,0,t.xSeries[l]);for(s=0;s<a.length;s++)a[s].points.splice(d,t.xSeries.length)}if(this.chartOptions.futureAmount){var f=60*(e.timeframe||this.env.dataSource.dataSettings.timeframe);for(s=0;s<this.chartOptions.futureAmount;s++)r.push(r[r.length-1]+f)}var g=[],v=[],m={};for(s=0;s<t.ySeries.length;++s){switch((x=t.ySeries[s]).kind){case"HLOC":g.push(x);break;case"TechnicalAnalysis":x.overlay?g.push(x):void 0===m[x.indicatorIndex]?m[x.indicatorIndex]=[x]:m[x.indicatorIndex].push(x);break;case"Volume":v.push(x);break;default:continue}}var y=[];for(s=0;s<g.length;++s)y.push(g[s]);if(!this.isComparison)for(s=0;s<v.length;++s)y.push(v[s]);for(var C in m)if(m.hasOwnProperty(C))for(s=0;s<m[C].length;++s)y.push(m[C][s]);if(a.length>y.length)throw new Error("Y series count mismatch while merging chart data, expected "+a.length+", got "+y.length+".");for(s=0;s<a.length;++s){var x=a[s],T=y[s];if(x.kind===T.kind){if(e.count<0){i&&x.points.splice(0,1);for(l=T.points.length-1;l>=0;--l)x.points.splice(0,0,T.points[l])}else{i&&x.points.pop();for(l=0;l<T.points.length;++l)x.points.splice(d+l,0,T.points[l])}if(this.chartOptions.futureAmount)if(1==x.valuesPerPoint)for(l=0;l<this.chartOptions.futureAmount;l++)x.points.push([null]);else for(l=0;l<this.chartOptions.futureAmount;l++)x.points.push([null,null,null,null])}}for(s=0;s<this.areas.length;++s)this.areas[s].setMinMax();return this._setXLabelFormat(),r.length-n},iChart.Charting.Chart.prototype._mousewheelCallback=function(t){if(this.chartOptions.mousewheelZoom){var e=$(this.container).offset(),i=t.pageX-e.left,r=t.pageY-e.top,n=this.findAreaAtPosition(i,r),a=t.deltaY,s=t.deltaFactor;null!==n&&(this._zoomInternal(n.area,.2*a*s/53,"x",n.area.getXIndex(i-n.area.innerOffset.left),n.area.getYValue(r-n.area.innerOffset.top)),t.preventDefault())}},iChart.Charting.Chart.prototype.calculateHeight=function(){var t,e,i=this.areas?$.grep(this.areas,(function(t){return t.enabled})):[],r=0,n=0;if(this.chartOptions.uiTools.top&&(n=this.env.ui.$topToolBarContainer.height()),this.chartOptions.minHeight&&this.areas){var a=this.chartOptions.minHeight-this.chartOptions.scrollerHeight-n,s=$.grep(i,(function(t){return!t.isLayer})).length;e=Math.max(this.chartOptions.minAreaHeight,Math.floor(a/(s+(0===this.chartOptions.scrollerHeight?0:-1)+this.chartOptions.primaryToSecondaryAreaHeightRatio-1))),t=Math.floor(this.chartOptions.primaryToSecondaryAreaHeightRatio*e)}else e=Math.round(this.chartOptions.primaryAreaHeight/this.chartOptions.primaryToSecondaryAreaHeightRatio),t=this.chartOptions.primaryAreaHeight;if(r+=n,this.areas)for(var o=0;o<i.length;++o){var h=i[o];h.isLayer?(h.offset.left=0,h.outerWidth=0,h.outerHeight=e,h.offset.top=t-h.outerHeight):(h.offset.top=r,h.offset.left=0,h.outerWidth=0,h.outerHeight="Scroller"===h.name?this.chartOptions.scrollerHeight:"ChartArea1"===h.name?t:e,h.updateCloseButton(),r+=h.outerHeight+h.margin.bottom)}else r+=t+=this.chartOptions.scrollerHeight;return{height:r,primaryHeight:t}},iChart.Charting.Chart.prototype._positionAreas=function(){if(this.container){var t=$(this.container);!t.length||!this._resized&&this._containerSize.height&&this._containerSize.width||(this._containerSize.height=t.height(),this._containerSize.width=t.width(),this._containerSize.offset=t.offset(),this._resized=!1);var e,i,r=this._containerSize.height,n=this._containerSize.width,a=$.grep(this.areas,(function(t){return t.enabled})),s=0,o=n,h=0;if(this.chartOptions.uiTools.top&&(console.log(this),h=this.env.ui.$topToolBarContainer.height()),this.chartOptions.minHeight){var l=this.chartOptions.minHeight-this.chartOptions.scrollerHeight-h,c=$.grep(a,(function(t){return!t.isLayer})).length;i=Math.max(this.chartOptions.minAreaHeight,Math.floor(l/(c+(0===this.chartOptions.scrollerHeight?0:-1)+this.chartOptions.primaryToSecondaryAreaHeightRatio-1))),e=Math.floor(this.chartOptions.primaryToSecondaryAreaHeightRatio*i)}else i=Math.round(this.chartOptions.primaryAreaHeight/this.chartOptions.primaryToSecondaryAreaHeightRatio),e=this.chartOptions.primaryAreaHeight;for(var u=0;u<a.length;++u){(p=a[u]).isLayer?(p.offset.left=0,p.outerWidth=o,p.outerHeight=i,p.offset.top=e-p.outerHeight):(p.offset.top=s,p.offset.left=0,p.outerWidth=o,p.outerHeight="Scroller"===p.name?this.chartOptions.scrollerHeight:"ChartArea1"===p.name?e:i,p.updateCloseButton(),s+=p.outerHeight+p.margin.bottom)}var d=this.areas[0];d.axisX.paddingLeft=10,d.axisX.paddingRight=10,d.axisY.paddingTop=this.chartOptions.primaryAreaAxisYpaddingTop,d.axisY.paddingBottom=this.chartOptions.primaryAreaAxisYpaddingBottom,d.padding.bottom=this.chartOptions.areaPaddingBottom,d.padding.left=this.chartOptions.areaPaddingLeft,d.padding.right=this.chartOptions.yLabelsOutside?this.chartOptions.areaPaddingRight:0,d.padding.top=this.chartOptions.areaPaddingTop;for(u=1;u<this.areas.length;++u){var p;switch((p=this.areas[u]).name){case"ChartArea1":break;case"ChartArea2":p.axisX.paddingLeft=d.axisX.paddingLeft,p.axisX.paddingRight=d.axisX.paddingRight,p.axisY.paddingTop=0,p.axisY.paddingBottom=0,p.isLayer?(p.padding.bottom=d.padding.bottom,p.padding.top=d.padding.top):(p.padding.bottom=8,p.padding.top=18),p.padding.left=d.padding.left,p.padding.right=d.padding.right;break;case"Scroller":p.axisX.paddingLeft=d.axisX.paddingLeft,p.axisX.paddingRight=d.axisX.paddingRight,p.axisY.paddingTop=10,p.axisY.paddingBottom=10,p.padding.bottom=32,p.padding.left=d.padding.left,p.padding.right=d.padding.right;break;default:p.axisX.paddingLeft=d.axisX.paddingLeft,p.axisX.paddingRight=d.axisX.paddingRight,p.axisY.paddingTop=10,p.axisY.paddingBottom=10,p.isLayer?(p.padding.bottom=d.padding.bottom,p.padding.top=d.padding.top):(p.padding.bottom=32,p.padding.top=0),p.padding.left=d.padding.left,p.padding.right=d.padding.right}}this.positionVolumeByPriceArea();var f=this.onPositionAreas.call(this);f&&(o=f.width||o,s=f.height||s),r=s,s+=h,this.canvas=iChart.Charting.initCanvas(this.container,this.canvas,n,r),t.height(r)}},iChart.Charting.Chart.prototype._selectionMouseDownCallback=function(t){},iChart.Charting.Chart.prototype._selectionMoveStartCallback=function(t){switch(t.moved=!1,t.mode){case"pan":if(t.position1=this.findAreaAtPosition(t.x1,t.y1),null===t.position1)break;var e=t.position1.area;if(t.position1.insideX&&t.position1.insideY){t.resizeScrollerL=e.isScroller&&e.$scrollerOverlayCenterL.data("iChart-hover"),t.resizeScrollerR=e.isScroller&&!t.resizeScrollerL&&e.$scrollerOverlayCenterR.data("iChart-hover");var i=e.isScroller?e.scrollerViewport:e.viewport;t.resizeScrollerR?t.setAnchor(null===this.viewport.x.max||this.viewport.areaName!==e.name?i.x.max:this.viewport.x.max,null===this.viewport.y.min||this.viewport.areaName!==e.name?i.y.min:this.viewport.y.min):t.setAnchor(null===this.viewport.x.min||this.viewport.areaName!==e.name?i.x.min:this.viewport.x.min,null===this.viewport.y.min||this.viewport.areaName!==e.name?i.y.min:this.viewport.y.min)}else{if(e.isScroller){t.position1=null;break}t.position1.insideX?t.setAnchor(e.getXIndex(t.x1-e.innerOffset.left),null):t.position1.insideY&&t.setAnchor(null,e.getYValue(t.y1-e.innerOffset.top)),t.resizeScrollerL=!1,t.resizeScrollerR=!1}t.resizeScrollerL||t.resizeScrollerR?this.container.style.cursor=this.overlay.defaultCursor="ew-resize":this.container.style.cursor=this.overlay.defaultCursor=MOBILE_BROWSER_DETECTED?"move":"url('"+this.env.lib_path+"/styles/cursors/grabbing.cur'), move";break;case"zoom":t.setAnchor(null,null),this.container.style.cursor=this.overlay.defaultCursor="crosshair";break;case"wait":break;default:throw new Error("Selection mode '"+t.mode+"' is invalid.")}},iChart.Charting.Chart.prototype._selectionMouseMoveCallback=function(t){},iChart.Charting.Chart.prototype._selectionMoveCallback=function(t){switch(t.moved=!0,t.mode){case"pan":if(null===t.position1)break;if(t.position2=this.findAreaAtPosition(t.x2,t.y2),null===t.position2)break;if(t.position2.area!==t.position1.area||t.position2.insideX!==t.position1.insideX||t.position2.insideY!==t.position1.insideY)break;var e=t.position1.area;if(t.position1.insideX&&t.position1.insideY){var i=e.isScroller?e.scrollerViewport:e.viewport,r=(e.isScroller?-1:1)*(e.getXIndex(t.x2-e.innerOffset.left)-e.getXIndex(t.x1-e.innerOffset.left));t.resizeScrollerR?r+=(null===this.viewport.x.max||this.viewport.areaName!==e.name?i.x.max:this.viewport.x.max)-t.anchorX:r+=(null===this.viewport.x.min||this.viewport.areaName!==e.name?i.x.min:this.viewport.x.min)-t.anchorX;var n=e.isScroller?0:e.getYValue(t.y2-e.innerOffset.top)-e.getYValue(t.y1-e.innerOffset.top)+((null===this.viewport.y.min||this.viewport.areaName!==e.name?i.y.min:this.viewport.y.min)-t.anchorY);t.resizeScrollerR||(this.viewport.x.max=null===this.viewport.x.max||this.viewport.areaName!==e.name?i.x.max:this.viewport.x.max,this.viewport.x.max-((null===this.viewport.x.min||this.viewport.areaName!==e.name?i.x.min:this.viewport.x.min)-r)>1&&(this.viewport.x.min=(null===this.viewport.x.min||this.viewport.areaName!==e.name?i.x.min:this.viewport.x.min)-r)),t.resizeScrollerL||(this.viewport.x.min=null===this.viewport.x.min||this.viewport.areaName!==e.name?i.x.min:this.viewport.x.min,(null===this.viewport.x.max||this.viewport.areaName!==e.name?i.x.max:this.viewport.x.max)-r-this.viewport.x.min>1&&(this.viewport.x.max=(null===this.viewport.x.max||this.viewport.areaName!==e.name?i.x.max:this.viewport.x.max)-r)),0!==n&&null!==this.viewport.y.min&&null!==this.viewport.y.max&&(this.viewport.y.min=(this.viewport.areaName===e.name?this.viewport.y.min:i.y.min)-n,this.viewport.y.max=(this.viewport.areaName===e.name?this.viewport.y.max:i.y.max)-n),this.viewport.areaName=e.name}else t.position1.insideX?this._zoomInternal(e,3*(t.x2-t.x1)/e.innerWidth,"x",t.anchorX,null):t.position1.insideY&&this._zoomInternal(e,3*(t.y2-t.y1)/e.innerHeight,"y",null,t.anchorY),t.x1=t.x2,t.y1=t.y2;return this._fixViewportBounds(),this.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0}),this.loadMissingData(),!1;case"zoom":case"wait":return!0;default:throw new Error("Selection mode '"+t.mode+"' is invalid.")}},iChart.Charting.Chart.prototype._selectionMouseUpCallback=function(t){},iChart.Charting.Chart.prototype._selectionMoveEndCallback=function(t){if("pan"===t.mode?this.container.style.cursor=this.overlay.defaultCursor=MOBILE_BROWSER_DETECTED?"move":"url('"+this.env.lib_path+"/styles/cursors/grab.cur'), move":this.container.style.cursor=this.overlay.defaultCursor="crosshair",!t.moved&&!t.position1.insideX&&t.position1.insideY)return this.chartOptions.showCurrentLabel=!this.chartOptions.showCurrentLabel,this.env.wrapper.trigger("iguanaChartEvents",["chartOptionsChanged",{showCurrentLabel:this.chartOptions.showCurrentLabel}]),void this.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0});var e="pan"===t.mode?1:20;if(!(Math.abs(t.x2-t.x1)<e&&Math.abs(t.y2-t.y1)<e)&&null!==t.position1&&(t.position2=this.findAreaAtPosition(t.x2,t.y2),null!==t.position2&&t.position2.area===t.position1.area&&t.position2.insideX===t.position1.insideX&&t.position2.insideY===t.position1.insideY)){var i=t.position1.area;switch(t.mode){case"pan":if(t.position1.insideX&&t.position1.insideY){var r=i.isScroller?i.scrollerViewport:i.viewport,n=(i.isScroller?-1:1)*(i.getXIndex(t.x2-i.innerOffset.left)-i.getXIndex(t.x1-i.innerOffset.left));t.resizeScrollerR?n+=(null===this.viewport.x.max||this.viewport.areaName!==i.name?r.x.max:this.viewport.x.max)-t.anchorX:n+=(null===this.viewport.x.min||this.viewport.areaName!==i.name?r.x.min:this.viewport.x.min)-t.anchorX;var a=i.isScroller?0:i.getYValue(t.y2-i.innerOffset.top)-i.getYValue(t.y1-i.innerOffset.top)+((null===this.viewport.y.min||this.viewport.areaName!==i.name?r.y.min:this.viewport.y.min)-t.anchorY);if(t.resizeScrollerR||(this.viewport.x.max=null===this.viewport.x.max||this.viewport.areaName!==i.name?r.x.max:this.viewport.x.max,this.viewport.x.max-((null===this.viewport.x.min||this.viewport.areaName!==i.name?r.x.min:this.viewport.x.min)-n)>1&&(this.viewport.x.min=(null===this.viewport.x.min||this.viewport.areaName!==i.name?r.x.min:this.viewport.x.min)-n)),t.resizeScrollerL||(this.viewport.x.min=null===this.viewport.x.min||this.viewport.areaName!==i.name?r.x.min:this.viewport.x.min,(null===this.viewport.x.max||this.viewport.areaName!==i.name?r.x.max:this.viewport.x.max)-n-this.viewport.x.min>1&&(this.viewport.x.max=(null===this.viewport.x.max||this.viewport.areaName!==i.name?r.x.max:this.viewport.x.max)-n)),(t.resizeScrollerL||t.resizeScrollerR)&&null!==this.viewport.x.min&&null!==this.viewport.x.max&&this.viewport.x.min>this.viewport.x.max){var s=this.viewport.x.min;this.viewport.x.min=this.viewport.x.max,this.viewport.x.max=s}0!==a&&null!==this.viewport.y.min&&null!==this.viewport.y.max&&(this.viewport.y.min=(this.viewport.areaName===i.name?this.viewport.y.min:r.y.min)-a,this.viewport.y.max=(this.viewport.areaName===i.name?this.viewport.y.max:r.y.max)-a)}else t.position1.insideX?this._zoomInternal(i,(t.x2-t.x1)/i.innerWidth,"x",t.anchorX,null):t.position1.insideY&&this._zoomInternal(i,(t.y2-t.y1)/i.innerHeight,"y",null,t.anchorY);this._fixViewportBounds();break;case"zoom":var o=i.getXIndex((t.x1<t.x2?t.x1:t.x2)-i.innerOffset.left),h=i.getXIndex((t.x1<t.x2?t.x2:t.x1)-i.innerOffset.left);this.viewport.x.min=Math.max(i.xSeries.min,Math.min(o,i.xSeries.max)),this.viewport.x.max=Math.min(i.xSeries.max,h),this.viewport.y.min=i.getYValue((t.y1>t.y2?t.y1:t.y2)-i.innerOffset.top),this.viewport.y.max=i.getYValue((t.y1>t.y2?t.y2:t.y1)-i.innerOffset.top);break;case"wait":break;default:throw new Error("Selection mode '"+t.mode+"' is invalid.")}this.viewport.areaName=i.name,this.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0}),this.loadMissingData(),"pan"==t.mode&&!i.isScroller&&this.chartOptions.inertialScrolling&&this.env.scrollTo(t)}},iChart.Charting.Chart.prototype._setData=function(t,e){if(this.areas)for(var i=0;i<this.areas.length;++i)this.areas[i].dispose();this.areas=[];var r=new iChart.Charting.ChartArea({chart:this,name:"ChartArea1",showLabels:this.showLabels}),n=new iChart.Charting.ChartArea({chart:this,isScroller:!0,name:"Scroller",showLegend:!1}),a=new iChart.Charting.ChartArea({chart:this,name:"ChartArea2",parentName:"outside"===this.chartOptions.showVolume?void 0:r.name,showAxes:"outside"==this.chartOptions.showVolume,showLabels:"outside"==this.chartOptions.showVolume,showLegend:"outside"==this.chartOptions.showVolume,showWatermark:"outside"==this.chartOptions.showVolume}),s=[],o=[],h=[],l={};if(this.chartOptions.futureAmount){var c=60*e.timeframe;for(i=0;i<this.chartOptions.futureAmount;i++)t.xSeries.push(t.xSeries[t.xSeries.length-1]+c);for(i=0;i<t.ySeries.length;i++)if(1==t.ySeries[i].valuesPerPoint)for(var u=0;u<this.chartOptions.futureAmount;u++)t.ySeries[i].points.push([null]);else for(u=0;u<this.chartOptions.futureAmount;u++)t.ySeries[i].points.push([null,null,null,null])}var d=0,p=0;for(i=0;i<t.ySeries.length;++i){switch((T=t.ySeries[i]).isStartedFromZero=!1,T.kind){case"HLOC":T.chartArea=r.name;var f=$.extend([],this.chartOptions.seriesColors);f.splice(0,0,this.chartOptions.lineColor),T.color=f[s.length%f.length],s.push(T),o.push(T);break;case"TechnicalAnalysis":var g=T.name.replace(/\s.*$/,"");for(u=p;u<3;u++)if(p++,e["i"+u]==g){var v=u;break}var m=this.chartOptions.indicatorColors[v],y=this.env.userSettings.chartSettings.indicatorsColor;if(y[g]&&void 0!==y[g][v]){var C=y[g][v][T.indicatorIndex2%y[g][v].length];T.color=C||m[T.indicatorIndex2%m.length]}else T.color=m[T.indicatorIndex2%m.length];var x=this.env.userSettings.chartSettings.indicatorsWidth;x[g]&&void 0!==x[g][v][T.indicatorIndex2%x[g][v].length]?T.width=x[g][v][T.indicatorIndex2%x[g][v].length]||2:T.width=2,T.overlay?(T.chartArea=r.name,s.push(T)):(T.chartArea="ChartAreaI"+T.indicatorIndex,void 0===l[T.indicatorIndex]?l[T.indicatorIndex]=[T]:l[T.indicatorIndex].push(T));break;case"Volume":T.chartType="Column",T.color=this.chartOptions.volumeStyle,T.isStartedFromZero=!0,T.chartArea=r.name,T.chartArea=a.name,h.push(T);break;default:continue}T.enableMerge=!0,T.index=d++,4===T.valuesPerPoint?(T.closeValueIndex=3,T.lowValueIndex=1):(T.closeValueIndex=0,T.lowValueIndex=0),T.highValueIndex=0}this.isComparison=o.length>1||this.chartOptions.percentMode;for(i=0;i<t.ySeries.length;++i){var T,S=(T=t.ySeries[i]).color?T.color.replace(/rgba\((.+),[^,]+\)/,"rgb($1)"):"",w=$("<span/>",{class:"m-chart-legend-color"}).css({"background-color":S}).html("&nbsp;");w=w.add($("<span/>",{class:"m-chart-legend-name"}).css({color:S}).text(T.name));var A=T.name,b=$("<div/>").append(w).html();4===T.valuesPerPoint?(T.dotIndex=3,this.isComparison?T.labels=[[3,b]]:T.labels=[[2,b+"O:"],[0,"H:"],[1,"L:"],[3,"C:"]]):2==T.valuesPerPoint?T.labels=[[1,b+_t("2589","Мин:")],[0,_t("2590","Макс:")]]:T.labels=[[0,b,A]]}if(r.axisX.showLabels=!0,r.enabled=!0,r.xSeries=t.xSeries,r.ySeries=s,this.areas.push(r),n.axisX.showLabels=!0,n.enabled=0!==this.chartOptions.scrollerHeight,n.xSeries=t.xSeries,n.ySeries=o,n.enabled&&this.areas.push(n),!this.isComparison){if(a.enabled=!0,a.enabled){a.enabled=!1;for(i=0;i<h.length;++i)if(h[i].enabled){a.enabled=!0;break}}a.enabled&&(a.axisX.showLabels=!1,a.xSeries=r.xSeries,a.ySeries=h,this.areas.push(a)),a.enabled="inside"===this.chartOptions.showVolume||"outside"===this.chartOptions.showVolume}for(var k in l)if(l.hasOwnProperty(k)){var _=new iChart.Charting.ChartArea({chart:this});_.axisX.showLabels=!1,_.enabled=!0,_.xSeries=r.xSeries,_.ySeries=l[k],_.name=_.ySeries[0].chartArea;var P=this;_.onClose=function(){P.clearIndicators(this)},this.areas.push(_)}this.createValueByPriceArea(),this.onCreateAreas.call(this,t,e);for(i=0;i<this.areas.length;++i)this.areas[i].setMinMax();return this._setXLabelFormat(),t.xSeries.length},iChart.Charting.Chart.prototype.createValueByPriceArea=function(){var t=this,e=new iChart.Charting.ChartArea({chart:this,ignoreViewport:!0,name:"VolumeByPriceArea",onCalculateViewport:function(e){var i=function(t,e){return t.min+(t.max-t.min)*(t[t.min]-e)/(t[t.min]-t[t.max])},r=t.areas[0].viewport;return e.x.min=i(this.xSeries,r.y.max),e.x.max=i(this.xSeries,r.y.min),e.x.bounded.min=Math.max(this.xSeries.min,Math.floor(e.x.min)),e.x.bounded.max=Math.min(this.xSeries.max,Math.ceil(e.x.max)),e},parentName:"ChartArea1",showAxes:!1,showLabels:!1,showLegend:!1,showWatermark:!1});e.axisX.showLabels=!0,e.enabled=this.chartOptions.showVolumeByPrice,e.rotate=!0,e.ySeries=[{chartType:"Column",closeValueIndex:0,color:this.chartOptions.volumeStyle,enabled:!0,enableMerge:!1,formatProvider:{decimalPlaces:"2",decimalPrecision:null},highValueIndex:0,isStartedFromZero:!0,kind:"Other",lowValueIndex:0,name:"V(Price)",valuesPerPoint:1}],e.xSeries=[],e.ySeries[0].points=[],this.chartOptions.showVolumeByPrice&&this.updateVolumeByPrice();var i=$.grep(this.areas,(function(t){return"VolumeByPriceArea"===t.name}))[0];i&&e.enabled&&(i.enabled=!1),this.areas.push(e)},iChart.Charting.Chart.prototype.updateVolumeByPrice=function(){if(this.chartOptions.showVolumeByPrice){for(var t=0,e=this.areas[0].viewport.y.max,i=Math.floor(this.areas[0].viewport.x.min);i<=Math.ceil(this.areas[0].viewport.x.max);i++)this.areas[0]&&this.areas[0].ySeries[0]&&this.areas[0].ySeries[0].points[i]&&(t<this.areas[0].ySeries[0].points[i][0]&&(t=this.areas[0].ySeries[0].points[i][0]),e>this.areas[0].ySeries[0].points[i][1]&&(e=this.areas[0].ySeries[0].points[i][1]));var r=(t-e)/50,n={};for(i=Math.floor(this.areas[0].viewport.x.min);i<=Math.ceil(this.areas[0].viewport.x.max);i++)n[i]=0,void 0!==this.areas[2].ySeries&&(this.areas[2].ySeries[0].points[i]&&this.areas[0].ySeries[0].points[i]&&this.areas[0].ySeries[0].points[i][0]-this.areas[0].ySeries[0].points[i][1]!=0?n[i]=this.areas[2].ySeries[0].points[i][0]/(this.areas[0].ySeries[0].points[i][0]-this.areas[0].ySeries[0].points[i][1])*r:this.areas[2].ySeries[0].points[i]&&this.areas[0].ySeries[0].points[i]&&this.areas[0].ySeries[0].points[i][0]-this.areas[0].ySeries[0].points[i][1]==0&&(n[i]=this.areas[2].ySeries[0].points[i][0]));for(var a=[],s=[],o=t;o>e;o-=r){a.push(o);var h=0;for(i=Math.floor(this.areas[0].viewport.x.min);i<=Math.ceil(this.areas[0].viewport.x.max);i++)if(this.areas[0].ySeries[0].points[i]){var l=this.areas[0].ySeries[0].points[i][0],c=this.areas[0].ySeries[0].points[i][1];(o>l&&o-r<l||o>c&&o-r<c||o<l&&o-r>c)&&(h+=n[i])}s.push([h])}var u=$.grep(this.areas,(function(t){return"VolumeByPriceArea"===t.name}))[0];u&&(u.enabled=!0,u.xSeries=a,u.ySeries[0].points=s,u.setMinMax(),this.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1}))}},iChart.Charting.Chart.prototype.positionVolumeByPriceArea=function(){var t=$.grep(this.areas,(function(t){return"VolumeByPriceArea"===t.name}))[0];if(t){var e=this.areas[0];t.axisX.paddingLeft=e.axisY.paddingTop,t.axisX.paddingRight=e.axisY.paddingBottom,t.axisX.pointPadding=0,t.axisY.paddingTop=0,t.axisY.paddingBottom=0,t.enabled=this.chartOptions.showVolumeByPrice,t.outerHeight=e.outerHeight,t.outerWidth=Math.round(e.outerWidth/5),t.offset.top=e.offset.top}},iChart.Charting.Chart.prototype._setXLabelFormat=function(){var t=this.areas[0];if(!(t.xSeries.min>t.xSeries.max)){new Date,new Date(1e3*t.xSeries[t.xSeries.min]);this.showTime()?this.dateFormat="HH:mm\r\nd MMM":this.dateFormat="d MMM\r\nyyyy"}},iChart.Charting.Chart.prototype._testForIntervalChange=function(t){if(this._dataSettings){var e=this.areas[0],i=this._dataSettings.start,r=this._dataSettings.end,n=e.xSeries[e.viewport.x.bounded.min],a=e.xSeries[e.viewport.x.bounded.max];this._dataSettings.start=n&&(e.viewport.x.bounded.min!==e.xSeries.min||this._dataStart)?new Date(1e3*n):null,this._dataSettings.end=a&&(e.viewport.x.bounded.max!==e.xSeries.max||this._dataEnd)?new Date(1e3*a):null,void 0!==i&&(!this._dataSettings.start!=!i||!this._dataSettings.end!=!r||this._dataSettings.start&&this._dataSettings.start.getTime()!==i.getTime()||this._dataSettings.end&&this._dataSettings.end.getTime()!==r.getTime())&&(this.onDataSettingsChange.call(this,t),this.onIntervalChange.call(this,this._dataSettings.start,this._dataSettings.end))}},iChart.Charting.Chart.prototype._zoomInternal=function(t,e,i,r,n){if(!t){for(var a=0;a<this.areas.length;++a)this.areas[a].name===this.viewport.areaName&&(t=this.areas[a]);t||(t=this.areas[0])}if("Scroller"!==t.name){if(this.viewport.areaName!==t.name&&(this.viewport.y.min=null,this.viewport.y.max=null),this.viewport.areaName=t.name,"y"!==i&&(null===this.viewport.x.min&&(this.viewport.x.min=t.viewport.x.bounded.min),null===this.viewport.x.max&&(this.viewport.x.max=t.viewport.x.bounded.max),$.isNumeric(r)||(r=(this.viewport.x.min+this.viewport.x.max)/2),t.xSeries.min<t.xSeries.max&&this.viewport.x.min<this.viewport.x.max&&(e<0?e=Math.max(e,1-(t.xSeries.max-t.xSeries.min)/(.3*(this.viewport.x.max-this.viewport.x.min))):e>0&&(e=Math.min(e,1-(t.xSeries.max-t.xSeries.min)/(1e3*(this.viewport.x.max-this.viewport.x.min)))))),"x"!==i&&(null===this.viewport.y.min&&(this.viewport.y.min=t.viewport.y.min),null===this.viewport.y.max&&(this.viewport.y.max=t.viewport.y.max),$.isNumeric(n)||(n=(this.viewport.y.min+this.viewport.y.max)/2),t.ySeries.bounds.min<t.ySeries.bounds.max&&(e<0?e=Math.max(e,1-(t.ySeries.bounds.max-t.ySeries.bounds.min)/(.3*(this.viewport.y.max-this.viewport.y.min))):e>0&&(e=Math.min(e,1-(t.ySeries.bounds.max-t.ySeries.bounds.min)/(1e3*(this.viewport.y.max-this.viewport.y.min)))))),"y"!==i){var s=this.viewport.x.max-e*(this.viewport.x.max-r)-(this.viewport.x.min+e*(r-this.viewport.x.min));(this.chartOptions.maxZoom>0&&s>=this.chartOptions.maxZoom||e<0||0==this.chartOptions.maxZoom)&&(this.viewport.x.min+=e*(r-this.viewport.x.min))}"x"!==i&&(this.viewport.y.min+=e*(n-this.viewport.y.min),this.viewport.y.max-=e*(this.viewport.y.max-n))}else{this.viewport.areaName!==t.name&&(this.viewport.y.min=null,this.viewport.y.max=null),this.viewport.areaName=t.name,null===this.viewport.x.min&&(this.viewport.x.min=t.scrollerViewport.x.bounded.min),null===this.viewport.x.max&&(this.viewport.x.max=t.scrollerViewport.x.bounded.max);var o=(this.viewport.x.max-this.viewport.x.min)/10,h=e>0?1:-1,l=t.viewport.x.bounded.max-t.chart.chartOptions.futureAmount+5*(this.viewport.x.max-this.viewport.x.min)/10,c=t.viewport.x.bounded.min-5*(this.viewport.x.max-this.viewport.x.min)/10;(this.viewport.x.max<l||-1==h)&&(this.viewport.x.min>c||1==h)&&(this.viewport.x.min+=h*o,this.viewport.x.max+=h*o)}this.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0}),this.loadMissingData()}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartArea=function(t){if(this.axisX={},this.axisX.paddingLeft=0,this.axisX.paddingRight=0,this.axisX.pointPadding=.5,this.axisY={},this.axisY.PaddingTop=0,this.axisY.PaddingBottom=0,this.chart=t.chart,this.ignoreViewport=!!t.ignoreViewport,this.innerHeight=0,this.innerWidth=0,this.innerOffset={},this.innerOffset.left=0,this.innerOffset.top=0,this.isLayer=!!t.parentName,this.isScroller=!!t.isScroller,this.margin={},this.margin.bottom=0,this.name=t.name,this.offset={},this.offset.left=0,this.offset.top=0,this.onCalculateViewport=t.onCalculateViewport||$.noop,this.outerHeight=0,this.outerWidth=0,this.padding={},this.padding.top=0,this.padding.right=0,this.padding.bottom=0,this.padding.left=0,this.parentName=t.parentName,this.rotate=!!t.rotate,this.scrollerViewport=null,this.showAxes=void 0===t.showAxes||!!t.showAxes,this.showLabels=void 0===t.showLabels||!!t.showLabels,this.showLegend=void 0===t.showLegend||!!t.showLegend,this.showWatermark=void 0===t.showWatermark||!!t.showWatermark,this.viewport={},this.viewport.x={},this.viewport.x.bounded={},this.viewport.y={},this.xSeries=null,this.ySeries=[],this.isScroller){$(this.chart.container).find("div.m-chart-scrollerOverlay").remove(),this.$scrollerOverlay=$("<div class='m-chart-scrollerOverlay'/>").css({position:"absolute","z-index":1}).appendTo(this.chart.container),this.$scrollerOverlayRight=$("<div class='js-scrollerOverlay m-chart-scrollerOverlayRight'/>").hide().css({}).appendTo(this.$scrollerOverlay),this.$scrollerOverlayCenter=$("<div/>").hide().css({position:"absolute","z-index":1}).appendTo(this.$scrollerOverlay),this.$scrollerOverlayCenterR=$("<div/>",{text:"|",class:"js-scrollerHandler m-chart-scrollerOverlayHandle"}).hide().css({}).appendTo(this.$scrollerOverlay),this.$scrollerOverlayCenterR.hover((function(){$(this).data("iChart-hover",!0)}),(function(){$(this).removeData("iChart-hover")})).attr("unselectable","on").css("user-select","none").on("selectstart",!1),this.$scrollerOverlayCenterL=$("<div />",{text:"|",class:"js-scrollerHandler m-chart-scrollerOverlayHandle"}).hide().css({}).appendTo(this.$scrollerOverlay),this.$scrollerOverlayCenterL.hover((function(){$(this).data("iChart-hover",!0)}),(function(){$(this).removeData("iChart-hover")})).attr("unselectable","on").css("user-select","none").on("selectstart",!1),this.$scrollerOverlayLeft=$("<div class='js-scrollerOverlay m-chart-scrollerOverlayLeft'/>").hide().css({}).appendTo(this.$scrollerOverlay),$(this.chart.container).find("div.m-chart-scrollforward").remove();var e=this;this.$scrollForward=$("<div class='m-chart-scrollforward m-chart-btn' style='min-width: 40px; width:40px; background: #777777; transition: all 0ms'; ><span class='uk-icon-step-forward'></span></div>").hide().appendTo(this.$scrollerOverlay).click((function(){e.chart.env.scrollForward()}))}},iChart.Charting.ChartArea.prototype.calculateInnerDimensions=function(t){if(this.isScroller?(this.scrollerViewport=this._calculateViewport(t),this.viewport=this._calculateViewport()):this.viewport=this._calculateViewport(t),this.viewport){this.innerOffset.left=this.offset.left+this.padding.left,this.innerOffset.top=this.offset.top+this.padding.top,this.innerWidth=this.outerWidth-this.padding.left-this.padding.right,this.innerHeight=this.outerHeight-this.padding.top-this.padding.bottom,this.rotate?(this.axisX.length=this.innerHeight,this.axisY.length=this.innerWidth):(this.axisX.length=this.innerWidth,this.axisY.length=this.innerHeight);var e=this.axisX.paddingLeft*(this.viewport.x.max-this.viewport.x.min+2*this.axisX.pointPadding)/(this.axisX.length-2*this.axisX.paddingLeft),i=this.axisX.paddingRight*(this.viewport.x.max-this.viewport.x.min+2*this.axisX.pointPadding)/(this.axisX.length-2*this.axisX.paddingRight);this.axisX.min=this.viewport.x.min-this.axisX.pointPadding-e,this.axisX.max=this.viewport.x.max+this.axisX.pointPadding+i,this.axisX.pointWidth=Math.min(Math.max(0,Math.floor(.4*this.axisX.length/(this.viewport.x.max-this.viewport.x.min+1))),50);var r=this.axisY.paddingTop*(this.viewport.y.max-this.viewport.y.min)/(this.axisY.length-2*this.axisY.paddingTop),n=this.axisY.paddingBottom*(this.viewport.y.max-this.viewport.y.min)/(this.axisY.length-2*this.axisY.paddingBottom);if(this.axisY.min=this.viewport.y.min-n,this.axisY.max=this.viewport.y.max+r,this.axisX.scale=this.axisX.length/(this.axisX.max-this.axisX.min),this.axisY.scale=this.axisY.min===this.axisY.max?0:this.axisY.length/(this.axisY.max-this.axisY.min),this.axisY.zeroPosition=Math.round(this.getYPosition(0,!1)),this.isScroller){var a=Math.round(this.getXPositionByIndex(this.scrollerViewport.x.bounded.min)),s=Math.round(this.getXPositionByIndex(this.scrollerViewport.x.bounded.max));this.$scrollerOverlayLeft.show().width(a).height(this.innerHeight).css({left:this.innerOffset.left+"px",top:this.innerOffset.top+"px"}),this.$scrollerOverlayCenter.show().width(s-a).height(this.innerHeight).css({left:this.innerOffset.left+a+"px",top:this.innerOffset.top+"px"}),this.$scrollerOverlayCenterL.show().css({left:this.innerOffset.left+a-5+"px",top:this.innerOffset.top+this.innerHeight/2-11+"px"}),this.$scrollerOverlayCenterR.show().css({left:this.innerOffset.left+s-5+"px",top:this.innerOffset.top+this.innerHeight/2-11+"px"}),this.$scrollerOverlayRight.show().width(this.innerWidth-s).height(this.innerHeight).css({left:this.innerOffset.left+s+"px",top:this.innerOffset.top+"px"}),this.scrollerViewport.x.bounded.max<this.xSeries.length-1-this.chart.chartOptions.futureAmount?(this.$scrollForward.width(this.innerHeight),this.$scrollForward.fadeIn().css({width:"40px","min-width":"40px",left:this.innerWidth+this.innerOffset.left-this.$scrollForward.width()-10+"px",top:this.innerOffset.top+"px"})):this.$scrollForward.fadeOut()}}},iChart.Charting.ChartArea.prototype.dispose=function(){this.isScroller&&(this.$scrollerOverlayLeft.remove(),delete this.$scrollerOverlayLeft,this.$scrollerOverlayCenter.remove(),delete this.$scrollerOverlayCenter,this.$scrollerOverlayCenterL.remove(),delete this.$scrollerOverlayCenterL,this.$scrollerOverlayCenterR.remove(),delete this.$scrollerOverlayCenterR,this.$scrollerOverlayRight.remove(),delete this.$scrollerOverlayRight),this.$closeButton&&(this.$closeButton.remove(),delete this.$closeButton)},iChart.Charting.ChartArea.prototype.getXIndex=function(t){return this.axisX.min+t/this.axisX.scale},iChart.Charting.ChartArea.prototype.getXPositionByIndex=function(t){return this.axisX.scale*(t-this.axisX.min)},iChart.Charting.ChartArea.prototype.getXIndexByValue=function(t){if(!$.isNumeric(t))return NaN;if(this.xSeries.min>this.xSeries.max)return NaN;if(t<this.xSeries[this.xSeries.min]||t>this.xSeries[this.xSeries.max])return t>this.xSeries[this.xSeries.max]?this.xSeries.max+(t-this.xSeries[this.xSeries.max])/(this.xSeries[this.xSeries.max]-this.xSeries[this.xSeries.max-1]):NaN;var e=iChart.Charting.indexOfFirstElementGreaterThanOrEqualTo(this.xSeries,t);return-1===e?NaN:(e!==this.xSeries.min&&(e-=(this.xSeries[e]-t)/(this.xSeries[e]-this.xSeries[e-1])),e)},iChart.Charting.ChartArea.prototype.getXIndexByValue2=function(t){if(!$.isNumeric(t))return NaN;if(this.xSeries.min>this.xSeries.max)return NaN;if(t<this.xSeries[this.xSeries.min])return this.xSeries.min;if(t>this.xSeries[this.xSeries.max])return this.xSeries.max;var e=iChart.Charting.indexOfFirstElementGreaterThanOrEqualTo(this.xSeries,t);return-1===e?NaN:(e!==this.xSeries.min&&(e-=(this.xSeries[e]-t)/(this.xSeries[e]-this.xSeries[e-1])),e)},iChart.Charting.ChartArea.prototype.getXPositionByValue=function(t){var e=this.getXIndexByValue(t);return isNaN(e)?NaN:this.getXPositionByIndex(e)},iChart.Charting.ChartArea.prototype.getXValue=function(t){var e=this.getXIndex(t),i=Math.floor(e),r=Math.ceil(e);if(!(r<this.xSeries.min))return i<this.xSeries.min?this.xSeries[r]:r>this.xSeries.max?this.xSeries[this.xSeries.max]+(e-this.xSeries.max)*(this.xSeries[this.xSeries.max]-this.xSeries[this.xSeries.max-1]):i===r?this.xSeries[i]:this.xSeries[i]+(e-i)*(this.xSeries[r]-this.xSeries[i])},iChart.Charting.ChartArea.prototype.getYMinMax=function(t,e){for(var i={isStartedFromZero:!1,min:null,max:null},r=0;r<this.ySeries.length;++r){var n=this.ySeries[r],a=n.points;if(i.isStartedFromZero=i.isStartedFromZero||n.isStartedFromZero,this.chart.isComparison&&"TA_LIB"!=n.kind){n.multiplier=0;for(var s=t;s<=e;++s){if(null!=(h=a[s])){var o=h[n.closeValueIndex];null!==o&&(n.multiplier?o=n.multiplier*o-100:(n.multiplier=100/o,o=0),null===i.min?i.min=o:i.min=Math.min(i.min,o),null===i.max?i.max=o:i.max=Math.max(i.max,o))}}}else for(s=t;s<=e;++s){var h;null!=(h=a[s])&&(null===i.min?i.min=h[n.lowValueIndex]:null!==h[n.lowValueIndex]&&(i.min=Math.min(i.min,h[n.lowValueIndex])),null===i.max?i.max=h[n.highValueIndex]:i.max=Math.max(i.max,h[n.highValueIndex]))}}if("ChartArea1"==this.name){var l=["HorizontalLine"],c=this.chart.overlay.history;for(r=0;r<c.length;r++){var u=c[r];if(!($.inArray(u.elementType,l)>=0)){var d=!1;for(s=0;s<u.points.length;s++)if(u.points[s].x>=1e3*this.xSeries[t]&&u.points[s].x<=1e3*this.xSeries[e]||u.positionAbsolute)d=!0;else if(u.points[s].x<this.xSeries[0]||u.points[s].x>this.xSeries[this.xSeries.length-1]){d=!1;break}if(d)for(s=0;s<u.points.length;s++)if(u.points[s].y){if(this.chart.isComparison&&"TA_LIB"!=n.kind&&this.ySeries[0].points.length)var p=100*(u.points[s].y/this.ySeries[0].points[t][3]-1);else p=u.points[s].y;i.max=Math.max(i.max,p),i.min=Math.min(i.min,p)}}}}var f;return(f=i).isStartedFromZero&&(null!==f.min&&f.min>0?f.min=0:null!==f.max&&f.max<0&&(f.max=0)),i},iChart.Charting.ChartArea.prototype.getYPosition=function(t){return 0===this.axisY.scale?.5*this.axisY.length:this.axisY.scale*(this.axisY.max-t)},iChart.Charting.ChartArea.prototype.getYValue=function(t){return 0===this.axisY.scale?this.axisY.max:this.axisY.max-t/this.axisY.scale},iChart.Charting.ChartArea.prototype.setMinMax=function(){this.xSeries.min=0,this.xSeries.max=this.xSeries.length-1,this.ySeries.bounds=this.getYMinMax(this.xSeries.min,this.xSeries.max)},iChart.Charting.ChartArea.prototype.updateCloseButton=function(){this.onClose&&(this.$closeButton||(this.$closeButton=$("<button/>",{class:"m-chart-area-close",text:"×",title:"Скрыть"}).appendTo(this.chart.container),this.$closeButton.on("click",$.proxy(this.onClose,this))),this.$closeButton.css({top:this.offset.top+"px"}))},iChart.Charting.ChartArea.prototype._calculateViewport=function(t){if(0===this.xSeries.length)return null;var e={x:{}};if(e.x.bounded={},e.y={},this.ignoreViewport||!t)e.x.min=this.xSeries.min,e.x.bounded.min=this.xSeries.min;else if(null===t.x.min){var i=this.chart._dataSettings.start,r=i?iChart.Charting.indexOfFirstElementGreaterThanOrEqualTo(this.xSeries,Math.round(i.getTime()/1e3)):0;-1===r&&(console.warn("Start date/time '"+i.toString()+"' is outside the bounds of the data."),r=0),e.x.min=r,e.x.bounded.min=r}else e.x.min=t.x.min,e.x.bounded.min=Math.max(this.xSeries.min,Math.floor(t.x.min));if(this.ignoreViewport||!t)e.x.max=this.xSeries.max,e.x.bounded.max=this.xSeries.max;else if(null===t.x.max)if(this.chart._dataSettings.end){var n=this.chart._dataSettings.end,a=iChart.Charting.indexOfLastElementLessThanOrEqualTo(this.xSeries,Math.round(n.getTime()/1e3));-1===a&&(console.error("End date/time '"+n.toString()+"' is outside the bounds of the data."),a=this.xSeries.length-1),e.x.max=a,e.x.bounded.max=a}else e.x.max=this.xSeries.max,e.x.bounded.max=this.xSeries.max;else e.x.max=t.x.max,e.x.bounded.max=Math.min(this.xSeries.max,Math.ceil(t.x.max));if(this.ignoreViewport||!t)e.y.min=this.ySeries.bounds.min,e.y.max=this.ySeries.bounds.max;else if(e.y.min=t.y.min,e.y.max=t.y.max,null===e.y.min||null===e.y.max)if(e.x.bounded.min===this.xSeries.min&&e.x.bounded.max===this.xSeries.max)null===t.y.min&&(e.y.min=this.ySeries.bounds.min),null===t.y.max&&(e.y.max=this.ySeries.bounds.max);else{var s=this.getYMinMax(e.x.bounded.min,e.x.bounded.max);null===t.y.min&&(e.y.min=s.min),null===t.y.max&&(e.y.max=s.max)}return this.ySeries.bounds.isStartedFromZero&&(null!==e.y.min&&e.y.min>0?null===t.y.min&&(e.y.min=0):null!==e.y.max&&e.y.max<0&&null===t.y.max&&(e.y.max=0)),e=this.onCalculateViewport.call(this,e)||e}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartRenderer=function(t){this.chart=t},iChart.Charting.ChartRenderer.prototype.formatDateTime=function(t){var e=new Date(1e3*t);return iChart.formatDateTime(e,this.chart.dateFormat)},iChart.Charting.ChartRenderer.prototype.formatNumber=function(t,e){var i=iChart.formatNumber(t,e);return this.chart.isComparison&&(t>0&&(i="+"+i),i+="%"),i},iChart.Charting.ChartRenderer.prototype.renderArea=function(t,e){if(t.enabled){if(e.save(),e.translate(t.innerOffset.left,t.innerOffset.top),t.rotate&&e.transform(0,1,-1,0,t.innerWidth,0),t.showAxes&&this.chart.chartOptions.showAxes&&this.renderAxes(t,e),"ChartArea1"==t.name&&(e.fillStyle=this.chart.chartOptions.watermarkColor,e.font=this.chart.chartOptions.watermarkFont,e.textAlign="left",e.textBaseline="bottom",this.chart.chartOptions.watermarkShow)){var i=(t.innerWidth-e.measureText(this.chart.chartOptions.watermarkText).width)/2;e.fillText(this.chart.chartOptions.watermarkText,i,t.innerHeight/2-5),e.font=this.chart.chartOptions.watermarkSubFont,i=(t.innerWidth-e.measureText(this.chart.chartOptions.watermarkSubText).width)/2,e.fillText(this.chart.chartOptions.watermarkSubText,i,t.innerHeight/2+45)}if(t.title&&(e.fillStyle=this.chart.chartOptions.watermarkColor,e.font=this.chart.chartOptions.watermarkFont,e.textAlign="left",e.textBaseline="bottom",this.chart.chartOptions.watermarkShow)){i=(t.innerWidth-e.measureText(t.title).width)/2;e.fillText(t.title,i,t.innerHeight/2-5)}0!==t.xSeries.length&&0!==t.ySeries.length&&(t.showLabels&&(this.renderXLabels(t,e),this.renderYLabels(t,e)),this.renderSeriesCollection(t,e),"ChartArea1"==t.name&&t.chart.chartOptions.showCurrentLabel&&this.renderCurrentLabel(t,e)),e.restore()}},iChart.Charting.ChartRenderer.prototype.renderCurrentLabel=function(t,e){var i,r,n=t.innerWidth,a=!1,s=!1;if(this.chart.isComparison){var o=iChart.Charting.getNearestNotNullIndex(t.ySeries[0].points,t.viewport.x.bounded.min),h=iChart.Charting.getNearestNotNullIndex(t.ySeries[0].points,t.ySeries[0].points.length-t.chart.chartOptions.futureAmount-1);i=t.ySeries[0].points[h]&&t.ySeries[0].points[o]?100*(t.ySeries[0].points[h][3]/t.ySeries[0].points[o][3]-1):0}else i=(r=t.ySeries[0].points[t.ySeries[0].points.length-t.chart.chartOptions.futureAmount-1])&&r[3]?r[3]:0,r&&r[4]&&r[5]&&(s=Math.round(t.getYPosition(r[4],!1)),a=Math.round(t.getYPosition(r[5],!1)));var l=Math.round(t.getYPosition(i,!1)),c=this.formatNumber(i,{decimalPrecision:this.chart.labelPrecision,scale:0}),u=parseFloat(c.replace(/ /g,""));if(null!=this.labelValue&&u<this.labelValue){var d="#f44336";this.labelColor="#f44336"}else if(null!=this.labelValue&&u>this.labelValue){d="#7cb342";this.labelColor="#7cb342"}else if(this.labelColor)d=this.labelColor;else d="#333";this.labelValue=u,a&&s?this.drawLable(e,d,"#FFFFFF",n,l,c,{bidY:a,offerY:s}):this.drawLable(e,d,"#FFFFFF",n,l,c)},iChart.Charting.ChartRenderer.prototype.drawLable=function(t,e,i,r,n,a,s){e=e||"#333333",i=i||"#FFFFFF",t.save(),t.font="normal 11px Arial,Helvetica,sans-serif",t.textAlign="left",t.textBaseline="middle",t.fillStyle=e,t.strokeStyle=e,t.fillRect(r+8,n-8,t.measureText(a).width+10,15),t.beginPath(),t.moveTo(r+8,n-8),t.lineTo(r+8,n+7),t.lineTo(r,n),t.lineTo(r+8,n-8),t.lineTo(r+8,n+7),t.closePath(),t.fill(),t.fillStyle=i,t.fillText(a,r+8,n),t.translate(.5,.5),t.beginPath(),t.lineWidth=1,t.moveTo(0,n),t.lineTo(r,n),t.stroke(),t.closePath(),s&&(t.beginPath(),t.fillStyle="#f44336",t.moveTo(r-4,s.bidY-4),t.lineTo(r-4,s.bidY+3),t.lineTo(r,s.bidY),t.lineTo(r-4,s.bidY-4),t.lineTo(r-4,s.bidY+3),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#7cb342",t.moveTo(r-4,s.offerY-4),t.lineTo(r-4,s.offerY+3),t.lineTo(r,s.offerY),t.lineTo(r-4,s.offerY-4),t.lineTo(r-4,s.offerY+3),t.fill(),t.closePath()),t.restore()},iChart.Charting.ChartRenderer.prototype.renderAxes=function(t,e){e.save(),e.translate(.5,.5),e.strokeStyle=this.chart.chartOptions.axisColor,e.beginPath(),e.moveTo(0,0),e.lineTo(t.axisX.length,0),e.lineTo(t.axisX.length,t.axisY.length),e.lineTo(0,t.axisY.length),e.closePath(),e.stroke(),e.restore()},iChart.Charting.ChartRenderer.prototype.renderChart=function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=this.chart.chartOptions.backgroundColor,t.fillRect(0,0,t.canvas.width,t.canvas.height);for(var e=0;e<this.chart.areas.length;++e){this.chart.areas[e];this.renderArea(this.chart.areas[e],t),void 0!==this.chart.areas[e].overlay&&this.chart.areas[e].overlay.update(this.chart.areas[e])}},iChart.Charting.ChartRenderer.prototype.renderLegends=function(t){for(var e=0;e<this.chart.areas.length;++e){var i=this.chart.areas[e];if(i.showLegend&&!i.rotate&&!(i.viewport.x.bounded.min>i.viewport.x.bounded.max)){t.save(),t.translate(i.innerOffset.left,i.innerOffset.top-3),t.fillStyle="#000000",t.font="11px Tahoma",t.textAlign="left",t.textBaseline="bottom";var r=new Date(1e3*i.xSeries[i.viewport.x.bounded.max]),n=iChart.formatDateTime(r,this.chart.showTime()?"dd.MM.yyyy HH:mm":"dd.MM.yyyy");t.fillText(n,0,0);var a=t.measureText(n);t.translate(a.width+7,0);for(var s=i.ySeries.slice(0),o=0;o<this.chart.areas.length;++o)this.chart.areas[o].parentName!==i.name||this.chart.areas[o].rotate||(s=s.concat(this.chart.areas[o].ySeries));for(o=0;o<s.length;++o){var h,l=s[o];t.fillStyle=l.color.replace(/rgba\((.+),[^,]+\)/,"rgb($1)"),t.beginPath(),t.arc(6,-6,6,0,2*Math.PI,!0),t.closePath(),t.fill(),t.translate(19,0),t.font="bold 11px Tahoma",t.fillText(l.name,0,0),a=t.measureText(l.name),t.translate(a.width+7,0),h=4===l.valuesPerPoint?[[2,"O: "],[0,"H: "],[1,"L: "],[3,"C: "]]:2==l.valuesPerPoint?[[1,"Мин: "],[0,"Макс: "]]:[[0,""]],t.fillStyle="#000000",t.font="11px Tahoma";for(var c=0;c<h.length;++c){var u=h[c][0],d=h[c][1],p=l.points[i.viewport.x.bounded.max];p&&(d+=iChart.formatNumber(p[u],l.formatProvider),t.fillText(d,0,0),a=t.measureText(d),t.translate(a.width+7,0))}}t.restore()}}},iChart.Charting.ChartRenderer.prototype.renderPoint=function(t,e,i,r,n){var a=e.points[i];if(a)switch(e.chartType){case"Candlestick":case"Stock":if(!(a[0]||a[1]||a[2]||a[3]))return;var s=Math.round(t.getXPositionByIndex(i)),o=Math.round(t.getYPosition(a[0],e.inline)),h=Math.round(t.getYPosition(a[1],e.inline));if(0===t.axisX.pointWidth){r.moveTo(s,h),r.lineTo(s,o);break}var l,c,u=Math.round(t.getYPosition(a[2],e.inline)),d=Math.round(t.getYPosition(a[3],e.inline));if("Candlestick"===e.chartType)r.save(),a[2]<a[3]?(l=u,c=d,t.chart.chartOptions.candleUp&&(r.fillStyle=t.chart.chartOptions.candleUp),t.chart.chartOptions.candleBorder?r.strokeStyle=t.chart.chartOptions.candleBorderUp:r.strokeStyle=r.fillStyle,r.fillRect(s-t.axisX.pointWidth,c,2*t.axisX.pointWidth,l-c)):(l=d,c=u,t.chart.chartOptions.candleDown&&(r.fillStyle=t.chart.chartOptions.candleDown),r.fillRect(s-t.axisX.pointWidth,c,2*t.axisX.pointWidth,l-c),t.chart.chartOptions.candleBorder?r.strokeStyle=t.chart.chartOptions.candleBorderDown:r.strokeStyle=r.fillStyle),r.strokeRect(s-t.axisX.pointWidth,c,2*t.axisX.pointWidth,l-c),r.restore(),t.chart.chartOptions.candleWick&&(r.strokeStyle=t.chart.chartOptions.candleWickStyle,r.moveTo(s,o),r.lineTo(s,c),r.moveTo(s,l),r.lineTo(s,h));else a[2]<a[3]?t.chart.chartOptions.stockUp?r.strokeStyle=t.chart.chartOptions.stockUp:e.upStyle&&(r.strokeStyle=e.color):t.chart.chartOptions.stockDown?r.strokeStyle=t.chart.chartOptions.stockDown:e.upStyle&&(r.strokeStyle=e.color),t.chart.chartOptions.stockWidth&&(r.lineWidth=t.chart.chartOptions.stockWidth),r.beginPath(),r.moveTo(s,h),r.lineTo(s,o),r.moveTo(s,u),r.lineTo(s-t.axisX.pointWidth,u),r.moveTo(s,d),r.lineTo(s+t.axisX.pointWidth,d),r.stroke();break;case"Column":if(a[e.closeValueIndex]){s=Math.round(t.getXPositionByIndex(i)),d=Math.round(t.getYPosition(a[e.closeValueIndex],e.inline));if(0===t.axisX.pointWidth){r.moveTo(s,t.axisY.zeroPosition),r.lineTo(s,d);break}r.fillRect(s-t.axisX.pointWidth,Math.min(t.axisY.zeroPosition,d),2*t.axisX.pointWidth,Math.abs(d-t.axisY.zeroPosition)),r.strokeRect(s-t.axisX.pointWidth,Math.min(t.axisY.zeroPosition,d),2*t.axisX.pointWidth,Math.abs(d-t.axisY.zeroPosition))}break;case"Area":s=t.getXPositionByIndex(i);var p=a[e.closeValueIndex];if(t.chart.chartOptions.areaLineColor&&(r.strokeStyle=t.chart.chartOptions.areaLineColor),null!==p){this.chart.isComparison&&"TA_LIB"!=e.kind&&(n.multiplier?p=p*n.multiplier-100:(n.multiplier=100/p,p=0));d=t.getYPosition(p,e.inline);n.lineStarted?r.lineTo(s,d):(n.lineStarted=!0,r.moveTo(s,d))}break;case"Line":s=t.getXPositionByIndex(i);if(null!==(p=a[e.closeValueIndex])){this.chart.isComparison&&"TA_LIB"!=e.kind&&(n.multiplier?p=p*n.multiplier-100:(n.multiplier=100/p,p=0));d=t.getYPosition(p,e.inline);n.lineStarted?r.lineTo(s,d):(n.lineStarted=!0,r.moveTo(s,d))}break;case"Point":s=Math.round(t.getXPositionByIndex(i)),d=Math.round(t.getYPosition(a[e.closeValueIndex],e.inline));r.beginPath(),r.arc(s,d,2.5,0,2*Math.PI,!0),r.closePath(),r.fill();break;default:throw new Error("Chart type '"+e.chartType+"' is invalid.")}},iChart.Charting.ChartRenderer.prototype.renderSeries=function(t,e,i,r){if(!(t.viewport.x.bounded.min>t.viewport.x.bounded.max)){if("HLOC"===e.kind&&(this.chart.isComparison?e.chartType="Line":t.isScroller?e.chartType="Area":e.chartType=this.chart.chartOptions.chartType),i.fillStyle=e.color,i.strokeStyle=e.color,"HLOC"===e.kind){if("Line"===e.chartType){i.lineWidth=this.chart.chartOptions.lineWidth;var n=$.extend([],this.chart.chartOptions.seriesColors);n.splice(0,0,this.chart.chartOptions.lineColor),i.fillStyle=i.strokeStyle=n[r%n.length]}else e.width?i.lineWidth=e.width:i.lineWidth=1;"Column"===e.chartType&&(i.fillStyle=t.chart.chartOptions.volumeStyle,i.strokeStyle=t.chart.chartOptions.volumeStyle)}else"Volume"===e.kind?"Column"===e.chartType&&(i.fillStyle=t.chart.chartOptions.volumeStyle,i.strokeStyle=t.chart.chartOptions.volumeStyle):e.width&&"Column"!==e.chartType?i.lineWidth=e.width:"Area"===e.chartType||"Line"===e.chartType?i.lineWidth=2:i.lineWidth=1;var a="Area"===e.chartType||"Candlestick"===e.chartType||"Column"===e.chartType&&0===t.axisX.pointWidth||"Line"===e.chartType||"Stock"===e.chartType;a&&i.beginPath();for(var s={},o=t.viewport.x.bounded.min;o<=t.viewport.x.bounded.max;++o)this.renderPoint(t,e,o,i,s);if(a&&i.stroke(),"Area"===e.chartType){var h=t.getXPositionByIndex(Math.min(e.points.length-this.chart.chartOptions.futureAmount-1,t.viewport.x.bounded.max));i.fillStyle=this.chart.chartOptions.areaColor,i.lineTo(h,Math.round(t.getYPosition(t.axisY.min))),i.lineTo(t.getXPositionByIndex(t.viewport.x.bounded.min),Math.round(t.getYPosition(t.axisY.min))),i.closePath(),i.fill()}}},iChart.Charting.ChartRenderer.prototype.renderSeriesCollection=function(t,e){e.save(),e.translate(.5,.5),e.beginPath(),e.moveTo(1,1),e.lineTo(1,t.axisY.length-1),e.lineTo(t.axisX.length-1,t.axisY.length-1),e.lineTo(t.axisX.length-1,1),e.closePath(),e.clip();for(var i=0;i<t.ySeries.length;++i)this.renderSeries(t,t.ySeries[i],e,i);e.restore()},iChart.Charting.ChartRenderer.prototype.renderXLabels=function(t,e){e.save(),e.translate(.5,t.axisY.length),e.fillStyle=this.chart.chartOptions.labelColor,e.font=this.chart.chartOptions.labelFont,e.textAlign="center",e.textBaseline="bottom";for(var i,r=Math.max(1,Math.floor((t.axisX.max-t.axisX.min+1)/(t.axisX.length/75))),n=t.xSeries.min+Math.ceil((t.axisX.min-t.xSeries.min)/r)*r;n<=Math.floor(t.axisX.max);n+=r){var a=t.xSeries[n];if(void 0!==a){var s=this.formatDateTime(a),o=Math.round(t.getXPositionByIndex(n));if(this.chart.chartOptions.showLabels){this.chart.chartOptions.showAxes&&(e.strokeStyle=this.chart.chartOptions.axisColor,e.beginPath(),e.moveTo(o,0),e.lineTo(o,5),e.stroke());var h=s.split("\r\n");2===h.length&&(h[1]===i?h.length=1:i=h[1]);for(var l=0;l<h.length;++l)e.fillText(h[l],o,15+11*l)}if(e.strokeStyle=this.chart.chartOptions.gridColor,e.beginPath(),"dashed"===this.chart.chartOptions.gridStyle)for(var c=-4;c>=-t.axisY.length;c-=4)e.moveTo(o,c),e.lineTo(o,c+3);else"solid"===this.chart.chartOptions.gridStyle&&(e.moveTo(o,0),e.lineTo(o,-t.axisY.length));e.stroke()}}e.restore()},iChart.Charting.ChartRenderer.prototype.renderYLabel=function(t,e,i,r){var n=this.formatNumber(e,{decimalPrecision:this.chart.labelPrecision,scale:i}),a=Math.round(t.getYPosition(e,!1));if(this.chart.chartOptions.showAxes&&(r.strokeStyle=this.chart.chartOptions.axisColor,r.beginPath(),r.moveTo(0,a),r.lineTo(5,a),r.stroke()),this.chart.chartOptions.showLabels&&(r.fillStyle=this.chart.chartOptions.labelColor,this.chart.chartOptions.yLabelsOutside?r.fillText(n,8,a):r.fillText(n,10*-Math.ceil(r.measureText(n).width/10),a-5)),r.beginPath(),0===e)r.strokeStyle=this.chart.chartOptions.axisColor,r.moveTo(0,a),r.lineTo(-t.axisX.length,a);else if(r.strokeStyle=this.chart.chartOptions.gridColor,"dashed"===this.chart.chartOptions.gridStyle)for(var s=-4;s>=-t.axisX.length;s-=4)r.moveTo(s,a),r.lineTo(s+3,a);else"solid"===this.chart.chartOptions.gridStyle&&(r.moveTo(0,a),r.lineTo(-t.axisX.length,a));r.stroke()},iChart.Charting.ChartRenderer.prototype.renderYLabels=function(t,e){if(e.save(),e.translate(t.axisX.length,.5),e.font=this.chart.chartOptions.labelFont,e.textAlign="left",e.textBaseline="middle",this.chart.chartOptions.yLabelsOutside)var i=(t.axisY.max-t.axisY.min)/(t.axisY.length/20);else i=(t.axisY.max-t.axisY.min)/(t.axisY.length/(t.axisY.length/4));if(i>0){for(var r=0;i<1;)--r,i*=10;for(;i>=10;)++r,i/=10;for(var n=[1,1.5,2,2.5,3,4,5,7.5],a=0;i>n[a]&&a<n.length;)++a;i=(a===n.length?10:n[a])*Math.pow(10,r)}var s=0,o=Math.max(Math.abs(t.axisY.min),Math.abs(t.axisY.max));o>=1e7&&(s=Math.floor(Math.log(o)/Math.log(1e3)));var h=i/o;(!$.isNumeric(h)||h<1e-4)&&(i=parseFloat((o/Math.pow(10,this.chart.labelPrecision-1)).toPrecision(1)));var l=!1,c=Math.floor(t.axisY.max/i)*i;if($.isNumeric(c))for(;c>=t.axisY.min;)this.renderYLabel(t,c,s,e),c-=i,l=!0;l||this.renderYLabel(t,(t.axisY.max+t.axisY.min)/2,s,e),e.restore()}}()},function(t,e){!function(){"use strict";iChart.Charting.ChartSelection=function(t){this.$container=$(t),this.$selection=$("<div/>",{class:"m-chart-selection"}).appendTo(this.$container),this.$container.off("mouseup.selection").off("mousedown.selection").off("mousemove.selection"),$(this.$container).on("mouseup.selection",this,(function(t){t.data.disabled||t.data.selection&&(t.data.selection=!1,t.data.$selection.hide(),t.data.recalculateContainerPosition(),t.data.x2=t.pageX-t.data.containerOffset.left,t.data.y2=t.pageY-t.data.containerOffset.top,t.data.x2>=0&&t.data.x2<=t.data.containerWidth&&t.data.y2>=0&&t.data.y2<=t.data.containerHeight&&t.data.moveend&&t.data.moveend(t.data))})),this.$container.on("mousedown.selection",this,(function(t){t.data.disabled||1!=t.which||(iChart.animateId&&cancelAnimationFrame(iChart.animateId),t.data.selection=!0,t.data.recalculateContainerPosition(),t.data.x1=t.pageX-t.data.containerOffset.left,t.data.y1=t.pageY-t.data.containerOffset.top,t.data.timeStampLast=t.timeStamp,t.data.timeStamp=t.timeStamp,t.data.xPrev=t.data.x1,t.data.yPrev=t.data.y1,t.data.movestart&&t.data.movestart(t.data))})),this.$container.on("mousemove.selection",this,(function(t){if(!t.data.disabled&&t.data.selection){var e=t.pageX,i=t.pageY;void 0===e&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);var r=Math.round(e-t.data.containerOffset.left),n=Math.round(i-t.data.containerOffset.top);if((t.data.x2!==r||t.data.y2!==n)&&(t.data.xPrev=t.data.x2,t.data.yPrev=t.data.y2,t.data.x2=r,t.data.y2=n,t.data.timeStampLast=t.data.timeStamp,t.data.timeStamp=t.timeStamp,t.data.xSpeed=Math.abs(t.data.xPrev-r)/(t.data.timeStamp-t.data.timeStampLast),t.data.x2>=0&&t.data.x2<=t.data.containerWidth&&t.data.y2>=0&&t.data.y2<=t.data.containerHeight)){var a=!0;t.data.move&&(a=t.data.move(t.data)),a&&t.data.$selection.css({display:"",left:self.x1<self.x2?self.x1:self.x2,top:self.y1<self.y2?self.y1:self.y2,width:self.x1<self.x2?self.x2-self.x1:self.x1-self.x2,height:self.y1<self.y2?self.y2-self.y1:self.y1-self.y2})}}}))},iChart.Charting.ChartSelection.prototype.disabled=!1,iChart.Charting.ChartSelection.prototype.moved=!1,iChart.Charting.ChartSelection.prototype.movestart=null,iChart.Charting.ChartSelection.prototype.move=null,iChart.Charting.ChartSelection.prototype.moveend=null,iChart.Charting.ChartSelection.prototype.selection=!1,iChart.Charting.ChartSelection.prototype.x1=null,iChart.Charting.ChartSelection.prototype.y1=null,iChart.Charting.ChartSelection.prototype.x2=null,iChart.Charting.ChartSelection.prototype.y2=null,iChart.Charting.ChartSelection.prototype.shiftAnchor=function(t,e){null!==this.anchorX&&t&&(this.anchorX+=t),null!==this.anchorY&&e&&(this.anchorY+=e)},iChart.Charting.ChartSelection.prototype.setAnchor=function(t,e){this.anchorX=t,this.anchorY=e},iChart.Charting.ChartSelection.prototype.disable=function(){this.disabled=!0,this.selection=!1,this.x1=null,this.y1=null,this.x2=null,this.y2=null},iChart.Charting.ChartSelection.prototype.enable=function(){this.disabled=!1,this.selection=!1,this.x1=null,this.y1=null,this.x2=null,this.y2=null},iChart.Charting.ChartSelection.prototype.recalculateContainerPosition=function(){this.containerOffset=this.$container.offset(),this.containerWidth=this.$container.width(),this.containerHeight=this.$container.height()}}()},function(t,e,i){var r;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(n,a,s,o){"use strict";var h,l=["","webkit","Moz","MS","ms","o"],c=a.createElement("div"),u=Math.round,d=Math.abs,p=Date.now;function f(t,e,i){return setTimeout(T(t,i),e)}function g(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function m(t,e,i){var r="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",a=n.console&&(n.console.warn||n.console.log);return a&&a.call(n.console,r,i),t.apply(this,arguments)}}h="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}:Object.assign;var y=m((function(t,e,i){for(var r=Object.keys(e),n=0;n<r.length;)(!i||i&&void 0===t[r[n]])&&(t[r[n]]=e[r[n]]),n++;return t}),"extend","Use `assign`."),C=m((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function x(t,e,i){var r,n=e.prototype;(r=t.prototype=Object.create(n)).constructor=t,r._super=n,i&&h(r,i)}function T(t,e){return function(){return t.apply(e,arguments)}}function S(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function w(t,e){return void 0===t?e:t}function A(t,e,i){v(P(e),(function(e){t.addEventListener(e,i,!1)}))}function b(t,e,i){v(P(e),(function(e){t.removeEventListener(e,i,!1)}))}function k(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function _(t,e){return t.indexOf(e)>-1}function P(t){return t.trim().split(/\s+/g)}function I(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var r=0;r<t.length;){if(i&&t[r][i]==e||!i&&t[r]===e)return r;r++}return-1}function D(t){return Array.prototype.slice.call(t,0)}function E(t,e,i){for(var r=[],n=[],a=0;a<t.length;){var s=e?t[a][e]:t[a];I(n,s)<0&&r.push(t[a]),n[a]=s,a++}return i&&(r=e?r.sort((function(t,i){return t[e]>i[e]})):r.sort()),r}function M(t,e){for(var i,r,n=e[0].toUpperCase()+e.slice(1),a=0;a<l.length;){if((r=(i=l[a])?i+n:e)in t)return r;a++}}var O=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||n}var L="ontouchstart"in n,N=void 0!==M(n,"PointerEvent"),$=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),j=["x","y"],H=["clientX","clientY"];function F(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){S(t.options.enable,[t])&&i.handler(e)},this.init()}function V(t,e,i){var r=i.pointers.length,n=i.changedPointers.length,a=1&e&&r-n==0,s=12&e&&r-n==0;i.isFirst=!!a,i.isFinal=!!s,a&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,r=e.pointers,n=r.length;i.firstInput||(i.firstInput=B(e));n>1&&!i.firstMultiple?i.firstMultiple=B(e):1===n&&(i.firstMultiple=!1);var a=i.firstInput,s=i.firstMultiple,o=s?s.center:a.center,h=e.center=W(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-a.timeStamp,e.angle=q(o,h),e.distance=z(o,h),function(t,e){var i=e.center,r=t.offsetDelta||{},n=t.prevDelta||{},a=t.prevInput||{};1!==e.eventType&&4!==a.eventType||(n=t.prevDelta={x:a.deltaX||0,y:a.deltaY||0},r=t.offsetDelta={x:i.x,y:i.y});e.deltaX=n.x+(i.x-r.x),e.deltaY=n.y+(i.y-r.y)}(i,e),e.offsetDirection=X(e.deltaX,e.deltaY);var l=U(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,e.scale=s?(c=s.pointers,u=r,z(u[0],u[1],H)/z(c[0],c[1],H)):1,e.rotation=s?function(t,e){return q(e[1],e[0],H)+q(t[1],t[0],H)}(s.pointers,r):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,r,n,a,s=t.lastInterval||e,o=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(o>25||void 0===s.velocity)){var h=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,c=U(o,h,l);r=c.x,n=c.y,i=d(c.x)>d(c.y)?c.x:c.y,a=X(h,l),t.lastInterval=e}else i=s.velocity,r=s.velocityX,n=s.velocityY,a=s.direction;e.velocity=i,e.velocityX=r,e.velocityY=n,e.direction=a}(i,e);var c,u;var f=t.element;k(e.srcEvent.target,f)&&(f=e.srcEvent.target);e.target=f}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function B(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:p(),pointers:e,center:W(e),deltaX:t.deltaX,deltaY:t.deltaY}}function W(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};for(var i=0,r=0,n=0;n<e;)i+=t[n].clientX,r+=t[n].clientY,n++;return{x:u(i/e),y:u(r/e)}}function U(t,e,i){return{x:e/t||0,y:i/t||0}}function X(t,e){return t===e?1:d(t)>=d(e)?t<0?2:4:e<0?8:16}function z(t,e,i){i||(i=j);var r=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return Math.sqrt(r*r+n*n)}function q(t,e,i){i||(i=j);var r=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return 180*Math.atan2(n,r)/Math.PI}F.prototype={handler:function(){},init:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(R(this.element),this.evWin,this.domHandler)}};var Y={mousedown:1,mousemove:2,mouseup:4};function G(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,F.apply(this,arguments)}x(G,F,{handler:function(t){var e=Y[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Z={2:"touch",3:"pen",4:"mouse",5:"kinect"},Q="pointerdown",J="pointermove pointerup pointercancel";function tt(){this.evEl=Q,this.evWin=J,F.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n.MSPointerEvent&&!n.PointerEvent&&(Q="MSPointerDown",J="MSPointerMove MSPointerUp MSPointerCancel"),x(tt,F,{handler:function(t){var e=this.store,i=!1,r=t.type.toLowerCase().replace("ms",""),n=K[r],a=Z[t.pointerType]||t.pointerType,s="touch"==a,o=I(e,t.pointerId,"pointerId");1&n&&(0===t.button||s)?o<0&&(e.push(t),o=e.length-1):12&n&&(i=!0),o<0||(e[o]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:a,srcEvent:t}),i&&e.splice(o,1))}});var et={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function it(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,F.apply(this,arguments)}function rt(t,e){var i=D(t.touches),r=D(t.changedTouches);return 12&e&&(i=E(i.concat(r),"identifier",!0)),[i,r]}x(it,F,{handler:function(t){var e=et[t.type];if(1===e&&(this.started=!0),this.started){var i=rt.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}}});var nt={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function at(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},F.apply(this,arguments)}function st(t,e){var i=D(t.touches),r=this.targetIds;if(3&e&&1===i.length)return r[i[0].identifier]=!0,[i,i];var n,a,s=D(t.changedTouches),o=[],h=this.target;if(a=i.filter((function(t){return k(t.target,h)})),1===e)for(n=0;n<a.length;)r[a[n].identifier]=!0,n++;for(n=0;n<s.length;)r[s[n].identifier]&&o.push(s[n]),12&e&&delete r[s[n].identifier],n++;return o.length?[E(a.concat(o),"identifier",!0),o]:void 0}x(at,F,{handler:function(t){var e=nt[t.type],i=st.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:t})}});function ot(){F.apply(this,arguments);var t=T(this.handler,this);this.touch=new at(this.manager,t),this.mouse=new G(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function ht(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,lt.call(this,e)):12&t&&lt.call(this,e)}function lt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(i);t>-1&&r.splice(t,1)}),2500)}}function ct(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var n=this.lastTouches[r],a=Math.abs(e-n.x),s=Math.abs(i-n.y);if(a<=25&&s<=25)return!0}return!1}x(ot,F,{handler:function(t,e,i){var r="touch"==i.pointerType,n="mouse"==i.pointerType;if(!(n&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(r)ht.call(this,e,i);else if(n&&ct.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ut=M(c.style,"touchAction"),dt=void 0!==ut,pt=function(){if(!dt)return!1;var t={},e=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||n.CSS.supports("touch-action",i)})),t}();function ft(t,e){this.manager=t,this.set(e)}ft.prototype={set:function(t){"compute"==t&&(t=this.compute()),dt&&this.manager.element.style&&pt[t]&&(this.manager.element.style[ut]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,(function(e){S(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(_(t,"none"))return"none";var e=_(t,"pan-x"),i=_(t,"pan-y");if(e&&i)return"none";if(e||i)return e?"pan-x":"pan-y";if(_(t,"manipulation"))return"manipulation";return"auto"}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,n=_(r,"none")&&!pt.none,a=_(r,"pan-y")&&!pt["pan-y"],s=_(r,"pan-x")&&!pt["pan-x"];if(n){var o=1===t.pointers.length,h=t.distance<2,l=t.deltaTime<250;if(o&&h&&l)return}if(!s||!a)return n||a&&6&i||s&&24&i?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};function gt(t){this.options=h({},this.defaults,t||{}),this.id=O++,this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function vt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function mt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function yt(t,e){var i=e.manager;return i?i.get(t):t}function Ct(){gt.apply(this,arguments)}function xt(){Ct.apply(this,arguments),this.pX=null,this.pY=null}function Tt(){Ct.apply(this,arguments)}function St(){gt.apply(this,arguments),this._timer=null,this._input=null}function wt(){Ct.apply(this,arguments)}function At(){Ct.apply(this,arguments)}function bt(){gt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function kt(t,e){return(e=e||{}).recognizers=w(e.recognizers,kt.defaults.preset),new _t(t,e)}gt.prototype={defaults:{},set:function(t){return h(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=yt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=yt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===I(e,t=yt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=yt(t,this);var e=I(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function r(i){e.manager.emit(i,t)}i<8&&r(e.options.event+vt(i)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),i>=8&&r(e.options.event+vt(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=h({},t);if(!S(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},x(Ct,gt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,r=6&e,n=this.attrTest(t);return r&&(8&i||!n)?16|e:r||n?4&i?8|e:2&e?4|e:2:32}}),x(xt,Ct,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push("pan-y"),24&t&&e.push("pan-x"),e},directionTest:function(t){var e=this.options,i=!0,r=t.distance,n=t.direction,a=t.deltaX,s=t.deltaY;return n&e.direction||(6&e.direction?(n=0===a?1:a<0?2:4,i=a!=this.pX,r=Math.abs(t.deltaX)):(n=0===s?1:s<0?8:16,i=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=n,i&&r>e.threshold&&n&e.direction},attrTest:function(t){return Ct.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=mt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),x(Tt,Ct,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),x(St,gt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,n=t.deltaTime>e.time;if(this._input=t,!r||!i||12&t.eventType&&!n)this.reset();else if(1&t.eventType)this.reset(),this._timer=f((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),x(wt,Ct,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),x(At,Ct,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return xt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.overallVelocity:6&i?e=t.overallVelocityX:24&i&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=mt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),x(bt,gt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,n=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&n&&i){if(4!=t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||z(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=f((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return 32},failTimeout:function(){return this._timer=f((function(){this.state=32}),this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),kt.VERSION="2.0.7",kt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[wt,{enable:!1}],[Tt,{enable:!1},["rotate"]],[At,{direction:6}],[xt,{direction:6},["swipe"]],[bt],[bt,{event:"doubletap",taps:2},["tap"]],[St]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function _t(t,e){var i;this.options=h({},kt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(N?tt:$?at:L?ot:G))(i,V),this.touchAction=new ft(this,this.options.touchAction),Pt(this,!0),v(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Pt(t,e){var i,r=t.element;r.style&&(v(t.options.cssProps,(function(n,a){i=M(r.style,a),e?(t.oldCssProps[i]=r.style[i],r.style[i]=n):r.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}_t.prototype={set:function(t){return h(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var r=this.recognizers,n=e.curRecognizer;(!n||n&&8&n.state)&&(n=e.curRecognizer=null);for(var a=0;a<r.length;)i=r[a],2===e.stopped||n&&i!=n&&!i.canRecognizeWith(n)?i.reset():i.recognize(t),!n&&14&i.state&&(n=e.curRecognizer=i),a++}},get:function(t){if(t instanceof gt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,i=I(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(void 0!==t&&void 0!==e){var i=this.handlers;return v(P(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(void 0!==t){var i=this.handlers;return v(P(t),(function(t){e?i[t]&&i[t].splice(I(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var i=a.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](e),r++}},destroy:function(){this.element&&Pt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(kt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:_t,Input:F,TouchAction:ft,TouchInput:at,MouseInput:G,PointerEventInput:tt,TouchMouseInput:ot,SingleTouchInput:it,Recognizer:gt,AttrRecognizer:Ct,Tap:bt,Pan:xt,Swipe:At,Pinch:Tt,Rotate:wt,Press:St,on:A,off:b,each:v,merge:C,extend:y,assign:h,inherit:x,bindFn:T,prefixed:M}),(void 0!==n?n:"undefined"!=typeof self?self:{}).Hammer=kt,void 0===(r=function(){return kt}.call(e,i,e,t))||(t.exports=r)}(window,document)},function(t,e){!function(){"use strict";iChart.Charting.Prediction=function(t,e){return this.data=t,this.chart=e,this.style={patternend:{strokeStyle:"rgb(153,153,153)",lineWidth:1,lineDash:[7,2]},rectangle:{up:{strokeStyle:"rgb(0,137,0)",lineWidth:1,lineDash:[5,2],fillStyle:"rgba(0,137,0,.3)"},down:{strokeStyle:"rgb(255,2,27)",lineWidth:1,lineDash:[5,2],fillStyle:"rgba(255,2,27,.3)"}},polygon:{strokeStyle:"rgb(102,178,139)",strokeStyle2:"rgb(72,118,177)",lineWidth:3,fillStyle:"rgba(82,175,201,.2)"},fibonacci:{correction:{strokeStyle:"rgb(119,119,119)"},arrow:{strokeStyle:"rgb(251,0,251)",lineWidth:1},line:{strokeStyle:"rgb(204,204,204)",lineWidth:1}},arrow:{down:{strokeStyle:"rgb(219,132,61)",lineWidth:3},up:{strokeStyle:"rgb(15,156,0)",lineWidth:3}},line:{simple:{strokeStyle:"rgb(153,153,153)"},resistance:{strokeStyle:"rgb(102,178,139)",lineWidth:2},support:{strokeStyle:"rgb(72,118,177)",lineWidth:2},patternend:{strokeStyle:"rgb(153,153,153)",lineWidth:1,lineDash:[7,2]}},label:{size:15}},this},iChart.Charting.Prediction.prototype.draw=function(){switch(this.data.patterntype){case"ChartPattern":this.ChartPattern();break;case"FibonacciPattern":this.FibonacciPattern();break;case"KeyLevelsPattern":this.KeyLevelsPattern();break;default:return}this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})},iChart.Charting.Prediction.prototype.getTimeRange=function(){switch(this.data.patterntype){case"ChartPattern":var t=Math.min(this.data.resistancex0,this.data.supportx0);if(null!=this.data.predictiontimefrom)var e=this.data.predictiontimeto;else e=parseInt(this.data.patternendtime)+60*this.data.interval*7;return[1e3*t,1e3*e];case"FibonacciPattern":var i=this.data.timeA;this.data.timeX>0&&(i=Math.min(i,this.data.timeX));t=i;if(this.data.timeD>0&&this.data.priceD>0)e=this.data.timeD;else if(this.data.priceD>0)e=parseFloat(this.data.timeC)+60*parseFloat(this.data.interval)*parseInt(this.data.length);if(this.data.target0>0&&this.data.target10>0)e=parseInt(i)+this.data.interval*this.data.length*(this.data.interval<1440?3:1);return[1e3*t,1e3*e];case"KeyLevelsPattern":t=this.data.point1;if(this.data.predictionpricefrom)e=parseFloat(this.data.predictiontimefrom)+60*parseFloat(this.data.interval)*parseInt(this.data.predictiontimebars);else e=parseInt(this.data.patternendtime)+60*parseFloat(this.data.interval)*7;return[1e3*t,1e3*e];default:return!1}},iChart.Charting.Prediction.prototype.ChartPattern=function(){var t=this.chart.areas[0].getXPositionByValue(this.data.patternendtime),e=this.chart.areas[0].getXPositionByValue(this.data.resistancex0),i=this.chart.areas[0].getXPositionByValue(this.data.resistancex1),r=this.chart.areas[0].getXPositionByValue(this.data.supportx0),n=this.chart.areas[0].getXPositionByValue(this.data.supportx1),a=this.chart.areas[0].getYPosition(this.data.resistancey0),s=this.chart.areas[0].getYPosition(this.data.resistancey1),o=this.chart.areas[0].getYPosition(this.data.supporty0),h=this.chart.areas[0].getYPosition(this.data.supporty1),l=Math.min(this.data.resistancex0,this.data.supportx0),c=Math.max(this.data.resistancex1,this.data.supportx1),u=this.chart.areas[0].getXPositionByValue(l),d=(this.chart.areas[0].getXPositionByValue(c),(u-e)*(s-a)/(i-e)+parseFloat(a)),p=(u-r)*(h-o)/(n-r)+parseFloat(o),f=(t-e)*(s-a)/(i-e)+parseFloat(a),g=(t-r)*(h-o)/(n-r)+parseFloat(o);if((T=this.chart.overlay.createElement("Polygon")).points=[{x:1e3*this.chart.areas[0].getXValue(u),y:this.chart.areas[0].getYValue(d)},{x:1e3*this.chart.areas[0].getXValue(t),y:this.chart.areas[0].getYValue(f)},{x:1e3*this.chart.areas[0].getXValue(t),y:this.chart.areas[0].getYValue(g)},{x:1e3*this.chart.areas[0].getXValue(u),y:this.chart.areas[0].getYValue(p)}],T.settings=this.style.polygon,this.chart.overlay.history.push(T),(T=this.chart.overlay.createElement("VerticalLine")).hasSettings=!0,T.settings=this.style.line.patternend,T.points=[{x:1e3*this.chart.areas[0].getXValue(t),y:this.chart.areas[0].getYValue(p)}],this.chart.overlay.history.push(T),null!=this.data.predictiontimefrom){var v=this.chart.areas[0].xSeries[Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))-1],m=iChart.Charting.getNearestNotNullIndex(this.chart.areas[0].ySeries[0].points,Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))-1),y=this.chart.areas[0].ySeries[0].points[m][3],C=this.chart.areas[0].xSeries[Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))+7];C=Math.min(C,parseFloat(this.data.predictiontimefrom)+Math.round((this.data.predictiontimeto-this.data.predictiontimefrom)/2));(T=this.chart.overlay.createElement("Arrow")).hasSettings=!0,1==this.data.direction?(T.points=[{x:1e3*v,y:y},{x:1e3*C,y:this.data.predictionpricefrom}],T.settings=this.style.arrow.up):(T.points=[{x:1e3*v,y:y},{x:1e3*C,y:this.data.predictionpriceto}],T.settings=this.style.arrow.down),this.chart.overlay.history.push(T),(T=this.chart.overlay.createElement("Rectangle")).hasSettings=!0,1==this.data.direction?T.settings=this.style.rectangle.up:T.settings=this.style.rectangle.down;var x=this.chart.areas[0].getXValue(this.chart.areas[0].getXPositionByIndex(this.chart.areas[0].getXIndexByValue2(this.data.predictiontimeto)));T.points=[{x:1e3*this.data.patternendtime,y:this.data.predictionpricefrom},{x:1e3*x,y:this.data.predictionpriceto}],this.chart.overlay.history.push(T)}else{v=this.chart.areas[0].xSeries[Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))-1],m=iChart.Charting.getNearestNotNullIndex(this.chart.areas[0].ySeries[0].points,Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))-1),y=this.chart.areas[0].ySeries[0].points[m][3],C=this.chart.areas[0].xSeries[Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))+7];var T,S=this.chart.areas[0].getXPositionByValue(C);if((T=this.chart.overlay.createElement("Arrow")).hasSettings=!0,1==this.data.direction){var w=(S-e)*(s-a)/(i-e)+parseFloat(a);T.settings=this.style.arrow.up}else{w=(S-r)*(h-o)/(n-r)+parseFloat(o);T.settings=this.style.arrow.down}T.points=[{x:1e3*v,y:y},{x:1e3*C,y:this.chart.areas[0].getYValue(w)}],this.chart.overlay.history.push(T)}this.chart.overlay.render(),this.chart.overlay.syncHash()},iChart.Charting.Prediction.prototype.FibonacciPattern=function(){this.data.priceX>0&&((i=this.chart.overlay.createElement("Line")).hasSettings=!0,i.settings=this.style.line.support,i.points=[{x:1e3*this.data.timeX,y:this.data.priceX},{x:1e3*this.data.timeA,y:this.data.priceA}],this.chart.overlay.history.push(i));this.data.priceA>0&&((i=this.chart.overlay.createElement("Line")).hasSettings=!0,i.settings=this.style.line.support,i.points=[{x:1e3*this.data.timeA,y:this.data.priceA},{x:1e3*this.data.timeB,y:this.data.priceB}],this.chart.overlay.history.push(i));(i=this.chart.overlay.createElement("Line")).hasSettings=!0,i.settings=this.style.line.support,i.points=[{x:1e3*this.data.timeB,y:this.data.priceB},{x:1e3*this.data.timeC,y:this.data.priceC}],this.chart.overlay.history.push(i);var t=this.data.timeA;this.data.timeX>0&&(t=Math.min(t,this.data.timeX));var e=this.chart.areas[0].getXIndexByValue2(t)+parseInt(this.data.interval/this.chart._dataSettings.timeframe*this.data.length*1.6);if(this.data.timeD>0&&this.data.priceD>0)(i=this.chart.overlay.createElement("Line")).hasSettings=!0,i.settings=this.style.line.support,i.points=[{x:1e3*this.data.timeC,y:this.data.priceC},{x:1e3*this.data.timeD,y:this.data.priceD}],this.chart.overlay.history.push(i);else if(this.data.priceD>0){if((i=this.chart.overlay.createElement("Arrow")).hasSettings=!0,i.settings=this.style.fibonacci.arrow,i.points=[{x:1e3*this.data.timeC,y:this.data.priceC},{x:1e3*this.chart.areas[0].xSeries[e],y:this.data.priceD}],this.chart.overlay.history.push(i),this.data.priceX>0)(i=this.chart.overlay.createElement("Line")).hasSettings=!0,i.settings=this.style.fibonacci.line,i.points=[{x:1e3*this.data.timeX,y:this.data.priceX},{x:1e3*this.chart.areas[0].xSeries[e],y:this.data.priceD}],this.chart.overlay.history.push(i)}this.data.target0>0&&this.data.target10>0&&((i=this.chart.overlay.createElement("FibonacciCorrection")).hasSettings=!0,i.settings=this.style.fibonacci.correction,i.points=[{x:1e3*this.chart.areas[0].xSeries[e],y:this.data.target0},{x:1e3*this.chart.areas[0].xSeries[e],y:this.data.target10}],this.chart.overlay.history.push(i));if(this.data.target0>0&&this.data.target3>0){var i=this.chart.overlay.createElement("Arrow"),r=this.chart.areas[0].xSeries[e+4];i.points=[{x:1e3*this.chart.areas[0].xSeries[e],y:this.data.target0},{x:1e3*r,y:this.data.target3}],i.hasSettings=!0,i.settings=this.style.fibonacci.correction,this.chart.overlay.history.push(i)}if((i=this.chart.overlay.createElement("VerticalLine")).points=[{x:1e3*this.data.patternendtime,y:this.data.price}],i.hasSettings=!0,i.settings=this.style.line.simple,this.chart.overlay.history.push(i),this.data.timeX>0){if((i=this.chart.overlay.createElement("Label")).settings={text:"X",size:this.style.label.size},"down"==this.data.directionX){var n=this.chart.areas[0].getYPosition(this.data.priceX)+this.style.label.size;n=this.chart.areas[0].getYValue(n)}else n=this.data.priceX;i.points=[{x:1e3*this.data.timeX,y:n}],this.chart.overlay.history.push(i)}if(this.data.timeA>0){if((i=this.chart.overlay.createElement("Label")).settings={text:"A",size:this.style.label.size},"down"==this.data.directionA){n=this.chart.areas[0].getYPosition(this.data.priceA)+this.style.label.size;n=this.chart.areas[0].getYValue(n)}else n=this.data.priceA;i.points=[{x:1e3*this.data.timeA,y:n}],this.chart.overlay.history.push(i)}if(this.data.timeB>0){if((i=this.chart.overlay.createElement("Label")).settings={text:"B",size:this.style.label.size},"down"==this.data.directionB){n=this.chart.areas[0].getYPosition(this.data.priceB)+this.style.label.size;n=this.chart.areas[0].getYValue(n)}else n=this.data.priceB;i.points=[{x:1e3*this.data.timeB,y:n}],this.chart.overlay.history.push(i)}if(this.data.timeC>0){if((i=this.chart.overlay.createElement("Label")).settings={text:"C",size:this.style.label.size},"down"==this.data.directionC){n=this.chart.areas[0].getYPosition(this.data.priceC)+this.style.label.size;n=this.chart.areas[0].getYValue(n)}else n=this.data.priceC;i.points=[{x:1e3*this.data.timeC,y:n}],this.chart.overlay.history.push(i)}if(this.data.timeD>0){if((i=this.chart.overlay.createElement("Label")).settings={text:"D",size:this.style.label.size},"down"==this.data.directionD){n=this.chart.areas[0].getYPosition(this.data.priceD)+this.style.label.size;n=this.chart.areas[0].getYValue(n)}else n=this.data.priceD;i.points=[{x:1e3*this.data.timeD,y:n}],this.chart.overlay.history.push(i)}this.chart.overlay.render(),this.chart.overlay.syncHash()},iChart.Charting.Prediction.prototype.KeyLevelsPattern=function(){if((s=this.chart.overlay.createElement("HorizontalLine")).points=[{x:1e3*this.data.patternendtime,y:this.data.price}],s.hasSettings=!0,s.settings=this.style.line.simple,this.chart.overlay.history.push(s),(s=this.chart.overlay.createElement("VerticalLine")).points=[{x:1e3*this.data.patternendtime,y:this.data.price}],s.hasSettings=!0,s.settings=this.style.line.simple,this.chart.overlay.history.push(s),(s=this.chart.overlay.createElement("Line")).points=[{x:1e3*this.data.point1,y:this.data.price},{x:1e3*this.data.patternendtime,y:this.data.price}],s.hasSettings=!0,"Support"==this.data.pattern?s.settings=this.style.line.support:s.settings=this.style.line.resistance,this.chart.overlay.history.push(s),this.data.predictionpricefrom){var t=this.chart.areas[0].xSeries[Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))-1],e=iChart.Charting.getNearestNotNullIndex(this.chart.areas[0].ySeries[0].points,Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))-1),i=this.chart.areas[0].ySeries[0].points[e][3],r=this.chart.areas[0].xSeries[Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))+7];if((s=this.chart.overlay.createElement("Arrow")).hasSettings=!0,1==this.data.direction){var n=this.data.predictionpricefrom;s.settings=this.style.arrow.up}else{s.settings=this.style.arrow.down;n=this.data.predictionpriceto}s.points=[{x:1e3*t,y:i},{x:1e3*r,y:n}],this.chart.overlay.history.push(s),(s=this.chart.overlay.createElement("Rectangle")).hasSettings=!0,1==this.data.direction?s.settings=this.style.rectangle.up:s.settings=this.style.rectangle.down;var a=parseFloat(this.data.predictiontimefrom)+60*parseFloat(this.data.interval)*parseInt(this.data.predictiontimebars);a=this.chart.areas[0].getXValue(this.chart.areas[0].getXPositionByIndex(this.chart.areas[0].getXIndexByValue2(a))),s.points=[{x:1e3*this.data.patternendtime,y:this.data.predictionpricefrom},{x:1e3*a,y:this.data.predictionpriceto}],this.chart.overlay.history.push(s)}else{var s;t=this.chart.areas[0].xSeries[Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))-1],e=iChart.Charting.getNearestNotNullIndex(this.chart.areas[0].ySeries[0].points,Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))-1),i=this.chart.areas[0].ySeries[0].points[e][3],r=this.chart.areas[0].xSeries[Math.round(this.chart.areas[0].getXIndexByValue2(this.data.patternendtime))+7];(s=this.chart.overlay.createElement("Arrow")).points=[{x:1e3*t,y:i},{x:1e3*r,y:this.data.price}],s.hasSettings=!0,1==this.data.direction?s.settings=this.style.arrow.up:s.settings=this.style.arrow.down,this.chart.overlay.history.push(s)}this.chart.overlay.render(),this.chart.overlay.syncHash()},iChart.Charting.Prediction.prototype.getThirdPoint=function(t,e,i){var r=(parseFloat(i)-parseFloat(t.x))*(parseFloat(e.y)-parseFloat(t.y))/(parseFloat(e.x)-parseFloat(t.x))+parseFloat(t.y);return{x:parseFloat(i),y:r}},iChart.Charting.Prediction.prototype.getIntersection=function(t,e,i,r){if((t.y-e.y)*(r.x-i.x)-(i.y-r.y)*(e.x-t.x)!=0&&r.x-i.x!=0){var n=-((t.x*e.y-e.x*t.y)*(r.x-i.x)-(i.x*r.y-r.x*i.y)*(e.x-t.x))/((t.y-e.y)*(r.x-i.x)-(i.y-r.y)*(e.x-t.x));return{x:n,y:((i.y-r.y)*-n-(i.x*r.y-r.x*i.y))/(r.x-i.x)}}return!1}}()},function(t,e){var i={data:{},dataSettings:{useHash:!1,date_from:formatDate(-90),date_to:formatDate(0),graphicIndicators:"",timeframe:1440,hash:"",id:"AAPL.US",interval:"D1",compareIds:"",compareStocks:"",compareTickets:"",start:"",end:""},host:"",url:"/api/get-hloc?",getUrl:function(t){var e={id:t.id,compareIds:t.compareIds,compareStocks:t.compareStocks,compareTickets:t.compareTickets,count:t.count,timeframe:iChart.getChartTimeframe(t.interval),date_from:t.date_from,date_to:t.date_to,interval:t.interval,intervalMode:t.intervalMode,type:t.type,demo:t.demo};return e.hash=e.id.toString()+Date.parse(e.date_from).toString()+Date.parse(e.date_to).toString()+JSON.stringify(e).hashCode(),i.host+i.url+iChart.toQueryString(e)},onRequestCallback:function(t,e){if(!e.id)return 0;e.demo="undefined"!=typeof jNTUserinfo&&jNTUserinfo.isDemo?1:0;var r=e,n=this,a=this.chart;this.chart.wrapper.trigger("iguanaChartEvents",["chartDataRequest",i.getUrl(e)]),this.chart.ajaxDataRequest=$.ajax({dataType:"text json",error:function(e,i,r){clearTimeout(a.timers.loading),a.wrapper.trigger("iguanaChartEvents",["clearLoader"]),a.viewData.chart.setSelectionMode("pan"),console.log("Error: "+i),t({success:!1})},success:function(e,i,s){if(a.wrapper.trigger("iguanaChartEvents",["chartDataReceived",e]),e.info&&e.info[a.dataSource.dataSettings.id]){var o=e.info[a.dataSource.dataSettings.id];a.userSettings.currentSecurity={id:o.nt_ticker,short_name:o.short_name,default_ticker:o.default_ticker,nt_ticker:o.nt_ticker,firstDate:o.firstDate,currency:o.currency,min_step:o.min_step},a.viewData.chart.chartOptions.watermarkText=o.nt_ticker,a.viewData.chart.chartOptions.watermarkSubText=o.short_name,e=n.dataAdapter(e,r),clearTimeout(a.timers.loading),a.wrapper.trigger("iguanaChartEvents",["clearLoader"]),a.viewData.chart.setSelectionMode("pan"),0==e.success&&console.log("ERROR:",e.d.Message),t(e||{warnings:[_t("2125","Ошибка: пустой ответ.")],success:!1}),a.response=e.d,a.wrapper.trigger("iguanaChartEvents",["chartDataReady",e]),a.dataRequestCounter++,a.fixViewport(),a.updateUnlocked=!0}else t({success:!1})},url:i.getUrl(e)})},preInitCallback:function(t,e){if(void 0===e&&(e={}),e.ticker=e.ticker||this.chart.dataSource.dataSettings.id||"SBER",e.f_history=void 0===e.f_history?0:e.f_history,this.chart.userSettings=$.extend(!0,{},$iguanaChart.defaultSettings,e.userSettings),e.hash){this.chart.dataSource.dataSettings.hash=e.hash;var i=iChart.parseQueryString(e.hash.substr(1));for(var r in this.chart.dataSource.dataSettings)i[r]&&(this.chart.dataSource.dataSettings[r]=i[r]);var n=[];for(var a in i){if(a.match(new RegExp("^i[0-9]","i")))n[a.charAt(0)+a.substr(1)]=i[a]}n.length&&(this.chart.dataSource.dataSettings.graphicIndicators=iChart.toQueryString(n)),e.ticker=i.id,e.interval=i.interval}this.chart.userSettings.currentSecurity={id:e.ticker,short_name:e.ticker,default_ticker:e.ticker,nt_ticker:e.ticker,firstDate:"",currency:"",min_step:""},this.chart.dataSource.dataSettings.useHash=!1,this.chart.dataSource.dataSettings.id=e.ticker,this.chart.dataSource.dataSettings.intervalRestriction="",e.chartOptions.watermarkText=e.ticker,e.chartOptions.watermarkSubText=e.ticker,void 0!==e.type&&(e.chartOptions.chartType=e.type),t(e.chartOptions)}}},function(t,e){window.TA={TICKER:0,PER:1,DATE:2,TIME:3,OPEN:4,HIGH:5,LOW:6,CLOSE:7,VOL:8,FULLDATE:9,FULLTIME:10,DATESTRING:11},TA.TA_COMPATIBILITY_DEFAULT=0,TA.TA_GLOBALS_COMPATIBILITY=TA.TA_COMPATIBILITY_DEFAULT,TA.MATypes={SMA:0,EMA:1,WMA:2,DEMA:3,TEMA:4,TRIMA:5,KAMA:6,MAMA:7,T3:8},TA.TA_IS_ZERO=function(t){return-1e-8<t&&t<1e-8},TA.PER_TO_K=function(t){return 2/(t+1)},TA.TA_FUNC_UNST_EMA=0,TA.TA_FUNC_UNST_ADX=1,TA.TA_Globals={unstablePeriod:[0,0]},TA.TA_GLOBALS_UNSTABLE_PERIOD=function(t,e){return TA.TA_Globals.unstablePeriod[t]},TA.BASE_TEMPLATE={__TICKER__:void 0,DefaultSettings:{},CheckStandartValue:function(t,e){return t||(this.Settings[e]?this.DefaultSettings[e]:this.Settings[e])},SetSettings:function(t){var e;if(t)for(e in t!=this.DefaultSettings&&this.SetSettings(this.DefaultSettings),t)this.Settings[e]=+t[e];return this},GetSettings:function(){var t,e=this.DefaultSettings;for(t in e)e[t]=this.Settings[t];return e},IndividualSettings:{},SetIndividualSettings:function(t){return t=MainController.RatesController.getTicker(t),this.SetSettings(this.DefaultSettings),this.IndividualSettings[t]&&this.SetSettings(this.IndividualSettings[t]),this},checkTicker:function(t){return t=MainController.RatesController.getTicker(t),this.__TICKER__==t||(this.__TICKER__=t,this.SetIndividualSettings(t),!1)},getSettingsParameters:function(t){var e=[];for(var i in this.Settings)(!t||t.indexOf(i)+1)&&("number"==typeof this.Settings[i]?e.push({name:i,values:this.Settings[i]+"-"+this.Settings[i]+":1"}):"boolean"==typeof this.Settings[i]?e.push({name:i,values:[!0,!1]}):e.push({name:i,values:[this.Settings[i]]}));return e},Create:function(){var t=$.extend(!0,{},this);return function t(e,i){for(var r in i){"object"==typeof i[r]&&i[r]&&i[r]!={}&&t(e[r],i[r]);var n=i.__lookupSetter__(r),a=i.__lookupGetter__(r);(n||a)&&(e[r]||delete e[r],n&&e.__defineSetter__(r,n),a&&e.__defineGetter__(r,a))}}(t,this),t}},TA.INDICATOR_TEMPLATE=TA.BASE_TEMPLATE.Create(),TA.INDICATOR_TEMPLATE.Create=function(t){var e=TA.BASE_TEMPLATE.Create.apply(this);return e.justifyCalculate=function(){var t=this.calculate.apply(this,arguments);if($.isArray(t))for(var e=this._lookback(this.Settings.TimePeriod),i=0;i<e;i++)t.unshift(0);else{e=this._lookback(this.Settings.TimePeriod);for(var r in t)for(i=0;i<e;i++)t[r].unshift(0)}return t},t&&this.SetSettings(t),e},TA.INDICATOR_TEMPLATE.initChart=function(t,e,i){return this.checkTicker(i),this},TA.INDICATOR_TEMPLATE.filterSignalsArray=function(t,e){return[]},TA.INDICATOR_TEMPLATE.filterSignal=function(t,e,i){return{clear:!0}},TA.INDICATOR_TEMPLATE.getOpenSignal=function(t,e){return this.checkTicker(e),null},TA.INDICATOR_TEMPLATE.getCloseSignal=function(t,e){return this.checkTicker(e),!1},TA.INDICATOR_TEMPLATE.getGraphicSettingsParameters=function(t){var e=this.getSettingsParameters.apply(this,arguments);return e},TA.INDICATOR_TEMPLATE.getTradeSettingsParameters=function(t){var e=this.getSettingsParameters.apply(this,arguments);return e},TA.CONTROLLER_TEMPLATE=TA.BASE_TEMPLATE.Create(),TA.CONTROLLER_TEMPLATE.getByFilter=function(t){return[]},TA.CONTROLLER_TEMPLATE.init=function(){return this.checkTicker(),this},TA.CONTROLLER_TEMPLATE.initChart=function(t,e,i){return this.checkTicker(i),this},TA.CONTROLLER_TEMPLATE._data=null,TA.CONTROLLER_TEMPLATE.__defineGetter__("data",(function(){return this._data})),TA.CONTROLLER_TEMPLATE.__defineSetter__("data",(function(t){return this.update(t)})),TA.CONTROLLER_TEMPLATE.update=function(t){return this},TA.CONTROLLER_TEMPLATE.isEmpty=function(){return!this._data.length}},function(t,e){TA.INDICATOR_TEMPLATE?TA.AD=TA.INDICATOR_TEMPLATE.Create():TA.AD={},TA.AD.name="AD",TA.AD.type="line",TA.AD.DefaultSettings={},TA.AD.Settings={},TA.AD.calculate=function(t,e,i){var r,n,a,s,o,h,l,c,u=[];if(t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(!u)throw"TA_BAD_PARAM";for(r=e-t+1,n=t,a=0,c=0;0!=r;)l=(s=i[n][TA.HIGH])-(o=i[n][TA.LOW]),h=i[n][TA.CLOSE],l>0&&(c+=(h-o-(s-h))/l*i[n][TA.VOL]),u[a++]=c,n++,r--;return u},TA.AD.getValue=function(t,e){var i,r,n,a,s=0;return a=(i=t[e][TA.HIGH])-(r=t[e][TA.LOW]),n=t[e][TA.CLOSE],a>0&&(s+=(n-r-(i-n))/a*t[e][TA.VOL]),s},TA.AD._lookback=function(){return 0},TA.AD._S=function(t,e,i){var r,n,a,s,o,h,l,c,u=[];if(t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(!u)throw"TA_BAD_PARAM";for(r=e-t+1,n=t,a=0,c=0;0!=r;)l=(s=i[n][TA.HIGH])-(o=i[n][TA.LOW]),h=i[n][TA.CLOSE],l>0&&(c+=(h-o-(s-h))/l*i[n][TA.VOL]),u[a++]=c,n++,r--;return u}},function(module,exports){TA.INDICATOR_TEMPLATE?TA.ADOSC=TA.INDICATOR_TEMPLATE.Create():TA.ADOSC={},TA.ADOSC.name="ADOSC",TA.ADOSC.type="line",TA.ADOSC.DefaultSettings={FastPeriod:3,SlowPeriod:10},TA.ADOSC.Settings={},TA.ADOSC.calculate=function(startIdx,endIdx,dataShape,settings){var today,outIdx,lookbackTotal,slowestPeriod,high,low,close,tmp,slowEMA,slowk,one_minus_slowk,fastEMA,fastk,one_minus_fastk,ad,outReal=[];if(this.SetSettings(settings),startIdx||(startIdx=0),endIdx||(endIdx=dataShape.length-1),startIdx<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(endIdx<0||endIdx<startIdx)throw"TA_OUT_OF_RANGE_END_INDEX";if(!dataShape||!dataShape.length)throw"TA_BAD_PARAM";if(this.Settings.FastPeriod){if(this.Settings.FastPeriod<2||this.Settings.FastPeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.FastPeriod=3;if(this.Settings.SlowPeriod){if(this.Settings.SlowPeriod<2||this.Settings.SlowPeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.SlowPeriod=10;if(slowestPeriod=this.Settings.FastPeriod<this.Settings.SlowPeriod?this.Settings.SlowPeriod:this.Settings.FastPeriod,lookbackTotal=TA.EMA._lookback(slowestPeriod),startIdx<lookbackTotal&&(startIdx=lookbackTotal),startIdx>endIdx)return outReal;today=startIdx-lookbackTotal,ad=0;var CALCULATE_AD="   {       high  = dataShape[today][TA.HIGH];       low   = dataShape[today][TA.LOW];       tmp   = high-low;       close = dataShape[today][TA.CLOSE];       if( tmp > 0.0 )          ad += (((close-low)-(high-close))/tmp)*(dataShape[today][TA.VOL]);       today++;    }";for(fastk=TA.PER_TO_K(this.Settings.FastPeriod),one_minus_fastk=1-fastk,slowk=TA.PER_TO_K(this.Settings.SlowPeriod),one_minus_slowk=1-slowk,eval(CALCULATE_AD),fastEMA=ad,slowEMA=ad;today<startIdx;)eval(CALCULATE_AD),fastEMA=fastk*ad+one_minus_fastk*fastEMA,slowEMA=slowk*ad+one_minus_slowk*slowEMA;for(outIdx=0;today<=endIdx;)eval(CALCULATE_AD),fastEMA=fastk*ad+one_minus_fastk*fastEMA,slowEMA=slowk*ad+one_minus_slowk*slowEMA,outReal[outIdx++]=fastEMA-slowEMA;return outReal},TA.ADOSC.getValue=function(t,e,i){return NaN},TA.ADOSC._lookback=function(){var t;if(this.Settings.FastPeriod)this.Settings.FastPeriod=3;else if(this.Settings.FastPeriod<2||this.Settings.FastPeriod>1e5)return-1;if(this.Settings.SlowPeriod){if(this.Settings.SlowPeriod<2||this.Settings.SlowPeriod>1e5)return-1}else this.Settings.SlowPeriod=10;return t=this.Settings.FastPeriod<this.Settings.SlowPeriod?this.Settings.SlowPeriod:this.Settings.FastPeriod,TA.EMA._lookback(t)},TA.ADOSC._S=function(t,e,i,r){return NaN},TA.ADOSC.initChart=function(t,e,i){INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.ADOSC.SetSettings(TA.ADOSC.DefaultSettings)},function(module,exports){TA.INDICATOR_TEMPLATE?TA.ADX=TA.INDICATOR_TEMPLATE.Create():TA.ADX={},TA.ADX.name="ADX",TA.ADX.type="line",TA.ADX.DefaultSettings={TimePeriod:14},TA.ADX.Settings={},TA.ADX.calculate=function(startIdx,endIdx,dataShape,settings,dontFillTotalArray){var today,lookbackTotal,outIdx,prevHigh,prevLow,prevClose,prevMinusDM,prevPlusDM,prevTR,tempReal,tempReal2,diffP,diffM,minusDI,plusDI,sumDX,prevADX,i,outReal=[];function TRUE_RANGE(t,e,i,r){return"      "+r+" = "+t+"-"+e+";       tempReal2 = Math.abs("+t+"-"+i+");       if( tempReal2 > "+r+" )          "+r+" = tempReal2;       tempReal2 = Math.abs("+e+"-"+i+");       if( tempReal2 > "+r+" )          "+r+" = tempReal2;"}if(this.SetSettings(settings),startIdx||(startIdx=0),endIdx||(endIdx=dataShape.length-1),startIdx<0)throw"TA_OUT_OF_RANGE_START_INDEX";if((endIdx<0||endIdx<startIdx)&&console.log("here1",endIdx,startIdx),!dataShape||!dataShape.length)if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=14;function round_pos(t){return t}if(lookbackTotal=2*this.Settings.TimePeriod-1,startIdx<lookbackTotal&&(startIdx=lookbackTotal),startIdx>endIdx)return outReal;for(outIdx=0,prevMinusDM=0,prevPlusDM=0,prevTR=0,today=startIdx-lookbackTotal,prevHigh=dataShape[today][TA.HIGH],prevLow=dataShape[today][TA.LOW],prevClose=dataShape[today][TA.CLOSE],i=this.Settings.TimePeriod-1;i-- >0;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,diffM>0&&diffP<diffM?prevMinusDM+=diffM:diffP>0&&diffP>diffM&&(prevPlusDM+=diffP),eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR+=tempReal,prevClose=dataShape[today][TA.CLOSE];for(sumDX=0,i=this.Settings.TimePeriod;i-- >0;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,prevMinusDM-=prevMinusDM/this.Settings.TimePeriod,prevPlusDM-=prevPlusDM/this.Settings.TimePeriod,diffM>0&&diffP<diffM?prevMinusDM+=diffM:diffP>0&&diffP>diffM&&(prevPlusDM+=diffP),eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR=prevTR-prevTR/this.Settings.TimePeriod+tempReal,prevClose=dataShape[today][TA.CLOSE],TA.TA_IS_ZERO(prevTR)||(minusDI=round_pos(prevMinusDM/prevTR*100),plusDI=round_pos(prevPlusDM/prevTR*100),tempReal=minusDI+plusDI,TA.TA_IS_ZERO(tempReal)||(sumDX+=round_pos(Math.abs(minusDI-plusDI)/tempReal*100)));for(prevADX=round_pos(sumDX/this.Settings.TimePeriod),i=TA.TA_GLOBALS_UNSTABLE_PERIOD(TA.TA_FUNC_UNST_ADX);i-- >0;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,prevMinusDM-=prevMinusDM/this.Settings.TimePeriod,prevPlusDM-=prevPlusDM/this.Settings.TimePeriod,diffM>0&&diffP<diffM?prevMinusDM+=diffM:diffP>0&&diffP>diffM&&(prevPlusDM+=diffP),eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR=prevTR-prevTR/this.Settings.TimePeriod+tempReal,prevClose=dataShape[today][TA.CLOSE],TA.TA_IS_ZERO(prevTR)||(minusDI=round_pos(prevMinusDM/prevTR*100),plusDI=round_pos(prevPlusDM/prevTR*100),tempReal=minusDI+plusDI,TA.TA_IS_ZERO(tempReal)||(tempReal=round_pos(Math.abs(minusDI-plusDI)/tempReal*100),prevADX=round_pos((prevADX*(this.Settings.TimePeriod-1)+tempReal)/this.Settings.TimePeriod)));for(outReal[0]=prevADX,outIdx=1;today<endIdx;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,prevMinusDM-=prevMinusDM/this.Settings.TimePeriod,prevPlusDM-=prevPlusDM/this.Settings.TimePeriod,diffM>0&&diffP<diffM?prevMinusDM+=diffM:diffP>0&&diffP>diffM&&(prevPlusDM+=diffP),eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR=prevTR-prevTR/this.Settings.TimePeriod+tempReal,prevClose=dataShape[today][TA.CLOSE],TA.TA_IS_ZERO(prevTR)||(minusDI=round_pos(prevMinusDM/prevTR*100),plusDI=round_pos(prevPlusDM/prevTR*100),tempReal=minusDI+plusDI,TA.TA_IS_ZERO(tempReal)||(tempReal=round_pos(Math.abs(minusDI-plusDI)/tempReal*100),prevADX=round_pos((prevADX*(this.Settings.TimePeriod-1)+tempReal)/this.Settings.TimePeriod))),outReal[outIdx++]=prevADX;if(!dontFillTotalArray){if(outReal.length>=dataShape.length)throw"Ошибка расчета ADX";if(outReal.length<=dataShape.length)for(;outReal.length!=dataShape.length;)outReal.unshift(0)}return outReal},TA.ADX.getValue=function(t,e,i){},TA.ADX._lookback=function(){return 2*this.Settings.TimePeriod-1},TA.ADX._S=function(t,e,i,r){},TA.ADX.initChart=function(t,e,i){TA.INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.ADX.SetSettings(TA.ADX.DefaultSettings)},function(t,e){if(TA.INDICATOR_TEMPLATE)var i=TA.INDICATOR_TEMPLATE.Create();else i={};i.name="APO",i.type="line",i.DefaultSettings={FastPeriod:12,SlowPeriod:26,MAType:TA.MATypes.SMA,CandleValueIdx:TA.CLOSE},i.Settings={},i._S=function(t,e,i,r){},i.initChart=function(t,e,i){INDICATOR_TEMPLATE&&INDICATOR_TEMPLATE.initChart.apply(this,arguments)},i.SetSettings(i.DefaultSettings),i._lookback=function(t,e,i){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.FastPeriod;if(e){if(e<2||e>1e5)return-1}else e=this.DefaultSettings.SlowPeriod;if(i){if(i<0||i>8)return-1}else i=this.DefaultSettings.MAType;return MA._lookback(Math.max(e,t),i)},i.calculate=function(t,e,i,r){var n=[];if(r&&this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.FastPeriod){if(this.Settings.FastPeriod<2||this.Settings.FastPeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.FastPeriod=this.DefaultSettings.FastPeriod;if(this.Settings.SlowPeriod){if(this.Settings.SlowPeriod<2||this.Settings.SlowPeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.SlowPeriod=this.DefaultSettings.SlowPeriod;if(this.Settings.MAType)this.Settings.MAType=this.DefaultSettings.MAType;else if(this.Settings.MAType<0||this.Settings.MAType>8)throw"TA_BAD_PARAM";if(!n)throw"TA_BAD_PARAM";return n=this.INT_PO(t,e,i,this.Settings.FastPeriod,this.Settings.SlowPeriod,this.Settings.MAType,n,[],0)},i.INT_PO=function(t,e,i,r,n,a,s,o,h){var l,c,u=0,d=0;n<r&&(c=n,n=r,r=c);var p=MA.Create({TimePeriod:r,MAType:a,CandleValueIdx:this.Settings.CandleValueIdx});if((o=p.calculate(t,e,i))&&o.length&&(s=p.calculate(t,e,i,{TimePeriod:n}))&&s.length)if(c=o.length-1-(s.length-1),0!=h)for(u=0,d=c;u<o.length-1;u++,d++)l=s[u],TA.TA_IS_ZERO(l)?s[u]=0:s[u]=(o[d]-l)/l*100;else for(u=0,d=c;u<o.length-1;u++,d++)s[u]=o[d]-s[u];return s}},function(t,e){TA.INDICATOR_TEMPLATE?TA.AROON=TA.INDICATOR_TEMPLATE.Create():TA.AROON={},TA.AROON.name="AROON",TA.AROON.type="line",TA.AROON.DefaultSettings={TimePeriod:14},TA.AROON.Settings={},TA.AROON._S=function(t,e,i,r){},TA.AROON.initChart=function(t,e,i){TA.INDICATOR_TEMPLATE&&TA.INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.AROON.SetSettings(TA.AROON.DefaultSettings),TA.AROON.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d,p,f=[],g=[];if(this.SetSettings(r),t=t||0,e=e||i.length-1,t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(t<this.Settings.TimePeriod&&(t=this.Settings.TimePeriod),t>e)return{AroonDown:f,AroonUp:g};for(h=0,d=t,l=t-this.Settings.TimePeriod,c=-1,u=-1,n=0,a=0,o=100/this.Settings.TimePeriod;d<=e;){if(s=i[d][TA.LOW],c<l)for(n=i[c=l][TA.LOW],p=c;++p<=d;)(s=i[p][TA.LOW])<=n&&(c=p,n=s);else s<=n&&(c=d,n=s);if(s=i[d][TA.HIGH],u<l)for(a=i[u=l][TA.HIGH],p=u;++p<=d;)(s=i[p][TA.HIGH])>=a&&(u=p,a=s);else s>=a&&(u=d,a=s);g[h]=o*(this.Settings.TimePeriod-(d-u)),f[h]=o*(this.Settings.TimePeriod-(d-c)),h++,l++,d++}return{AroonDown:f,AroonUp:g}},TA.AROON.getValue=function(t,e,i){},TA.AROON._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t}},function(t,e){TA.INDICATOR_TEMPLATE?TA.ATR=TA.INDICATOR_TEMPLATE.Create():TA.ATR={},TA.ATR.name="ATR",TA.ATR.type="line",TA.ATR.DefaultSettings={TimePeriod:14},TA.ATR.Settings={},TA.ATR._lookback=function(t){if(t){if(t<1||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t>1?t:1},TA.ATR.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<1||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(t<(s=this._lookback(this.Settings.TimePeriod))&&(t=s),t>e)return u;if(this.Settings.TimePeriod<=1)return TA.TRANGE.calculate(t,e,i,{});if(!(l=TA.TRANGE.calculate(t-s+1,e,i,{}))||!l.length)return u;for(var d=[],p=0;p<l.length-1;p++)d.push([l[p]]);if(!(c=TA.SMA.calculate(this.Settings.TimePeriod-1,this.Settings.TimePeriod-1,d,{TimePeriod:this.Settings.TimePeriod,CandleValueIdx:0}))||!c.length)return u;for(h=c[0],a=this.Settings.TimePeriod,n=0;0!=n;)h*=this.Settings.TimePeriod-1,h+=l[a++],h/=this.Settings.TimePeriod,n--;for(n=1,u[0]=h,o=e-t+1;0!=--o;)h*=this.Settings.TimePeriod-1,h+=l[a++],h/=this.Settings.TimePeriod,u[n++]=h;return u}},function(t,e){TA.INDICATOR_TEMPLATE?TA.BBANDS=TA.INDICATOR_TEMPLATE.Create():TA.BBANDS={},TA.BBANDS.name="BBANDS",TA.BBANDS.type="line",TA.BBANDS.DefaultSettings={TimePeriod:7,DeviationsUp:2,DeviationsDown:2,MAType:TA.MATypes.SMA,CandleValueIdx:TA.CLOSE},TA.BBANDS.Settings={},TA.BBANDS.calculate=function(t,e,i,r){var n,a,s,o,h,l=[],c=[],u=[],d=[];if(this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(this.Settings.DeviationsUp){if(this.Settings.DeviationsUp<-3e37||this.Settings.DeviationsUp>3e37)throw"TA_BAD_PARAM"}else this.Settings.DeviationsUp=this.DefaultSettings.DeviationsUp;if(this.Settings.DeviationsDown){if(this.Settings.DeviationsDown<-3e37||this.Settings.DeviationsDown>3e37)throw"TA_BAD_PARAM"}else this.Settings.DeviationsDown=this.DefaultSettings.DeviationsDown;if(this.Settings.MAType)this.Settings.MAType=this.DefaultSettings.MAType;else if(this.Settings.MAType<0||this.Settings.MAType>8)throw"TA_BAD_PARAM";if(!c)throw"TA_BAD_PARAM";if(!u)throw"TA_BAD_PARAM";if(!d)throw"TA_BAD_PARAM";if(l=u,c,!(l=TA.MA.Create({TimePeriod:this.Settings.TimePeriod,MAType:this.Settings.MAType}).calculate(t,e,i,{TimePeriod:this.Settings.TimePeriod,MAType:this.Settings.MAType}))||!l.length)return{UpperBand:[],LowerBand:[],MiddleBand:[]};if(!(o=TA.STDDEV.Create({TimePeriod:this.Settings.TimePeriod,Deviations:1}).calculate(t,e,i,{TimePeriod:this.Settings.TimePeriod,Deviations:1}))||!o.length)return{UpperBand:[],LowerBand:[],MiddleBand:[]};if(h=(u=l.slice()).length,this.Settings.DeviationsUp==this.Settings.DeviationsDown)if(1==this.Settings.DeviationsUp)for(n=0;n<h;n++)a=o[n],s=u[n],c[n]=s+a,d[n]=s-a;else for(n=0;n<h;n++)a=o[n]*this.Settings.DeviationsUp,s=u[n],c[n]=s+a,d[n]=s-a;else if(1==this.Settings.DeviationsUp)for(n=0;n<h;n++)a=o[n],s=u[n],c[n]=s+a,d[n]=s-a*this.Settings.DeviationsDown;else if(1==this.Settings.DeviationsDown)for(n=0;n<h;n++)a=o[n],s=u[n],d[n]=s-a,c[n]=s+a*this.Settings.DeviationsUp;else for(n=0;n<h;n++)a=o[n],s=u[n],c[n]=s+a*this.Settings.DeviationsUp,d[n]=s-a*this.Settings.DeviationsDown;return{UpperBand:c,LowerBand:d,MiddleBand:u}},TA.BBANDS.getValue=function(t,e,i){},TA.BBANDS._lookback=function(t,e,i,r){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;if(e){if(e<-3e37||e>3e37)return-1}else e=this.DefaultSettings.DeviationsUp;if(i){if(i<-3e37||i>3e37)return-1}else i=this.DefaultSettings.DeviationsDown;if(r){if(r<0||r>8)return-1}else r=this.DefaultSettings.MAType;return TA.MA._lookback(t,r)},TA.BBANDS.SetSettings(TA.BBANDS.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.CCI=TA.INDICATOR_TEMPLATE.Create():TA.CCI={},TA.CCI.name="CCI",TA.CCI.type="line",TA.CCI.DefaultSettings={TimePeriod:14},TA.CCI.Settings={},TA.CCI.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u;this.SetSettings(r);new Array(30);var d,p,f,g=[];if(t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(!g)throw"TA_BAD_PARAM";if(t<(u=this.Settings.TimePeriod-1)&&(t=u),t>e)return g;if(p=[],f=this.Settings.TimePeriod-1,d=0,h=t-u,this.Settings.TimePeriod>1)for(;h<t;)p[d]=(i[h][TA.HIGH]+i[h][TA.LOW]+i[h][TA.CLOSE])/3,h++,++d>f&&(d=0);c=0;do{for(o=(i[h][TA.HIGH]+i[h][TA.LOW]+i[h][TA.CLOSE])/3,p[d]=o,s=0,l=0;l<this.Settings.TimePeriod;l++)s+=p[l];for(s/=this.Settings.TimePeriod,a=0,l=0;l<this.Settings.TimePeriod;l++)a+=Math.abs(p[l]-s);n=o-s,g[c++]=0!=n&&0!=a?n/(a/this.Settings.TimePeriod*.015):0,++d>f&&(d=0),h++}while(h<=e);return g},TA.CCI.getValue=function(t,e,i){},TA.CCI._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t-1},TA.CCI._S=function(t,e,i,r){},TA.CCI.initChart=function(t,e,i){TA.INDICATOR_TEMPLATE&&TA.INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.CCI.SetSettings(TA.CCI.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.CHV=TA.INDICATOR_TEMPLATE.Create():TA.CHV={},TA.CHV.name="CHV",TA.CHV.type="line",TA.CHV.DefaultSettings={TimePeriod:10,TimePeriodRoc:10,CandleValueIdx:TA.CLOSE},TA.CHV.Settings={},TA.CHV.calculate=function(t,e,i,r){var n=[],a=[];this.SetSettings(r);for(var s=t;s<=e;++s)a[s]=[i[s][TA.HIGH]-i[s][TA.LOW]];var o=TA.EMA.Create({TimePeriod:this.Settings.TimePeriod,CandleValueIdx:0}).calculate(t,e,a,{TimePeriod:this.Settings.TimePeriod,CandleValueIdx:0}),h=o.length-this.Settings.TimePeriodRoc;for(s=0;s<h;s++)n[s]=100*(o[s+this.Settings.TimePeriodRoc]-o[s])/o[s];return n},TA.CHV._lookback=function(t){return TA.EMA._lookback(t)+this.Settings.TimePeriodRoc}},function(t,e){TA.INDICATOR_TEMPLATE?TA.DPO=TA.INDICATOR_TEMPLATE.Create():TA.DPO={},TA.DPO.name="DPO",TA.DPO.type="line",TA.DPO.DefaultSettings={TimePeriod:20,CandleValueIdx:TA.CLOSE},TA.DPO.Settings={},TA.DPO.calculate=function(t,e,i,r){var n=[];this.SetSettings(r);for(var a=TA.SMA.Create({TimePeriod:this.Settings.TimePeriod}).calculate(t,e,i,{TimePeriod:this.Settings.TimePeriod,CandleValueIdx:TA.CLOSE}),s=this.Settings.TimePeriod,o=TA.SMA._lookback(s),h=e-(o+=1+(s/2|0));h>=0;--h)n[h]=i[h+o][TA.CLOSE]-a[h];return n},TA.DPO._lookback=function(t){return TA.SMA._lookback(t)+(t/2|0)+1}},function(t,e){TA.INDICATOR_TEMPLATE?TA.ELDR=TA.INDICATOR_TEMPLATE.Create():TA.ELDR={},TA.ELDR.name="ELDR",TA.ELDR.type="line",TA.ELDR.DefaultSettings={TimePeriod:13,MAType:TA.MATypes.EMA},TA.ELDR.Settings={},TA.ELDR._lookback=function(t,e){if(t){if(t<1||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;if(e){if(e<0||e>8)return-1}else e=this.DefaultSettings.MAType;return TA.MA._lookback(t,e)},TA.ELDR.calculate=function(t,e,i,r){var n,a=[],s=[],o=[],h=[],l=[],c=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;lookbackTotal=TA.EMA._lookback(this.Settings.TimePeriod),n=TA.MA.Create({TimePeriod:this.Settings.TimePeriod,MAType:this.Settings.MAType}).calculate(t,e,i,{TimePeriod:this.Settings.TimePeriod,MAType:this.Settings.MAType,CandleValueIdx:TA.CLOSE});for(var u=0;u<n.length;u++)a[u]=i[u+lookbackTotal][TA.HIGH]-n[u],s[u]=i[u+lookbackTotal][TA.LOW]-n[u],o[u]=(i[u+lookbackTotal][TA.HIGH]+i[u+lookbackTotal][TA.LOW])/2-n[u];o.forEach((function(t,e){c[e]=[t]})),h=TA.MA.Create({TimePeriod:this.Settings.TimePeriod,MAType:this.Settings.MAType}).calculate(0,c.length-1,c,{TimePeriod:this.Settings.TimePeriod,MAType:this.Settings.MAType,CandleValueIdx:0});for(u=0;u<this.Settings.TimePeriod-1;u++)h.splice(0,0,0);l=TA.MA.Create({TimePeriod:this.Settings.TimePeriod,MAType:this.Settings.MAType}).calculate(0,c.length-1,c,{TimePeriod:2,MAType:this.Settings.MAType,CandleValueIdx:0});for(u=0;u<1;u++)l.splice(0,0,0);return{ELDR:o,Signal:h,Smooth:l,EMA:n}}},function(t,e){TA.INDICATOR_TEMPLATE?TA.EMA=TA.INDICATOR_TEMPLATE.Create():TA.EMA={},TA.EMA.name="EMA",TA.EMA.type="line",TA.EMA.DefaultSettings={TimePeriod:30,CandleValueIdx:TA.CLOSE},TA.EMA.Settings={},TA.EMA.calculate=function(t,e,i,r){if(this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=30;return this._int_ema(t,e,i,this.Settings.TimePeriod,TA.PER_TO_K(this.Settings.TimePeriod),[])},TA.EMA._int_ema=function(t,e,i,r,n,a){var s,o,h,l,c,u;if(t<(u=this._lookback(r))&&(t=u),t>e)return a;if(TA.TA_GLOBALS_COMPATIBILITY==TA.TA_COMPATIBILITY_DEFAULT){for(l=t-u,h=r,s=0;h-- >0;)s+=i[l++][this.Settings.CandleValueIdx];o=s/r}else o=i[0][this.Settings.CandleValueIdx],l=1;for(;l<=t;)o=(i[l++][this.Settings.CandleValueIdx]-o)*n+o;for(a[0]=o,c=1;l<=e;)o=(i[l++][this.Settings.CandleValueIdx]-o)*n+o,a[c++]=o;return a},TA.EMA.getValue=function(t,e,i){},TA.EMA._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=this.Settings.TimePeriod||this.DefaultSettings.TimePeriod;return t-1},TA.EMA._S=function(t,e,i,r){var n,a,s,o,h,l;if(t<(l=this._lookback(this.Settings.TimePeriod))&&(t=l),t>e)return outReal;if(TA_GLOBALS_COMPATIBILITY==TA_COMPATIBILITY_DEFAULT){for(o=t-l,s=this.Settings.TimePeriod,n=0;s-- >0;)n+=i[o++][this.Settings.CandleValueIdx];a=n/this.Settings.TimePeriod}else a=i[0][this.Settings.CandleValueIdx],o=1;for(;o<=t;)a=(i[o++][this.Settings.CandleValueIdx]-a)*optInK_1+a;for(outReal[0]=a,h=1;o<=e;)a=(inReal[o++]-a)*optInK_1+a,outReal[h++]=a;return outReal},TA.EMA.initChart=function(t,e,i){INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.EMA.SetSettings(TA.EMA.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.ENV=TA.INDICATOR_TEMPLATE.Create():TA.ENV={},TA.ENV.name="ENV",TA.ENV.type="line",TA.ENV.DefaultSettings={TimePeriod:20,shift:1,CandleValueIdx:TA.CLOSE},TA.ENV.Settings={},TA.ENV.calculate=function(t,e,i,r){var n=[],a=[];this.SetSettings(r);for(var s=TA.SMA.Create({TimePeriod:this.Settings.TimePeriod}).calculate(t,e,i,{TimePeriod:this.Settings.TimePeriod,CandleValueIdx:TA.CLOSE}),o=1+this.Settings.shift/100,h=1-this.Settings.shift/100,l=0;l<s.length;l++)n[l]=s[l]*h,a[l]=s[l]*o;return{Lower:n,Upper:a}},TA.ENV._lookback=function(t){return TA.SMA._lookback(t)}},function(t,e){TA.INDICATOR_TEMPLATE?TA.MA=TA.INDICATOR_TEMPLATE.Create():TA.MA={},TA.MA.name="MA",TA.MA.type="line",TA.MA.DefaultSettings={TimePeriod:30,CandleValueIdx:TA.CLOSE,MAType:TA.MATypes.SMA},TA.MA.Settings={},TA.MA.calculate=function(t,e,i,r){this.SetSettings(r);var n,a,s=[];if(t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<1||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=30;if(this.Settings.MAType){if(this.Settings.MAType<0||this.Settings.MAType>8)throw"TA_BAD_PARAM"}else this.Settings.MAType=TA.MATypes.SMA;if(1==this.Settings.TimePeriod){for(nbElement=e-t+1,a=t,n=0;n<nbElement;n++,a++)s[n]=i[a][this.Settings.CandleValueIdx];return s}switch(this.Settings.MAType){case TA.MATypes.SMA:s=TA.SMA.calculate(t,e,i,this.Settings);break;case TA.MATypes.EMA:s=TA.EMA.calculate(t,e,i,this.Settings);break;case TA.MATypes.WMA:s=TA.WMA.calculate(t,e,i,this.Settings);break;case TA.MATypes.DEMA:s=DEMA.calculate(t,e,i,this.Settings);break;case TA.MATypes.TEMA:s=TEMA.calculate(t,e,i,this.Settings);break;case TA.MATypes.TRIMA:s=TRIMA.calculate(t,e,i,this.Settings);break;case TA.MATypes.KAMA:s=KAMA.calculate(t,e,i,this.Settings);break;case TA.MATypes.MAMA:s=MAMA.calculate(t,e,i,{FastLimit:.5,SlowLimit:.05});break;case TA.MATypes.T3:s=T3.calculate(t,e,i,{TimePeriod:this.Settings.TimePeriod,VFactor:.7});break;default:throw"TA_BAD_PARAM"}return s},TA.MA.getValue=function(t,e,i){},TA.MA._lookback=function(t,e){var i;if(t){if(t<1||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;if(e){if(e<0||e>8)return-1}else e=this.DefaultSettings.MAType;if(t<=1)return 0;switch(e){case TA.MATypes.SMA:i=TA.SMA._lookback(t);break;case TA.MATypes.EMA:i=TA.EMA._lookback(t);break;case TA.MATypes.WMA:i=TA.WMA._lookback(t);break;case TA.MATypes.DEMA:i=DEMA._lookback(t);break;case TA.MATypes.TEMA:i=TEMA._lookback(t);break;case TA.MATypes.TRIMA:i=TRIMA._lookback(t);break;case TA.MATypes.KAMA:i=KAMA._lookback(t);break;case TA.MATypes.MAMA:i=MAMA._lookback(.5,.05);break;case TA.MATypes.T3:i=T3._lookback(t,.7);break;default:i=0}return i},TA.MA._S=function(t,e,i,r){},TA.MA.initChart=function(t,e,i){INDICATOR_TEMPLATE&&INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.MA.SetSettings(TA.MA.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.MACD=TA.INDICATOR_TEMPLATE.Create():TA.MACD={},TA.MACD.name="MACD",TA.MACD.type="line",TA.MACD.DefaultSettings={FastPeriod:12,SlowPeriod:26,SignalPeriod:9,CandleValueIdx:TA.CLOSE},TA.MACD.Settings={},TA.MACD.calculate=function(t,e,i,r){if(r&&this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.FastPeriod){if(this.Settings.FastPeriod<2||this.Settings.FastPeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.FastPeriod=this.DefaultSettings.FastPeriod;if(this.Settings.SlowPeriod){if(this.Settings.SlowPeriod<2||this.Settings.SlowPeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.SlowPeriod=this.DefaultSettings.SlowPeriod;if(this.Settings.SignalPeriod){if(this.Settings.SignalPeriod<1||this.Settings.SignalPeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.SignalPeriod=this.DefaultSettings.SignalPeriod;var n=$.extend(!0,{},this.Settings);return n.SignalPeriod_2=n.SignalPeriod,delete n.SignalPeriod,TA.INT_MACD.calculate(t,e,i,n)},TA.MACD._lookback=function(t,e,i){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.FastPeriod;if(e){if(e<2||e>1e5)return-1}else e=this.DefaultSettings.SlowPeriod;if(i){if(i<1||i>1e5)return-1}else i=this.DefaultSettings.SignalPeriod;var r;return e<t&&(r=e,e=t,t=r),TA.EMA._lookback(e)+TA.EMA._lookback(i)},TA.MACD.SetSettings(TA.MACD.DefaultSettings),TA.INDICATOR_TEMPLATE?TA.INT_MACD=TA.INDICATOR_TEMPLATE.Create():TA.INT_MACD={},TA.INT_MACD.name="INT_MACD",TA.INT_MACD.type="line",TA.INT_MACD.DefaultSettings={FastPeriod:12,SlowPeriod:26,SignalPeriod_2:9,CandleValueIdx:TA.CLOSE},TA.INT_MACD.Settings={},TA.INT_MACD.calculate=function(t,e,i,r){var n,a,s,o,h,l,c=[],u=[],d=[],p=[],f=[];if(this.Settings&&this.SetSettings(r),this.Settings.SlowPeriod<this.Settings.FastPeriod&&(s=this.Settings.SlowPeriod,this.Settings.SlowPeriod=this.Settings.FastPeriod,this.Settings.FastPeriod=s),0!=this.Settings.SlowPeriod||(this.Settings.SlowPeriod=this.DefaultSettings.SlowPeriod),n=TA.PER_TO_K(this.Settings.SlowPeriod),0!=this.Settings.FastPeriod||(this.Settings.FastPeriod=this.DefaultSettings.FastPeriod),a=TA.PER_TO_K(this.Settings.FastPeriod),o=h=TA.EMA._lookback(this.Settings.SignalPeriod_2),t<(o+=TA.EMA._lookback(this.Settings.SlowPeriod))&&(t=o),t>e)return{MACD:d,MACDSignal:p,MACDHist:f};if(s=e-t+1+h,s=t-h,TA.EMA.SetSettings({CandleValueIdx:this.Settings.CandleValueIdx}),TA.EMA._int_ema(s,e,i,this.Settings.SlowPeriod,n,c),!c||!c.length)return{MACD:d,MACDSignal:p,MACDHist:f};if(TA.EMA._int_ema(s,e,i,this.Settings.FastPeriod,a,u),!u||!u.length)return{MACD:d,MACDSignal:p,MACDHist:f};for(v=0,l=u.length;v<l;v++)u[v]=u[v]-c[v];d=u.slice(-u.length+this.Settings.SignalPeriod_2-1);for(var g=[],v=0;v<u.length;v++)g.push({7:u[v]});if(TA.EMA._int_ema(0,u.length-1,g,this.Settings.SignalPeriod_2,TA.PER_TO_K(this.Settings.SignalPeriod_2),p),!p||!p.length)return{MACD:d,MACDSignal:p,MACDHist:f};for(v=0,l=p.length;v<l;v++)f[v]=d[v]-p[v];return{MACD:d,MACDSignal:p,MACDHist:f}},TA.INT_MACD._lookback=function(t){TA.EMA._lookback(t)},TA.INT_MACD.SetSettings(TA.INT_MACD.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.MEDPRICE=TA.INDICATOR_TEMPLATE.Create():TA.MEDPRICE={},TA.MEDPRICE.name="MEDPRICE",TA.MEDPRICE.type="line",TA.MEDPRICE.DefaultSettings={},TA.MEDPRICE.Settings={},TA.MEDPRICE._lookback=function(){return 0},TA.MEDPRICE.calculate=function(t,e,i,r){var n,a,s=[];if(t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";for(n=0,a=t;a<=e;a++)s[n++]=(i[a][TA.HIGH]+i[a][TA.LOW])/2;return s}},function(t,e){TA.INDICATOR_TEMPLATE?TA.MFI=TA.INDICATOR_TEMPLATE.Create():TA.MFI={},TA.MFI.name="MFI",TA.MFI.type="line",TA.MFI.DefaultSettings={TimePeriod:14},TA.MFI.Settings={},TA.MFI._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t},TA.MFI.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d=[];this.SetSettings(r);var p,f=0,g=[];if(t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(this.Settings.TimePeriod<=0)return d;g=new Array(this.Settings.TimePeriod);for(var v=0;v<g.length;v++)g[v]={};if(!g)return d;if(p=g.length-1,t<(l=this.Settings.TimePeriod)&&(t=l),t>e)return d;for(c=0,s=(i[u=t-l][TA.HIGH]+i[u][TA.LOW]+i[u][TA.CLOSE])/3,n=0,a=0,u++,v=this.Settings.TimePeriod;v>0;v--)h=(o=(i[u][TA.HIGH]+i[u][TA.LOW]+i[u][TA.CLOSE])/3)-s,s=o,o*=i[u++][TA.VOL],h<0?(g[f].negative=o,a+=o,g[f].positive=0):h>0?(g[f].positive=o,n+=o,g[f].negative=0):(g[f].positive=0,g[f].negative=0),++f>p&&(f=0);if(u>t)o=n+a,d[c++]=o<1?0:n/o*100;else for(;u<t;)n-=g[f].positive,a-=g[f].negative,h=(o=(i[u][TA.HIGH]+i[u][TA.LOW]+i[u][TA.CLOSE])/3)-s,s=o,o*=i[u++][TA.VOL],h<0?(g[f].negative=o,a+=o,g[f].positive=0):h>0?(g[f].positive=o,n+=o,g[f].negative=0):(g[f].positive=0,g[f].negative=0),++f>p&&(f=0);for(;u<=e;)n-=g[f].positive,a-=g[f].negative,h=(o=(i[u][TA.HIGH]+i[u][TA.LOW]+i[u][TA.CLOSE])/3)-s,s=o,o*=i[u++][TA.VOL],h<0?(g[f].negative=o,a+=o,g[f].positive=0):h>0?(g[f].positive=o,n+=o,g[f].negative=0):(g[f].positive=0,g[f].negative=0),o=n+a,d[c++]=o<1?0:n/o*100,++f>p&&(f=0);return d}},function(module,exports){TA.INDICATOR_TEMPLATE?TA.MINUS_DI=TA.INDICATOR_TEMPLATE.Create():TA.MINUS_DI={},TA.MINUS_DI.name="MINUS_DI",TA.MINUS_DI.type="line",TA.MINUS_DI.DefaultSettings={TimePeriod:14},TA.MINUS_DI.Settings={},TA.MINUS_DI._lookback=function(t){if(t){if(t<1||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t>1?t:1},TA.MINUS_DI.calculate=function(startIdx,endIdx,dataShape,settings){var today,lookbackTotal,outIdx,prevHigh,prevLow,prevClose,prevMinusDM,prevTR,tempReal,tempReal2,diffP,diffM,i,outReal=[],outBegIdx,outNBElement;function TRUE_RANGE(t,e,i,r){return"              "+r+" = "+t+"-"+e+";               tempReal2 = Math.abs("+t+"-"+i+");               if( tempReal2 > "+r+" )                  "+r+" = tempReal2;               tempReal2 = Math.abs("+e+"-"+i+");               if( tempReal2 > "+r+" )                  "+r+" = tempReal2;"}if(this.SetSettings(settings),startIdx<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(endIdx<0||endIdx<startIdx)throw"TA_OUT_OF_RANGE_END_INDEX";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<1||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;function round_pos(t){return t}if(lookbackTotal=this.Settings.TimePeriod>1?this.Settings.TimePeriod:1,startIdx<lookbackTotal&&(startIdx=lookbackTotal),startIdx>endIdx)return outReal;if(outIdx=0,this.Settings.TimePeriod<=1){var outBegIdx=startIdx;for(today=startIdx-1,prevHigh=dataShape[today][TA.HIGH],prevLow=dataShape[today][TA.LOW],prevClose=dataShape[today][TA.CLOSE];today<endIdx;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,diffM>0&&diffP<diffM?(eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),TA.TA_IS_ZERO(tempReal)?outReal[outIdx++]=0:outReal[outIdx++]=diffM/tempReal):outReal[outIdx++]=0,prevClose=dataShape[today][TA.CLOSE];return outNBElement=outIdx,outReal}for(outBegIdx=today=startIdx,prevMinusDM=0,prevTR=0,today=startIdx-lookbackTotal,prevHigh=dataShape[today][TA.HIGH],prevLow=dataShape[today][TA.LOW],prevClose=dataShape[today][TA.CLOSE],i=this.Settings.TimePeriod-1;i-- >0;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,diffM>0&&diffP<diffM&&(prevMinusDM+=diffM),eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR+=tempReal,prevClose=dataShape[today][TA.CLOSE];for(i=1;0!=i--;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,diffM>0&&diffP<diffM?prevMinusDM=prevMinusDM-prevMinusDM/this.Settings.TimePeriod+diffM:prevMinusDM-=prevMinusDM/this.Settings.TimePeriod,eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR=prevTR-prevTR/this.Settings.TimePeriod+tempReal,prevClose=dataShape[today][TA.CLOSE];for(TA.TA_IS_ZERO(prevTR)?outReal[0]=0:outReal[0]=round_pos(prevMinusDM/prevTR*100),outIdx=1;today<endIdx;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,diffM>0&&diffP<diffM?prevMinusDM=prevMinusDM-prevMinusDM/this.Settings.TimePeriod+diffM:prevMinusDM-=prevMinusDM/this.Settings.TimePeriod,eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR=prevTR-prevTR/this.Settings.TimePeriod+tempReal,prevClose=dataShape[today][TA.CLOSE],TA.TA_IS_ZERO(prevTR)?outReal[outIdx++]=0:outReal[outIdx++]=round_pos(prevMinusDM/prevTR*100);return outNBElement=outIdx,outReal}},function(t,e){TA.INDICATOR_TEMPLATE?TA.MINUS_DM=TA.INDICATOR_TEMPLATE.Create():TA.MINUS_DM={},TA.MINUS_DM.name="MINUS_DM",TA.MINUS_DM.type="line",TA.MINUS_DM.DefaultSettings={TimePeriod:14},TA.MINUS_DM.Settings={},TA.MINUS_DM._lookback=function(t){if(t){if(t<1||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t>1?t-1:1},TA.MINUS_DM.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d,p,f=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<1||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(t<(a=this.Settings.TimePeriod>1?this.Settings.TimePeriod-1:1)&&(t=a),t>e)return f;if(s=0,this.Settings.TimePeriod<=1){for(o=i[n=t-1][TA.HIGH],h=i[n][TA.LOW];n<e;)u=(l=i[++n][TA.HIGH])-o,o=l,d=h-(l=i[n][TA.LOW]),h=l,f[s++]=d>0&&u<d?d:0;return f}for(c=0,o=i[n=t-a][TA.HIGH],h=i[n][TA.LOW],p=this.Settings.TimePeriod-1;p-- >0;)u=(l=i[++n][TA.HIGH])-o,o=l,d=h-(l=i[n][TA.LOW]),h=l,d>0&&u<d&&(c+=d);for(p=0;0!=p--;)u=(l=i[++n][TA.HIGH])-o,o=l,d=h-(l=i[n][TA.LOW]),h=l,d>0&&u<d?c=c-c/this.Settings.TimePeriod+d:c-=c/this.Settings.TimePeriod;for(f[0]=c,s=1;n<e;)u=(l=i[++n][TA.HIGH])-o,o=l,d=h-(l=i[n][TA.LOW]),h=l,d>0&&u<d?c=c-c/this.Settings.TimePeriod+d:c-=c/this.Settings.TimePeriod,f[s++]=c;return f}},function(t,e){TA.INDICATOR_TEMPLATE?TA.OBV=TA.INDICATOR_TEMPLATE.Create():TA.OBV={},TA.OBV.name="OBV",TA.OBV.type="line",TA.OBV.DefaultSettings={CandleValueIdx:TA.CLOSE},TA.OBV.Settings={},TA.OBV._lookback=function(){return 0},TA.OBV.calculate=function(t,e,i,r){var n,a,s,o,h,l=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";for(h=i[t][TA.VOL],s=i[t][this.Settings.CandleValueIdx],a=0,n=t;n<=e;n++)(o=i[n][this.Settings.CandleValueIdx])>s?h+=i[n][TA.VOL]:o<s&&(h-=i[n][TA.VOL]),l[a++]=h,s=o;return l}},function(t,e){TA.INDICATOR_TEMPLATE?TA.PCH=TA.INDICATOR_TEMPLATE.Create():TA.PCH={},TA.PCH.name="PCH",TA.PCH.type="line",TA.PCH.DefaultSettings={TimePeriodLower:13,TimePeriodUpper:13},TA.PCH.Settings={},TA.PCH._lookback=function(t,e){t||(t=this.Settings.TimePeriodLower||this.DefaultSettings.TimePeriodLower),e||(e=this.Settings.TimePeriodUpper||this.DefaultSettings.TimePeriodUpper);var i=Math.min(t,e)-1;return i<1||i>1e5?-1:i>1?i:1},TA.PCH.calculate=function(t,e,i,r){var n=[],a=[];if(t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";this.SetSettings(r);for(var s=this.Settings.TimePeriodLower,o=this.Settings.TimePeriodUpper,h=s-1;h<=e;h++){for(var l=i[h][TA.LOW],c=h-s+1;c<=h;c++)i[c][TA.LOW]<l&&(l=i[c][TA.LOW]);a.push(l)}for(h=o-1;h<=e;h++){var u=i[h][TA.HIGH];for(c=h-o+1;c<=h;c++)i[c][TA.HIGH]>u&&(u=i[c][TA.HIGH]);n.push(u)}if(s>o)for(h=0;h<s-o;h++)a.splice(0,0,0);else if(s>o)for(h=0;h<o-s;h++)n.splice(0,0,0);return{high:n,low:a}}},function(module,exports){TA.INDICATOR_TEMPLATE?TA.PLUS_DI=TA.INDICATOR_TEMPLATE.Create():TA.PLUS_DI={},TA.PLUS_DI.name="PLUS_DI",TA.PLUS_DI.type="line",TA.PLUS_DI.DefaultSettings={TimePeriod:14},TA.PLUS_DI.Settings={},TA.PLUS_DI._lookback=function(t){if(t){if(t<1||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t>1?t:1},TA.PLUS_DI.calculate=function(startIdx,endIdx,dataShape,settings){var today,lookbackTotal,outIdx,prevHigh,prevLow,prevClose,prevPlusDM,prevTR,tempReal,tempReal2,diffP,diffM,i,outReal=[];function TRUE_RANGE(t,e,i,r){return"              "+r+" = "+t+"-"+e+";               tempReal2 = Math.abs("+t+"-"+i+");               if( tempReal2 > "+r+" )                  "+r+" = tempReal2;               tempReal2 = Math.abs("+e+"-"+i+");               if( tempReal2 > "+r+" )                  "+r+" = tempReal2;"}if(this.SetSettings(settings),startIdx<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(endIdx<0||endIdx<startIdx)throw"TA_OUT_OF_RANGE_END_INDEX";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<1||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;function round_pos(t){return t}if(lookbackTotal=this.Settings.TimePeriod>1?this.Settings.TimePeriod:1,startIdx<lookbackTotal&&(startIdx=lookbackTotal),startIdx>endIdx){var outBegIdx=0,outNBElement=0;return outReal}if(outIdx=0,this.Settings.TimePeriod<=1){var outBegIdx=startIdx;for(today=startIdx-1,prevHigh=dataShape[today][TA.HIGH],prevLow=dataShape[today][TA.LOW],prevClose=dataShape[today][TA.CLOSE];today<endIdx;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,diffP>0&&diffP>diffM?(eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),TA.TA_IS_ZERO(tempReal)?outReal[outIdx++]=0:outReal[outIdx++]=diffP/tempReal):outReal[outIdx++]=0,prevClose=dataShape[today][TA.CLOSE];return outNBElement=outIdx,outReal}for(outBegIdx=today=startIdx,prevPlusDM=0,prevTR=0,today=startIdx-lookbackTotal,prevHigh=dataShape[today][TA.HIGH],prevLow=dataShape[today][TA.LOW],prevClose=dataShape[today][TA.CLOSE],i=this.Settings.TimePeriod-1;i-- >0;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,diffP>0&&diffP>diffM&&(prevPlusDM+=diffP),eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR+=tempReal,prevClose=dataShape[today][TA.CLOSE];for(i=1;0!=i--;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,diffP>0&&diffP>diffM?prevPlusDM=prevPlusDM-prevPlusDM/this.Settings.TimePeriod+diffP:prevPlusDM-=prevPlusDM/this.Settings.TimePeriod,eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR=prevTR-prevTR/this.Settings.TimePeriod+tempReal,prevClose=dataShape[today][TA.CLOSE];for(TA.TA_IS_ZERO(prevTR)?outReal[0]=0:outReal[0]=round_pos(prevPlusDM/prevTR*100),outIdx=1;today<endIdx;)today++,tempReal=dataShape[today][TA.HIGH],diffP=tempReal-prevHigh,prevHigh=tempReal,tempReal=dataShape[today][TA.LOW],diffM=prevLow-tempReal,prevLow=tempReal,diffP>0&&diffP>diffM?prevPlusDM=prevPlusDM-prevPlusDM/this.Settings.TimePeriod+diffP:prevPlusDM-=prevPlusDM/this.Settings.TimePeriod,eval(TRUE_RANGE("prevHigh","prevLow","prevClose","tempReal")),prevTR=prevTR-prevTR/this.Settings.TimePeriod+tempReal,prevClose=dataShape[today][TA.CLOSE],TA.TA_IS_ZERO(prevTR)?outReal[outIdx++]=0:outReal[outIdx++]=round_pos(prevPlusDM/prevTR*100);return outNBElement=outIdx,outReal}},function(t,e){if(TA.INDICATOR_TEMPLATE)var i=TA.INDICATOR_TEMPLATE.Create();else i={};i.DefaultSettings={CandleValueIdx:TA.CLOSE,FastPeriod:12,SlowPeriod:26,MAType:TA.MATypes.SMA},i.Settings={},i.name="PPO",i.type="line",i._lookback=function(t,e,i){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.FastPeriod;if(e){if(e<2||e>1e5)return-1}else e=this.DefaultSettings.SlowPeriod;if(i){if(i<0||i>8)return-1}else i=this.DefaultSettings.MAType;return MA._lookback(Math.max(e,t),i)},i.calculate=function(t,e,i,r){var n=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.FastPeriod){if(this.Settings.FastPeriod<2||this.Settings.FastPeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.FastPeriod=this.DefaultSettings.FastPeriod;if(this.Settings.SlowPeriod){if(this.Settings.SlowPeriod<2||this.Settings.SlowPeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.SlowPeriod=this.DefaultSettings.SlowPeriod;if(this.Settings.MAType){if(this.Settings.MAType<0||this.Settings.MAType>8)throw"TA_BAD_PARAM"}else this.Settings.MAType=this.DefaultSettings.MAType;if(!n)throw"TA_BAD_PARAM";return n=APO.INT_PO(t,e,i,this.Settings.FastPeriod,this.Settings.SlowPeriod,this.Settings.MAType,n,[],1)},i.SetSettings(i.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.ROC=TA.INDICATOR_TEMPLATE.Create():TA.ROC={},TA.ROC.name="ROC",TA.ROC.type="line",TA.ROC.DefaultSettings={CandleValueIdx:TA.CLOSE,TimePeriod:10},TA.ROC.Settings={},TA.ROC._lookback=function(t){if(t){if(t<1||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t},TA.ROC.calculate=function(t,e,i,r){var n,a,s,o,h=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<1||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(!h)throw"TA_BAD_PARAM";if(t<this.Settings.TimePeriod&&(t=this.Settings.TimePeriod),t>e)return h;for(a=0,n=t,s=t-this.Settings.TimePeriod;n<=e;)o=i[s++][TA.CLOSE],h[a++]=0!=o?100*(i[n][TA.CLOSE]/o-1):0,n++;return h}},function(t,e){TA.INDICATOR_TEMPLATE?TA.RSI=TA.INDICATOR_TEMPLATE.Create():TA.RSI={},TA.RSI.name="RSI",TA.RSI.type="line",TA.RSI.DefaultSettings={TimePeriod:14,CandleValueIdx:TA.CLOSE},TA.RSI.Settings={},TA.RSI.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d;this.SetSettings(r);var p=[];if(t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(t<(s=this._lookback(this.Settings.TimePeriod))&&(t=s),t>e)return p;if(n=0,1==this.Settings.TimePeriod)return p=i.slice(t);for(c=i[a=t-s][this.Settings.CandleValueIdx],0,h=0,l=0,a++,o=this.Settings.TimePeriod;o>0;o--)d=(u=i[a++][this.Settings.CandleValueIdx])-c,c=u,d<0?l-=d:h+=d;if(l/=this.Settings.TimePeriod,h/=this.Settings.TimePeriod,a>t)u=h+l,TA.TA_IS_ZERO(u)?p[n++]=0:p[n++]=h/u*100;else for(;a<t;)d=(u=i[a][this.Settings.CandleValueIdx])-c,c=u,l*=this.Settings.TimePeriod-1,h*=this.Settings.TimePeriod-1,d<0?l-=d:h+=d,l/=this.Settings.TimePeriod,h/=this.Settings.TimePeriod,a++;for(;a<=e;)d=(u=i[a++][this.Settings.CandleValueIdx])-c,c=u,l*=this.Settings.TimePeriod-1,h*=this.Settings.TimePeriod-1,d<0?l-=d:h+=d,l/=this.Settings.TimePeriod,u=(h/=this.Settings.TimePeriod)+l,TA.TA_IS_ZERO(u)?p[n++]=0:p[n++]=h/u*100;return p},TA.RSI.getValue=function(t,e,i){},TA.RSI._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=this.Settings.TimePeriod||this.DefaultSettings.TimePeriod;return t},TA.RSI._S=function(t,e,i,r){},TA.RSI.initChart=function(t,e,i){TA.INDICATOR_TEMPLATE&&TA.INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.RSI.SetSettings(TA.RSI.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.SAR=TA.INDICATOR_TEMPLATE.Create():TA.SAR={},TA.SAR.name="SAR",TA.SAR.type="line",TA.SAR.DefaultSettings={Acceleration:.02,Maximum:.2},TA.SAR.Settings={},TA.SAR._lookback=function(t,e){if(t){if(t<0||t>3e37)return-1}else t=this.DefaultSettings.Acceleration;if(e){if(e<0||e>3e37)return-1}else e=this.DefaultSettings.Maximum;return 1},TA.SAR.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d,p,f=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(this.Settings.Acceleration){if(this.Settings.Acceleration<0||this.Settings.Acceleration>3e37)throw"TA_BAD_PARAM"}else this.Settings.Acceleration=this.DefaultSettings.Acceleration;if(this.Settings.Maximum){if(this.Settings.Maximum<0||this.Settings.Maximum>3e37)throw"TA_BAD_PARAM"}else this.Settings.Maximum=this.DefaultSettings.Maximum;if(t<1&&(t=1),t>e)return f;for((u=this.Settings.Acceleration)>this.Settings.Maximum&&(u=this.Settings.Acceleration=this.Settings.Maximum),n=TA.MINUS_DM.calculate(t,t,i,{TimePeriod:1})[0]>0?0:1,s=0,o=i[(a=t)-1][TA.HIGH],h=i[a-1][TA.LOW],1==n?(d=i[a][TA.HIGH],p=h):(d=i[a][TA.LOW],p=o),h=i[a][TA.LOW],o=i[a][TA.HIGH];a<=e;)c=h,l=o,h=i[a][TA.LOW],o=i[a][TA.HIGH],a++,1==n?h<=p?(n=0,(p=d)<l&&(p=l),p<o&&(p=o),f[s++]=p,(p+=(u=this.Settings.Acceleration)*((d=h)-p))<l&&(p=l),p<o&&(p=o)):(f[s++]=p,o>d&&(d=o,(u+=this.Settings.Acceleration)>this.Settings.Maximum&&(u=this.Settings.Maximum)),(p+=u*(d-p))>c&&(p=c),p>h&&(p=h)):o>=p?(n=1,(p=d)>c&&(p=c),p>h&&(p=h),f[s++]=p,(p+=(u=this.Settings.Acceleration)*((d=o)-p))>c&&(p=c),p>h&&(p=h)):(f[s++]=p,h<d&&(d=h,(u+=this.Settings.Acceleration)>this.Settings.Maximum&&(u=this.Settings.Maximum)),(p+=u*(d-p))<l&&(p=l),p<o&&(p=o));return f}},function(t,e){TA.INDICATOR_TEMPLATE?TA.SMA=TA.INDICATOR_TEMPLATE.Create():TA.SMA={},TA.SMA.name="SMA",TA.SMA.type="line",TA.SMA.DefaultSettings={TimePeriod:30,CandleValueIdx:TA.CLOSE},TA.SMA.Settings={},TA.SMA.calculate=function(t,e,i,r,n){var a,s,o,h,l,c,u=[];if(this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<(c=this.Settings.TimePeriod-1)&&(t=c),t>e)return u;if(a=0,o=l=t-c,this.Settings.TimePeriod>1)for(;o<t;)a+=i[o++][this.Settings.CandleValueIdx];h=0;do{s=a+=i[o++][this.Settings.CandleValueIdx],a-=i[l++][this.Settings.CandleValueIdx],u[h++]=s/this.Settings.TimePeriod}while(o<=e);return u},TA.SMA.getValue=function(t,e,i){},TA.SMA._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t-1},TA.SMA._S=function(t,e,i,r){},TA.SMA.initChart=function(t,e,i){INDICATOR_TEMPLATE&&INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.SMA.SetSettings(TA.SMA.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.STDDEV=TA.INDICATOR_TEMPLATE.Create():TA.STDDEV={},TA.STDDEV.name="STDDEV",TA.STDDEV.type="line",TA.STDDEV.DefaultSettings={TimePeriod:10,Deviations:1,CandleValueIdx:TA.CLOSE},TA.STDDEV.Settings={},TA.STDDEV.calculate=function(t,e,i,r){var n,a,s=[];if(this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(this.Settings.Deviations){if(this.Settings.Deviations<-3e37||this.Settings.Deviations>3e37)throw"TA_BAD_PARAM"}else this.Settings.Deviations=this.DefaultSettings.Deviations;if(!(s=TA.INT_VAR.Create({TimePeriod:this.Settings.TimePeriod,CandleValueIdx:this.Settings.CandleValueIdx}).calculate(t,e,i,{TimePeriod:this.Settings.TimePeriod,CandleValueIdx:this.Settings.CandleValueIdx}))||!s.length)return s;if(1!=this.Settings.Deviations)for(n=0;n<void 0;n++)a=s[n],s[n]=a?Math.sqrt(a)*this.Settings.Deviations:0;else for(n=0;n<s.length;n++)a=s[n],s[n]=a?Math.sqrt(a):0;return s},TA.STDDEV.getValue=function(t,e,i){},TA.STDDEV._lookback=function(t,e){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;if(e){if(e<-3e37||e>3e37)return-1}else e=this.DefaultSettings.Deviations;return TA.VAR._lookback(t,e)},TA.STDDEV._S=function(t,e,i,r){},TA.STDDEV.initChart=function(t,e,i){TA.INDICATOR_TEMPLATE&&TA.INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.STDDEV.SetSettings(TA.STDDEV.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.STOCH=TA.INDICATOR_TEMPLATE.Create():TA.STOCH={},TA.STOCH.name="STOCH",TA.STOCH.type="line",TA.STOCH.DefaultSettings={PeriodFastK:5,PeriodSlowK:3,PeriodSlowD:3,SlowKMAType:TA.MATypes.SMA,SlowDMAType:TA.MATypes.SMA},TA.STOCH.Settings={},TA.STOCH.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d,p,f,g,v,m,y=[],C=[],x=[];if(r&&this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.PeriodFastK){if(this.Settings.PeriodFastK<1||this.Settings.PeriodFastK>1e5)throw"TA_BAD_PARAM"}else this.Settings.PeriodFastK=this.DefaultSettings.PeriodFastK;if(this.Settings.PeriodSlowK){if(this.Settings.PeriodSlowK<1||this.Settings.PeriodSlowK>1e5)throw"TA_BAD_PARAM"}else this.Settings.PeriodSlowK=this.DefaultSettings.PeriodSlowK;if(this.Settings.PeriodSlowD){if(this.Settings.PeriodSlowD<1||this.Settings.PeriodSlowD>1e5)throw"TA_BAD_PARAM"}else this.Settings.PeriodSlowD=this.DefaultSettings.PeriodSlowD;if(this.Settings.SlowKMAType)this.Settings.SlowKMAType=this.DefaultSettings.SlowKMAType;else if(this.Settings.SlowKMAType<0||this.Settings.SlowKMAType>8)throw"TA_BAD_PARAM";if(this.Settings.SlowDMAType)this.Settings.SlowDMAType=this.DefaultSettings.SlowDMAType;else if(this.Settings.SlowDMAType<0||this.Settings.SlowDMAType>8)throw"TA_BAD_PARAM";if(!y)throw"TA_BAD_PARAM";if(!C)throw"TA_BAD_PARAM";if(d=this.Settings.PeriodFastK-1,p=TA.MA._lookback(this.Settings.PeriodSlowK,this.Settings.SlowKMAType),t<(u=d+(f=TA.MA._lookback(this.Settings.PeriodSlowD,this.Settings.SlowDMAType))+p)&&(t=u),t>e)return{slowK:[],slowD:[]};for(h=0,v=(g=t-u)+d,l=c=-1,o=a=n=0;v<=e;){if(s=i[v][TA.LOW],l<g){for(n=i[l=g][TA.LOW],m=l;++m<=v;)(s=i[m][TA.LOW])<n&&(l=m,n=s);o=(a-n)/100}else s<=n&&(l=v,o=(a-(n=s))/100);if(s=i[v][TA.HIGH],c<g){for(a=i[c=g][TA.HIGH],m=c;++m<=v;)(s=i[m][TA.HIGH])>a&&(c=m,a=s);o=(a-n)/100}else s>=a&&(c=v,o=((a=s)-n)/100);x[h++]=0!=o?[(i[v][TA.CLOSE]-n)/o]:[0],g++,v++}var T=(y=TA.MA.Create({TimePeriod:this.Settings.PeriodSlowK,MAType:this.Settings.SlowKMAType}).calculate(0,h-1,x,{TimePeriod:this.Settings.PeriodSlowK,MAType:this.Settings.SlowKMAType,CandleValueIdx:0})).length;return y.forEach((function(t,e){x[e]=[t]})),C=TA.MA.Create({TimePeriod:this.Settings.PeriodSlowK,MAType:this.Settings.SlowKMAType}).calculate(0,T-1,x,{TimePeriod:this.Settings.PeriodSlowD,MAType:this.Settings.SlowDMAType,CandleValueIdx:0}),{slowK:y=y.slice(f),slowD:C}},TA.STOCH._lookback=function(t,e,i,r,n){if(t){if(t<1||t>1e5)return-1}else t=this.DefaultSettings.PeriodFastK;if(e){if(e<1||e>1e5)return-1}else e=this.DefaultSettings.PeriodSlowK;if(r){if(r<0||r>8)return-1}else r=this.DefaultSettings.SlowKMAType;if(i){if(i<1||i>1e5)return-1}else i=this.DefaultSettings.PeriodSlowD;if(n){if(n<0||n>8)return-1}else n=this.DefaultSettings.SlowDMAType;var a=t-1;return a+=TA.MA._lookback(e,r),a+=TA.MA._lookback(i,n)}},function(t,e){TA.INDICATOR_TEMPLATE?TA.TEMA=TA.INDICATOR_TEMPLATE.Create():TA.TEMA={},TA.TEMA.name="TEMA",TA.TEMA.type="line",TA.TEMA.DefaultSettings={CandleValueIdx:TA.CLOSE,TimePeriod:12},TA.TEMA.Settings={},TA.TEMA._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return 3*TA.EMA._lookback(t)},TA.TEMA.calculate=function(t,e,i,r){var n,a,s,o,h,l,c=[],u=[],d=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(t<(s=3*(o=TA.EMA._lookback(this.Settings.TimePeriod)))&&(t=s),t>e)return d;n=TA.PER_TO_K(this.Settings.TimePeriod);var p=TA.EMA.Create({TimePeriod:this.Settings.TimePeriod});if(p._int_ema(t-3*o,e,i,this.Settings.TimePeriod,n,c),!c.length)return d;for(var f=[],g=0;g<c.length;g++)f.push([c[g]]);if(p.SetSettings({CandleValueIdx:0}),p._int_ema(0,f.length-1,f,this.Settings.TimePeriod,n,u),!u.length)return d;var v=[];for(g=0;g<u.length;g++)v.push([u[g]]);if(p.SetSettings({CandleValueIdx:0}),p._int_ema(0,v.length-1,v,this.Settings.TimePeriod,n,d),!d.length)return d;for(h=2*o,l=o,a=0;a<d.length;)d[a]+=3*c[h++]-3*u[l++],a++;return d}},function(t,e){TA.INDICATOR_TEMPLATE?TA.TRANGE=TA.INDICATOR_TEMPLATE.Create():TA.TRANGE={},TA.TRANGE.name="AROON",TA.TRANGE.type="line",TA.TRANGE.DefaultSettings={},TA.TRANGE.Settings={},TA.TRANGE._lookback=function(){return 1},TA.TRANGE.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(t<1&&(t=1),t>e)return d;for(a=0,n=t;n<=e;)c=i[n][TA.LOW],u=i[n][TA.HIGH],l=i[n][TA.CLOSE],h=u-c,(s=Math.abs(l-u))>h&&(h=s),(o=Math.abs(l-c))>h&&(h=o),d[a++]=h,n++;return a,t,d}},function(t,e){TA.INDICATOR_TEMPLATE?TA.TRIMA=TA.INDICATOR_TEMPLATE.Create():TA.TRIMA={},TA.TRIMA.name="TRIMA",TA.TRIMA.type="line",TA.TRIMA.DefaultSettings={CandleValueIdx:TA.CLOSE,TimePeriod:20},TA.TRIMA.Settings={},TA.TRIMA._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t-1},TA.TRIMA.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d,p,f,g=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(t<(n=this.Settings.TimePeriod-1)&&(t=n),t>e)return g;if(l=0,this.Settings.TimePeriod%2==1){for(p=1/(p=((h=this.Settings.TimePeriod>>1)+1)*(h+1)),c=(d=(u=t-n)+h)+h,a=0,s=0,h=d;h>=u;h--)a+=s+=f=i[h][this.Settings.CandleValueIdx];for(o=0,h=++d;h<=c;h++)a+=o+=f=i[h][this.Settings.CandleValueIdx];for(l=0,f=i[u++][this.Settings.CandleValueIdx],g[l++]=a*p,c++;c<=e;)a-=s,s-=f,s+=f=i[d++][this.Settings.CandleValueIdx],a+=o,o-=f,o+=f=i[c++][this.Settings.CandleValueIdx],a+=f,f=i[u++][this.Settings.CandleValueIdx],g[l++]=a*p}else{for(p=1/(p=(h=this.Settings.TimePeriod>>1)*(h+1)),c=(d=(u=t-n)+h-1)+h,a=0,s=0,h=d;h>=u;h--)a+=s+=f=i[h][this.Settings.CandleValueIdx];for(o=0,h=++d;h<=c;h++)a+=o+=f=i[h][this.Settings.CandleValueIdx];for(l=0,f=i[u++][this.Settings.CandleValueIdx],g[l++]=a*p,c++;c<=e;)a-=s,s-=f,s+=f=i[d++][this.Settings.CandleValueIdx],a+=o-=f,o+=f=i[c++][this.Settings.CandleValueIdx],a+=f,f=i[u++][this.Settings.CandleValueIdx],g[l++]=a*p}return g}},function(t,e){TA.INDICATOR_TEMPLATE?TA.TYPPRICE=TA.INDICATOR_TEMPLATE.Create():TA.TYPPRICE={},TA.TYPPRICE.name="TYPPRICE",TA.TYPPRICE.type="line",TA.TYPPRICE.DefaultSettings={},TA.TYPPRICE.Settings={},TA.TYPPRICE._lookback=function(){return 0},TA.TYPPRICE.calculate=function(t,e,i,r){var n,a,s=[];if(t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";for(n=0,a=t;a<=e;a++)s[n++]=(i[a][TA.HIGH]+i[a][TA.LOW]+i[a][TA.CLOSE])/3;return s}},function(t,e){TA.INDICATOR_TEMPLATE?TA.VAR=TA.INDICATOR_TEMPLATE.Create():TA.VAR={},TA.VAR.name="VAR",TA.VAR.type="line",TA.VAR.DefaultSettings={TimePeriod:2,Deviations:1,CandleValueIdx:TA.CLOSE},TA.VAR.Settings={},TA.VAR.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d,p=[];if(this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<(d=this.Settings.TimePeriod-1)&&(t=d),t>e)return p;if(a=0,s=0,l=u=t-d,this.Settings.TimePeriod>1)for(;l<t;)a+=n=i[l++][this.Settings.CandleValueIdx],s+=n*=n;c=0;do{a+=n=i[l++][this.Settings.CandleValueIdx],s+=n*=n,o=a/this.Settings.CandleValueIdx,h=s/this.Settings.CandleValueIdx,a-=n=i[u++][this.Settings.CandleValueIdx],s-=n*=n,p[c++]=h-o*o}while(l<=e);return p},TA.VAR.getValue=function(t,e,i){},TA.VAR._lookback=function(t,e){if(t){if(t<1||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;if(e){if(e<-3e37||e>3e37)return-1}else e=this.DefaultSettings.Deviations;return t-1},TA.VAR._S=function(t,e,i,r){},TA.VAR.initChart=function(t,e,i){INDICATOR_TEMPLATE&&INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.VAR.SetSettings(TA.VAR.DefaultSettings),TA.INT_VAR=TA.VAR.Create(),TA.INT_VAR.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d,p=[];if(this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<(d=this.Settings.TimePeriod-1)&&(t=d),t>e)return p;if(a=0,s=0,l=u=t-d,this.Settings.TimePeriod>1)for(;l<t;)a+=n=i[l++][this.Settings.CandleValueIdx],s+=n*=n;c=0;do{a+=n=i[l++][this.Settings.CandleValueIdx],s+=n*=n,o=a/this.Settings.TimePeriod,h=s/this.Settings.TimePeriod,a-=n=i[u++][this.Settings.CandleValueIdx],s-=n*=n,p[c++]=h-o*o}while(l<=e);return p}},function(t,e){TA.INDICATOR_TEMPLATE?TA.VPT=TA.INDICATOR_TEMPLATE.Create():TA.VPT={},TA.VPT.name="VPT",TA.VPT.type="line",TA.VPT.DefaultSettings={},TA.VPT.Settings={},TA.VPT._lookback=function(){return 0},TA.VPT.calculate=function(t,e,i,r){var n=[];if(t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";var a=i[t][TA.CLOSE];n[0]=0;for(var s=t+1;s<=e;++s)n[s-t]=n[s-t-1]+i[s][TA.VOL]*(i[s][TA.CLOSE]-a)/a,a=i[s][TA.CLOSE];return n}},function(t,e){TA.INDICATOR_TEMPLATE?TA.WCLPRICE=TA.INDICATOR_TEMPLATE.Create():TA.WCLPRICE={},TA.WCLPRICE.name="WCLPRICE",TA.WCLPRICE.type="line",TA.WCLPRICE.DefaultSettings={},TA.WCLPRICE.Settings={},TA.WCLPRICE._lookback=function(){return 0},TA.WCLPRICE.calculate=function(t,e,i,r){var n,a,s=[];if(t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";for(n=0,a=t;a<=e;a++)s[n++]=(i[a][TA.HIGH]+i[a][TA.LOW]+2*i[a][TA.CLOSE])/4;return s}},function(t,e){TA.INDICATOR_TEMPLATE?TA.WILLR=TA.INDICATOR_TEMPLATE.Create():TA.WILLR={},TA.WILLR.name="WILLR",TA.WILLR.type="line",TA.WILLR.DefaultSettings={TimePeriod:14},TA.WILLR.Settings={},TA.WILLR._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=this.DefaultSettings.TimePeriod;return t-1},TA.WILLR.calculate=function(t,e,i,r){var n,a,s,o,h,l,c,u,d,p,f,g=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(t<(l=this.Settings.TimePeriod-1)&&(t=l),t>e)return g;for(o=0,h=0,p=t,c=t-l,u=d=-1,o=a=n=0;p<=e;){if(s=i[p][TA.LOW],u<c){for(n=i[u=c][TA.LOW],f=u;++f<=p;)(s=i[f][TA.LOW])<n&&(u=f,n=s);o=(a-n)/-100}else s<=n&&(u=p,o=(a-(n=s))/-100);if(s=i[p][TA.HIGH],d<c){for(a=i[d=c][TA.HIGH],f=d;++f<=p;)(s=i[f][TA.HIGH])>a&&(d=f,a=s);o=(a-n)/-100}else s>=a&&(d=p,o=((a=s)-n)/-100);g[h++]=0!=o?(a-i[p][TA.CLOSE])/o:0,c++,p++}return g}},function(t,e){TA.INDICATOR_TEMPLATE?TA.WMA=TA.INDICATOR_TEMPLATE.Create():TA.WMA={},TA.WMA.name="WMA",TA.WMA.type="line",TA.WMA.DefaultSettings={TimePeriod:30,CandleValueIdx:TA.CLOSE},TA.WMA.Settings={},TA.WMA.calculate=function(t,e,i,r,n){var a,s,o,h,l,c,u,d,p,f,g=[];if(this.SetSettings(r),t||(t=0),e||(e=i.length-1),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(!g)throw"TA_BAD_PARAM";if(t<(f=this.Settings.TimePeriod-1)&&(t=f),t>e)return g;if(1==this.Settings.TimePeriod)return g;for(l=this.Settings.TimePeriod*(+this.Settings.TimePeriod+1)/2,s=0,c=u=0,a=h=t-f,o=1;a<t;)u+=d=i[a++][this.Settings.CandleValueIdx],c+=d*o,o++;for(p=0;a<=e;)u+=d=i[a++][this.Settings.CandleValueIdx],u-=p,c+=d*this.Settings.TimePeriod,p=i[h++][this.Settings.CandleValueIdx],g[s++]=c/l,c-=u;return g},TA.WMA.getValue=function(t,e,i){},TA.WMA._lookback=function(t){if(t){if(t<2||t>1e5)return-1}else t=30;return t-1},TA.WMA._S=function(t,e,i,r){},TA.WMA.initChart=function(t,e,i){INDICATOR_TEMPLATE&&INDICATOR_TEMPLATE.initChart.apply(this,arguments)},TA.WMA.SetSettings(TA.WMA.DefaultSettings)},function(t,e){TA.INDICATOR_TEMPLATE?TA.ZLEMA=TA.INDICATOR_TEMPLATE.Create():TA.ZLEMA={},TA.ZLEMA.name="ZLEMA",TA.ZLEMA.type="line",TA.ZLEMA.DefaultSettings={CandleValueIdx:TA.CLOSE,TimePeriod:12},TA.ZLEMA.Settings={},TA.ZLEMA._lookback=function(t){return 0},TA.ZLEMA.calculate=function(t,e,i,r){var n,a=h=[];if(this.SetSettings(r),t<0)throw"TA_OUT_OF_RANGE_START_INDEX";if(e<0||e<t)throw"TA_OUT_OF_RANGE_END_INDEX";if(!i||!i.length)throw"TA_BAD_PARAM";if(this.Settings.TimePeriod){if(this.Settings.TimePeriod<2||this.Settings.TimePeriod>1e5)throw"TA_BAD_PARAM"}else this.Settings.TimePeriod=this.DefaultSettings.TimePeriod;if(t<(n=TA.EMA._lookback(this.Settings.TimePeriod))&&(t=n),t>e)return a;for(var s=TA.PER_TO_K(this.Settings.TimePeriod),o=Math.ceil((this.Settings.TimePeriod-1)/2),h=[],l=0;l<=e;l++)h[l]=l<o?i[l][TA.CLOSE]:s*(2*i[l][TA.CLOSE]-i[l-o][TA.CLOSE])+(1-s)*h[l-1];return h}},function(t,e){!function(){"use strict";var t={chartType:"Line",enabled:!0,formatProvider:{decimalPlaces:"2",decimalPrecision:null},indicatorIndex:0,indicatorIndex2:0,kind:"TA_LIB",name:"",overlay:!0,points:[],valuesPerPoint:1,isStartedFromZero:!1,color:"",width:2,chartArea:"ChartArea1",enableMerge:!0,index:2,closeValueIndex:0,lowValueIndex:0,highValueIndex:0,labels:[]};iChart.Charting.TA=function(t){this.chart=t.chart},iChart.Charting.TA.prototype.addCustomIndicatorSerie=function(e,i,r){if(arguments.length<3)throw _t("14949","Неверные параметры для вывода пользовательской серии.");if(e){this.removeIndicator(i);var n=new iChart.Charting.ChartArea({chart:this.chart}),a="ChartAreaI"+i,s=r.title||indocatorName,o=r.data,h=o.length;n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=a,n.title=s,n.onClose=function(){this.chart.clearIndicators(this)};var l=[];l[0]=$.extend(!0,{},t),l[0].indicatorIndex=i||0,l[0].color=r.color||this.chart.chartOptions.indicatorColors[i][0],l[0].width=r.width||2,l[0].name=s,l[0].labels=this.getLabels(l[0],[]);this.getData();for(var c=0;c<h;c++)l[0].points.push([0===o[c]?null:o[c]]);n.ySeries.push(l[0]),this.chart.areas.push(n);for(var u=0;u<this.chart.areas.length;++u)this.chart.areas[u].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:n.title,params:null,data:o}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(i)},iChart.Charting.TA.prototype.getDefaultParams=function(t){var e={};return $.each(iChart.indicators[t].parameters,(function(t,i){e[i.Code]=i.Value})),e},iChart.Charting.TA.prototype.getSeries=function(t,e){t=t||"Volume",e=e||"";for(var i=this.chart.areas,r=0;r<i.length;r++){for(var n=-1,a=0;a<i[r].ySeries.length;a++)if("TechnicalAnalysis"===i[r].ySeries[a].kind){var s=i[r].ySeries[a].name.match(/(.+)\s\((.*)\)/);if(s&&s[1]===t&&s[2]==e){n=a;break}}else if(i[r].ySeries[a].kind===t){n=a;break}if(n>=0)break}return n>=0&&{xSeries:this.chart.areas[r].xSeries.slice(0,this.chart.areas[r].xSeries.length-this.chart.chartOptions.futureAmount),ySeries:this.chart.areas[r].ySeries[a].points.slice(0,this.chart.areas[r].xSeries.length-this.chart.chartOptions.futureAmount)}},iChart.Charting.TA.prototype.getData=function(){var t=this.chart.areas[0].xSeries,e=this.chart.areas[0].ySeries[0],i=this.getSeries("Volume");i||((i={}).ySeries=[]);for(var r=[],n=0;n<t.length-this.chart.chartOptions.futureAmount;n++){var a=new Date(1e3*t[n]);iChart.formatDateTime(a);var s=["",this.chart._dataSettings.timeframe,iChart.formatDateTime(a,"yyyyMMdd"),iChart.formatDateTime(a,"HHmmss"),null!=e.points[n]?e.points[n][2]:r[n-1][4],null!=e.points[n]?e.points[n][0]:r[n-1][5],null!=e.points[n]?e.points[n][1]:r[n-1][6],null!=e.points[n]?e.points[n][3]:r[n-1][7],null!=i.ySeries[n]?i.ySeries[n][0]:0,iChart.formatDateTime(a,"yyyy-MM-ddTHH:mm:ss"),a.getTime(),iChart.formatDateTime(a,"yyyy-MM-ddTHH:mm:ss")];r[n]=s}return r},iChart.Charting.TA.prototype.mapParam=function(t){return{TimePeriod:"Period",PeriodROC:"PeriodROC",shift:"Shift",DeviationsUp:"StdDevUp",DeviationsDown:"StdDevDown"}[t]||""},iChart.Charting.TA.prototype.test=function(){var t=parseInt(this.chart._dataSettings.i0_Period),e=this.getData(),i=EMA.calculate(null,null,e,{TimePeriod:t});i=Array(t-1).concat(i);for(var r=this.getSeries("EMA",t).ySeries,n=0;n<r.length;n++)console.log(n,r[n],i[n],"cl="+e[n][CLOSE],"dt="+(100-r[n]/i[n]*100))},iChart.Charting.TA.prototype.removeIndicator=function(t){if(void 0!==this.chart&&!$.isEmptyObject(this.chart.areas)){for(var e=0;e<this.chart.areas.length;++e){for(var i=this.chart.areas[e],r=[],n=0;n<i.ySeries.length;++n)"TA_LIB"!==i.ySeries[n].kind||i.ySeries[n].indicatorIndex!=t&&void 0!==t||(r.push(i.ySeries[n].indicatorIndex),i.ySeries.splice(n,1),--n);if(r.length)if(0===i.ySeries.length)void 0!==i.overlay&&$(i.overlay.canvas).remove(),this.chart.areas.splice(e,1)[0].dispose(),--e;else i.title&&(i.title="",$.each(i.ySeries,(function(t,e){if("TA_LIB"===e.kind){var r=Object.keys(e.params).map((function(t){return e.params[t]}));i.title+=(i.title?", ":"")+e.name+(r.length?"("+r.join(",")+")":"")}})))}this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}},iChart.Charting.TA.prototype.findArea=function(t){if(void 0!==this.chart&&!$.isEmptyObject(this.chart.areas))for(var e=0;e<this.chart.areas.length;++e){var i=this.chart.areas[e];if(i.name==t)return i}return!1},iChart.Charting.TA.prototype.TRPLN=function(e,i){if(e){var r=$("<canvas>").get(0),n=iChart.getContext(r),a=n.createLinearGradient(0,0,80,0);a.addColorStop(1,"#016D06"),a.addColorStop(.5,"#FF9B08"),a.addColorStop(0,"#FF1608"),n.fillStyle=a,n.fillRect(0,0,80,1);for(var s=n.getImageData(0,0,80,1),o=[],h=0;h<s.data.length;h+=4){var l="rgb("+s.data[h]+","+s.data[h+1]+","+s.data[h+2]+")";o.push(l)}var c=this.getData(),u=2,d=Array(80);for(h=0;h<80;h++){d[h]=TA.SMA.justifyCalculate(0,c.length-1,c,{TimePeriod:u},1);var p=$.extend(!0,{},t);p.name="TRPLN"+(h<79?"_"+h:""),p.indicatorIndex=i,p.color=o[h],p.width=1;for(var f=0;f<d[h].length;f++)p.points.push([0===d[h][f]?null:d[h][f]]);this.chart.areas[0].ySeries.push(p),u+=u<100?2:3}$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"TRPLN",params:null,data:d}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(i)},iChart.Charting.TA.prototype.createSeries=function(e,i){var r=[];i=i||0;for(var n=0;n<this.chart.env.viewData.indicators[e].output;n++){r[n]=$.extend(!0,{},t),r[n].indicatorIndex=i;var a=i%(this.chart.chartOptions.indicatorColors.length-1),s=this.chart.chartOptions.indicatorColors[a][n];this.chart.env.userSettings.chartSettings.indicatorsColor[e]&&this.chart.env.userSettings.chartSettings.indicatorsColor[e][i]&&this.chart.env.userSettings.chartSettings.indicatorsColor[e][i][n]&&(s=this.chart.env.userSettings.chartSettings.indicatorsColor[e][i][n]);var o=2;this.chart.env.userSettings.chartSettings.indicatorsWidth[e]&&this.chart.env.userSettings.chartSettings.indicatorsWidth[e][i]&&this.chart.env.userSettings.chartSettings.indicatorsWidth[e][i][n]&&(o=this.chart.env.userSettings.chartSettings.indicatorsWidth[e][i][n]),r[n].color=s,r[n].width=o,r[n].name=e}return r},iChart.Charting.TA.prototype.getLabels=function(t,e,i){var r=[];for(var n in i=i||"",e)r.push(e[n]);r=r.length?"("+r.join(",")+")":"";var a=t.color.replace(/rgba\((.+),[^,]+\)/,"rgb($1)"),s=$("<span/>",{class:"m-chart-legend-color"}).css({"background-color":a}).html("&nbsp;");return s=s.add($("<span/>",{class:"m-chart-legend-name"}).css({color:a}).text(t.name+r+i)),[[0,$("<div/>").append(s).html(),t.name+r+i]]},iChart.Charting.TA.prototype.BBANDS=function(t,e,i){if(t){i=i||this.getDefaultParams("BBANDS");var r=this.getData(),n=TA.BBANDS.justifyCalculate(0,r.length-1,r,i),a=this.createSeries("BBANDS",e);a[0].labels=this.getLabels(a[0],i," Upper"),a[0].params=i;for(var s=0;s<n.UpperBand.length;s++)a[0].points.push([0===n.UpperBand[s]?null:n.UpperBand[s]]);this.chart.areas[0].ySeries.push(a[0]),a[1].labels=this.getLabels(a[1],i," Middle"),a[1].params=i;for(s=0;s<n.MiddleBand.length;s++)a[1].points.push([0===n.MiddleBand[s]?null:n.MiddleBand[s]]);this.chart.areas[0].ySeries.push(a[1]),a[2].labels=this.getLabels(a[2],i," Lower"),a[2].params=i;for(s=0;s<n.LowerBand.length;s++)a[2].points.push([0===n.LowerBand[s]?null:n.LowerBand[s]]);this.chart.areas[0].ySeries.push(a[2]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"BBANDS",params:i,data:n}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.AD=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_AD";i=i||this.getDefaultParams("AD");var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="AD",n.onClose=function(){this.chart.clearIndicators(this)};var a=this.createSeries("AD",e);a[0].labels=this.getLabels(a[0],i);for(var s=this.getData(),o=TA.AD.justifyCalculate(0,s.length-1,s),h=0;h<o.length;h++)a[0].points.push([0===o[h]?null:o[h]]);n.ySeries.push(a[0]),this.chart.areas.push(n);for(var l=0;l<this.chart.areas.length;++l)this.chart.areas[l].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"AD",params:i,data:o}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.ADOSC=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_ADOSC";if(i=i||this.getDefaultParams("ADOSC"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"ADOSC"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("ADOSC",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i);for(var o=this.getData(),h=TA.ADOSC.justifyCalculate(0,o.length-1,o,i),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"ADOSC",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.ADX=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_ADX";if(i=i||this.getDefaultParams("ADX"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"ADX"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("ADX",e);s[0].labels=this.getLabels(s[0],i);for(var o=this.getData(),h=TA.ADX.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"ADX",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.ADXDI=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_ADXDI";if(i=i||this.getDefaultParams("ADXDI"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"ADXDI"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("ADXDI",e);s[0].params=i,s[0].chartArea=n.name,s[0].labels=this.getLabels(s[0],i);var o={},h=this.getData();o.ADX=TA.ADX.justifyCalculate(0,h.length-1,h,i,1);for(var l=0;l<o.ADX.length;l++)s[0].points.push([0===o.ADX[l]?null:o.ADX[l]]);n.ySeries.push(s[0]),s[1].name="ADXDI",s[1].params=i,s[1].chartArea=n.name,s[1].labels=this.getLabels(s[1],i," +DI");h=this.getData();o.PLUS_DI=TA.PLUS_DI.justifyCalculate(0,h.length-1,h,i,1);for(l=0;l<o.PLUS_DI.length;l++)s[1].points.push([0===o.PLUS_DI[l]?null:o.PLUS_DI[l]]);n.ySeries.push(s[1]),s[2].name="ADXDI",s[2].params=i,s[2].chartArea=n.name,s[2].labels=this.getLabels(s[2],i," -DI");h=this.getData();o.MINUS_DI=TA.MINUS_DI.justifyCalculate(0,h.length-1,h,i,1);for(l=0;l<o.MINUS_DI.length;l++)s[2].points.push([0===o.MINUS_DI[l]?null:o.MINUS_DI[l]]);n.ySeries.push(s[2]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"ADXDI",params:i,data:o}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.AROON=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_AROON";if(i=i||this.getDefaultParams("AROON"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"AROON"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.getData(),o=TA.AROON.justifyCalculate(0,s.length-1,s,i),h=this.createSeries("AROON",e);h[0].chartArea=n.name,h[0].params=i,h[0].labels=this.getLabels(h[0],i," Down");for(var l=0;l<o.AroonDown.length;l++)h[0].points.push([0===o.AroonDown[l]?null:o.AroonDown[l]]);n.ySeries.push(h[0]),h[1].chartArea=n.name,h[1].params=i,h[1].labels=this.getLabels(h[1],i," Up");for(l=0;l<o.AroonUp.length;l++)h[1].points.push([0===o.AroonUp[l]?null:o.AroonUp[l]]);n.ySeries.push(h[1]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"AROON",params:i,data:o}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.ATR=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_ATR";if(i=i||this.getDefaultParams("ATR"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"ATR"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("ATR",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i);for(var o=this.getData(),h=TA.ATR.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"ATR",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.CCI=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_CCI";if(i=i||this.getDefaultParams("CCI"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"CCI"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("CCI",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i);for(var o=this.getData(),h=TA.CCI.justifyCalculate(0,o.length-1,o,i),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"CCI",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.CHV=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_CHV";if(i=i||this.getDefaultParams("CHV"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"CHV"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("CHV",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i);for(var o=this.getData(),h=TA.CHV.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"CHV",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.DPO=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_DPO";if(i=i||this.getDefaultParams("DPO"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"DPO"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("DPO",e);s[0].labels=this.getLabels(s[0],i);for(var o=this.getData(),h=TA.DPO.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"DPO",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.EMA=function(t,e,i){if(t){i=i||this.getDefaultParams("EMA");var r=this.createSeries("EMA",e);r[0].params=i,r[0].labels=this.getLabels(r[0],i);for(var n=this.getData(),a=TA.EMA.justifyCalculate(0,n.length-1,n,i),s=0;s<a.length;s++)r[0].points.push([0===a[s]?null:a[s]]);this.chart.areas[0].ySeries.push(r[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"EMA",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.ENV=function(t,e,i){if(t){i=i||this.getDefaultParams("ENV");var r=this.getData(),n=TA.ENV.justifyCalculate(0,r.length-1,r,i,1),a=this.createSeries("ENV",e);a[0].params=i,a[0].labels=this.getLabels(a[1],i," Upper");for(var s=0;s<n.Upper.length;s++)a[0].points.push([0===n.Upper[s]?null:n.Upper[s]]);this.chart.areas[0].ySeries.push(a[0]),a[1].labels=this.getLabels(a[0],i," Lower");for(s=0;s<n.Lower.length;s++)a[1].points.push([0===n.Lower[s]?null:n.Lower[s]]);this.chart.areas[0].ySeries.push(a[1]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"ENV",params:i,data:n}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.MACD=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_MACD";i=i||this.getDefaultParams("MACD");var n=this.getData(),a=TA.MACD.justifyCalculate(0,n.length-1,n,i),s=new iChart.Charting.ChartArea({chart:this.chart});s.axisX.showLabels=!1,s.enabled=!0,s.xSeries=this.chart.areas[0].xSeries,s.ySeries=[],s.name=r,s.title="";var o=Object.keys(i).map((function(t){return i[t]}));s.title+=(s.title?", ":"")+"MACD"+(o.length?"("+o.join(",")+")":""),s.onClose=function(){this.chart.clearIndicators(this)};var h=this.createSeries("MACD",e);h[0].params=i,h[0].indicatorIndex=e,h[0].labels=this.getLabels(h[0],i);for(var l=0;l<a.MACD.length;l++)h[0].points.push([0===a.MACD[l]?null:a.MACD[l]]);s.ySeries.push(h[0]),h[1].params=i,h[1].indicatorIndex=e,h[1].labels=this.getLabels(h[1],i);for(l=0;l<a.MACDSignal.length;l++)h[1].points.push([0===a.MACDSignal[l]?null:a.MACDSignal[l]]);s.ySeries.push(h[1]),h[2].params=i,h[2].indicatorIndex=e,h[2].chartType="Column",h[2].labels=this.getLabels(h[2],i);for(l=0;l<a.MACDHist.length;l++)h[2].points.push([0===a.MACDHist[l]?null:a.MACDHist[l]]);s.ySeries.push(h[2]),this.chart.areas.push(s);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"MACD",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.MEDPRICE=function(t,e,i){if(t){i=i||this.getDefaultParams("MEDPRICE");var r=this.createSeries("MEDPRICE",e);r[0].params=i,r[0].labels=this.getLabels(r[0],i);for(var n=this.getData(),a=TA.MEDPRICE.justifyCalculate(0,n.length-1,n,i),s=0;s<a.length;s++)r[0].points.push([0===a[s]?null:a[s]]);this.chart.areas[0].ySeries.push(r[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"MEDPRICE",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.MFI=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_MFI";if(i=i||this.getDefaultParams("MFI"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"MFI"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("MFI",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i);for(var o=this.getData(),h=TA.MFI.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"MFI",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.OBV=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_OBV";i=i||this.getDefaultParams("OBV");var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n);var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"OBV"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("OBV",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i);for(var o=this.getData(),h=TA.OBV.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"OBV",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.PSAR=function(t,e,i){if(t){i=i||this.getDefaultParams("PSAR");var r=this.createSeries("PSAR",e);r[0].params=i,r[0].labels=this.getLabels(r[0],i),r[0].chartType="Point";for(var n=this.getData(),a=TA.SAR.justifyCalculate(0,n.length-1,n,i),s=0;s<a.length;s++)r[0].points.push([0===a[s]?null:a[s]]);this.chart.areas[0].ySeries.push(r[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"PSAR",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.ROC=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_ROC";if(i=i||this.getDefaultParams("ROC"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"ROC"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("ROC",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i),s[0].chartArea=n.name;for(var o=this.getData(),h=TA.ROC.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"ROC",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.RSI=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_RSI";if(i=i||this.getDefaultParams("RSI"),!(a=this.findArea(r))){var n,a=new iChart.Charting.ChartArea({chart:this.chart});a.axisX.showLabels=!1,a.enabled=!0,a.xSeries=this.chart.areas[0].xSeries,a.ySeries=[],a.name=r,a.title="",a.overlay=new iChart.Charting.ChartAreaLayer(this.chart),(n=a.overlay.createElement("HorizontalLine")).points=[{x:$.now(),y:30}],n.hasSettings=!0,n.setSettings({drawLabel:!1,strokeStyle:"#ff5555",lineWidth:1}),a.overlay.history.push(n),(n=a.overlay.createElement("HorizontalLine")).points=[{x:$.now(),y:70}],n.hasSettings=!0,n.setSettings({drawLabel:!1,strokeStyle:"#ff5555",lineWidth:1}),a.overlay.history.push(n),this.chart.areas.push(a)}var s=Object.keys(i).map((function(t){return i[t]}));a.title+=(a.title?", ":"")+"RSI"+(s.length?"("+s.join(",")+")":""),a.onClose=function(){this.chart.clearIndicators(this)};var o=this.createSeries("RSI",e);o[0].params=i,o[0].labels=this.getLabels(o[0],i);for(var h=this.getData(),l=TA.RSI.justifyCalculate(0,h.length-1,h,i),c=0;c<l.length;c++)o[0].points.push([0===l[c]?null:l[c]]);a.ySeries.push(o[0]);for(var u=0;u<this.chart.areas.length;++u)this.chart.areas[u].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"RSI",params:i,data:l}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.SMA=function(t,e,i){if(t){i=i||this.getDefaultParams("SMA");var r=this.createSeries("SMA",e);r[0].params=i,r[0].labels=this.getLabels(r[0],i);for(var n=this.getData(),a=TA.SMA.justifyCalculate(0,n.length-1,n,i,1),s=0;s<a.length;s++)r[0].points.push([0===a[s]?null:a[s]]);this.chart.areas[0].ySeries.push(r[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"SMA",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.STDDEV=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_STDDEV";if(i=i||this.getDefaultParams("STDDEV"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"STDDEV"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("STDDEV",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i),s[0].chartArea=n.name;for(var o=this.getData(),h=TA.STDDEV.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"STDDEV",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.TEMA=function(t,e,i){if(t){i=i||this.getDefaultParams("TEMA");var r=this.createSeries("TEMA",e);r[0].params=i,r[0].labels=this.getLabels(r[0],i);for(var n=this.getData(),a=TA.TEMA.justifyCalculate(0,n.length-1,n,i,1),s=0;s<a.length;s++)r[0].points.push([0===a[s]?null:a[s]]);this.chart.areas[0].ySeries.push(r[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"TEMA",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.TRIMA=function(t,e,i){if(t){i=i||this.getDefaultParams("TRIMA");var r=this.createSeries("TRIMA",e);r[0].params=i,r[0].labels=this.getLabels(r[0],i);for(var n=this.getData(),a=TA.TRIMA.justifyCalculate(0,n.length-1,n,i),s=0;s<a.length;s++)r[0].points.push([0===a[s]?null:a[s]]);this.chart.areas[0].ySeries.push(r[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"TRIMA",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.TYPPRICE=function(t,e,i){if(t){i=i||this.getDefaultParams("TYPPRICE");var r=this.createSeries("TYPPRICE",e);r[0].params=i,r[0].labels=this.getLabels(r[0],i);for(var n=this.getData(),a=TA.TYPPRICE.justifyCalculate(0,n.length-1,n,i),s=0;s<a.length;s++)r[0].points.push([0===a[s]?null:a[s]]);this.chart.areas[0].ySeries.push(r[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"TYPPRICE",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.VPT=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_VPT";i=i||this.getDefaultParams("VPT");var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n);var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"VPT"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("VPT",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i),s[0].indicatorIndex=e;for(var o=this.getData(),h=TA.VPT.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"VPT",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.WCLPRICE=function(t,e,i){if(t){i=i||this.getDefaultParams("WCLPRICE");var r=this.createSeries("WCLPRICE",e);r[0].params=i,r[0].labels=this.getLabels(r[0],i);for(var n=this.getData(),a=TA.WCLPRICE.justifyCalculate(0,n.length-1,n,i),s=0;s<a.length;s++)r[0].points.push([0===a[s]?null:a[s]]);this.chart.areas[0].ySeries.push(r[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"WCLPRICE",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.WILLR=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_WILLR";if(i=i||this.getDefaultParams("WILLR"),!(n=this.findArea(r))){var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="",this.chart.areas.push(n)}var a=Object.keys(i).map((function(t){return i[t]}));n.title+=(n.title?", ":"")+"WILLR"+(a.length?"("+a.join(",")+")":""),n.onClose=function(){this.chart.clearIndicators(this)};var s=this.createSeries("WILLR",e);s[0].params=i,s[0].labels=this.getLabels(s[0],i),s[0].indicatorIndex=e;for(var o=this.getData(),h=TA.WILLR.justifyCalculate(0,o.length-1,o,i,1),l=0;l<h.length;l++)s[0].points.push([0===h[l]?null:h[l]]);n.ySeries.push(s[0]);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"WILLR",params:i,data:h}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.WMA=function(t,e,i){if(t){i=i||this.getDefaultParams("WMA");var r=this.createSeries("WMA",e);r[0].params=i,r[0].labels=this.getLabels(r[0],i);for(var n=this.getData(),a=TA.WMA.justifyCalculate(0,n.length-1,n,i,1),s=0;s<a.length;s++)r[0].points.push([0===a[s]?null:a[s]]);this.chart.areas[0].ySeries.push(r[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"WMA",params:i,data:a}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.STOCH=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_STOCH";i=i||this.getDefaultParams("STOCH");var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="STOCH",n.overlay=new iChart.Charting.ChartAreaLayer(this.chart),n.onClose=function(){this.chart.clearIndicators(this)};var a,s=this.getData(),o=TA.STOCH.justifyCalculate(0,s.length-1,s,i),h=this.createSeries("STOCH",e);h[0].params=i,h[0].indicatorIndex=e,h[0].labels=this.getLabels(h[0],i,"K");for(var l=0;l<o.slowK.length;l++)h[0].points.push([0===o.slowK[l]?null:o.slowK[l]]);n.ySeries.push(h[0]),h[1].params=i,h[1].indicatorIndex=e,h[1].labels=this.getLabels(h[1],i,"D");for(l=0;l<o.slowD.length;l++)h[1].points.push([0===o.slowD[l]?null:o.slowD[l]]);n.ySeries.push(h[1]),(a=n.overlay.createElement("HorizontalLine")).points=[{x:$.now(),y:20}],a.hasSettings=!0,a.setSettings({drawLabel:!1,strokeStyle:"#ff5555",lineWidth:1}),n.overlay.history.push(a),(a=n.overlay.createElement("HorizontalLine")).points=[{x:$.now(),y:80}],a.hasSettings=!0,a.setSettings({drawLabel:!1,strokeStyle:"#ff5555",lineWidth:1}),n.overlay.history.push(a),this.chart.areas.push(n);for(var c=0;c<this.chart.areas.length;++c)this.chart.areas[c].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"STOCH",params:i,data:o}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.ELDR=function(t,e,i){if(t){var r="ChartAreaI_"+e+"_ELDR";i=i||this.getDefaultParams("ELDR");var n=new iChart.Charting.ChartArea({chart:this.chart});n.axisX.showLabels=!1,n.enabled=!0,n.xSeries=this.chart.areas[0].xSeries,n.ySeries=[],n.name=r,n.title="ELDR",n.onClose=function(){this.chart.clearIndicators(this)};var a=this.getData(),s=TA.ELDR.justifyCalculate(0,a.length-1,a,i),o=this.createSeries("ELDR",e);o[0].params=i,o[0].indicatorIndex=e,o[0].chartType="Column",o[0].labels=this.getLabels(o[0],i);for(var h=0;h<s.ELDR.length;h++)o[0].points.push([0===s.ELDR[h]?null:s.ELDR[h]]);n.ySeries.push(o[0]),o[1].params=i,o[1].indicatorIndex=e,o[1].name="Signal",o[1].labels=this.getLabels(o[1],i);for(h=0;h<s.Signal.length;h++)o[1].points.push([0===s.Signal[h]?null:s.Signal[h]]);n.ySeries.push(o[1]),o[2].params=i,o[2].indicatorIndex=e,o[2].name="Smooth",o[2].labels=this.getLabels(o[2],{p:2});for(h=0;h<s.Smooth.length;h++)o[2].points.push([0===s.Smooth[h]?null:s.Smooth[h]]);n.ySeries.push(o[2]),o[3].params=i,o[3].indicatorIndex=e,o[3].name="EMA",o[3].labels=this.getLabels(o[3],i);for(h=0;h<s.EMA.length;h++)o[3].points.push([0===s.EMA[h]?null:s.EMA[h]]);this.chart.areas[0].ySeries.push(o[3]),this.chart.areas.push(n);for(var l=0;l<this.chart.areas.length;++l)this.chart.areas[l].setMinMax();$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"ELDR",params:i,data:s}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.ZLEMA=function(t,e,i){if(t){i=i||this.getDefaultParams("ZLEMA");var r=this.getData(),n=TA.ZLEMA.justifyCalculate(0,r.length-1,r,i),a=this.createSeries("ZLEMA",e);a[0].labels=this.getLabels(a[0],i),a[0].params=i;for(var s=0;s<n.length;s++)a[0].points.push([0===n[s]?null:n[s]]);this.chart.areas[0].ySeries.push(a[0]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"ZLEMA",params:i,data:n}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)},iChart.Charting.TA.prototype.PCH=function(t,e,i){if(t){i=i||this.getDefaultParams("PCH");var r=this.getData(),n=TA.PCH.justifyCalculate(0,r.length-1,r,i),a=this.createSeries("PCH",e);a[0].labels=this.getLabels(a[0],i," Lower"),a[0].params=i;for(var s=0;s<n.low.length;s++)a[0].points.push([0===n.low[s]?null:n.low[s]]);this.chart.areas[0].ySeries.push(a[0]),a[1].labels=this.getLabels(a[1],i," Upper"),a[1].params=i;for(s=0;s<n.high.length;s++)a[1].points.push([0===n.high[s]?null:n.high[s]]);this.chart.areas[0].ySeries.push(a[1]),$(this.chart.env.container).trigger("iguanaChartEvents",["indicatorDataReady",{name:"PCH",params:i,data:n}]),this.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}else this.removeIndicator(e)}}()},function(t,e){iChart.Charting.TA.prototype.analyseResistSupport=function(t,e){t=t||8,e=e||0;var i=(i=this.getData()).slice(0,i.length-e),r=[],n=[],a=[];try{a=TA.RSI.justifyCalculate(0,i.length-1,i,{TimePeriod:t})}catch(t){console.log(t)}$.each(i,(function(t,e){r.push(e[TA.LOW]),n.push(e[TA.HIGH])}));var s,o={p_1:!1,p_2:!1,p_3:!1,p_4:!1};function h(t,e,i,r,n,a,s,o){for(var h=[],l=[],c=[],u=[],d=i.length-1;d>=0;d--)u.push(i[d]);i=u;for(d=0;d<i.length;d++)c.push(i[d][TA.LOW]),l.push(i[d][TA.HIGH]),h.push(r[r.length-1-d]);var p,f,g,v,m,y=-1,C=-1,x=!1,T=!1,S=!1;switch(f=1e8,g=0,3!=a?1==o?(T=!0,s>=0&&(t+=s)):(x=!0,s>=0&&(e-=s)):0==o?(T=!0,s>=0&&(e-=s)):(x=!0,s>=0&&(t+=s)),a){case 2:C=n.p_1;break;case 3:C=n.p_2;break;case 4:C=n.p_3}for(d=C;d<i.length&&(p=h[d],v=l[d],m=c[d],1!=S||!(1==T&&p>=e||1==x&&p<=t));d++)1==T?p<=t&&(0==S&&(S=!0),m<f&&(f=m,y=d)):p>=e&&(0==S&&(S=!0),v>=g&&(g=v,y=d));return y}function l(t,e){for(var i=0,r=e[0].x;r<=Math.min(e[1].x,t.length-1);r++){var n=iChart.getThirdPoint({x:e[0].x,y:e[0].y},{x:e[1].x,y:e[1].y},r);i=Math.max(i,Math.abs(n.y-(t[r][TA.OPEN]+t[r][TA.CLOSE])/2))}return i}function c(t,e,i,r,n){for(var a="d"+(r=r||"d"),s={},o={},h=[],c=!1,u=l(t,e),d=t.length-1;d>=e[0].x;d--){o={index:d,time:t[d][TA.FULLTIME],h:t[d][TA.HIGH],l:t[d][TA.LOW],o:t[d][TA.OPEN],c:t[d][TA.CLOSE],av1:(t[d][TA.OPEN]+t[d][TA.CLOSE])/2,av2:(t[d][TA.HIGH]+t[d][TA.LOW])/2};var p=iChart.getThirdPoint({x:e[0].x,y:e[0].y},{x:e[1].x,y:e[1].y},d);if(o.dh=Math.abs(p.y-o.h),o.dl=Math.abs(p.y-o.l),o.do=Math.abs(p.y-o.o),o.dc=Math.abs(p.y-o.c),o.dav1=Math.abs(p.y-o.av1),o.dav2=Math.abs(p.y-o.av2),d==e[2].x||d==e[3].x)h.push(o),s=$.extend({},o),c=!0,d--;else{if($.isEmptyObject(s)){s=$.extend({},o),o[a]/u<n&&(h.push(o),c=!0);continue}o[a]>s[a]&&!c&&s[a]/u<n&&(h.push(s),c=!0),"support"==i?o[a]<s[a]&&c&&Math.abs(h[h.length-1][r]-s[r])/u>.15&&(c=!1):"resist"==i&&o[a]>s[a]&&c&&Math.abs(h[h.length-1][r]-s[r])/u>.15&&(c=!1),s=$.extend({},o)}}if("support"==i)for(d=0;d<h.length;d++)(void 0!==t[h[d].index-1]&&Math.abs(t[h[d].index-1][TA.HIGH]-h[d].l)/u<.005||void 0!==t[h[d].index+1]&&Math.abs(t[h[d].index+1][TA.HIGH]-h[d].l)/u<.005)&&(h.splice(d,1),--d);else if("resist"==i)for(d=0;d<h.length;d++)(void 0!==t[h[d].index-1]&&Math.abs(t[h[d].index-1][TA.HIGH]-h[d].l)/u<.005||void 0!==t[h[d].index+1]&&Math.abs(t[h[d].index+1][TA.HIGH]-h[d].l)/u<.005)&&(h.splice(d,1),--d);return h}if(o.p_1=function(t,e,i,r,n){for(var a=[],s=[],o=[],h=i.length-1;h>=0;h--)o.push(i[h][TA.LOW]),s.push(i[h][TA.HIGH]),a.push(r[h]);var l=-1,c=!1,u=!0,d=!0,p=1e8,f=0;for(h=0;h<i.length;h++){var g=a[h],v=s[h],m=o[h];if(0==c){if(g<=t||g>=e)continue;c=!0}if(g<t){if(1!=d)break;1==u&&(u=!1,n>=0&&(e-=n)),m<p&&(p=m,l=h)}if(g>e){if(1!=u)break;1==d&&(d=!1,n>=0&&(t+=n)),v>f&&(f=v,l=h)}}return l}(35,65,i,a,13),o.p_1<0?(console.log("analyseResistSupport: В истории недостаточно баров для анализа 1"),0):(o.p_1>0&&(s=function(t,e,i){for(var r=[],n=e.length-1;n>=0;n--)void 0!==e[n]&&r.push(e[n]);return!(r[t.p_1]<=i)}(o,a,35)),o.p_2=h(35,65,i,a,o,2,13,s),o.p_2<0?(console.log("analyseResistSupport: В истории недостаточно баров для анализа 2"),0):(o.p_3=h(35,65,i,a,o,3,13,s),o.p_3<0?(console.log("analyseResistSupport: В истории недостаточно баров для анализа 3"),0):(o.p_4=h(35,65,i,a,o,4,13,s),!(o.p_4<0)||(console.log("analyseResistSupport: В истории недостаточно баров для анализа 4"),0))))){var u=[];s?(u[0]=[i[i.length-1-o.p_1][TA.FULLTIME],i[i.length-1-o.p_1][TA.HIGH],i.length-1-o.p_1],u[1]=[i[i.length-1-o.p_2][TA.FULLTIME],i[i.length-1-o.p_2][TA.LOW],i.length-1-o.p_2],u[2]=[i[i.length-1-o.p_3][TA.FULLTIME],i[i.length-1-o.p_3][TA.HIGH],i.length-1-o.p_3],u[3]=[i[i.length-1-o.p_4][TA.FULLTIME],i[i.length-1-o.p_4][TA.LOW],i.length-1-o.p_4]):(u[0]=[i[i.length-1-o.p_1][TA.FULLTIME],i[i.length-1-o.p_1][TA.LOW],i.length-1-o.p_1],u[1]=[i[i.length-1-o.p_2][TA.FULLTIME],i[i.length-1-o.p_2][TA.HIGH],i.length-1-o.p_2],u[2]=[i[i.length-1-o.p_3][TA.FULLTIME],i[i.length-1-o.p_3][TA.LOW],i.length-1-o.p_3],u[3]=[i[i.length-1-o.p_4][TA.FULLTIME],i[i.length-1-o.p_4][TA.HIGH],i.length-1-o.p_4]);var d=iChart.getIntersection({x:u[0][2],y:u[0][1]},{x:u[2][2],y:u[2][1]},{x:u[1][2],y:u[1][1]},{x:u[3][2],y:u[3][1]}),p=u[3][2]-(u[0][2]-u[3][2]);p=Math.max(p,0);var f=u[0][2]+(u[0][2]-u[3][2]);f=Math.min(f,this.chart.areas[0].xSeries.length-1);var g=0,v=this.chart.areas[0].xSeries.length-1;d.x<u[3][2]&&(g=d.x),d.x>u[0][2]&&(v=d.x),p=Math.floor(Math.max(p,g)),f=Math.ceil(Math.min(f,v,this.chart.areas[0].xSeries.length-1,g?i.length+15:i.length+30));var m=!1,y=[],C=!1,x=[];if(s){for(var T=u[3][2];T>=p;T--){var S=iChart.getThirdPoint({x:u[1][2],y:u[1][1]},{x:u[3][2],y:u[3][1]},T);Math.max(i[T][TA.OPEN],i[T][TA.CLOSE])<S.y&&(m=!0),m||(S.time=i[T][TA.FULLTIME],y[0]=S);var w=iChart.getThirdPoint({x:u[0][2],y:u[0][1]},{x:u[2][2],y:u[2][1]},T);C||(w.time=i[T][TA.FULLTIME],x[0]=w),Math.min(i[T][TA.OPEN],i[T][TA.CLOSE])>w.y&&(C=!0)}y[1]=iChart.getThirdPoint({x:u[1][2],y:u[1][1]},{x:u[3][2],y:u[3][1]},f),y[1].time=1e3*this.chart.areas[0].xSeries[f],y[2]={x:u[1][2],y:u[1][1],time:u[1][0]},y[3]={x:u[3][2],y:u[3][1],time:u[3][0]},x[1]=iChart.getThirdPoint({x:u[0][2],y:u[0][1]},{x:u[2][2],y:u[2][1]},f),x[1].time=1e3*this.chart.areas[0].xSeries[f],x[2]={x:u[0][2],y:u[0][1],time:u[0][0]},x[3]={x:u[2][2],y:u[2][1],time:u[2][0]}}else{for(T=u[3][2];T>=p;T--){S=iChart.getThirdPoint({x:u[0][2],y:u[0][1]},{x:u[2][2],y:u[2][1]},T);m||(S.time=i[T][TA.FULLTIME],y[0]=S),(Math.max(i[T][TA.OPEN],i[T][TA.CLOSE])<S.y||S.y<0)&&(m=!0);w=iChart.getThirdPoint({x:u[1][2],y:u[1][1]},{x:u[3][2],y:u[3][1]},T);Math.min(i[T][TA.OPEN],i[T][TA.CLOSE])>w.y&&(C=!0),C||(w.time=i[T][TA.FULLTIME],x[0]=w)}y[1]=iChart.getThirdPoint({x:u[0][2],y:u[0][1]},{x:u[2][2],y:u[2][1]},f),y[1].time=1e3*this.chart.areas[0].xSeries[f],y[2]={x:u[0][2],y:u[0][1],time:u[0][0]},y[3]={x:u[2][2],y:u[2][1],time:u[2][0]},x[1]=iChart.getThirdPoint({x:u[1][2],y:u[1][1]},{x:u[3][2],y:u[3][1]},f),x[1].time=1e3*this.chart.areas[0].xSeries[f],x[2]={x:u[1][2],y:u[1][1],time:u[1][0]},x[3]={x:u[3][2],y:u[3][1],time:u[3][0]}}l(i,y),l(i,x);return{extremeSupports:c(i,y,"support","l",.05),extremeResist:c(i,x,"resist","h",.05),supportPoints:y,resistPoints:x,points:u,lastPoint:{x:i.length-1,y:i[i.length-1][TA.CLOSE],time:i[i.length-1][TA.FULLTIME]}}}return!1},iChart.Charting.TA.prototype.autoResistSupport=function(t,e){t=!!t;var i=this.analyseResistSupport(8,e);if(i){this.clearResistSupport();if(i.extremeSupports.length>2||t)(a=this.chart.overlay.createElement("Line")).points=[{x:i.supportPoints[0].time,y:i.supportPoints[0].y},{x:i.supportPoints[1].time,y:i.supportPoints[1].y}],a.drawType="auto",a.storageEnable=!1,a.controlEnable=!1,a.id="SR_analyzer",this.chart.overlay.history.push(a);if(i.extremeResist.length>2||t)(a=this.chart.overlay.createElement("Line")).points=[{x:i.resistPoints[0].time,y:i.resistPoints[0].y},{x:i.resistPoints[1].time,y:i.resistPoints[1].y}],a.drawType="auto",a.storageEnable=!1,a.controlEnable=!1,a.id="SR_analyzer",this.chart.overlay.history.push(a);if(this.analyser(i),t){var r=(r=this.getData()).slice(0,r.length-e);(a=this.chart.overlay.createElement("Event")).hasSettings=!0,a.drawType="auto",a.settings={color:"blue",size:5,shape:"triangle"},a.id="SR_analyzer",a.points=[{x:i.lastPoint.time,y:i.lastPoint.y}],this.chart.overlay.history.push(a),(a=this.chart.overlay.createElement("Polygon")).points=[{x:i.points[2][0],y:i.points[2][1]},{x:i.points[0][0],y:i.points[0][1]},{x:i.points[1][0],y:i.points[1][1]},{x:i.points[3][0],y:i.points[3][1]}],a.storageEnable=!1,a.drawType="auto",a.id="SR_analyzer",this.chart.overlay.history.push(a);for(var n=0;n<i.extremeSupports.length;n++){(a=this.chart.overlay.createElement("Trade")).hasSettings=!0,a.settings={type_id:1,qb:"",mode:1,date_time:"",summ:i.extremeSupports[n].dl/i.extremeSupports[n].l*100},a.points=[{x:i.extremeSupports[n].time,y:i.extremeSupports[n].l}],a.id="SR_analyzer",this.chart.overlay.history.push(a)}for(n=0;n<i.extremeResist.length;n++){var a;(a=this.chart.overlay.createElement("Trade")).hasSettings=!0,a.drawType="auto",a.settings={type_id:0,qb:"",mode:1,date_time:"",summ:i.extremeResist[n].dh/i.extremeResist[n].h*100},a.points=[{x:i.extremeResist[n].time,y:i.extremeResist[n].h}],a.id="SR_analyzer",this.chart.overlay.history.push(a)}}this.chart.overlay.render()}},iChart.Charting.TA.prototype.clearResistSupport=function(){for(var t=this.chart.overlay.history,e=0;e<t.length;e++){"SR_analyzer"==t[e].id&&(t.splice(e,1),e--)}this.chart.overlay.render()},iChart.Charting.TA.prototype.testInPast=function(t){this.clearResistSupport(),this.autoResistSupport(1,t)},iChart.Charting.TA.prototype.analyser=function(t,e){e=e||0;var i=iChart.getLineEquation(t.resistPoints[0],t.resistPoints[1],t.lastPoint.x),r=iChart.getLineEquation(t.supportPoints[0],t.supportPoints[1],t.lastPoint.x),n=Math.abs(i.y-r.y),a=(i.y-t.lastPoint.y)/n*100,s=(t.lastPoint.y-r.y)/n*100;return Math.abs(a)<10?e?2:1:Math.abs(s)<10&&(e?1:2)},iChart.Charting.TA.prototype.analyserSearch=function(t,e){for(var i=0,r=0,n=0,a=0,s=0,o=t=t||this.chart.areas[0].xSeries.length-100;o>0;o--){var h=this.analyseResistSupport(8,o);if(h){var l=this.analyser(h,e);if(l){r||(r=l);var c=this.chart.overlay.createElement("Event");c.hasSettings=!0,c.drawType="auto",c.setSettings({color:1==l?"#f742d0":"#085fff",size:5,shape:"triangle",dataRS:h,pointFormatter:function(){},onHover:function(){(e=this.layer.chart.overlay.createElement("Line")).points=[{x:this.settings.dataRS.resistPoints[0].time,y:this.settings.dataRS.resistPoints[0].y},{x:this.settings.dataRS.resistPoints[1].time,y:this.settings.dataRS.resistPoints[1].y}],e.drawType="auto",e.storageEnable=!1,e.controlEnable=!1,e.id="SR_view",this.layer.chart.overlay.history.push(e),(e=this.layer.chart.overlay.createElement("Line")).points=[{x:this.settings.dataRS.supportPoints[0].time,y:this.settings.dataRS.supportPoints[0].y},{x:this.settings.dataRS.supportPoints[1].time,y:this.settings.dataRS.supportPoints[1].y}],e.drawType="auto",e.storageEnable=!1,e.controlEnable=!1,e.id="SR_view",this.layer.chart.overlay.history.push(e);for(var t=0;t<this.settings.dataRS.extremeSupports.length;t++){(e=this.layer.chart.overlay.createElement("Trade")).hasSettings=!0,e.settings={type_id:1,qb:"",mode:1,date_time:"",summ:this.settings.dataRS.extremeSupports[t].dl/this.settings.dataRS.extremeSupports[t].l*100},e.points=[{x:this.settings.dataRS.extremeSupports[t].time,y:this.settings.dataRS.extremeSupports[t].l}],e.id="SR_view",this.layer.chart.overlay.history.push(e)}for(t=0;t<this.settings.dataRS.extremeResist.length;t++){var e;(e=this.layer.chart.overlay.createElement("Trade")).hasSettings=!0,e.drawType="auto",e.settings={type_id:0,qb:"",mode:1,date_time:"",summ:this.settings.dataRS.extremeResist[t].dh/this.settings.dataRS.extremeResist[t].h*100},e.points=[{x:this.settings.dataRS.extremeResist[t].time,y:this.settings.dataRS.extremeResist[t].h}],e.id="SR_view",this.layer.chart.overlay.history.push(e)}},onOut:function(){for(var t=this.layer.chart.overlay.history,e=0;e<t.length;e++){"SR_view"==t[e].id&&(t.splice(e,1),e--)}this.layer.chart.overlay.render()}}),c.id="SR_analyserSearch",c.points=[{x:h.lastPoint.time,y:h.lastPoint.y}],this.chart.overlay.history.push(c),i!=l&&(1==l?a+=h.lastPoint.y:a-=h.lastPoint.y,console.log(l,h.lastPoint,a),s=h.lastPoint.y,i=l,n=l),this.chart.overlay.render()}}}r==n&&(1==r?a-=s:a+=s),console.log("Profit: ",a)}},function(t,e,i){"use strict";i.r(e);var r;i(187),i(132),i(569),i(570),i(571),i(572),i(573),i(574),i(575),i(576),i(577),i(578),i(579),i(580),i(581),i(582),i(583),i(584),i(585),i(586),i(587),i(588),i(589),i(590),i(591),i(592),i(593),i(594),i(595),i(596),i(597),i(598),i(599),i(600),i(601),i(602),i(603),i(604),i(605),i(606),i(607),i(608),i(609),i(610),i(611),i(612),i(613),i(614),i(615),i(616),i(617),i(618);$.fn.hammer=function(t){return this.each((function(){!function(t,e){var i=$(t);i.data("hammer")||i.data("hammer",new Hammer(i[0],e))}(this,t)}))},Hammer.Manager.prototype.emit=(r=Hammer.Manager.prototype.emit,function(t,e){r.call(this,t,e),$(this.element).trigger({type:t,gesture:e})}),iChart.Charting.ChartTouches=function(t){this.chart=t,this.$container=$(t.container);var e=this;this.$container.hammer({recognizers:[[Hammer.Pan],[Hammer.Pinch,{enable:!0}]]}).on("pinchstart pinchmove pinchend panstart panmove panend",(function(t){if("touch"===t.gesture.pointerType&&e.chart.areas){var i=e.chart.areas[0],r=e.$container.offset();switch(t.type){case"panstart":var n=t.gesture.pointers[0].pageX-t.gesture.deltaX-r.left;e.startTouchIndexes.push(i.getXIndex(n)),e.lastGesture=t.gesture,void 0===e.chart.selection.data&&(e.chart.selection.data={}),e.chart.selection.data.timeStampLast=t.timeStamp,e.chart.selection.data.timeStamp=t.timeStamp,e.chart.selection.data.x1=n,e.chart.selection.data.xPrev=n,e.chart.selection.data.x=n,iChart.animateId&&cancelAnimationFrame(iChart.animateId),e.chart.selection.setAnchor(i.viewport.x.min,i.viewport.y.min);break;case"panend":e.startTouchIndexes=[],e.lastGesture=null,e.chart.chartOptions.inertialScrolling&&e.chart.env.scrollTo(e.chart.selection.data);break;case"panmove":var a=t.gesture.pointers[0].pageX-r.left;null===e.chart.viewport.x.min&&(e.chart.viewport.x.min=i.viewport.x.min),null===e.chart.viewport.x.max&&(e.chart.viewport.x.max=i.viewport.x.max),e.chart.viewport.areaName=i.name,e.chart.selection.data.xPrev=e.chart.selection.data.x,e.chart.selection.data.x=a,e.chart.selection.data.x2=a,e.chart.selection.data.timeStampLast=e.chart.selection.data.timeStamp,e.chart.selection.data.timeStamp=t.timeStamp,e.chart.selection.data.xSpeed=Math.abs(e.chart.selection.data.xPrev-a)/(e.chart.selection.data.timeStamp-e.chart.selection.data.timeStampLast);var s=t.gesture.deltaX-e.lastGesture.deltaX;s=i.getXIndex(s)-i.getXIndex(0),e.chart.viewport.x.max-e.chart.viewport.x.min-s>1&&(e.chart.viewport.x.min+=-s),e.chart.viewport.x.max-s-e.chart.viewport.x.min>1&&(e.chart.viewport.x.max+=-s),e.chart._fixViewportBounds(),e.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0}),e.chart.loadMissingData();var o=t.gesture.deltaY-e.lastGesture.deltaY;window.scroll(0,window.pageYOffset-o),e.lastGesture=t.gesture;break;case"pinchstart":e.disabled=!1,$.each(t.gesture.pointers,(function(t,n){var a=n.pageX-r.left;e.startTouchIndexes.push(i.getXIndex(a))}));break;case"pinchend":e.startTouchIndexes=[];break;case"pinchmove":if(e.disabled)return;var h=e.startTouchIndexes.indexOf(Math.min.apply(null,e.startTouchIndexes)),l=e.startTouchIndexes.indexOf(Math.max.apply(null,e.startTouchIndexes)),c=t.gesture.pointers[h].pageX-r.left,u=t.gesture.pointers[l].pageX-r.left;null===e.chart.viewport.x.min&&(e.chart.viewport.x.min=i.viewport.x.bounded.min),null===e.chart.viewport.x.max&&(e.chart.viewport.x.max=i.viewport.x.bounded.max);var d=e.startTouchIndexes[h]-c*(e.startTouchIndexes[l]-e.startTouchIndexes[h])/(u-c),p=e.startTouchIndexes[l]+(i.innerWidth-u)*(e.startTouchIndexes[l]-e.startTouchIndexes[h])/(u-c),f=p-d;e.chart.chartOptions.maxZoom>0&&f>=e.chart.chartOptions.maxZoom&&(e.chart.viewport.x.min=d,e.chart.viewport.x.max=p,e.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0}),e.chart.loadMissingData())}}}))},iChart.Charting.ChartTouches.prototype.disabled=!1,iChart.Charting.ChartTouches.prototype.startTouchIndexes=[],iChart.Charting.ChartTouches.prototype.lastGesture=null;i(619),i(620),i(621),i(622),i(623),i(624),i(625),i(626),i(627),i(628),i(629),i(630),i(631),i(632),i(633),i(634),i(635),i(636),i(637),i(638),i(639),i(640),i(641),i(642),i(643),i(644),i(645),i(646),i(647),i(648),i(649),i(650),i(651),i(652),i(653),i(654),i(655),i(656),i(657),i(658),i(659),i(660),i(661),i(662);function n(t){if(!(t instanceof a))throw new Error("StrategiesList was expected");this.strategiesList=t}function a(){this.items=[]}function s(t,e){if(!t)throw new Error("Name is required");this.name=t,this.icons=e}n.prototype.render=function(){const t=document.createElement("div"),e=document.createElement("h4");return t.classList.add("js-chartTADialogContainerStrategies"),e.innerText=_t("","Выбор стратегии"),t.appendChild(e),t.appendChild(this.strategiesList.render()),t},a.prototype.addItem=function(t){if(!(t instanceof s))throw new Error("StrategiesListItem was expected");return this.items.push(t),this},a.prototype.addItems=function(t){return t.forEach(t=>this.addItem(t)),this},a.prototype.renderAddItem=function(){const t=document.createElement("li"),e=document.createElement("span"),i=document.createElement("i");return e.innerText=_t("","Добавить стратегию"),i.classList.add("uk-icon-plus","uk-margin-left"),t.appendChild(e),t.appendChild(i),t},a.prototype.render=function(){const t=document.createElement("ul");return t.classList.add("uk-list","uk-list-line"),this.items.forEach(e=>t.appendChild(e.render())),this.items.length<10&&t.appendChild(this.renderAddItem()),t},s.prototype.renderIcon=function(t,e){const i=document.createElement("i");return i.title=t,i.classList.add(...e),i},s.prototype.render=function(){const t=document.createElement("li"),e=document.createElement("span");return t.appendChild(e),"default"===this.name?e.innerText=_t("","По умолчанию"):(e.innerText=this.name,t.appendChild(this.renderIcon(_t("","Переименовать"),["uk-icon-pencil","uk-margin-left"])),t.appendChild(this.renderIcon(_t("","Удалить"),["uk-icon-remove","uk-margin-left"]))),t},window.IguanaChart=function(t){const e={indicators:{indicatorsContainer:"block",strategiesContainer:"none",addIndicatorButton:"block",strategyButton:_t("","Выбрать стратегию")},strategies:{indicatorsContainer:"none",strategiesContainer:"block",addIndicatorButton:"none",strategyButton:_t("","Вернуться к выбору индикаторов")}};var i=this;this.state={currentModal:"indicators",currentStrategy:"default",strategies:[]},this.name=t.name||"chart",this.container=t.container||"#iChart-chart-container",this.wrapper=t.wrapper,this.lib_path=t.lib_path||"/iguanachart/",this.toQueryString=function(t){var e=[];for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(void 0===r||""===r)continue;if($.isArray(r))for(var n=0;n<r.length;++n)e.push(encodeURIComponent(i)+"="+encodeURIComponent(r[n]));else e.push(encodeURIComponent(i)+"="+encodeURIComponent(r))}return e.join("&")},this.dataSource=new iChart.Charting.ChartDataSource(this,t.dataSource),this.userSettings={chartSettings:{contextSettings:{fillStyle:"rgba(82,175,201,.2)",strokeStyle:"rgba(82,175,201,1)",lineWidth:1,fontFamaly:"Arial,Helvetica,sans-serif",fontColor:"#444444",fontSize:"14"},indicatorsColor:{},indicatorsWidth:{},showTransactionsMode:0,tradingToolsEnable:1,autochartistEnable:0,showVolume:"inside",showVolumeByPrice:!1,defaultTheme:1},currentSecurity:{id:"",short_name:"",default_ticker:"",nt_ticker:"",firstDate:"",currency:"",min_step:""}},this.viewData={},this.viewData.indicators=iChart.indicators,this.timers={},this.ajaxDataRequest=null,this.orders={},this.userTransactionAmount=-1,this.updateUnlocked=!0,this.initChart=function(t){if(this.uiGraphIndicatorsWindow2={element:$(".js-chartTADialog."+this.name,this.wrapper)},this.loadHash(),"object"!=typeof t&&(t={}),this.settings={},this.settings.paddingBottom=void 0!==t.paddingBottom?t.paddingBottom:50,void 0===this.viewData.chart){var e={onPostRender:function(){var t=new Date(1e3*this.areas[0].xSeries[this.areas[0].viewport.x.bounded.min]),e=new Date(1e3*this.areas[0].xSeries[this.areas[0].viewport.x.bounded.max]);i.checkDateInterval(t,e),$("#chartLoading").remove(),i.wrapper.trigger("iguanaChartEvents",["RenderChartSuccess"])},onCreateAreas:this.chart_onCreateAreas,onDataSettingsChange:this.chart_onDataSettingsChange,onIntervalChange:this.chart_onIntervalChange,contextmenuCallback:t.contextmenuCallback,container:$(this.container).get(0),dataSettings:this.getChartDataUserSettings(),widget:t.widget,env:this};e=$.extend(!0,e,t),this.ui=new iChart.ui(this),this.viewData.chart=new iChart.Charting.Chart(e),this.TA=new iChart.Charting.TA({chart:this.viewData.chart}),this.viewData.chart.setDataSettings(this.dataSource.dataSettings),this.ui=new iChart.ui(this),this.dataRequestCounter=0}else this.viewData.chart.chartOptions=$.extend(!0,this.viewData.chart.chartOptions,t),this.viewData.chart.overlay.deserialize(iChart.parseQueryString((this.dataSource.dataSettings.hash||"#").substr(1))),this.viewData.chart.setDataSettings(this.getChartDataUserSettings()),this.dataRequestCounter=0;this.dataSource.dataSettings.strategies&&(this.state.strategies=this.dataSource.dataSettings.strategies),this.ui.render(),$(window).off("mousemove").on("mousemove",(function(t){$(window).data("mousePosX",t.pageX),$(window).data("mousePosY",t.pageY)}))},this.chart_dataAdapter=function(t,e){var i={d:{xSeries:[],ySeries:[],success:!0,warnings:[],message:""}},r={chartType:"Column",enabled:!0,formatProvider:{decimalPlaces:"2",decimalPrecision:null},indicatorIndex:null,indicatorIndex2:null,kind:"HLOC",name:e.id,overlay:!1,points:[],valuesPerPoint:4},n={chartType:"Column",enabled:!0,formatProvider:{decimalPlaces:null,decimalPrecision:null},indicatorIndex:null,indicatorIndex2:null,kind:"Volume",name:e.id+" - V",overlay:!1,points:[],valuesPerPoint:1};if(t.hloc){var a=Object.keys(t.hloc);if(1===a.length){i.d.ySeries[0]=$.extend(!0,{},r),i.d.ySeries[1]=$.extend(!0,{},n),i.d.ySeries[0].name=a[0];for(var s=0;s<t.xSeries[a[0]].length;s++)i.d.xSeries.push(+t.xSeries[a[0]][s]+getTimeOffsetServer(tzOffsetMoscow)),i.d.ySeries[0].points.push(t.hloc[a[0]][s]),i.d.ySeries[1].points.push([t.vl[a[0]][s]])}else if(a.length>1){for(var o={},h=0;h<a.length;h++)for(s=0;s<t.xSeries[a[h]].length;s++)void 0===o[t.xSeries[a[h]][s]]&&(o[t.xSeries[a[h]][s]]={}),o[t.xSeries[a[h]][s]][a[h]]=t.hloc[a[h]][s];for(h=0;h<a.length;h++)i.d.ySeries[h]=$.extend(!0,{},r),i.d.ySeries[h].name=a[h];for(var l in o){i.d.xSeries.push(+l+getTimeOffsetServer(tzOffsetMoscow));for(h=0;h<a.length;h++)void 0===o[l][a[h]]?i.d.ySeries[h].points.push([null,null,null,null]):i.d.ySeries[h].points.push(o[l][a[h]])}}}return i},this.chart_onCreateAreas=function(){},this.chart_onDataSettingsChange=function(t){var e=i.dataSource.dataSettings.useHash?document.location.hash:i.dataSource.dataSettings.hash||"#",r=iChart.parseQueryString(e.substr(1)),n=i.getDrawParams(r);delete i.viewData.chart._dataSettings.hash;var a="#"+iChart.toQueryString($.extend(i.viewData.chart._dataSettings,n));i.viewData.hash=a,i.dataSource.dataSettings.useHash?document.location.hash!==a&&(document.location.hash=a,$(this.container).trigger("iguanaChartEvents",["hashChanged",a])):i.dataSource.dataSettings.hash!==a&&(i.dataSource.dataSettings.hash=a,$(this.container).trigger("iguanaChartEvents",["hashChanged",a]))},this.getDrawParams=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(i.match(/^L$/)||i.match(/^L[0-9]{1,2}_/))&&(e[i]=t[i]);return e},this.chart_onIntervalChange=function(t){i.viewData.chart&&i.viewData.chart.updateVolumeByPrice()},this.toggleVolumeByPrice_onClick=function(){if(this.viewData.chart.chartOptions.showVolumeByPrice=!this.viewData.chart.chartOptions.showVolumeByPrice,this.viewData.chart&&this.viewData.chart.areas){var t=$.grep(this.viewData.chart.areas,(function(t){return"ChartArea2"===t.name}))[0];t&&(this.viewData.chart.updateVolumeByPrice(),t.enabled=this.viewData.chart.chartOptions.showVolumeByPrice),this.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}},this.VolumeByPrice_onClick=function(t){(i.viewData.chart.chartOptions.showVolumeByPrice=void 0!==t?t:!i.viewData.chart.chartOptions.showVolumeByPrice,i.viewData.chart&&i.viewData.chart.areas)&&($.grep(i.viewData.chart.areas,(function(t){return"VolumeByPriceArea"===t.name}))[0]&&i.viewData.chart.updateVolumeByPrice(),i.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1}))},this.VolumeByDate_onClick=function(t){if(i.viewData.chart.chartOptions.showVolume=!0===t||!1===t?t?"inside":"hidden":"inside"===t||"outside"===t?t:"inside"===i.viewData.chart.chartOptions.showVolume||"outside"===i.viewData.chart.chartOptions.showVolume?"hidden":"inside",i.viewData.chart&&i.viewData.chart.areas){var e=$.grep(i.viewData.chart.areas,(function(t){return"ChartArea2"===t.name}))[0];e&&(e.enabled="inside"===i.viewData.chart.chartOptions.showVolume||"outside"===i.viewData.chart.chartOptions.showVolume),i.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}},this.apply_onClick=function(){i.update()},this.chartType_onChange=function(){var t=$(this).val();i.viewData.chart&&(i.viewData.chart.setChartType(t),i.chartType_elementControl(t)),i.setHashValue("type",t),i.viewData.chart.setChartType(t)},this.chartType_elementControl=function(t){$("div.chartType").removeClass("active"),$("div.chartType div.isMenu").hide(),$('div[value="'+t+'"]').addClass("active"),$('div[value="'+t+'"] div.isMenu').show()},this.clearIndicators_onClick=function(){for(var t=0;t<30;++t)$("[name='i"+t+"']").val("").trigger("change"),i.updateIndicatorDetails("i"+t,!1);i.viewData.chart&&i.viewData.chart.clearIndicators()},this.getChartDataUserSettings=function(){var t={};return t.id=this.dataSource.dataSettings.id,t.date_from=this.dataSource.dataSettings.date_from,t.date_to=this.dataSource.dataSettings.date_to,t.start=this.dataSource.dataSettings.date_from,t.end=this.dataSource.dataSettings.date_to,t.interval=this.dataSource.dataSettings.interval,t.timeframe=iChart.getChartTimeframe(this.dataSource.dataSettings.interval),t.type=this.dataSource.dataSettings.type,t.compareIds=this.dataSource.dataSettings.compareIds,t.compareTickets=this.dataSource.dataSettings.compareTickets,t.compareStocks=this.dataSource.dataSettings.compareStocks,$.extend(t,iChart.parseQueryString(this.dataSource.dataSettings.graphicIndicators)),t},this.getMinChartHeight=function(){var t=$(this.container);return 0!==t.length?$(window).height()-t.offset().top-(this.settings&&this.settings.paddingBottom?this.settings.paddingBottom:0):$(window).height()},this.indicator_onChange=function(){i.updateIndicatorDetails($(this).attr("name").substr(1),{name:$(this).val()})},this.loadHash=function(t){var e=$("[name=graphicIndicators]").val(),i=this.dataSource.dataSettings.hash||"#"+e||"#&i0=SMA&i0_Period=10&i1=PSAR&i1_Acceleration=0.02&i1_Maximum=0.2",r=iChart.parseQueryString(i.substr(1));if(void 0!==this.viewData.chart){var n=iChart.parseQueryString(localStorage.userSettingsGraphicIndicators);"object"!=typeof n||$.isEmptyObject(n)||$.extend(r,n)}return r},this.pan_onClick=function(){i.viewData.chart&&i.viewData.chart.pan($(this).attr("data-direction"))},this.timeframe_onChange=function(){this.update()},this.removeSelectedInstrument_onClick=function(){return i.viewData.chart.overlay&&i.viewData.chart.overlay.removeSelected(),!1},this.removeAllInstruments_onClick=function(){return i.viewData.chart.overlay&&i.viewData.chart.overlay.clear(),$(".m-chart-instrument-delete, .m-chart-instrument-settings").hide(),!1},this.resetZoom_onClick=function(){i.viewData.chart&&i.viewData.chart.resetZoom()},this.update=function(){var t=this.getChartDataUserSettings();this.dataSource.dataSettings.useHash||this.setHashValues(t),this.viewData.chart&&this.viewData.chart.setDataSettings(t)},this.updateForce=function(){var t=this.getChartDataUserSettings();this.dataSource.dataSettings.useHash||this.setHashValues(t),this.viewData.chart&&this.viewData.chart.setDataSettings(t,!0)},this.updateChart_onClick=function(){this.update()},this.removeIndicator_onClick=function(){$(this).parents(".js-chart-indiacator-block").remove()},this.addIndicator_onClick=function(){if(i.uiGraphIndicatorsWindow2.element.is(":visible")){var t=i.deserializeIndicators(i.uiGraphIndicatorsWindow2.element.find(":input").serialize(),!1);i.updateIndicatorDetails(t.length,"")}},this.createStrategiesContainer=()=>new n((new a).addItems(this.state.strategies.map(({name:t})=>new s(t)))).render(),this.getIndicators=()=>this.deserializeIndicators(this.uiGraphIndicatorsWindow2.element.find(":input").serialize(),!1),this.chooseStrategy_onClick=t=>{console.log(this.viewData);const i=this.uiGraphIndicatorsWindow2.element[0];if(!i)throw new Error("There should be modal");const r=i.querySelector(".js-chartTADialogContainer"),{currentModal:n}=this.state,a=t.target,s=i.querySelector(".js-indicator-add");let o=i.querySelector(".js-chartTADialogContainerStrategies");o||(o=this.createStrategiesContainer(),r.parentNode.insertBefore(o,r.nextSibling));const h="indicators"===n?"strategies":"indicators",l=e[h];r.style.display=l.indicatorsContainer,o.style.display=l.strategiesContainer,s.style.display=l.addIndicatorButton,a.innerText=l.strategyButton,this.state.currentModal=h},this.serializeIndicators=function(t){for(var e="",i=0;i<t.length;i++)if(e+="i"+i+"="+t[i].name+"&",t[i].params)for(var r in t[i].params)t[i].params.hasOwnProperty(r)&&(e+="i"+i+"_"+r+"="+t[i].params[r]+"&");return e},this.deserializeIndicators=function(t,e){e=void 0===e||!!e;var i=iChart.parseQueryString(t),r=[];for(var n in i)if(i.hasOwnProperty(n)&&("fs"===n||n.match(new RegExp("^i[0-9]+","i")))){var a=n.match(new RegExp("^i([0-9])+_","i")),s=n.match(new RegExp("^i([0-9])+$","i"));s?(r[+s[1]]||(r[+s[1]]={}),r[+s[1]].name=i[n]):a&&(r[+a[1]]||(r[+a[1]]={}),r[+a[1]].params||(r[+a[1]].params={}),r[+a[1]].params[n.replace(/i[0-9]+_/i,"")]=+i[n])}return e&&(r=r.filter((function(t){return void 0!==t}))),r},this.updateIndicatorDetails=function(t,e,i){i=!!i;var r=this.uiGraphIndicatorsWindow2.element.find(".js-chartTADialog-i"+t+"-settings");if(!r.length){var n='<option value="">'+_t("14773","Выберите индикатор")+"</option>";for(var a in this.viewData.indicators)this.viewData.indicators.hasOwnProperty(a)&&"TA_LIB"===this.viewData.indicators[a].type&&(n+='<option value="'+a+'" '+(a===e.name?"selected":"")+">"+this.viewData.indicators[a].name+"</option>");var s='<div style="border-bottom: 1px solid rgba(0, 0, 0, 0.12)" class="js-chart-indiacator-block tm-pad-large js-chartTADialog-i'+t+'-settings" id="iChart-i'+t+'-settings"><div class="uk-panel"><div class="uk-flex uk-flex-middle uk-flex-space-between uk-margin-small-bottom"><div class="uk-h4">'+_t("12834","Индикатор")+" "+(t+1)+'</div><div class="js-indicator-remove uk-icon-close uk-panel-hover uk-badge uk-button uk-button-mini"></div></div><div class="uk-form"><select name="i'+t+'" class="indicatorsSelect">'+n+"</select></div></div></div>";this.uiGraphIndicatorsWindow2.element.find(".js-chartTADialogContainer").append(s),r=this.uiGraphIndicatorsWindow2.element.find(".js-chartTADialog-i"+t+"-settings")}$(".iChart-indicator-description, .iChart-indicator-parameters, .iChart-indicator-colors, .iChart-indicator-width",r).remove();var o=this.viewData.indicators[e.name]||{description:"",parameters:[]};$("<div/>",{class:"iChart-indicator-description"}).html(o.description).appendTo(r);for(var h=o.parameters,l=0;l<h.length;++l){var c="i"+t+"_"+h[l].Code,u=$("<div/>",{class:"iChart-indicator-parameters uk-form",text:h[l].Name+": "}).appendTo(r);$("<input/>",{name:c,type:"text",value:h[l].Value}).css({width:"50px"}).appendTo(u)}var d=$("<div/>",{class:"iChart-indicator-colors",id:"iChart-indicator-colors"}).appendTo(r),p=$("<div/>",{class:"iChart-indicator-width",id:"iChart-indicator-width"}).appendTo(r),f=t;if(this.viewData.indicators[e.name])for(var g=0;g<this.viewData.indicators[e.name].output;g++)if(void 0!==this.viewData.chart){var v=this.viewData.chart.chartOptions.indicatorColors[f][g];this.userSettings.chartSettings.indicatorsColor[e.name]&&this.userSettings.chartSettings.indicatorsColor[e.name][f]&&this.userSettings.chartSettings.indicatorsColor[e.name][f][g]&&(v=this.userSettings.chartSettings.indicatorsColor[e.name][f][g]),$("<input/>",{type:"hidden",class:"iChart-indicator-color iChart-indicator-color-"+f+g,id:"iChart-indicator-color-"+f+g,indicator:e.name,colorIndex:f+"-"+g,"ui-pos":f<2?"bottom":"top"}).val(v).appendTo(d),this.initInsrMinicolors($(".iChart-indicator-color-"+f+g));var m=2;this.userSettings.chartSettings.indicatorsWidth[e.name]&&this.userSettings.chartSettings.indicatorsWidth[e.name][f]&&this.userSettings.chartSettings.indicatorsWidth[e.name][f][g]&&(m=this.userSettings.chartSettings.indicatorsWidth[e.name][f][g]);var y=$('<span class="lineWidth indicatorWidthSelector-'+f+g+'" data-chartName="'+this.name+'" data-style="'+m+'"></span>').appendTo(p);$('<div class="indicatorMenuHolder-'+f+g+'" data-chartName="'+this.name+'" style="display: none" widthIndex="'+f+"-"+g+'"><div widthIndex="'+f+"-"+g+'" indicator="'+e.name+'"><span class="lineWidth js-lineWidth '+this.name+'" data-style="1"></span><span class="lineWidth js-lineWidth '+this.name+'" data-style="2"></span><span class="lineWidth js-lineWidth '+this.name+'" data-style="3"></span><span class="lineWidth js-lineWidth '+this.name+'" data-style="4"></span><span class="lineWidth js-lineWidth '+this.name+'" data-style="5"></span><span class="lineWidth js-lineWidth '+this.name+'" data-style="8"></span><span class="lineWidth js-lineWidth '+this.name+'" data-style="10"></span></div></div>').appendTo(p),this.initIndicatorWidthMenu(y,$(".indicatorMenuHolder-"+f+g+"[data-chartName='"+this.name+"']").html())}i&&this.update()},this.setIndicators=function(t){if(window.localStorage.setItem("userSettingsGraphicIndicators",t),this.dataSource.dataSettings.graphicIndicators=t,this.setScheduleUpdateState(0),this.TA.removeIndicator(),void 0!==i.TA){var e=iChart.parseQueryString(this.dataSource.dataSettings.graphicIndicators);$.each(e,(function(t,r){var n={};if(r&&t.match(/^i[0-9]+$/)&&i.viewData.indicators[r]&&"TA_LIB"===i.viewData.indicators[r].type){for(var a=t.match(/^i([0-9]+)$/)[1],s=0;s<i.viewData.indicators[r].parameters.length;s++){var o=i.viewData.indicators[r].parameters[s];n[o.Code]=e[t+"_"+o.Code]}i.TA[r](0,a),i.TA[r](1,a,n)}}))}this.wrapper.trigger("iguanaChartEvents",["hashChanged"]),this.wrapper.trigger("iguanaChartEvents",["indicatorsChanged",this.deserializeIndicators(this.dataSource.dataSettings.graphicIndicators)]),this.timers.updateInterval&&this.setScheduleUpdateState(1,this.timers.updateInterval)},this.showIndicators=function(t){t=t||{},this.timers.updateInterval=this.viewData.chart.chartOptions.updateInterval,this.setScheduleUpdateState(0);var e=this.deserializeIndicators(this.dataSource.dataSettings.graphicIndicators);this.uiGraphIndicatorsWindow2.element.find(".js-chartTADialogContainer").empty();for(var r=0;r<e.length;r++)for(var n in this.updateIndicatorDetails(r,e[r],!1),e[r].params)if(e[r].params.hasOwnProperty(n)){var a="i"+r+"_"+n;this.uiGraphIndicatorsWindow2.element.find("[name='"+a+"']").val(e[r].params[n])}t.forAll||this.uiGraphIndicatorsWindow2.element.find(".indicators-default").hide(),this.uiGraphIndicatorsWindow2.UIkit||($(this.wrapper).find(".js-chartTADialog."+this.name).appendTo("body"),this.uiGraphIndicatorsWindow2=UIkit.modal($(".js-chartTADialog."+this.name))),this.uiGraphIndicatorsWindow2.show(),$(".indicators-set").off("click").on("click",(function(){return window.localStorage.setItem("userSettingsIndicatorsColor",JSON.stringify(i.userSettings.chartSettings.indicatorsColor)),window.localStorage.setItem("userSettingsIndicatorsWidth",JSON.stringify(i.userSettings.chartSettings.indicatorsWidth)),console.log(i.uiGraphIndicatorsWindow2.element.find(":input").serialize()),i.setIndicators(i.uiGraphIndicatorsWindow2.element.find(":input").serialize()),i.uiGraphIndicatorsWindow2.hide(),!1})),$(".indicators-close").off("click").on("click",(function(){return i.uiGraphIndicatorsWindow2.hide(),i.timers.updateInterval&&i.setScheduleUpdateState(1,i.timers.updateInterval),!1}))},this.window_onHashChange=function(){var t;if(void 0!==i&&(t=i.dataSource.dataSettings.useHash?document.location.hash:i.dataSource.dataSettings.hash,decodeURIComponent(t)!==decodeURIComponent(i.viewData.hash))){if(i.loadHash(),i.update(),void 0===i.viewData.chart)return;i.viewData.chart.overlay&&i.viewData.chart.overlay.update()}},this.zoom_onClick=function(){i.viewData.chart&&i.viewData.chart.zoom($(this).attr("data-zoom"))},this.percentMode_onClick=function(){return i.viewData.chart.chartOptions.percentMode?$("#percentMode").removeClass("active"):$("#percentMode").addClass("active"),i.viewData.chart.chartOptions.percentMode=!i.viewData.chart.chartOptions.percentMode,i.updateForce(),i.viewData.chart.chartOptions.percentMode},this.iconsLoad=function(){$(["/i/admin/add.png","/iguanachart/images/buy.png","/iguanachart/images/down.png","/iguanachart/images/icon-exclamation.png","/iguanachart/images/icon-left.png","/iguanachart/images/icon-leftDown.png","/iguanachart/images/icon-leftUp.png","/iguanachart/images/icon-question.png","/iguanachart/images/icon-right.png","/iguanachart/images/icon-rightDown.png","/iguanachart/images/icon-rightUp.png","/iguanachart/images/icon-sell.png","/iguanachart/images/icon-smileDown.png","/iguanachart/images/icon-smileUp.png","/iguanachart/images/icon-up.png","/i/logo_tradernet_min.png"]).preload()},this.drawLables=function(t,e,i,r){i=void 0===i?0:i,r=void 0===r?0:r;var n=$(t).clone();$(n).children("span").remove();var a=$(n).html().split(/ &nbsp; /),s=i,o="";o=a[0].replace(/&nbsp;/g,""),e.font="normal 9px Arial,Helvetica,sans-serif",e.fillStyle="#636669",e.fillText(o,s,r),s+=e.measureText(o).width+10,$(t).children("span:odd").each((function(t,i){o=$(i).text(),e.font="bold 9px Arial,Helvetica,sans-serif",e.fillStyle=$(i).css("color"),e.fillText(o,s,r),s+=e.measureText(o).width,o=a[t+1].replace(/&nbsp;/g,""),e.font="normal 9px Arial,Helvetica,sans-serif",e.fillStyle="#636669",e.fillText(o,s,r),s+=e.measureText(o).width+10}))},this.setMousewheelZoomState=function(t){this.viewData.chart.chartOptions.mousewheelZoom=Boolean(t)},this.setScheduleUpdateState=function(t){this.viewData.chart.chartOptions.updateInterval=Boolean(t),this.viewData.chart.scheduleUpdate()},this.getScrollLength=function(){return this.viewData.chart.viewport.x.min=this.viewData.chart.areas[0].viewport.x.min,this.viewData.chart.viewport.x.max=this.viewData.chart.areas[0].viewport.x.max,this.viewData.chart.viewport.x.max-this.viewData.chart.viewport.x.min},this.scrollBack=function(){var t=this.getScrollLength(),e=this.viewData.chart.viewport.x.min,r=1500+e;$("<p>").animate({width:e},{duration:r,step:function(r,n){i.viewData.chart.viewport.x.min=e-r,i.viewData.chart.viewport.x.max=i.viewData.chart.viewport.x.min+t,i.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0})}})},this.scrollForward=function(){var t=this.getScrollLength(),e=this.viewData.chart.areas[0].xSeries.length-1-this.viewData.chart.chartOptions.futureAmount,r=$("<p>").css({width:this.viewData.chart.viewport.x.max}),n=e-this.viewData.chart.viewport.x.max+1500;r.animate({width:e},{duration:n,step:function(e,r){i.viewData.chart.viewport.x.max=e,i.viewData.chart.viewport.x.min=e-t,i.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0})},complete:function(){i.viewData.chart.onDataSettingsChange.call(i.viewData.chart),i.wrapper.trigger("iguanaChartEvents",["hashChanged"])}})},this.scrollTo=function(t){var e=t.xSpeed;if(e<.05)return!1;var i=1e3+100*e,r=e,n=-r/i,a=this,s=this.viewData.chart.viewport.x.min,o=this.viewData.chart.viewport.x.max;iChart.animate({duration:i,timing:function(t){return t},draw:function(e){if(!isNaN(e)&&e>0){var h=i*e,l=r*h+n*h*h/2,c=a.viewData.chart.areas[0].getXIndexByValue(a.viewData.chart.areas[0].getXValue(a.viewData.chart.areas[0].getXPositionByIndex(0)+l));t.x1>t.x2?(a.viewData.chart.viewport.x.min=s+c,a.viewData.chart.viewport.x.max=o+c):t.x1<t.x2&&(a.viewData.chart.viewport.x.min=s-c,a.viewData.chart.viewport.x.max=o-c),a.viewData.chart._fixViewportBounds(),a.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!0})}},complete:function(){a.viewData.chart.loadMissingData()}})},this.updateLastCandle=function(t){if(t){var e=t;if(void 0!==this.viewData.chart&&this.viewData.chart.areas&&this.viewData.chart.canvas&&this.viewData.chart.chartOptions.updateInterval&&e.ltp){var i=new Date(1e3*this.viewData.chart.areas[0].xSeries[this.viewData.chart.areas[0].xSeries.length-this.viewData.chart.chartOptions.futureAmount-1]),r=new Date(t.ltt);if(r.getTime()>=i.getTime()&&r.getTime()<i.getTime()+6e4*this.viewData.chart._dataSettings.timeframe){(a=this.viewData.chart.areas[0].ySeries[0].points[this.viewData.chart.areas[0].ySeries[0].points.length-this.viewData.chart.chartOptions.futureAmount-1])[3]=e.ltp,a[0]=Math.max(a[0],a[3]),a[1]=Math.min(a[1],a[3]),a[4]=e.bap,a[5]=e.bbp;var n=iChart.getContext(this.viewData.chart.canvas);this.viewData.chart.render({context:n,forceRecalc:!1,resetViewport:!1,testForIntervalChange:!1})}else if(r.getTime()>i.getTime()+6e4*this.viewData.chart._dataSettings.timeframe){var a=this.getLastPoint(),s={hloc:{},vl:{},xSeries:{}},o=[];o[0]=e.ltp,o[1]=e.ltp,o[2]=e.ltp,o[3]=e.ltp,s.hloc[Object.keys(a.xSeries)[0]]=[o],s.vl[Object.keys(a.xSeries)[0]]=[e.vol];var h=(r.getTime()-r.getTime()%(6e4*this.viewData.chart._dataSettings.timeframe))/1e3-getTimeOffsetServer(tzOffsetMoscow);s.xSeries[Object.keys(a.xSeries)[0]]=[h],this.addPoint(s)}}}},this.getLastPoint=function(){if(void 0!==this.viewData.chart&&this.viewData.chart.areas&&this.viewData.chart.canvas){var t=this.viewData.chart.areas[0].ySeries[0].points.length-this.viewData.chart.chartOptions.futureAmount-1,e=this.viewData.chart.areas[0].ySeries[0].name,i={},r={},n={};return n[e]=[this.viewData.chart.areas[0].xSeries[t]],$.each(this.viewData.chart.areas,(function(n,a){$.each(a.ySeries,(function(n,a){$.inArray(a.kind,["HLOC","Volume"])>=0&&("HLOC"==a.kind&&(i[e]=[a.points[t]]),"Volume"==a.kind&&(r[e]=[a.points[t]]))}))})),{hloc:i,vl:r,xSeries:n}}},this.getLastPointX=function(){if(void 0!==this.viewData.chart&&this.viewData.chart.areas&&this.viewData.chart.canvas){var t=this.viewData.chart.areas[0].ySeries[0].points.length-this.viewData.chart.chartOptions.futureAmount-1;return this.viewData.chart.areas[0].xSeries[t]}return!1},this.addTransactions=function(t,e){if(void 0!==this.viewData.chart){t:for(var i=0;i<t.length;i++){for(var r=this.viewData.chart.overlay.history,n=0;n<r.length;n++){if("Trade"==(a=r[n]).elementType&&a.id==t[i].id)continue t}var a;(a=this.viewData.chart.overlay.createElement("Trade")).hasSettings=!0,a.settings=t[i],a.settings.mode=e,a.points=[{x:new Date(t[i].date_time).getTime(),y:t[i].price}],a.id=t[i].id,this.viewData.chart.overlay.history.push(a),this.userTransactionAmount++}this.viewData.chart.overlay.render()}},this.removeTransactions=function(){if(void 0!==this.viewData.chart){for(var t=this.viewData.chart.overlay.history,e=0;e<t.length;e++){"Trade"==t[e].elementType&&(t.splice(e,1),e--)}this.userTransactionAmount=-1,this.viewData.chart.overlay.render()}},this.setButton=function(t){if(void 0!==this.viewData.chart){var e=this.viewData.chart.overlay.createElement("Button");e.hasSettings=!0,e.setSettings(t),e.points=[{x:t.point,y:t.price}],this.viewData.chart.overlay.history.push(e)}},this.updateNewOrderButton=function(){var t=this.viewData.chart.areas[0].getXPositionByIndex(this.viewData.chart.areas[0].xSeries.length-1-this.viewData.chart.chartOptions.futureAmount)+50;t=Math.min(t,this.viewData.chart.areas[0].getXPositionByIndex(this.viewData.chart.areas[0].xSeries.length-1));var e=1e3*this.viewData.chart.areas[0].getXValue(t),r=this.viewData.chart.areas[0].ySeries[0].points[this.viewData.chart.areas[0].ySeries[0].points.length-this.viewData.chart.chartOptions.futureAmount-1],n=this.getNewOrderButton();if(n)n.points[0].x=e,n.points[0].y=r[3];else{this.setButton({point:e,price:r[3],click:function(){var t=i.viewData.chart.areas[0].ySeries[0].points[i.viewData.chart.areas[0].ySeries[0].points.length-i.viewData.chart.chartOptions.futureAmount-1];jNTChartTrading.show(i.userSettings.currentSecurity.nt_ticker,2,iChart.roundToPrecision(t[3],i.userSettings.currentSecurity.min_step),null,null,(function(){i.addVisualTradeUI()})),i.removeNewOrderButton()}})}},this.getNewOrderButton=function(){if(void 0!==this.viewData.chart)for(var t=this.viewData.chart.overlay.history,e=0;e<t.length;e++){var i=t[e];if("Button"==i.elementType)return i}return!1},this.removeNewOrderButton=function(){if(void 0!==this.viewData.chart)for(var t=this.viewData.chart.overlay.history,e=0;e<t.length;e++){"Button"==t[e].elementType&&(t.splice(e,1),e--)}},this.removeLevel=function(){if(void 0!==this.viewData.chart)for(var t=this.viewData.chart.overlay.history,e=0;e<t.length;e++){"Level"==t[e].elementType&&(t.splice(e,1),e--)}},this.addLevel=function(t){if(void 0!==this.viewData.chart){this.removeLevel();var e=this.viewData.chart.overlay.createElement("Level");return e.hasSettings=!0,e.points=[{x:new Date,y:t.price}],e.setSettings(t),this.viewData.chart.overlay.history.push(e),this.viewData.chart.render({forceRecalc:!0,resetViewport:!0,testForIntervalChange:!1}),e}return!1},this.fixViewport=function(){void 0!==this.viewData.chart&&this.viewData.chart.areas&&this.viewData.chart.areas[0].viewport.x.max==this.viewData.chart.areas[0].viewport.x.min&&(this.viewData.chart.viewport.x.max=this.viewData.chart.areas[0].viewport.x.max-this.viewData.chart.chartOptions.futureAmount,this.viewData.chart.viewport.x.min=Math.max(this.viewData.chart.areas[0].viewport.x.max-this.viewData.chart.chartOptions.futureAmount-30,0),this.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1}))},this.switchTrading=function(){this.userSettings.chartSettings.tradingToolsEnable=this.userSettings.chartSettings.tradingToolsEnable?0:1,window.localStorage.setItem("userSettingsTradingToolsEnable",this.userSettings.chartSettings.tradingToolsEnable),$(this.container).trigger("iguanaChartEvents",["chartTradingTools",this.userSettings.chartSettings.tradingToolsEnable])},this.tradingToolsControl=function(){this.userSettings.chartSettings.tradingToolsEnable},this.addEvents=function(t){t=t||[];for(var e=0;e<t.length;e++){var i=this.viewData.chart.overlay.createElement("Event");i.hasSettings=!0;var r=$.extend({},t[e]);i.setSettings(r),i.points=[{x:r.x,y:r.y}],i.id="Event",this.viewData.chart.overlay.history.push(i)}this.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})},this.clearEvents=function(){if(void 0!==this.viewData.chart){for(var t=this.viewData.chart.overlay.history,e=0;e<t.length;e++){"Event"==t[e].elementType&&(t.splice(e,1),e--)}this.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})}},this.checkDateInterval=function(t,e){var i=iChart.formatDateTime(new Date(t),"dd.MM.yyyy HH:mm"),r=iChart.formatDateTime(new Date(e),"dd.MM.yyyy HH:mm");this.dataSource.dataSettings.date_from==i&&this.dataSource.dataSettings.date_to,this.dataSource.dataSettings.date_from=i,this.dataSource.dataSettings.date_to=r,this.dataSource.dataSettings.start=i,this.dataSource.dataSettings.end=r;var n=this.dataSource.dataSettings.interval,a=((new Date).getTime()-t)/864e5,s=new Array;s.push("I1"),s.push("I5"),s.push("I15"),s.push("H1"),s.push("D1"),s.push("D7");var o={};a>93?o={I1:"D1",I5:"D3",I15:"D7",H1:"M1"}:a<93&&a>=32?o={I1:"D1",I5:"D3",I15:"D7"}:a<32&&a>=10?o={I1:"D1",I5:"D3"}:a<10&&a>=3&&(o={I1:"D1"});for(var h=new Array,l=0;l<s.length;l++){var c=intervalNames(s[l])+(void 0!==o[s[l]]?" > "+intervalShortNames(o[s[l]]):"");h.push({text:c,value:s[l],restriction:o[s[l]]})}this.dataSource.dataSettings.interval=n;var u={restriction:o,dataSource:h,value:n,text:intervalNames(n)};return JSON.stringify(this.dataSource.dataSettings.intervalRestriction)!=JSON.stringify(o)&&n==this.dataSource.dataSettings.interval&&(this.dataSource.dataSettings.intervalRestriction=o,$(this.container).trigger("iguanaChartEvents",["intervalRestriction",u])),u},this.checkPeriodInterval=function(t,e){void 0===e&&(e=!0);var i,r=new Date,n=new Date;switch(i=$(t).val()){case"D1":break;case"D7":n.setDate(r.getDate()-7);break;case"M1":n.setMonth(r.getMonth()-1);break;case"M3":n.setMonth(r.getMonth()-3);break;case"M6":n.setMonth(r.getMonth()-6);break;case"Y1":n.setFullYear(r.getFullYear()-1);break;case"Y5":n.setFullYear(r.getFullYear()-5);break;default:n.setMonth(r.getMonth()-3)}if(i)$("#date_to").val(iChart.formatDateTime(r,"dd.MM.yyyy")),$("#date_from").val(iChart.formatDateTime(n,"dd.MM.yyyy"));else{var a=(Date.parse($("#date_to").val())-Date.parse($("#date_from").val()))/1e3;"D1"==$("#interval").val()&&a<86400?$("#date_from").val(iChart.formatDateTime(new Date(Date.parse($("#date_from").val()).getTime()-6048e5),"dd.MM.yyyy")):"D7"==$("#interval").val()&&a<604800&&$("#date_from").val(iChart.formatDateTime(new Date(Date.parse($("#date_from").val()).getTime()-12096e5),"dd.MM.yyyy"))}},this.checkPeriod=function(t){var e=iChart.parseDateTime(this.dataSource.dataSettings.date_to),i=new Date(e),r=t.match(/([D,M,Y])(\d+)/);if(r)switch(r[1]){case"D":i.setDate(e.getDate()-+r[2]);break;case"M":i.setMonth(e.getMonth()-+r[2]);break;case"Y":i.setFullYear(e.getFullYear()-+r[2])}else t="D1";if(t)this.dataSource.dataSettings.date_from=iChart.formatDateTime(i,"dd.MM.yyyy"),this.dataSource.dataSettings.date_to=iChart.formatDateTime(e,"dd.MM.yyyy");else{var n=(iChart.parseDateTime(this.dataSource.dataSettings.date_from).getTime()-iChart.parseDateTime(this.dataSource.dataSettings.date_to).getTime())/1e3;"D1"==this.dataSource.dataSettings.interval&&n<86400?this.dataSource.dataSettings.date_from=iChart.formatDateTime(new Date(iChart.parseDateTime(this.dataSource.dataSettings.date_from).getTime()-6048e5),"dd.MM.yyyy"):"D7"==this.dataSource.dataSettings.interval&&n<604800&&(this.dataSource.dataSettings.date_from=iChart.formatDateTime(new Date(iChart.parseDateTime(this.dataSource.dataSettings.date_from).getTime()-12096e5),"dd.MM.yyyy"))}this.checkDateInterval(iChart.parseDateTime(this.dataSource.dataSettings.date_from),iChart.parseDateTime(this.dataSource.dataSettings.date_to))},this.setInterval=function(t){var e="M1";switch(t){case"I1":e="D1";break;case"I5":e="D3";break;case"I15":e="D7";break;case"H1":e="D14";break;case"D1":e="M6";break;case"D7":e="Y1"}var i=new Date(1e3*this.getLastPointX());i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setDate(i.getDate()+1),this.dataSource.dataSettings.date_to=i,this.dataSource.dataSettings.interval=t,this.dataSource.dataSettings.timeframe=iChart.getChartTimeframe(t),this.checkPeriod(e),this.updateForce()},this.setHashValue=function(t,e){if(0==this.dataSource.dataSettings.useHash)var i=this.dataSource.dataSettings.hash;else i=document.location.hash;var r=iChart.parseQueryString(i.substr(1));r[t]=e;var n="#"+iChart.toQueryString(r);n!==i&&(0==this.dataSource.dataSettings.useHash?this.dataSource.dataSettings.hash=n:document.location.hash=n,$(this.container).trigger("iguanaChartEvents",["hashChanged",n]))},this.setHashValues=function(t){if(0==this.dataSource.dataSettings.useHash)var e=this.dataSource.dataSettings.hash;else e=document.location.hash;var i=iChart.parseQueryString(e.substr(1));for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);var n="#"+iChart.toQueryString(i);n===e||$.isEmptyObject(i)||(0==this.dataSource.dataSettings.useHash?this.dataSource.dataSettings.hash=n:document.location.hash=n,$(this.container).trigger("iguanaChartEvents",["hashChanged",n]))},this.initInsrMinicolors=function(t){var e=t.val();$(t).minicolors({animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:e,hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:t.attr("ui-pos")+" left",show:null,showSpeed:100,theme:"default"}).change((function(){var t=$(this).attr("colorIndex").split("-")[0],e=$(this).attr("colorIndex").split("-")[1],r=$(this).attr("indicator");$.isArray(i.userSettings.chartSettings.indicatorsColor)&&(i.userSettings.chartSettings.indicatorsColor={}),i.userSettings.chartSettings.indicatorsColor[r]||(i.userSettings.chartSettings.indicatorsColor[r]=[]),i.userSettings.chartSettings.indicatorsColor[r][t]||(i.userSettings.chartSettings.indicatorsColor[r][t]=Array(i.viewData.indicators[r].output)),i.userSettings.chartSettings.indicatorsColor[r][t][e]=$(this).val()}))},this.initIndicatorWidthMenu=function(t,e){$(t).qtip({style:{classes:"qtip-light"},position:{at:"left bottom",my:"top left",effect:!1},content:{text:e},hide:{fixed:!0,delay:300,effect:function(){$(this).slideUp(500)}},show:{solo:!0,effect:function(){$(this).slideDown(500)}},events:{show:function(t,e){}}})},this.setIndicatorWidth=function(t){var e=$(t).parent().attr("widthIndex").split("-")[0],i=$(t).parent().attr("widthIndex").split("-")[1],r=$(t).parent().attr("indicator");$.isArray(this.userSettings.chartSettings.indicatorsWidth)&&(this.userSettings.chartSettings.indicatorsWidth={}),this.userSettings.chartSettings.indicatorsWidth[r]||(this.userSettings.chartSettings.indicatorsWidth[r]=[]),this.userSettings.chartSettings.indicatorsWidth[r][e]||(this.userSettings.chartSettings.indicatorsWidth[r][e]=Array(this.viewData.indicators[r].output)),$(".indicatorWidthSelector-"+e+i+"[data-chartName='"+this.name+"']").attr("data-style",$(t).attr("data-style")),this.userSettings.chartSettings.indicatorsWidth[r][e][i]=$(t).attr("data-style")},this.getIndicatorParameters=function(t){var e={};if(void 0!==this.viewData.indicators[t])for(var i=0;i<this.viewData.indicators[t].parameters.length;i++)e[this.viewData.indicators[t].parameters[i].Code]=this.viewData.indicators[t].parameters[i].Value;return e},this.setIndicator=function(t,e,i){if(i=i||0,void 0===this.viewData.indicators[t])throw new Error("Indicator '"+t+"' is not supported.");e=e||this.getIndicatorParameters(t);var r={};for(var n in r["i"+i]=t,e)r["i"+i+"_"+n]=e[n];var a=iChart.parseQueryString(this.dataSource.dataSettings.graphicIndicators);for(var s in a)s.match(new RegExp("^i"+i+"_","i"))&&delete a[s];a["i"+i]="",this.dataSource.dataSettings.graphicIndicators=iChart.toQueryString($.extend({},a,r)),this.updateForce()},this.getPeriodDates=function(t){var e=new Date,i=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setDate(e.getDate()+1),i.setHours(0),i.setMinutes(0),i.setSeconds(0);var r=t.match(/([D,M,Y])(\d+)/);if(r)switch(r[1]){case"D":i.setDate(i.getDate()-+r[2]+1);break;case"M":i.setMonth(i.getMonth()-+r[2]);break;case"Y":i.setFullYear(i.getFullYear()-+r[2])}else i.setMonth(i.getMonth()-3);return{date_from:iChart.formatDateTime(i,"dd.MM.yyyy"),date_to:iChart.formatDateTime(e,"dd.MM.yyyy")}},this.addPoint=function(t){var e=this.dataSource.dataAdapter(t,{});this.viewData.chart._mergeData(e,{}),this.viewData.chart.render({forceRecalc:!0,resetViewport:!1,testForIntervalChange:!1})},this.setStyleToCanvas=function(t,e){var i=this.viewData.chart.overlay.selected;if(null!=i&&i.hasSettings){var r=i.settings;r[e]=t,i.setSettings(r),this.viewData.chart.chartOptions.elementStyle[i.elementType]&&(this.viewData.chart.chartOptions.elementStyle[i.elementType][e]=t)}this.userSettings.chartSettings.contextSettings[e]=t},this.setLineWidthToCanvas=function(t){var e=this.viewData.chart.overlay.selected;null!=e&&e.hasSettings&&(e.settings.lineWidth=t,e.setSettings(e.settings)),this.userSettings.chartSettings.contextSettings.lineWidth=t},"undefined"!=typeof jNTChartTrading&&("undefined"!=typeof jNTUserinfo&&jNTUserinfo.isDemo?"function"==typeof extendIChartWithTrandorders&&extendIChartWithTrandorders.call(this):"function"==typeof extendIChartWithOrders&&extendIChartWithOrders.call(this),"function"==typeof extendIChartWithPositions&&extendIChartWithPositions.call(this),"function"==typeof extendIChartWithTradePanels&&extendIChartWithTradePanels.call(this)),this.setTrendorder=function(t){if(void 0!==this.viewData.chart){var e=this.viewData.chart.overlay.createElement("Trendorder");e.hasSettings=!0,e.setSettings(t),this.viewData.chart.overlay.history.push(e)}},this.drawTrendorder=function(){var t={date:14727987e5,price:142.73127071556314,date2:14727996e5,price2:142.75374359194433,tf:900,fillStyle:"#7cb342",strokeStyle:"#36BDF4",textColor:"#ffffff",text:"Трендовый приказ",mode:"trend",onCancel:function(){console.log(this)}};this.setTrendorder(t),this.viewData.chart.render({forceRecalc:!0,resetViewport:!0,testForIntervalChange:!1})},$(document).on("change",".indicatorsSelect",this.indicator_onChange),$(document).on("click",".js-indicator-remove",this.removeIndicator_onClick),$(document).on("click",".js-indicator-add",this.addIndicator_onClick),$(document).on("click",".js-strategy-choose",this.chooseStrategy_onClick),$(document).on("change","[name='timeframe']",this.timeframe_onChange),$(document).on("click","[name='apply']",this.apply_onClick),$(document).on("click","[name='clearIndicators']",this.clearIndicators_onClick),$(document).on("click","[name='pan']",this.pan_onClick),$(document).on("click",".js-lineWidth."+this.name,(function(){i.setIndicatorWidth(this)})),$(document).on("click","[name='resetZoom']",this.resetZoom_onClick),$(document).on("click","[name='updateChart']",this.updateChart_onClick),$(document).on("click","[name='zoom']",this.zoom_onClick),$(document).on("dblclick",(function(){i.viewData.chart.render({forceRecalc:!0,resetViewport:!0,testForIntervalChange:!1})})),$(i.wrapper).on("iguanaChartEvents",(function(t,e,r){"chartDataReady"===e?i.viewData.chart&&0==i.dataRequestCounter&&(i.viewData.chart.updateVolumeByPrice(),i.ui.initStatesControls()):"selectInstrument"===e?i.ui.onSelectInstrument(r):"drawComplete"===e&&(i.ui.setUiStateForInstrumentLine(null,0),i.ui.setUiStateForInstrumentForm(null,0),i.ui.setUiStateForInstrumentText(null,0))})),$(i.wrapper).on("click",".iChart-indicator-description a",(function(t){return t.stopPropagation(),t.stopImmediatePropagation(),!1})),$(window).on("resize",(function(){i.wrapper.trigger("iguanaChartEvents",["chartResize"])})),$(document).on("click","[name='toggleVolumeByPrice']",this.toggleVolumeByPrice_onClick)}}]);